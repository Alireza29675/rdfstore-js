(function(){typeof console=="undefined"&&(console={log:function(){}});var y={"extends":function(a,c){c.prototype=new a},stackCounterLimit:1E3,stackCounter:0};y.recur=function(a){y.stackCounter===y.stackCounterLimit?(y.stackCounter=0,setTimeout(a,0)):(y.stackCounter++,a())};y.clone=function(a){return JSON.parse(JSON.stringify(a))};y.shuffle=function(a){for(var c,d,g=a.length;g;c=parseInt(Math.random()*g),d=a[--g],a[g]=a[c],a[c]=d);return a};y.include=function(a,c,d){for(var g=a.length-1;g>=0;g--){var k=
!1,k=d==null?a[g]===c:d(a[g],c)===0;if(k===!0)return!0}return!1};y.remove=function(a,c){for(var d=[],g=0;g<a.length;g++)a[g]!==c&&d.push(a[g]);return d};y.repeat=function(a,c,d,g,k){arguments.length===4&&(k={});a<c?(k._i=a,d(function(d,i){y.recur(function(){y.repeat(a+1,c,d,g,i)})},k)):g(k)};y.meanwhile=function(a,c,d,g){arguments.length===3&&(g={});g._stack_counter==null&&(g._stack_counter=0);a===!0?c(function(a,c,g){g._stack_counter%40==39?(g._stack_counter+=1,setTimeout(function(){y.neanwhile(a,
c,d,g)},0)):(g._stack_counter+=1,y.meanwhile(a,c,d,g))},g):d(g)};y.seq=function(){var a=arguments;return function(c){y.repeat(0,a.length,function(c,g){var k=arguments.callee;a[g._i](function(){c(k,g)})},function(){c()})}};y.partition=function(a,c){for(var d=a.length%c,g=[],k=0;k<d;k++)g.push(null);d=[];for(k=0;k<a.length;k++)g.push(a[k]),g.length%c==0&&(d.push(g),g=[]);return d};y.keys=function(a){var c=[],d;for(d in a)c.push(d);return c};y.iso8601=function(a){function c(a){return a<10?"0"+a:a}return a.getUTCFullYear()+
"-"+c(a.getUTCMonth()+1)+"-"+c(a.getUTCDate())+"T"+c(a.getUTCHours())+":"+c(a.getUTCMinutes())+":"+c(a.getUTCSeconds())+"Z"};y.parseStrictISO8601=function(a){var c=a.match(RegExp("([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?")),a=0,d=new Date(c[1],0,1);if(c[3])d.setMonth(c[3]-1);else throw"missing ISO8061 component";if(c[5])d.setDate(c[5]);else throw"missing ISO8061 component";if(c[7])d.setHours(c[7]);else throw"missing ISO8061 component";
if(c[8])d.setMinutes(c[8]);else throw"missing ISO8061 component";if(c[10])d.setSeconds(c[10]);else throw"missing ISO8061 component";c[12]&&d.setMilliseconds(Number("0."+c[12])*1E3);c[14]&&(a=Number(c[16])*60+Number(c[17]),a*=c[15]=="-"?1:-1);a-=d.getTimezoneOffset();c=new Date;c.setTime(Number(Number(d)+a*6E4));return c};y.parseISO8601=function(a){var c=a.match(RegExp("([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?")),a=
0,d=new Date(c[1],0,1);c[3]&&d.setMonth(c[3]-1);c[5]&&d.setDate(c[5]);c[7]&&d.setHours(c[7]);c[8]&&d.setMinutes(c[8]);c[10]&&d.setSeconds(c[10]);c[12]&&d.setMilliseconds(Number("0."+c[12])*1E3);c[14]&&(a=Number(c[16])*60+Number(c[17]),a*=c[15]=="-"?1:-1);a-=d.getTimezoneOffset();c=new Date;c.setTime(Number(Number(d)+a*6E4));return c};y.parseISO8601Components=function(a){var a=a.match(RegExp("([0-9]{4})(-([0-9]{2}))(-([0-9]{2}))(T([0-9]{2}):([0-9]{2})(:([0-9]{2}))?(.([0-9]+))?)?(Z|([-+])([0-9]{2})(:([0-9]{2}))?)?")),
c,d,g,k,j,i,h,t;c=Number(a[1]);d=a[3]-1;g=Number(a[5]);k=Number(a[7]);j=Number(a[8]);i=Number(a[10]);a[12]&&(h=Number("0."+a[12])*1E3);a[13]==="Z"?t=0:a[14]?(t=0,a[17]&&(t=Number(a[17])),t+=Number(a[15])*60,t*=a[14]=="-"?-1:1):a[14]==null&&a[11]&&(t=Number(a[12])*60);return{year:isNaN(c)?null:c,month:isNaN(d)?null:d,date:isNaN(g)?null:g,hours:isNaN(k)?null:k,minutes:isNaN(j)?null:j,seconds:isNaN(i)?null:i,millisecs:isNaN(h)?null:h,timezone:isNaN(t)?null:t}};y.compareDateComponents=function(a,c){var d=
y.parseISO8601Components(a),g=y.parseISO8601Components(c);if(d.timezone==null&&g.timezone==null||d.timezone!=null&&g.timezone!=null)return d=y.parseISO8601(a),g=y.parseISO8601(c),d.getTime()==g.getTime()?0:d.getTime()<g.getTime()?-1:1;else if(d.timezone!=null&&g.timezone==null){var d=y.parseISO8601(a),g=y.parseISO8601(c),d=d.getTime(),g=g.getTime(),k=50400;return d<g&&d<g+k?-1:d>g&&d>g-k?1:null}else return d=y.parseISO8601(a),g=y.parseISO8601(c),d=d.getTime(),g=g.getTime(),k=50400,d<g&&d+k<g?-1:d>
g&&d+k>g?1:null};y.lexicalFormLiteral=function(a,c){var d=a.value,g=a.lang,k=a.type,j=null;if(d!=null&&k!=null&&typeof k!="string"){d=k.value;if(d==null)d=k.suffix,k=c.namespaces[k.prefix],a.type=k+d,d=k+d;j=d.indexOf("hexBinary")!=-1?'"'+a.value.toLowerCase()+'"^^<'+d+">":'"'+a.value+'"^^<'+d+">"}else j=g==null&&k==null?'"'+d+'"':k==null?'"'+d+'"@'+g:k.indexOf("hexBinary")!=-1?'"'+a.value.toLowerCase()+'"^^<'+k+">":'"'+a.value+'"^^<'+k+">";return j};y.lexicalFormBaseUri=function(a,c){var d=null;
if(a.value==null)var d=a.prefix,g=a.suffix,k=c.namespaces[d],d=k!=null?k+g:d+":"+g;else d=a.value;if(d===null)return null;else d.indexOf(":")==-1&&(d=(c.base||"")+d);return d};y.lexicalFormTerm=function(a,c){if(a.token==="uri")return{uri:y.lexicalFormBaseUri(a,c)};else if(a.token==="literal")return{literal:y.lexicalFormLiteral(a,c)};else if(a.token==="blank")return{blank:"_:"+a.value};else throw"Error, cannot get lexical form of unknown token: "+a.token;};y.normalizeUnicodeLiterals=function(a){for(var c=
a.match(/\\u[0-9abcdefABCDEF]{4,4}/g)||[],d={},g=0;g<c.length;g++)d[c[g]]==null&&(d[c[g]]=!0,a=a.replace(RegExp("\\"+c[g],"g"),eval("'"+c[g]+"'")));return a};y.hashTerm=function(a){try{if(a==null)return"";if(a.token==="uri")return"u"+a.value;else if(a.token==="blank")return"b"+a.value;else if(a.token==="literal"){var c="l"+a.value;c+=a.type||"";c+=a.lang||"";return c}}catch(d){if(typeof a==="object"){c="";for(p in a)c=c+p+a[p];return c}return a}};var ra={PriorityQueue:function(a){var c=[],d={},g=
!1,k,j=a.maxSize||10;k=function(a,c){return d[c].priority-d[a].priority};var i=function(){c.sort(k);g=!0};return{debugContents:c,debugStore:d,debugSort:i,push:function(a,k){if(c.length===j){g||i();if(d[a]==null){delete d[c[0]];c[0]=a;var h=d[c[c.length-1]].priority-1;d[a]={object:k,priority:h}}else h=d[c[c.length-1]].priority-1,d[a].priority=h;g=!1}else c.length===0?(c.push(a),d[a]={object:k,priority:1E3}):(h=d[c[c.length-1]].priority-1,d[a]==null?(d[a]={object:k,priority:h},c.push(a)):(d[a].priority=
h,g=!1))},remove:function(a){if(d[a]!=null){delete d[a];for(var j=null,g=0;g<c.length;g++)if(c[g]===a){j=g;break}j!=null&&c.splice(j,1)}},fetch:function(a){var j=d[a];return d[a]!=null?(g||i(),d[a].priority=d[c[c.length-1]].priority-1,g=!1,j.object):null}}}},C={};C.Tree=function(a,c,d,g){if(arguments.length!=0){var k=null;if(d===!0)try{if(k=window.localStorage,k==null)throw"not found";}catch(j){throw"Local storage is not present, cannot create persistent storage";}k==null&&(k=function(){var a={};
return{setItem:function(c,d){a[c]=d},getItem:function(c){return a[c]||null},removeItem:function(c){delete a[c]},get:function(c){var d=0,j;for(j in a){if(c===d)return j;d++}return""},length:a.length}}());this.storage=k;this.order=a;this.name=c;this.diskManager=new C.LocalStorageManager(c,k,g);this.root=this.diskManager._readRootNode();this.root==null?(this.root=this._allocateNode(),this.root.isLeaf=!0,this.root.level=0,this._diskWrite(this.root),this._updateRootNode(this.root),this.root=this.root.pointer):
this.root=this.diskManager._diskRead(this.root).pointer;this.comparator=function(a,c){return a<c?-1:a>c?1:0};this.merger=null}};C.Tree.prototype._allocateNode=function(){return new C.Node};C.Tree.prototype._diskWrite=function(a){this.diskManager._diskWrite(a)};C.Tree.prototype._diskRead=function(a){return this.diskManager._diskRead(a)};C.Tree.prototype._diskDelete=function(a){this.diskManager._diskDelete(a)};C.Tree.prototype._updateRootNode=function(a){this.diskManager._updateRootNode(a);return a};
C.Tree.prototype.search=function(a,c){for(var d=!0,g=this._diskRead(this.root);d;){for(var k=0;k<g.numberActives&&this.comparator(a,g.keys[k].key)===1;)k++;if(k<g.numberActives&&this.comparator(g.keys[k].key,a)===0)return c!=null&&c==!0?!0:g.keys[k].data;else g.isLeaf===!0?d=!1:g=this._diskRead(g.children[k])}return null};C.Tree.prototype.walk=function(a){this._walk(a,this._diskRead(this.root))};C.Tree.prototype._walk=function(a,c){if(c.isLeaf)for(var d=0;d<c.numberActives;d++)a(c.keys[d]);else{for(d=
0;d<c.numberActives;d++)this._walk(a,this._diskRead(c.children[d])),a(c.keys[d]);this._walk(a,this._diskRead(c.children[c.numberActives]))}};C.Tree.prototype.walkNodes=function(a){this._walkNodes(a,this._diskRead(this.root))};C.Tree.prototype._walkNodes=function(a,c){if(c.isLeaf)a(c);else{a(c);for(var d=0;d<c.numberActives;d++)this._walkNodes(a,this._diskRead(c.children[d]));this._walkNodes(a,this._diskRead(c.children[c.numberActives]))}};C.Tree.prototype._splitChild=function(a,c,d){var g=this._allocateNode();
g.isLeaf=d.isLeaf;g.level=d.level;g.numberActives=this.order-1;var k=d.keys[this.order-1];d.keys[this.order-1]=null;for(var j=0;j<this.order-1;j++)g.keys[j]=d.keys[j+this.order],d.keys[j+this.order]=null,d.isLeaf||(g.children[j]=d.children[j+this.order],d.children[j+this.order]=null);d.isLeaf||(g.children[j]=d.children[j+this.order],d.children[j+this.order]=null);d.numberActives=this.order-1;for(j=a.numberActives+1;j>c+1;j--)a.children[j]=a.children[j-1];this._diskWrite(g);a.children[c+1]=g.pointer;
for(j=a.numberActives;j>c;j--)a.keys[j]=a.keys[j-1];a.keys[c]=k;a.numberActives++;this._diskWrite(a);this._diskWrite(d)};C.Tree.prototype.insert=function(a,c){var d=this._diskRead(this.root);if(d.numberActives===2*this.order-1){var g=this._allocateNode();g.isLeaf=!1;g.level=d.level+1;g.numberActives=0;g.children[0]=d.pointer;this._diskWrite(g);this._splitChild(g,0,d);this.root=g.pointer;this._updateRootNode(g);this._insertNonFull(g,a,c)}else this._insertNonFull(d,a,c)};C.Tree.prototype._insertNonFull=
function(a,c,d){for(var g=a.numberActives-1;!a.isLeaf;){for(;g>=0&&this.comparator(c,a.keys[g].key)===-1;)g--;g++;var k=this._diskRead(a.children[g]);k.numberActives===2*this.order-1&&(this._splitChild(a,g,k),this.comparator(c,a.keys[g].key)===1&&g++);a=this._diskRead(a.children[g]);g=a.numberActives-1}for(;g>=0&&this.comparator(c,a.keys[g].key)===-1;)a.keys[g+1]=a.keys[g],g--;a.keys[g+1]={key:c,data:d};a.numberActives++;this._diskWrite(a)};C.Tree.prototype["delete"]=function(a){for(var c=this._diskRead(this.root),
d=null,g=!0,k=null,j=null,i=null,h=!0;h===!0;){for(h=!1;g===!0;){q=0;if(c.numberActives===0)return!1;for(;q<c.numberActives&&this.comparator(a,c.keys[q].key)===1;)q++;k=q;q<c.numberActives&&this.comparator(a,c.keys[q].key)===0&&(g=!1);if(g===!0){if(c.isLeaf===!0)return!1;d=c;c=this._diskRead(c.children[q]);if(c===null)return!1;k===d.numberActives?(j=this._diskRead(d.children[k-1]),i=null):k===0?(j=null,i=this._diskRead(d.children[1])):(j=this._diskRead(d.children[k-1]),i=this._diskRead(d.children[k+
1]));c.numberActives===this.order-1&&d!=null&&(i!=null&&i.numberActives>this.order-1?(this._moveKey(d,q,-1),c=this._diskRead(c.pointer)):j!=null&&j.numberActives>this.order-1?(this._moveKey(d,q,1),c=this._diskRead(c.pointer)):j!=null&&j.numberActives===this.order-1?c=this._mergeSiblings(d,q,-1):i!=null&&i.numberActives===this.order-1&&(c=this._mergeSiblings(d,q,1)))}}if(c.isLeaf&&c.numberActives>this.order-1)return this._deleteKeyFromNode(c,k),!0;if(c.isLeaf&&c.pointer===this.root)return this._deleteKeyFromNode(c,
k),!0;try{if(c.isLeaf===!1)if(j=d=null,(d=this._diskRead(c.children[k])).numberActives>this.order-1){var t=this._getMaxKeyPos(d),a=t.node.keys[t.index];c.keys[k]=a;this._diskWrite(c);c=d;a=a.key;g=h=!0}else if((d=this._diskRead(c.children[k+1])).numberActives>this.order-1)t=this._getMinKeyPos(d),a=t.node.keys[t.index],c.keys[k]=a,this._diskWrite(c),c=d,a=a.key,g=h=!0;else if((d=this._diskRead(c.children[k])).numberActives===this.order-1&&(j=this._diskRead(c.children[k+1])).numberActives===this.order-
1){var u=this._mergeNodes(d,c.keys[k],j);c.children[k]=u.pointer;k++;for(var q=k;q<c.numberActives;q++)c.children[q]=c.children[q+1],c.keys[q-1]=c.keys[q];c.children[q]=null;c.keys[q-1]=null;c.numberActives--;if(c.numberActives===0&&this.root===c.pointer)this.root=u.pointer,this._updateRootNode(u);this._diskWrite(c);c=u;g=h=!0}}catch(w){console.log("!!!"),console.log(w)}c.isLeaf&&c.numberActives>this.order-1&&g===!1&&this._deleteKeyFromNode(c,k);if(h===!1)return!0}};C.Tree.prototype._moveKey=function(a,
c,d){d===1&&c--;var g=this._diskRead(a.children[c]),k=this._diskRead(a.children[c+1]);if(d==-1){g.keys[g.numberActives]=a.keys[c];g.children[g.numberActives+1]=k.children[0];k.children[0]=null;g.numberActives++;a.keys[c]=k.keys[0];for(d=1;d<k.numberActives;d++)k.keys[d-1]=k.keys[d],k.children[d-1]=k.children[d];k.children[k.numberActives-1]=k.children[k.numberActives];k.numberActives--}else{k.children[k.numberActives+1]=k.children[k.numberActives];for(d=k.numberActives;d>0;d--)k.children[d]=k.children[d-
1],k.keys[d]=k.keys[d-1];k.keys[0]=null;k.children[0]=null;k.children[0]=g.children[g.numberActives];k.keys[0]=a.keys[c];k.numberActives++;g.children[g.numberActives]=null;a.keys[c]=g.keys[g.numberActives-1];g.keys[g.numberActives-1]=null;g.numberActives--}this._diskWrite(g);this._diskWrite(k);this._diskWrite(a)};C.Tree.prototype._mergeSiblings=function(a,c){var d,g,k;c===a.numberActives?(c--,g=this._diskRead(a.children[a.numberActives-1]),k=this._diskRead(a.children[a.numberActives])):(g=this._diskRead(a.children[c]),
k=this._diskRead(a.children[c+1]));var j=this._allocateNode();j.isLeaf=g.isLeaf;j.level=g.level;for(d=0;d<this.order-1;d++)j.keys[d]=g.keys[d],j.children[d]=g.children[d];j.keys[this.order-1]=a.keys[c];j.children[this.order-1]=g.children[this.order-1];for(d=0;d<this.order-1;d++)j.keys[d+this.order]=k.keys[d],j.children[d+this.order]=k.children[d];j.children[2*this.order-1]=k.children[this.order-1];this._diskWrite(j);a.children[c]=j.pointer;for(d=c;d<a.numberActives;d++)a.keys[d]=a.keys[d+1],a.children[d+
1]=a.children[d+2];j.numberActives=g.numberActives+k.numberActives+1;a.numberActives--;for(d=a.numberActives;d<2*this.order-1;d++)a.keys[d]=null;if(a.numberActives===0&&this.root===a.pointer)this.root=j.pointer,j.isLeaf=j.level?!1:!0;this._diskWrite(j);this.root===j.pointer&&this._updateRootNode(j);this._diskWrite(a);this._diskDelete(g);this._diskDelete(k);return j};C.Tree.prototype._deleteKeyFromNode=function(a,c){var d=2*this.order-1;if(a.numberActives<d)d=a.numberActives;var g;if(a.isLeaf===!1)return!1;
for(g=c;g<d-1;g++)a.keys[g]=a.keys[g+1];a.keys.splice(d-1,a.keys.length-(d-1));a.numberActives--;this._diskWrite(a);return!0};C.Tree.prototype._mergeNodes=function(a,c,d){var g,k;g=this._allocateNode();g.isLeaf=!0;for(k=0;k<a.numberActives;k++)g.keys[k]=a.keys[k],g.children[k]=a.children[k];g.children[a.numberActives]=a.children[a.numberActives];g.keys[a.numberActives]=c;for(k=0;k<d.numberActives;k++)g.keys[k+a.numberActives+1]=d.keys[k],g.children[k+a.numberActives+1]=d.children[k];g.children[2*
this.order-1]=d.children[d.numberActives];g.numberActives=a.numberActives+d.numberActives+1;g.isLeaf=a.isLeaf;g.level=a.level;this._diskWrite(g);this._diskDelete(a);this._diskDelete(d);return g};C.Tree.prototype.audit=function(a){var c=[],d=[],g=this,k=function(j){for(var k=0;k<d.length;k++)if(g.comparator(d[k],j)===0){var h=" !!! duplicated key "+j;a===!0&&console.log(h);c.push(h)}},j=null,g=this;this.walkNodes(function(i){a===!0&&(console.log("--- Node at "+i.level+" level"),console.log(" - pointer: "+
i.pointer),console.log(" - leaf? "+i.isLeaf),console.log(" - num actives? "+i.numberActives),console.log(" - keys: "));for(var h=i.numberActives;h<i.keys.length;h++)i.keys[h]!=null&&a===!0&&(console.log(" * warning : redundant key data"),c.push(" * warning : redundant key data"));for(h=i.numberActives+1;h<i.children.length;h++)i.children[h]!=null&&a===!0&&(console.log(" * warning : redundant children data"),c.push(" * warning : redundant key data"));if(i.isLeaf===!1)for(h=0;h<i.numberActives;h++){var t=
g._diskRead(i.children[h]).keys[g._diskRead(i.children[h]).numberActives-1].key,u=g._diskRead(i.children[h+1]).keys[0].key;a===!0&&console.log("   "+i.keys[h].key+"("+t+","+u+")");if(g.comparator(i.keys[h].key,t)===-1){var q=" !!! value max left "+t+" > key "+i.keys[h].key;a===!0&&console.log(q);c.push(q)}g.comparator(i.keys[h].key,u)===1&&(q=" !!! value min right "+u+" < key "+i.keys[h].key,a===!0&&console.log(q),c.push(q));k(i.keys[h].key);d.push(i.keys[h].key)}else{j===null?j=i.level:j!=i.level&&
(q=" !!! Leaf node with wrong level value",a===!0&&console.log(q),c.push(q));for(h=0;h<i.numberActives;h++)a===!0&&console.log(" "+i.keys[h].key),k(i.keys[h].key),d.push(i.keys[h].key)}i.pointer!=g.root&&(i.numberActives>2*g.order-1&&(a===!0&&(q=" !!!! MAX num keys restriction violated "),console.log(q),c.push(q)),i.numberActives<g.order-1&&(a===!0&&(q=" !!!! MIN num keys restriction violated "),console.log(q),c.push(q)))});return c};C.Tree.prototype.clear=function(){this.diskManager.clear();this.root=
this._allocateNode();this.root.isLeaf=!0;this.root.level=0;this._diskWrite(this.root);this._updateRootNode(this.root);this.root=this.root.pointer};C.Tree.prototype._getMaxKeyPos=function(a){for(var c={};;){if(a===null)break;if(a.isLeaf===!0){c.node=a;c.index=a.numberActives-1;break}else c.node=a,c.index=a.numberActives-1,a=this._diskRead(a.children[a.numberActives])}return c};C.Tree.prototype._getMinKeyPos=function(a){for(var c={};;){if(a===null)break;if(a.isLeaf===!0){c.node=a;c.index=0;break}else c.node=
a,c.index=0,a=this._diskRead(a.children[0])}return c};C.Node=function(){this.numberActives=0;this.isLeaf=null;this.keys=[];this.children=[];this.level=0};C.LocalStorageManager=function(a,c,d){this.name=a;this.storage=c;this.maxSize=d;this.bufferCache=new ra.PriorityQueue({maxSize:d});this.counter=this.storage.getItem("__"+this.name+"__ID_COUNTER__")||0};C.LocalStorageManager.prototype.clear=function(){for(var a=this.storage.length,c=[],d=0;d<a;d++){var g=this.storage.key(d);(g.indexOf(this.name)==
0||g.indexOf("__"+this.name)==0)&&c.push(g)}for(d=0;d<c.length;d++)this.storage.removeItem(c[d]);this.bufferCache=new ra.PriorityQueue({maxSize:this.maxSize})};C.LocalStorageManager.prototype._genIndex=function(){var a=this.name+this.counter;this.counter++;this.storage.setItem("__"+this.name+"__ID_COUNTER__",this.counter);return a};C.LocalStorageManager.prototype._diskRead=function(a){if(typeof a==="object")a=a.pointer;var c=this.bufferCache.fetch(a);if(c==null&&(c=this.storage.getItem(a),c!=null))c=
this._decode(c),c.pointer=a,this.bufferCache.push(a,c);return c};C.LocalStorageManager.prototype._diskWrite=function(a){if(a.pointer==null)a.pointer=this._genIndex();var c=a.children,d=[];if(a.isLeaf===!1)for(var g=0;g<c.length;g++)c[g]==null?d.push(null):typeof c[g]==="object"?d.push(c[g].pointer):d.push(c[g]);a.children=d;this.storage.setItem(a.pointer,this._encode(a));a.children=c;this.bufferCache.push(a.pointer,a)};C.LocalStorageManager.prototype._diskDelete=function(a){this.storage.removeItem(a.pointer);
this.bufferCache.remove(a.pointer)};C.LocalStorageManager.prototype._updateRootNode=function(a){if(a.pointer)this.storage.setItem("__"+this.name+"__ROOT_NODE__",a.pointer);else throw"Cannot set as root of the b-tree a node without pointer";};C.LocalStorageManager.prototype._readRootNode=function(){var a=this.storage.getItem("__"+this.name+"__ROOT_NODE__");return a==null?null:this._diskRead(a)};C.LocalStorageManager.prototype._encode=function(a){for(var c=""+a.numberActives,c=c+":"+a.pointer,c=c+":"+
a.level,c=c+":"+(a.isLeaf?1:0),d=0,g="",k=0;k<a.keys.length;k++)a.keys[k]!=null&&(g=typeof a.keys[k].key==="number"?g+":"+a.keys[k].key:g+":"+("_"+(a.keys[k].key.subject||"")+"_"+(a.keys[k].key.predicate||"")+"_"+(a.keys[k].key.object||"")+"_"+(a.keys[k].key.graph||"")),a.keys[k].data==null?g+=":n:":g=typeof a.keys[k].data=="string"?g+":s:"+a.keys[k].data:typeof a.keys[k].data=="number"?a.keys[k]%1==0?g+":i:"+a.keys[k].data:g+":f:"+a.keys[k].data:g+":o:"+JSON.stringify(a.keys[k].data).replace(":",
"&colon;"),d++);c=c+":"+d+g;if(a.isLeaf===!1){d="";for(k=g=0;k<a.children.length;k++)a.children[k]!=null&&(d=d+":"+a.children[k],g++);c=c+":"+g+d}return c};C.LocalStorageManager.prototype._decode=function(a){var c=new C.Node,a=a.split(":");c.numberActives=parseInt(a[0]);c.pointer=a[1];c.level=parseInt(a[2]);c.isLeaf=a[3]==="1"?!0:!1;for(var d=parseInt(a[4]),g=5,k,j,i,h=0;h<d;h++)k=a[g],k[0]=="_"?(k=k.split("_"),k={subject:parseInt(k[1])||null,predicate:parseInt(k[2])||null,object:parseInt(k[3])||
null,graph:parseInt(k[4]||null)}):k=parseInt(a[g]),j=a[g+1],i=a[g+2],j==="n"?i=void 0:j==="i"?i=parseInt(i):j==="f"?i=parseFloat(i):j==="o"&&(i=JSON.parse(i.replace("&colon;",":"))),c.keys.push({key:k,data:i}),g+=3;if(c.isLeaf===!1){d=parseInt(a[g]);g++;for(h=0;h<d;h++)c.children[h]=a[g],g++}return c};var R={NodeKey:function(a,c){this.subject=a.subject;this.predicate=a.predicate;this.object=a.object;this.graph=a.graph;this.order=c}};R.NodeKey.prototype.comparator=function(a){for(var c=0;c<this.order.length;c++){var d=
this.order[c];if(a[d]==null)break;else if(this[d]<a[d])return-1;else if(this[d]>a[d])return 1}return 0};R.Pattern=function(a){this.subject=a.subject;this.predicate=a.predicate;this.object=a.object;this.graph=a.graph;this.indexKey=[];this.keyComponents={};for(var c=[],d=[],a=["subject","predicate","object","graph"],g=0;g<a.length;g++)typeof this[a[g]]==="string"?(d.push(a[g]),this.keyComponents[a[g]]=null):(c.push(a[g]),this.keyComponents[a[g]]=this[a[g]],this.indexKey.push(a[g]));this.order=c.concat(d);
this.key=new R.NodeKey(this.keyComponents,this.order)};var W={Tree:function(a,c){if(arguments!=0)this.componentOrder=a.componentOrder,C.Tree.call(this,a.order,a.name,a.persistent,a.cacheMaxSize),this.comparator=function(a,c){for(var k=0;k<this.componentOrder.length;k++){var j=this.componentOrder[k],i=a[j],j=c[j];if(i<j)return-1;else if(i>j)return 1}return 0},this.rangeComparator=function(a,c){for(var k=0;k<this.componentOrder.length;k++){var j=this.componentOrder[k];if(c[j]==null||a[j]==null)break;
else if(a[j]<c[j])return-1;else if(a[j]>c[j])return 1}return 0},c!=null&&c(this)}};y["extends"](C.Tree,W.Tree);W.Tree.prototype.insert=function(a,c){C.Tree.prototype.insert.call(this,a,null);c&&c(!0);return!0};W.Tree.prototype.search=function(a,c){var d=C.Tree.prototype.search.call(this,a,!0);c&&c(d);return d};W.Tree.prototype.range=function(a,c){var d=null,d=typeof this.root==="string"?this._rangeTraverse(this,this._diskRead(this.root),a):this._rangeTraverse(this,this.root,a);c&&c(d);return d};W.Tree.prototype._rangeTraverse=
function(a,c,d){for(var d=d.key,g=[],k=[c],j;k.length>0;){c=k.shift();for(j=0;j<c.numberActives&&a.rangeComparator(c.keys[j].key,d)===-1;)j++;if(c.isLeaf===!0)for(;j<c.numberActives&&a.rangeComparator(c.keys[j].key,d)===0;)g.push(c.keys[j].key),j++;else{var i=a._diskRead(c.children[j]);for(k.push(i);;)if(j<c.numberActives&&a.rangeComparator(c.keys[j].key,d)===0)g.push(c.keys[j].key),j++,i=a._diskRead(c.children[j]),k.push(i);else break}}return g};var T={QuadBackend:function(a,c){if(arguments!=0){this.indexMap=
{};this.treeOrder=a.treeOrder;this.indices=["SPOG","GP","OGS","POG","GSP","OS"];this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]};for(var d=0;d<this.indices.length;d++){var g=this.indices[d];this.indexMap[g]=new W.Tree({order:this.treeOrder,componentOrder:this.componentOrders[g],
persistent:a.persistent,name:(a.name||"")+g,cacheMaxSize:a.cacheMaxSize})}c&&c(this)}}};T.QuadBackend.prototype.clear=function(){for(var a=0;a<this.indices.length;a++)this.indexMap[this.indices[a]].clear()};T.QuadBackend.prototype._indexForPattern=function(a){for(var a=a.indexKey,c=this.indices,d=0;d<c.length;d++)for(var g=c[d],k=this.componentOrders[g],j=0;j<k.length;j++){if(y.include(a,k[j])===!1)break;if(j==a.length-1)return g}return"SPOG"};T.QuadBackend.prototype.index=function(a,c){for(var d=
0;d<this.indices.length;d++)this.indexMap[this.indices[d]].insert(a);c&&c(!0);return!0};T.QuadBackend.prototype.range=function(a,c){var d=this.indexMap[this._indexForPattern(a)].range(a);c&&c(d);return d};T.QuadBackend.prototype.search=function(a,c){var d=this.indexMap[this.indices[0]].search(a);c&&c(d!=null);return d!=null};T.QuadBackend.prototype["delete"]=function(a,c){for(var d,g=0;g<this.indices.length;g++)d=this.indices[g],d=this.indexMap[d],d["delete"](a);c&&c(!0);return!0};var J={Lexicon:function(a,
c){this.name=c||"";this.storage=null;try{this.storage=window.localStorage}catch(d){}if(this.storage==null)this.storage={setItem:function(){},getItem:function(){return null},removeItem:function(){},key:function(){return""},length:0};this.uriToOID={};this.OIDToUri={};this.literalToOID={};this.OIDToLiteral={};this.blankToOID={};this.OIDToBlank={};this.defaultGraphOid=0;this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph";this.defaultGraphUriTerm={token:"uri",prefix:null,
suffix:null,value:this.defaultGraphUri,oid:this.defaultGraphOid};this.oidCounter=parseInt(this.storage.getItem(this.pointer("oidCounter")))||1;this.storage.getItem(this.pointer("knownGraphs"))==null?(this.knownGraphs={},this.storage.setItem(this.pointer("knownGraphs"),JSON.stringify(this.knownGraphs))):this.knownGraphs=JSON.parse(this.storage.getItem(this.pointer("knownGraphs")));a!=null&&a(this)}};J.Lexicon.prototype.updateAfterWrite=function(){this.storage.setItem(this.pointer("oidCounter"),""+
this.oidCounter)};J.Lexicon.prototype.pointer=function(a,c){a=="uriToOID"?a="uo":a=="OIDToUri"?a="ou":a=="literalToOID"?a="lo":a=="OIDToLiteral"?a="ok":a=="blankToOID"?a="bo":a=="OIDToBlank"&&(a="ob");return c==null?this.name+"_l_"+a:this.name+"_l_"+a+"_"+c};J.Lexicon.prototype.clear=function(){this.uriToOID={};this.OIDToUri={};this.literalToOID={};this.OIDToLiteral={};this.blankToOID={};this.OIDToBlank={};for(var a=this.storage.length,c=this.name+"_l_",d=[],g=0;g<a;g++){var k=this.storage.key(g);
k.indexOf(c)==0&&d.push(k)}for(g=0;g<d.length;g++)this.storage.removeItem(d[g])};J.Lexicon.prototype.registerGraph=function(a){a!=this.defaultGraphOid&&(this.knownGraphs[a]=!0,this.storage.setItem(this.pointer("knownGraphs"),JSON.stringify(this.knownGraphs)));return!0};J.Lexicon.prototype.registeredGraphs=function(a){var c=[],d;for(d in this.knownGraphs)a===!0?c.push(this.retrieve(d)):c.push(d);return c};J.Lexicon.prototype.registerUri=function(a){if(a===this.defaultGraphUri)return this.defaultGraphOid;
else{if(this.uriToOID[a]==null){var c=this.storage.getItem(this.pointer("uriToOID",a));if(c==null){var c=this.oidCounter,d="u"+c;this.oidCounter++;this.uriToOID[a]=[c,0];this.OIDToUri[d]=a;this.storage.setItem(this.pointer("uriToOID",a),c+":0");this.storage.setItem(this.pointer("OIDToUri",d),a)}else{var g=c.split(":"),c=parseInt(g[0]),d="u"+c,g=parseInt(g[1])+1;this.uriToOID[a]=[c,g];this.OIDToUri[d]=a;this.storage.setItem(this.pointer("uriToOID",a),c+":0")}}else d=this.uriToOID[a],c=d[0],g=d[1]+
1,this.uriToOID[a]=[c,g],this.storage.setItem(this.pointer("uriToOID",a),c+":"+g);return c}};J.Lexicon.prototype.resolveUri=function(a){if(a===this.defaultGraphUri)return this.defaultGraphOid;else{var c=this.uriToOID[a];if(c!=null)return c[0];else if(c=this.storage.getItem(this.pointer("uriToOID",a)),c==null)return-1;else{var d=c.split(":"),c=parseInt(d[0]),g="u"+c,d=parseInt(d[1]);this.uriToOID[a]=[c,d];this.OIDToUri[g]=a;return c}}};J.Lexicon.prototype.resolveUriCost=function(a){return a===this.defaultGraphUri?
this.defaultGraphOid:(a=this.uriToOID[a],a!=null?a[1]:-1)};J.Lexicon.prototype.registerBlank=function(){var a=this.oidCounter;this.oidCounter++;a=""+a;this.storage.setItem(this.pointer("OIDToBlank",a),!0);this.OIDToBlank[a]=!0;return a};J.Lexicon.prototype.resolveBlank=function(){var a=this.oidCounter;this.oidCounter++;return""+a};J.Lexicon.prototype.resolveBlankCost=function(){return 0};J.Lexicon.prototype.registerLiteral=function(a){if(this.literalToOID[a]==null){var c=this.storage.getItem(this.pointer("literalToOID",
a));if(c==null){var c=this.oidCounter,d="l"+c;this.oidCounter++;this.literalToOID[a]=[c,0];this.OIDToLiteral[d]=a;this.storage.setItem(this.pointer("literalToOID",a),c+":0");this.storage.setItem(this.pointer("OIDToLiteral",d),a)}else d=c.split(":"),c=parseInt(d[0]),d=parseInt(d[1])+1,this.literalToOID[a]=[c,d],this.storage.setItem(this.pointer("literalToOID",a),c+":"+d)}else d=this.literalToOID[a],c=d[0],d=d[1]+1,this.storage.setItem(this.pointer("literalToOID",a),c+":"+d),this.literalToOID[a]=[c,
d];return c};J.Lexicon.prototype.resolveLiteral=function(a){var c=this.literalToOID[a];if(c!=null)return c[0];else{var d=this.storage.getItem(this.pointer("literalToOID",a));return d!=null?(c=d.split(":"),d=parseInt(c[0]),c=parseInt(c[1]),this.literalToOID[a]=[d,c],this.OIDToLiteral["l"+d]=a,d):-1}};J.Lexicon.prototype.resolveLiteralCost=function(a){a=this.literalToOID[a];return a!=null?a[1]:0};J.Lexicon.prototype.parseLiteral=function(a){var c=a.lastIndexOf("@");if(c!=-1&&a[c-1]==='"'){var d=a.substring(1,
c-1),a=a.substring(c+1,a.length);return{token:"literal",value:d,lang:a}}c=a.lastIndexOf("^^");if(c!=-1&&a[c-1]==='"'&&a[c+2]==="<"&&a[a.length-1]===">")return d=a.substring(1,c-1),a=a.substring(c+3,a.length-1),{token:"literal",value:d,type:a};d=a.substring(1,a.length-1);return{token:"literal",value:d}};J.Lexicon.prototype.parseUri=function(a){return{token:"uri",value:a}};J.Lexicon.prototype.retrieve=function(a){var c;try{if(a===this.defaultGraphOid)return{token:"uri",value:this.defaultGraphUri,prefix:null,
suffix:null,defaultGraph:!0};else{var d=this.OIDToUri["u"+a];if(d!=null)return this.parseUri(d);else{var g=this.OIDToLiteral["l"+a];if(g!=null)return this.parseLiteral(g);else{var k=this.OIDToBlank[""+a];if(k!=null)return{token:"blank",value:"_:"+a};else if(d=this.storage.getItem(this.pointer("OIDToUri","u"+a)),d!=null){this.OIDToUri["u"+a]=d;c=this.storage.getItem(this.pointer("uriToOID",d));var j=c.split(":"),i=parseInt(j[1]);this.uriToOID[d]=[a,i];return this.parseUri(d)}else if(g=this.storage.getItem(this.pointer("OIDToLiteral",
"l"+a)),g!=null){this.OIDToLiteral["l"+a]=g;c=this.storage.getItem(this.pointer("literalToOID",g));var h=c.split(":"),a=parseInt(h[0]),i=parseInt(h[1]);this.literalToOID[g]=[a,i];return this.parseLiteral(g)}else if(k=this.storage.getItem(this.pointer("OIDToBlank",""+a)),k!=null)return this.OIDToBlank[""+a]=!0,{token:"blank",value:"_:"+a};else throw"Null value for OID";}}}}catch(t){throw console.log("error in lexicon retrieving OID:"),console.log(a),t.message&&console.log(t.message),t.stack&&console.log(t.stack),
Error("Unknown retrieving OID in lexicon:"+a);}};J.Lexicon.prototype.unregister=function(a,c){try{return this.unregisterTerm(a.subject.token,c.subject),this.unregisterTerm(a.predicate.token,c.predicate),this.unregisterTerm(a.object.token,c.object),a.graph!=null&&this.unregisterTerm(a.graph.token,c.graph),!0}catch(d){return console.log("Error unregistering quad"),console.log(d.message),!1}};J.Lexicon.prototype.unregisterTerm=function(a,c){if(a==="uri"){if(c!=this.defaultGraphOid){var d="u"+c,g=this.OIDToUri[d],
k=this.uriToOID[g],j=k[1];if(""+k[0]===""+c)j===0?(delete this.OIDToUri[d],delete this.uriToOID[g],delete this.knownGraphs[c]):this.uriToOID[g]=[c,j-1];else throw"Not matching OID : "+c+" vs "+k[0];}}else if(a==="literal")if(this.oidCounter++,d="l"+c,g=this.OIDToLiteral[d],k=this.literalToOID[g],j=k[1],""+k[0]===""+c)j===0?(delete this.OIDToLiteral[d],delete this.literalToOID[g]):this.literalToOID[g]=[c,j-1];else throw"Not matching OID : "+c+" vs "+k[0];else a==="blank"&&delete this.OIDToBlank[""+
c]};var N={};N.load=function(a,c,d){jQuery.ajax({url:a,headers:{Accept:c},success:function(a,c,j){if((""+j.status)[0]=="2"){for(var c=j.getAllResponseHeaders().split("\n"),j={},i=0;i<c.length;i++){var h=c[i].split(":");j[h[0]]=h[1]}d(!0,{headers:j,data:a})}},error:function(a){(""+a.status)[0]=="3"?redirection==0?d(!1,500):(a=a.getAllResponseHeaders().Location||a.getAllResponseHeaders().location,a!=null?N.load(a,c,d,redirection-1):d(!1,500)):d(!1,a.statusCode())}})};var sa=null;(function(){var a=function(a,
c){a.stack="";for(var d in c)a[d]=c[d]};if(typeof window!=="undefined"){var c=window.jsonld=window.jsonld||{};Exception=function(c){a(this,c)};if(!Object.keys)Object.keys=function(a){if(a!==Object(a))throw new TypeError("Object.keys called on non-object");var c=[],d;for(d in a)Object.prototype.hasOwnProperty.call(a,d)&&c.push(d);return c};if(!Array.prototype.filter)Array.prototype.filter=function(a,c){if(this==null)throw new TypeError;var d=Object(this),j=d.length>>>0;if(typeof a!="function")throw new TypeError;
for(var g=[],k=0;k<j;k++)if(k in d){var i=d[k];a.call(c,i,k,d)&&g.push(i)}return g}}else typeof module!=="undefined"&&module.exports&&(c={},Exception=function(c){a(this,c);this.stack=Error().stack});sa=c;var d={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",xsd:"http://www.w3.org/2001/XMLSchema#",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",cal:"http://www.w3.org/2002/12/cal/ical#",vcard:"http://www.w3.org/2006/vcard/ns# ",
geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",cc:"http://creativecommons.org/ns#",sioc:"http://rdfs.org/sioc/ns#",doap:"http://usefulinc.com/ns/doap#",com:"http://purl.org/commerce#",ps:"http://purl.org/payswarm#",gr:"http://purl.org/goodrelations/v1#",sig:"http://purl.org/signature#",ccard:"http://purl.org/commerce/creditcard#"},g={xsd:"http://www.w3.org/2001/XMLSchema#"},k={"boolean":g.xsd+"boolean","double":g.xsd+"double",integer:g.xsd+"integer"},j=function(a,c,d){c in a?a[c].constructor===Array?
a[c].push(d):a[c]=[a[c],d]:a[c]=d},i=function(a){var c;if(a.constructor===Object){c={};var d=Object.keys(a).sort(),j;for(j in d){var g=d[j];c[g]=i(a[g])}}else if(a.constructor===Array)for(j in c=[],a)c[j]=i(a[j]);else c=a;return c},h=function(a){var c={"@id":"@id","@language":"@language","@literal":"@literal","@type":"@type"};if(a){var d={},j;for(j in a)a[j].constructor===String&&a[j]in c&&(d[a[j]]=j);for(j in d)c[j]=d[j]}return c},t=function(a,c){var d=null;c in a&&(a[c].constructor===String?d=a[c]:
a[c].constructor===Object&&"@id"in a[c]&&(d=a[c]["@id"]));return d},u=function(a,c,d){var j=null,g;for(g in a)if(g.length>0&&g[0]!=="@"&&c===t(a,g)){j=g;d!==null&&(d[g]=i(a[g]));break}j===null&&c==="@type"&&(j=h(a)["@type"]);if(j===null)for(g in a)if(g.length>0&&g[0]!=="@"){var k=t(a,g);if(k!==null&&c.indexOf(k)===0&&c.length>k.length){j=g+":"+c.substr(k.length);d!==null&&(d[g]=i(a[g]));break}}j===null&&(j=c);return j},q=function(a,c,d){var j=c,g=h(a),k=c.indexOf(":");if(k!==-1)g=c.substr(0,k),g in
a&&(j=t(a,g)+c.substr(k+1),d!==null&&(d[g]=i(a[g])));else if(c in a)j=t(a,c),d!==null&&(d[c]=i(a[c]));else for(var q in g)if(c===g[q]){j=q;break}return j},w=function(a){var c=!1;a!==null&&a.constructor===Object&&!("@literal"in a)&&(c=Object.keys(a).length>1||!("@id"in a));return c};c.normalize=function(a){return(new D).normalize(a)};c.expand=function(a){return(new D).expand({},null,a)};c.compact=function(a,d){var j=null;if(d!==null){var d=c.expand(d),g;d.constructor===Array?(j=[],g=d):g=[d];a.constructor===
Array&&(a=c.mergeContexts({},a));for(var k in g){var h={},l=(new D).compact(i(a),null,g[k],h);if(Object.keys(h).length>0){var q=h,h={},t=Object.keys(q).sort(),u=void 0;for(u in t){var w=t[u];h[w]=q[w]}q=Object.keys(l);q.sort();q.unshift("@context");l["@context"]=h;var h={},y;for(y in q)t=q[y],h[t]=l[t];l=h}j===null?j=l:j.push(l)}}return j};c.mergeContexts=function(a,d){a.constructor===Array&&(a=c.mergeContexts({},a));var j=i(a);if(d.constructor===Array)for(var g in d)j=c.mergeContexts(j,d[g]);else{for(var k in d)if(k.indexOf("@")!==
0)for(var h in j)if(j[h]===d[k]){delete j[h];break}for(k in d)j[k]=i(d[k])}return j};c.expandTerm=q;c.compactIri=function(a,c){return u(a,c,null)};c.frame=function(a,c,d){return(new D).frame(a,c,d)};c.toTriples=function(a,d,j){var g=null,a=c.normalize(a),j=j||null;j===null&&(g=[],j=function(a,c,j){g.push({subject:y.lexicalFormTerm(a),predicate:y.lexicalFormTerm(c),object:y.lexicalFormTerm(j),graph:d})});var k=!1,i;for(i in a){var h=a[i],l=h["@id"],l=l[0]=="_"?{token:"blank",value:l.split(":")[1]}:
{token:"uri",value:l},q;for(q in h)if(q!=="@id"){var t=h[q];t.constructor!==Array&&(t=[t]);for(var u in t)if(k=t[u],q==="@type"||q==="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"?(q="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",k={token:"uri",value:k}):typeof k==="string"?k={token:"literal",value:k}:k["@id"]!=null?k=k["@id"][0]=="_"?{token:"blank",value:k["@id"].split(":")[1]}:{token:"uri",value:k["@id"]}:k["@type"]!=null?k={token:"literal",value:k["@literal"],type:k["@type"]}:k["@language"]!=
null&&(k={token:"literal",value:k["@literal"],lang:k["@language"]}),k=j(l,{token:"uri",value:q},k)===!1)break;if(k)break}if(k)break}return g};c.resolve=function(a,c,d){var j={},g=function(a,c){if(a.constructor===Array)for(var d in a)g(a[d]);else if(a.constructor===Object)for(var k in a)if(k==="@context")if(a[k].constructor===Array){var i=a[k];for(d in i)i[d].constructor===String&&(c?i[d]=j[i[d]]:j[i[d]]={})}else a[k].constructor===String&&(c?a[k]=j[a[k]]:j[a[k]]={})};g(a,!1);var k=Object.keys(j).length,
i=null;if(k===0)d(a,i);else for(var h in j)c(h,function(c,l){--k;if(c===null)i=i||[],i.push({url:h,error:l});else try{j[h]=c.constructor===String?JSON.parse(c)["@context"]:c["@context"]}catch(q){i=i||[],i.push({url:h,error:q})}k===0&&(i===null&&g(a,!0),d(a,i))})};var D=function(){};D.prototype.compact=function(a,c,d,j){var g,q=h(a);if(d===null)g=null,this.getCoerceType(a,c,j);else if(d.constructor===Array){g=[];for(var t in d)g.push(this.compact(a,c,d[t],j))}else if(d.constructor===Object&&"@id"in
d&&d["@id"].constructor===Array)g={},g[q["@id"]]=this.compact(a,c,d["@id"],j);else if(w(d)){g={};for(var y in d)if(d[y]!=="@context"&&(q=u(a,y,j),q!==y||!(q in g)))g[q]=this.compact(a,y,d[y],j)}else{c=this.getCoerceType(a,c,j);t=null;d.constructor===Object?"@language"in d||(t="@type"in d?d["@type"]:"@id"in d?"@id":c):d.constructor===String&&(t=c);if(c===null&&(t===k["boolean"]||t===k.integer||t===k["double"]))c=t;if(c!==null)if(t===null)throw{message:"Cannot coerce type when a language is specified. The language information would be lost."};
else if(t!==c)throw new Exception({message:"Cannot coerce type because the type does not match.",type:t,expected:c});else d.constructor===Object?"@id"in d?g=d["@id"]:"@literal"in d&&(g=d["@literal"]):g=d,c===k["boolean"]?g=g==="true"||g!=0:c===k["double"]?g=parseFloat(g):c===k.integer&&(g=parseInt(g));else if(d.constructor===Object)for(y in g={},d)g[q[y]]=d[y];else g=i(d);t==="@id"&&(g.constructor===Object?g[q["@id"]]=u(a,g[q["@id"]],j):g=u(a,g,j))}return g};D.prototype.expand=function(a,d,g){var t;
if(g===null)t=null;else if(d===null&&g.constructor===String)t=q(a,g,null);else if(g.constructor===Array){t=[];for(var u in g)t.push(this.expand(a,d,g[u]))}else if(g.constructor===Object){"@context"in g&&(a=c.mergeContexts(a,g["@context"]));t={};for(var w in g)w==="@embed"||w==="@explicit"||w==="@default"||w==="@omitDefault"?j(t,w,i(g[w])):w!=="@context"&&j(t,q(a,w,null),this.expand(a,w,g[w]))}else{u=this.getCoerceType(a,d,null);t=h(a);if(u===null&&(g.constructor===Number||g.constructor===Boolean))u=
g.constructor===Boolean?k["boolean"]:(""+g).indexOf(".")==-1?k.integer:k["double"];d===t["@id"]||d===t["@type"]?t=q(a,g,null):u!==null?(t={},u==="@id"?t["@id"]=q(a,g,null):(t["@type"]=u,u===k["double"]&&(g=g.toExponential(6).replace(/(e(?:\+|-))([0-9])$/,"$10$2")),t["@literal"]=""+g)):t=""+g}return t};D.prototype.normalize=function(a){var c=[];if(a!==null){this.ng={tmp:null,c14n:null};var j=this.expand(d,null,a);this.nameBlankNodes(j);a={};I(null,null,j,a);for(var g in a){var j=a[g],k={},i=Object.keys(j).sort(),
h;for(h in i){var l=i[h];k[l]=j[l]}c.push(k)}this.canonicalizeBlankNodes(c);c.sort(function(a,c){return F(a["@id"],c["@id"])})}return c};D.prototype.getCoerceType=function(a,c,d){var j=null,c=q(a,c,null);c==="@id"||c==="@type"?j="@id":(c=u(a,c,null),c in a&&a[c].constructor===Object&&"@type"in a[c]&&(j=q(a,a[c]["@type"],d),d!==null&&(d[c]=i(a[c]))));return j};var A=function(a){return a.indexOf("_:")===0},E=function(a){return a.constructor===Object&&"@id"in a&&A(a["@id"])},F=function(a,c){var d=0;
if(a.constructor===Array&&c.constructor===Array)for(var j=0;j<a.length&&d===0;++j)d=F(a[j],c[j]);else d=a<c?-1:a>c?1:0;return d},C=function(a,c,d){var j=0;d in a?j=d in c?F(a[d],c[d]):-1:d in c&&(j=1);return j},B=function(a,c){var d=0;a.constructor===String?d=c.constructor!==String?-1:F(a,c):c.constructor===String?d=1:(d=C(a,c,"@literal"),d===0&&("@literal"in a?(d=C(a,c,"@type"),d===0&&(d=C(a,c,"@language"))):d=F(a["@id"],c["@id"])));return d},G=function(a,c){var d=0,j;for(j in a)if(j!=="@id"){d=
F(a[j].constructor===Array?a[j].length:1,c[j].constructor===Array?c[j].length:1);if(d===0){var g=a[j],k=c[j];g.constructor!==Array&&(g=[g],k=[k]);g=g.filter(function(a){return!E(a)});k=k.filter(function(a){return!E(a)});d=F(g.length,k.length)}if(d===0){g.sort(B);k.sort(B);for(var i=0;i<g.length&&d===0;++i)d=B(g[i],k[i])}if(d!==0)break}return d},H=function(a){var c=-1,d={next:function(){++c;return d.current()},current:function(){return"_:"+a+c},inNamespace:function(c){return c.indexOf("_:"+a)===0}};
return d},K=function(a,c,d){if(a!==null)if(a.constructor===Array)for(var j in a)K(a[j],c,d);else if(a.constructor===Object){"@id"in a?a["@id"].constructor==Array?K(a["@id"],c,d):w(a)&&(c[a["@id"]]=a):w(a)&&(!("@id"in a)||E(a))&&d.push(a);for(var g in a)K(a[g],c,d)}},I=function(a,c,d,j){var g=null;if(d!==null)if(d.constructor===Array)for(var k in d)I(a,c,d[k],j);else if(d.constructor===Object)if("@literal"in d||c==="@type")g=i(d);else if(d["@id"].constructor===Array){if(a!==null)throw{message:"Embedded graph literals cannot be flattened."};
for(var h in d["@id"])I(a,c,d["@id"][h],j)}else{d["@id"]in j?k=j[d["@id"]]:(k={"@id":d["@id"]},j[d["@id"]]=k);var g={"@id":k["@id"]},l;for(l in d)h=d[l],h!==null&&l!=="@id"&&(l in k?k[l].constructor!==Array&&(k[l]=[k[l]]):k[l]=[],I(k[l],l,h,j),k[l].length===1&&(k[l]=k[l][0]))}else g=d;g!==null&&a!==null&&(a.constructor===Array?(c=!1,g.constructor===Object&&"@id"in g&&(c=a.filter(function(a){return a.constructor===Object&&"@id"in a&&a["@id"]===g["@id"]}).length>0),c||a.push(g)):a[c]=g)};D.prototype.nameBlankNodes=
function(a){var c=this.ng.tmp=H("tmp"),d={},j=[];K(a,d,j);for(var g in j)if(a=j[g],!("@id"in a)){for(;c.next()in d;);a["@id"]=c.current();d[c.current()]=a}};D.prototype.renameBlankNode=function(a,c){var d=a["@id"];a["@id"]=c;var j=this.subjects;j[c]=j[d];delete j[d];this.edges.refs[c]=this.edges.refs[d];this.edges.props[c]=this.edges.props[d];delete this.edges.refs[d];delete this.edges.props[d];var g=this.edges.refs[c].all,k;for(k in g){var i=g[k].s;i===d&&(i=c);var h=j[i],l=this.edges.props[i].all,
q;for(q in l)if(l[q].s===d){l[q].s=c;var i=l[q].p,i=h[i].constructor===Object?[h[i]]:h[i].constructor===Array?h[i]:[],t;for(t in i)i[t].constructor===Object&&"@id"in i[t]&&i[t]["@id"]===d&&(i[t]["@id"]=c)}}l=this.edges.props[c].all;for(k in l){var i=l[k].s,g=this.edges.refs[i].all,u;for(u in g)if(g[u].s===d)g[u].s=c}};D.prototype.canonicalizeBlankNodes=function(a){this.renamed={};this.mappings={};this.serializations={};var c=this.edges={refs:{},props:{}},d=this.subjects={},j=[],g;for(g in a){var k=
a[g]["@id"];d[k]=a[g];c.refs[k]={all:[],bnodes:[]};c.props[k]={all:[],bnodes:[]};A(k)&&j.push(a[g])}this.collectEdges();var a=this.ng.c14n=H("c14n"),i=this.ng.tmp;for(g in j){var h=j[g],k=h["@id"];if(a.inNamespace(k)){for(;i.next()in d;);this.renameBlankNode(h,i.current());k=h["@id"]}this.serializations[k]={props:null,refs:null}}for(var i=!0,l=this;j.length>0;){i&&(i=!1,j.sort(function(a,c){return l.deepCompareBlankNodes(a,c)}));var h=j.shift(),k=h["@id"],h=["props","refs"],q;for(q in h){var t=h[q];
if(this.serializations[k][t]===null){var u={};u[k]="s1"}else u=this.serializations[k][t].m;var w=Object.keys(u);w.sort(function(a,c){return F(u[a],u[c])});var y=[];for(g in w){var D=w[g];!a.inNamespace(k)&&D in d&&(this.renameBlankNode(d[D],a.next()),y.push(D))}w=j;j=[];for(g in w){var D=w[g],M=D["@id"];if(!a.inNamespace(M)){for(var E in y)this.markSerializationDirty(M,y[E],t)&&(i=!0);j.push(D)}}}}for(var C in c.props)if(c.props[C].bnodes.length>0){var h=d[C],G;for(G in h)G.indexOf("@")!==0&&h[G].constructor===
Array&&h[G].sort(B)}};MappingBuilder=function(){this.count=1;this.processed={};this.mapping={};this.adj={};this.keyStack=[{keys:["s1"],idx:0}];this.done={};this.s=""};MappingBuilder.prototype.copy=function(){var a=new MappingBuilder;a.count=this.count;a.processed=i(this.processed);a.mapping=i(this.mapping);a.adj=i(this.adj);a.keyStack=i(this.keyStack);a.done=i(this.done);a.s=this.s;return a};MappingBuilder.prototype.mapNode=function(a){a in this.mapping||(this.mapping[a]=a.indexOf("_:c14n")===0?"c"+
a.substr(6):"s"+this.count++);return this.mapping[a]};MappingBuilder.prototype.serialize=function(a,c){if(this.keyStack.length>0)for(var d=this.keyStack.pop();d.idx<d.keys.length;++d.idx){var j=d.keys[d.idx];if(!(j in this.adj)){this.keyStack.push(d);break}if(j in this.done)this.s+="_"+j;else{this.done[j]=!0;var g=j,j=this.adj[j],k=j.i;if(k in a){var i=a[k],h="",l=!0,q=void 0;for(q in i)if(q!=="@id"){l?l=!1:h+="|";h+="<"+q+">";var t=i[q].constructor===Array?i[q]:[i[q]],u;for(u in t){var w=t[u];w.constructor===
Object?"@id"in w?h+=A(w["@id"])?"_:":"<"+w["@id"]+">":(h+='"'+w["@literal"]+'"',"@type"in w?h+="^^<"+w["@type"]+">":"@language"in w&&(h+="@"+w["@language"])):h+='"'+w+'"'}}g+="["+h+"]";i=!0;g+="[";var k=c.refs[k].all,y;for(y in k)i?i=!1:g+="|",g+="<"+k[y].p+">",g+=A(k[y].s)?"_:":"<"+k[y].s+">";g+="]"}g+=j.k.join("");this.s+=g;this.keyStack.push({keys:j.k,idx:0});this.serialize(a,c)}}};D.prototype.markSerializationDirty=function(a,c,d){var j=!1,a=this.serializations[a];a[d]!==null&&c in a[d].m&&(a[d]=
null,j=!0);return j};var J=function(a,c){var d=0;return d=a.length==c.length?F(a,c):a.length>c.length?F(a.substr(0,c.length),c):F(a,c.substr(0,a.length))};D.prototype.serializeCombos=function(a,c,d,j,g,k,h){if(h.length>0){k=i(k);k[j.mapNode(h[0].s)]=h[0].s;for(var l=j.copy(),h=h.slice(1),q=Math.max(1,h.length),t=0;t<q;++t){var u=t===0?j:l.copy();this.serializeCombos(a,c,d,u,g,k,h);h.unshift.apply(h,h.splice(1,h.length))}}else if(h=Object.keys(k).sort(),j.adj[d]={i:c,k:h,m:k},j.serialize(this.subjects,
this.edges),a[g]===null||J(j.s,a[g].s)<=0){for(l in h)this.serializeBlankNode(a,k[h[l]],j,g);j.serialize(this.subjects,this.edges);if(a[g]===null||J(j.s,a[g].s)<=0&&j.s.length>=a[g].s.length)a[g]={s:j.s,m:j.mapping}}};D.prototype.serializeBlankNode=function(a,c,d,j){if(!(c in d.processed)){d.processed[c]=!0;var g=d.mapNode(c),k=d.copy(),i=this.edges[j][c].bnodes,h={},l=[],q;for(q in i)i[q].s in d.mapping?h[d.mapping[i[q].s]]=i[q].s:l.push(i[q]);i=Math.max(1,l.length);for(q=0;q<i;++q){var t=q===0?
d:k.copy();this.serializeCombos(a,c,g,t,j,h,l)}}};D.prototype.deepCompareBlankNodes=function(a,c){var d=0,j=a["@id"],g=c["@id"];if(j===g)d=0;else if(d=this.shallowCompareBlankNodes(a,c),d===0)for(var k=["props","refs"],h=0;d===0&&h<k.length;++h){var d=k[h],l=this.serializations[j],q=this.serializations[g];if(l[d]===null){var t=new MappingBuilder;if(d==="refs")t.mapping=i(l.props.m),t.count=Object.keys(t.mapping).length+1;this.serializeBlankNode(l,j,t,d)}if(q[d]===null){t=new MappingBuilder;if(d===
"refs")t.mapping=i(q.props.m),t.count=Object.keys(t.mapping).length+1;this.serializeBlankNode(q,g,t,d)}d=F(l[d].s,q[d].s)}return d};D.prototype.shallowCompareBlankNodes=function(a,c){var d=0,j=Object.keys(a),g=Object.keys(c),d=F(j.length,g.length);d===0&&(d=F(j.sort(),g.sort()));d===0&&(d=G(a,c));if(d===0)var k=this.edges.refs[a["@id"]].all,i=this.edges.refs[c["@id"]].all,d=F(k.length,i.length);if(d===0)for(j=0;j<k.length&&d===0;++j)d=this.compareEdges(k[j],i[j]);return d};D.prototype.compareEdges=
function(a,c){var d=0,j=A(a.s),g=A(c.s),k=this.ng.c14n;j!=g?d=j?1:-1:(j||(d=F(a.s,c.s)),d===0&&(d=F(a.p,c.p)),d===0&&k!==null&&(j=k.inNamespace(a.s),k=k.inNamespace(c.s),j!=k?d=j?1:-1:j&&(d=F(a.s,c.s))));return d};D.prototype.collectEdges=function(){var a=this.edges.refs,c=this.edges.props,d;for(d in this.subjects){var j=this.subjects[d],g;for(g in j)if(g!=="@id"){var k=j[g],k=k.constructor!==Array?[k]:k,i;for(i in k){var h=k[i];h.constructor===Object&&"@id"in h&&h["@id"]in this.subjects&&(h=h["@id"],
a[h].all.push({s:d,p:g}),c[d].all.push({s:h,p:g}))}}}var l=this;for(d in a)a[d].all.sort(function(a,c){return l.compareEdges(a,c)}),a[d].bnodes=a[d].all.filter(function(a){return A(a.s)});for(d in c)c[d].all.sort(function(a,c){return l.compareEdges(a,c)}),c[d].bnodes=c[d].all.filter(function(a){return A(a.s)})};var N=function(a,c){var d=!1;if(!("@type"in c)){var j=Object.keys(c).filter(function(a){return a.indexOf("@")!==0});if(j.length===0)d=!0;else if(a.constructor===Object&&"@id"in a){var d=!0,
g;for(g in j)if(!(j[g]in a)){d=!1;break}}}return d},R=function(a,c,d,j,g,k,i,h){var l=c["@id"],q=l in j?j[l]:null;if(("@embed"in d&&d["@embed"]||!("@embed"in d)&&h.defaults.embedOn)&&(q===null||q.autoembed&&!g)){if(q===null)q={},j[l]=q;else if(q.parent!==null){if(q.parent[q.key].constructor===Array){var t=q.parent[q.key],u;for(u in t)if(t[u].constructor===Object&&"@id"in t[u]&&t[u]["@id"]===l){t[u]={"@id":c["@id"]};break}}else q.parent[q.key]={"@id":c["@id"]};var w=function(a){var c=Object.keys(j),
d;for(d in c)d=c[d],d in j&&j[d].parent!==null&&j[d].parent["@id"]===a&&(delete j[d],w(d))};w(l)}q.autoembed=g;q.parent=k;q.key=i;if(d["@explicit"]===!0||h.defaults.explicitOn)for(y in c)y!=="@id"&&!(y in d)&&delete c[y];g=Object.keys(c);for(u in g){var y=g[u];if(y.indexOf("@")!==0){y in d?(k=d[y],i=!1):(k=c[y].constructor===Array?[]:{},i=!0);var l=c[y],l=l.constructor===Array?l:[l],D;for(D in l)l[D].constructor===Object&&"@id"in l[D]&&l[D]["@id"]in a&&(l[D]=a[l[D]["@id"]]);c[y]=Z(a,l,k,j,i,c,y,h)}}for(y in d)if(y.indexOf("@")!==
0&&(!(y in c)||c[y]===null))k=d[y],k.constructor===Array?c[y]=[]:(k.constructor===Array&&(k=k.length>0?k[0]:{}),k["@omitDefault"]===!0||h.defaults.omitDefaultOn||(c[y]="@default"in k?k["@default"]:null))}else c={"@id":c["@id"]};return c},Z=function(a,c,d,j,g,k,i,h){var l=null,q=-1,t;d.constructor===Array?(l=[],t=d,t.length===0&&t.push({})):(t=[d],q=1);for(var u=[],y=0;y<t.length&&q!==0;++y){d=t[y];if(d.constructor!==Object)throw{message:"Invalid JSON-LD frame. Frame must be an object or an array.",
frame:d};u[y]=[];for(var D=0;D<c.length&&q!==0;++D){var A=c[D],F=!1,E="@type";if("@type"in d&&A.constructor===Object&&E in A)for(var C=A[E].constructor===Array?A[E]:[A[E]],G=d[E].constructor===Array?d[E]:[d[E]],B=0;B<G.length&&!F;++B){var E=G[B],H;for(H in C)if(C[H]===E){F=!0;break}}if(F||N(A,d))u[y].push(A),--q}}for(var Wa in u)for(var K in u[Wa])d=t[Wa],c=u[Wa][K],w(c)&&(c=R(a,c,d,j,g,k,i,h)),l===null?l=c:(d=c!==null&&c.constructor===Object&&"@id"in c&&Object.keys(c).length===1&&c["@id"]in j,k===
null&&d||l.push(c));return l};D.prototype.frame=function(a,d,j){var a=c.normalize(a),g=null;if("@context"in d)g=i(d["@context"]),d=c.expand(d);else if(d.constructor===Array){d.length>0&&"@context"in d[0]&&(g=i(d[0]["@context"]));var j=[],k;for(k in d)j.push(c.expand(d[k]));d=j}var j={defaults:{embedOn:!0,explicitOn:!1,omitDefaultOn:!1}},h={};for(k in a)h[a[k]["@id"]]=a[k];a=Z(h,a,d,{},!1,null,null,j);g!==null&&a!==null&&(a=c.compact(g,a));return a}})();var ua={parser:{}};ua.parser.parse=function(a,
c){typeof a==="string"&&(a=JSON.parse(a));return sa.toTriples(a,c)};var X={RDFLoader:function(a){this.precedences=["text/turtle","text/n3","application/json"];this.parsers={"text/turtle":$.parser,"text/n3":$.parser,"application/json":ua.parser};if(a!=null)for(var c in a.parsers)this.parsers[c]=a.parsers[c];if(a&&a.precedences!=null)for(c in this.precedences=a.precedences,a.parsers)y.include(this.precedences,c)||this.precedences.push(c);this.acceptHeaderValue="";for(a=0;a<this.precedences.length;a++)a!=
0?this.acceptHeaderValue=this.acceptHeaderValue+","+this.precedences[a]:this.acceptHeaderValue+=this.precedences[a]}};X.RDFLoader.prototype.registerParser=function(a,c){this.parsers[a]=c;this.precedences.push(a)};X.RDFLoader.prototype.unregisterParser=function(a){delete this.parsers[a];for(var c=[],d=0;d<this.precedences.length;d++)this.precedences[d]!=a&&c.push(this.precedences[d]);this.precedences=c};X.RDFLoader.prototype.setAcceptHeaderPrecedence=function(a){this.precedences=a};X.RDFLoader.prototype.load=
function(a,c,d){var g=this;N.load(a,this.acceptHeaderValue,function(k,j){if(k==!0){var i=j.headers["Content-Type"]||j.headers["content-type"],h=j.data;if(i!=null){var i=i.split(";")[0],t;for(t in g.parsers)if(t.indexOf("/")!=-1){var u=t.split("/");if(u[1]==="*"){if(i.indexOf(u[0])!=-1)return g.tryToParse(g.parsers[t],c,h,d)}else if(i.indexOf(t)!=-1)return g.tryToParse(g.parsers[t],c,h,d);else if(i.indexOf(u[1])!=-1)return g.tryToParse(g.parsers[t],c,h,d)}else if(i.indexOf(t)!=-1)return g.tryToParse(g.parsers[t],
a,c,d);d(!1,"Unknown media type : "+i)}else console.log("Unknown media type"),console.log(j.headers),d(!1,"Uknown media type")}else d(!1,"Network error: "+j)})};X.RDFLoader.prototype.loadFromFile=function(a,c,d,g){try{var k=this;require("fs").readFile(d.split("file:/")[1],function(d,j){if(d)throw d;j=j.toString("utf8");k.tryToParse(a,c,j,g)})}catch(j){g(!1,j)}};X.RDFLoader.prototype.tryToParse=function(a,c,d,g){try{typeof d==="string"&&(d=y.normalizeUnicodeLiterals(d));var k=a.parse(d,c);k!=null?
g(!0,k):g(!1,"parsing error")}catch(j){console.log(j.message),console.log(j.stack),g(!1,"parsing error with mime type : "+j)}};var I={AbstractQueryTree:function(){}};I.AbstractQueryTree.prototype.parseQueryString=function(a){return fa.parser.parse(a)};I.AbstractQueryTree.prototype.parseExecutableUnit=function(a){if(a.kind==="select")return this.parseSelect(a);else if(a.kind==="ask")return this.parseSelect(a);else if(a.kind==="modify")return this.parseSelect(a);else if(a.kind==="construct")return this.parseSelect(a);
else if(a.kind==="insertdata")return this.parseInsertData(a);else if(a.kind==="deletedata")return this.parseInsertData(a);else if(a.kind==="load")return a;else if(a.kind==="clear")return a;else if(a.kind==="drop")return a;else if(a.kind==="create")return a;else throw Error("unknown executable unit: "+a.kind);};I.AbstractQueryTree.prototype.parseSelect=function(a){return a==null?(console.log("error parsing query"),null):(a.pattern=this.build(a.pattern,{freshCounter:0}),a)};I.AbstractQueryTree.prototype.parseInsertData=
function(a){return a==null?(console.log("error parsing query"),null):a};I.AbstractQueryTree.prototype.build=function(a,c){if(a.token==="groupgraphpattern")return this._buildGroupGraphPattern(a,c);else if(a.token==="basicgraphpattern"){var d={kind:"BGP",value:a.triplesContext};return d=I.translatePathExpressionsInBGP(d,c)}else if(a.token==="graphunionpattern"){var d=this.build(a.value[0],c),g=this.build(a.value[1],c);return{kind:"UNION",value:[d,g]}}else if(a.token==="graphgraphpattern")return{kind:"GRAPH",
value:this.build(a.value,c),graph:a.graph};else throw Error("not supported token in query:"+a.token);};I.translatePathExpressionsInBGP=function(a,c){var d,g=[],k,j;for(j=0;j<a.value.length;j++)if(a.value[j].predicate&&a.value[j].predicate.token==="path"){d=a.value[j];k=a.value.slice(j+1);var i=I.translatePathExpression(d,c);d=null;if(i.kind==="BGP")g=g.concat(i.value);else if(i.kind==="ZERO_OR_MORE_PATH"||i.kind==="ONE_OR_MORE_PATH"){j=g.length>0?{kind:"JOIN",lvalue:{kind:"BGP",value:g},rvalue:i}:
i;if(i.kind==="ZERO_OR_MORE_PATH")if(i.y.token==="var"&&i.y.value.indexOf("fresh:")===0&&i.x.token==="var"&&i.x.value.indexOf("fresh:")===0)for(var h=0;h<a.value.length;h++){if(a.value[h].object&&a.value[h].object.token==="var"&&a.value[h].object.value===i.x.value)d=y.clone(a.value[h]),d.object=i.y}else if(i.y.token==="var"&&i.y.value.indexOf("fresh:")===0)for(h=0;h<a.value.length;h++)if(a.value[h].subject&&a.value[h].subject.token==="var"&&a.value[h].subject.value===i.y.value)d=y.clone(a.value[h]),
d.subject=i.x;return k.length>0?(i=I.translatePathExpressionsInBGP({kind:"BGP",value:k},c),d!=null?(g=g.concat([d]).concat(k),{kind:"UNION",value:[{kind:"JOIN",lvalue:j,rvalue:i},{kind:"BGP",value:g}]}):{kind:"JOIN",lvalue:j,rvalue:i}):j}else return i}else g.push(a.value[j]);a.value=g;return a};I.translatePathExpression=function(a,c){if(a.predicate.kind==="element")if(a.predicate.modifier==="+"){a.predicate.modifier=null;var d=I.translatePathExpression(a,c);return{kind:"ONE_OR_MORE_PATH",path:d,x:a.subject,
y:a.object}}else return a.predicate.modifier==="*"?(a.predicate.modifier=null,d=I.translatePathExpression(a,c),{kind:"ZERO_OR_MORE_PATH",path:d,x:a.subject,y:a.object}):(a.predicate=a.predicate.value,{kind:"BGP",value:[a]});else if(a.predicate.kind==="sequence"){for(var d=a.subject,g=a.object,k=a.graph,j,i,h=[],t=0;t<a.predicate.value.length;t++){t!=a.predicate.value.length-1?(j={token:"var",value:"fresh:"+c.freshCounter},c.freshCounter++):j=g;i={subject:d,predicate:a.predicate.value[t],object:j};
if(k!=null)i.graph=y.clone(k);h.push(i);t!=a.predicate.value.length-1&&(d=y.clone(j))}return I.translatePathExpressionsInBGP({kind:"BGP",value:h},c)}};I.AbstractQueryTree.prototype._buildGroupGraphPattern=function(a,c){for(var d=a.filters||[],g={kind:"EMPTY_PATTERN"},k=0;k<a.patterns.length;k++){var j=a.patterns[k];j.token==="optionalgraphpattern"?(j=this.build(j.value,c),g=j.kind==="FILTER"?{kind:"LEFT_JOIN",lvalue:g,rvalue:j.value,filter:j.filter}:{kind:"LEFT_JOIN",lvalue:g,rvalue:j,filter:!0}):
(j=this.build(j,c),g=g.kind=="EMPTY_PATTERN"?j:{kind:"JOIN",lvalue:g,rvalue:j})}if(d.length!=0)if(g.kind==="EMPTY_PATTERN")return{kind:"FILTER",filter:d,value:g};else if(g.kind==="LEFT_JOIN"&&g.filter===!0)return{kind:"FILTER",filter:d,value:g};else if(g.kind==="LEFT_JOIN")return{kind:"FILTER",filter:d,value:g};else if(g.kind==="JOIN")return{kind:"FILTER",filter:d,value:g};else if(g.kind==="UNION")return{kind:"FILTER",filter:d,value:g};else if(g.kind==="GRAPH")return{kind:"FILTER",filter:d,value:g};
else if(g.kind==="BGP")return{kind:"FILTER",filter:d,value:g};else throw Error("Unknow kind of algebra expression: "+g.kind);else return g};I.AbstractQueryTree.prototype.collectBasicTriples=function(a,c){c==null&&(c=[]);if(a.kind==="select")c=this.collectBasicTriples(a.pattern,c);else if(a.kind==="BGP")c=c.concat(a.value);else if(a.kind==="ZERO_OR_MORE_PATH")c=this.collectBasicTriples(a.path);else if(a.kind==="UNION")c=this.collectBasicTriples(a.value[0],c),c=this.collectBasicTriples(a.value[1],c);
else if(a.kind==="GRAPH")c=this.collectBasicTriples(a.value,c);else if(a.kind==="LEFT_JOIN"||a.kind==="JOIN")c=this.collectBasicTriples(a.lvalue,c),c=this.collectBasicTriples(a.rvalue,c);else if(a.kind==="FILTER")c=this.collectBasicTriples(a.value,c);else if(a.kind==="construct")c=this.collectBasicTriples(a.pattern,c);else if(a.kind!=="EMPTY_PATTERN")throw"Unknown pattern: "+a.kind;return c};I.AbstractQueryTree.prototype.bind=function(a,c){if(a.graph!=null&&a.graph.token&&a.graph.token==="var"&&c[a.graph.value]!=
null)a.graph=c[a.graph.value];if(a.filter!=null){for(var d=[],g=0;g<a.filter.length;g++)a.filter[g].value=this._bindFilter(a.filter[g].value,c),d.push(a.filter[g]);a.filter=d}if(a.kind==="select")a.pattern=this.bind(a.pattern,c);else if(a.kind==="BGP")a.value=this._bindTripleContext(a.value,c);else if(a.kind==="ZERO_OR_MORE_PATH"){a.path=this._bindTripleContext(a.path,c);if(a.x&&a.x.token==="var"&&c[a.x.value]!=null)a.x=c[a.x.value];if(a.y&&a.y.token==="var"&&c[a.y.value]!=null)a.y=c[a.y.value]}else if(a.kind===
"UNION")a.value[0]=this.bind(a.value[0],c),a.value[1]=this.bind(a.value[1],c);else if(a.kind==="GRAPH")a.value=this.bind(a.value,c);else if(a.kind==="LEFT_JOIN"||a.kind==="JOIN")a.lvalue=this.bind(a.lvalue,c),a.rvalue=this.bind(a.rvalue,c);else if(a.kind==="FILTER")a.filter=this._bindFilter(a.filter[g].value,c);else if(a.kind!=="EMPTY_PATTERN")throw"Unknown pattern: "+a.kind;return a};I.AbstractQueryTree.prototype._bindTripleContext=function(a,c){for(var d=0;d<a.length;d++){delete a[d].graph;delete a[d].variables;
for(var g in a[d]){var k=a[d][g];k.token==="var"&&c[k.value]!=null&&(a[d][g]=c[k.value])}}return a};I.AbstractQueryTree.prototype._bindFilter=function(a,c){if(a.expressionType!=null){var d=a.expressionType;if(d=="relationalexpression")a.op1=this._bindFilter(a.op1,c),a.op2=this._bindFilter(a.op2,c);else if(d=="conditionalor"||d=="conditionaland")for(d=0;d<a.operands.length;d++)a.operands[d]=this._bindFilter(a.operands[d],c);else if(d=="additiveexpression"){a.summand=this._bindFilter(a.summand,c);for(d=
0;d<a.summands.length;d++)a.summands[d].expression=this._bindFilter(a.summands[d].expression,c)}else if(d=="builtincall")for(d=0;d<a.args.length;d++)a.args[d]=this._bindFilter(a.args[d],c);else if(d=="multiplicativeexpression"){a.factor=this._bindFilter(a.factor,c);for(d=0;d<a.factors.length;d++)a.factors[d].expression=this._bindFilter(a.factors[d].expression,c)}else if(d=="unaryexpression")a.expression=this._bindFilter(a.expression,c);else if(d=="irireforfunction")for(d=0;d<a.factors.args;d++)a.args[d]=
this._bindFilter(a.args[d],c);else if(d=="atomic"&&a.primaryexpression=="var"&&c[a.value.value]!=null)d=c[a.value.value],a.primaryexpression=d.token==="uri"?"iri":"literal",a.value=d}return a};I.AbstractQueryTree.prototype.replace=function(a,c,d,g){if(a.graph!=null&&a.graph.token&&a.graph.token===c.token&&a.graph.value==c.value)a.graph=y.clone(d);if(a.filter!=null){for(var k=[],j=0;j<a.filter.length;j++)a.filter[j].value=this._replaceFilter(a.filter[j].value,c,d,g),k.push(a.filter[j]);a.filter=k}if(a.kind===
"select")a.pattern=this.replace(a.pattern,c,d,g);else if(a.kind==="BGP")a.value=this._replaceTripleContext(a.value,c,d,g);else if(a.kind==="ZERO_OR_MORE_PATH"){a.path=this._replaceTripleContext(a.path,c,d,g);if(a.x&&a.x.token===c.token&&a.value===c.value)a.x=y.clone(d);if(a.y&&a.y.token===c.token&&a.value===c.value)a.y=y.clone(d)}else if(a.kind==="UNION")a.value[0]=this.replace(a.value[0],c,d,g),a.value[1]=this.replace(a.value[1],c,d,g);else if(a.kind==="GRAPH")a.value=this.replace(a.value,c,d);else if(a.kind===
"LEFT_JOIN"||a.kind==="JOIN")a.lvalue=this.replace(a.lvalue,c,d,g),a.rvalue=this.replace(a.rvalue,c,d,g);else if(a.kind==="FILTER")a.value=this._replaceFilter(a.value,c,d,g);else if(a.kind!=="EMPTY_PATTERN")throw"Unknown pattern: "+a.kind;return a};I.AbstractQueryTree.prototype._replaceTripleContext=function(a,c,d,g){for(var k=0;k<a.length;k++)for(var j in a[k]){var i=a[k][j];if(i.token==="var"&&c.token==="var"&&i.value===c.value)a[k][j]=d;else if(i.token==="blank"&&c.token==="blank"&&i.value===c.value)a[k][j]=
d;else if((i.token==="literal"||i.token==="uri")&&(c.token==="literal"||c.token==="uri")&&i.token===c.token&&y.lexicalFormTerm(i,g)[i.token]===y.lexicalFormTerm(c,g)[i.token])a[k][j]=d}return a};I.AbstractQueryTree.prototype._replaceFilter=function(a,c,d,g){if(a.expressionType!=null){var k=a.expressionType;if(k=="relationalexpression")a.op1=this._replaceFilter(a.op1,c,d,g),a.op2=this._replaceFilter(a.op2,c,d,g);else if(k=="conditionalor"||k=="conditionaland")for(k=0;k<a.operands.length;k++)a.operands[k]=
this._replaceFilter(a.operands[k],c,d,g);else if(k=="additiveexpression"){a.summand=this._replaceFilter(a.summand,c,d,g);for(k=0;k<a.summands.length;k++)a.summands[k].expression=this._replaceFilter(a.summands[k].expression,c,d,g)}else if(k=="builtincall")for(k=0;k<a.args.length;k++)a.args[k]=this._replaceFilter(a.args[k],c,d,g);else if(k=="multiplicativeexpression"){a.factor=this._replaceFilter(a.factor,c,d,g);for(k=0;k<a.factors.length;k++)a.factors[k].expression=this._replaceFilter(a.factors[k].expression,
c,d,g)}else if(k=="unaryexpression")a.expression=this._replaceFilter(a.expression,c,d,g);else if(k=="irireforfunction")for(k=0;k<a.factors.args;k++)a.args[k]=this._replaceFilter(a.args[k],c,d,g);else if(k=="atomic"){g=null;if(a.primaryexpression==c.token&&a.value==c.value)g=d.value;else if(a.primaryexpression=="iri"&&c.token=="uri"&&a.value==c.value)g=d.value;if(g!=null)a.primaryexpression=d.token==="uri"?"iri":d.token,a.value=g}}return a};I.AbstractQueryTree.prototype.treeWithUnion=function(a){if(a==
null)return!1;if(a.kind==null)return!1;if(a.kind==="select")return this.treeWithUnion(a.pattern);else if(a.kind==="BGP")return this.treeWithUnion(a.value);else if(a.kind==="ZERO_OR_MORE_PATH")return!1;else if(a.kind==="UNION")if(console.log("UNION!!"),a.value[0].value!=null&&a.value[0].value.variables!=null&&a.value[1].value!=null&&a.value[1].value.variables!=null){if(console.log("COMPARING:"+a.value[0].variables.join("/")),console.log("VS "+a.values[1].variables.join("/")),a.value[0].variables.join("/")===
a.values[1].variables.join("/"))return this.treeWithUnion(a.value[0])?!0:this.treeWithUnion(a.value[1])}else return!0;else if(a.kind==="GRAPH")return!1;else if(a.kind==="LEFT_JOIN"||a.kind==="JOIN")if(this.treeWithUnion(a.lvalue))return!0;else this.treeWithUnion(a.rvalue);else return!1};var fa={};fa.parser=function(){var a={parse:function(a,d){function g(a){var b=a.charCodeAt(0);if(b<=255)var a="x",c=2;else a="u",c=4;var a="\\"+a,f=b.toString(16).toUpperCase(),b=f;c-=f.length;for(f=0;f<c;f++)b="0"+
b;return a+b}function k(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/[\x80-\uFFFF]/g,g)+'"'}function j(a){b<va||(b>va&&(va=b,Ya=[]),Ya.push(a))}function i(){var a="SPARQL@"+b,c=x[a];if(c)return b=c.nextPos,c.result;c=h();c===null&&(c=Va(),c=c!==null?c:null);x[a]={nextPos:b,result:c};return c}function h(){var a="Query@"+b,c=x[a];if(c)return b=c.nextPos,c.result;c=m;m=!1;var d=b,f=b,e=t();if(e!==null){var g=C();g===null&&(g=H(),g===null&&
(g=K(),g===null&&(g=I(),g=g!==null?g:null)));g!==null?e=[e,g]:(e=null,b=f)}else e=null,b=f;f=e!==null?{token:"query",kind:"query",prologue:e[0],units:[e[1]]}:null;f===null&&(f=null,b=d);(m=c)&&f===null&&j("[2] Query");x[a]={nextPos:b,result:f};return f}function t(){var a="Prologue@"+b,c=x[a];if(c)return b=c.nextPos,c.result;c=m;m=!1;var d=b,f=b,e=u(),e=e!==null?e:"";if(e!==null){for(var g=[],r=o();r!==null;)g.push(r),r=o();if(g!==null){for(var r=[],v=q();v!==null;)r.push(v),v=q();r!==null?e=[e,g,
r]:(e=null,b=f)}else e=null,b=f}else e=null,b=f;f=e!==null?{token:"prologue",base:e[0],prefixes:e[2]}:null;f===null&&(f=null,b=d);(m=c)&&f===null&&j("[3] Prologue");x[a]={nextPos:b,result:f};return f}function u(){var d="BaseDecl@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;for(var k=b,f=b,e=[],z=o();z!==null;)e.push(z),z=o();if(e!==null)if(a.substr(b,4)==="BASE"?(z="BASE",b+=4):(z=null,m&&j('"BASE"')),z===null&&(a.substr(b,4)==="base"?(z="base",b+=4):(z=null,m&&j('"base"')),z=z!==null?z:null),
z!==null){for(var r=[],v=o();v!==null;)r.push(v),v=o();r!==null?(v=ka(),v!==null?e=[e,z,r,v]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;else e=null,b=f;f=e!==null?function(a){var b={token:"base"};b.value=a;return b}(e[3]):null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[4] BaseDecl");x[d]={nextPos:b,result:f};return f}function q(){var d="PrefixDecl@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;for(var k=b,f=b,e=[],z=o();z!==null;)e.push(z),z=o();if(e!==null)if(a.substr(b,6)==="PREFIX"?(z="PREFIX",
b+=6):(z=null,m&&j('"PREFIX"')),z===null&&(a.substr(b,6)==="prefix"?(z="prefix",b+=6):(z=null,m&&j('"prefix"')),z=z!==null?z:null),z!==null){for(var r=[],v=o();v!==null;)r.push(v),v=o();if(r!==null)if(v=Ba(),v!==null){for(var n=[],i=o();i!==null;)n.push(i),i=o();n!==null?(i=ka(),i!==null?e=[e,z,r,v,n,i]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f;f=e!==null?function(a,b){var e={token:"prefix"};e.prefix=a;e.local=b;return e}(e[3],e[5]):null;f===null&&
(f=null,b=k);(m=g)&&f===null&&j("[5] PrefixDecl");x[d]={nextPos:b,result:f};return f}function w(){var a="TURTLE@"+b,c=x[a];if(c)return b=c.nextPos,c.result;for(var c=b,d=[],f=y();f!==null;)d.push(f),f=y();d=d!==null?d:null;d===null&&(d=null,b=c);x[a]={nextPos:b,result:d};return d}function y(){var d="statement@"+b,g=x[d];if(g)return b=g.nextPos,g.result;for(var k=g=b,f=[],e=o();e!==null;)f.push(e),e=o();if(f!==null)if(e=A(),e!==null){for(var z=[],r=o();r!==null;)z.push(r),r=o();if(z!==null)if(a.substr(b,
1)==="."?(r=".",b+=1):(r=null,m&&j('"."')),r!==null){for(var v=[],n=o();n!==null;)v.push(n),n=o();v!==null?f=[f,e,z,r,v]:(f=null,b=k)}else f=null,b=k;else f=null,b=k}else f=null,b=k;else f=null,b=k;k=f!==null?f[1]:null;k===null&&(k=null,b=g);if(k!==null)g=k;else{k=g=b;f=[];for(e=o();e!==null;)f.push(e),e=o();if(f!==null)if(e=la(),e!==null){z=[];for(r=o();r!==null;)z.push(r),r=o();z!==null?f=[f,e,z]:(f=null,b=k)}else f=null,b=k;else f=null,b=k;k=f!==null?f[1]:null;k===null&&(k=null,b=g);if(k!==null)g=
k;else{g=o();if(g!==null)for(k=[];g!==null;)k.push(g),g=o();else k=null;g=k!==null?k:null}}x[d]={nextPos:b,result:g};return g}function A(){var a="directive@"+b,c=x[a];if(c)return b=c.nextPos,c.result;c=F();c===null&&(c=E(),c=c!==null?c:null);x[a]={nextPos:b,result:c};return c}function E(){var d="base@"+b,g=x[d];if(g)return b=g.nextPos,g.result;for(var k=g=b,f=[],e=o();e!==null;)f.push(e),e=o();if(f!==null)if(a.substr(b,5)==="@base"?(e="@base",b+=5):(e=null,m&&j('"@base"')),e!==null){var z=o();if(z!==
null)for(var r=[];z!==null;)r.push(z),z=o();else r=null;r!==null?(z=ka(),z!==null?f=[f,e,r,z]:(f=null,b=k)):(f=null,b=k)}else f=null,b=k;else f=null,b=k;k=f!==null?function(a){base={token:"base"};base.value=a;return base}(f[3]):null;k===null&&(k=null,b=g);x[d]={nextPos:b,result:k};return k}function F(){var d="prefixID@"+b,g=x[d];if(g)return b=g.nextPos,g.result;for(var k=g=b,f=[],e=o();e!==null;)f.push(e),e=o();if(f!==null)if(a.substr(b,7)==="@prefix"?(e="@prefix",b+=7):(e=null,m&&j('"@prefix"')),
e!==null){var z=o();if(z!==null)for(var r=[];z!==null;)r.push(z),z=o();else r=null;if(r!==null)if(z=Za(),z=z!==null?z:"",z!==null){if(a.substr(b,1)===":"){var v=":";b+=1}else v=null,m&&j('":"');if(v!==null){for(var n=[],i=o();i!==null;)n.push(i),i=o();n!==null?(i=ka(),i!==null?f=[f,e,r,z,v,n,i]:(f=null,b=k)):(f=null,b=k)}else f=null,b=k}else f=null,b=k;else f=null,b=k}else f=null,b=k;else f=null,b=k;k=f!==null?function(a,b){prefix={token:"prefix"};prefix.prefix=a;prefix.local=b;return prefix}(f[3],
f[6]):null;k===null&&(k=null,b=g);x[d]={nextPos:b,result:k};return k}function C(){var a="SelectQuery@"+b,c=x[a];if(c)return b=c.nextPos,c.result;c=m;m=!1;var d=b,f=b,e=B();if(e!==null){for(var g=[],r=o();r!==null;)g.push(r),r=o();if(g!==null){for(var r=[],k=J();k!==null;)r.push(k),k=J();if(r!==null){for(var k=[],n=o();n!==null;)k.push(n),n=o();if(k!==null)if(n=Z(),n!==null){for(var i=[],h=o();h!==null;)i.push(h),h=o();if(i!==null)if(h=T(),h!==null){for(var l=[],q=o();q!==null;)l.push(q),q=o();l!==
null?(q=sa(),q!==null?e=[e,g,r,k,n,i,h,l,q]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f}else e=null,b=f}else e=null,b=f;f=e!==null?function(a,b,c,e){for(var f={named:[],implicit:[]},d=0;d<b.length;d++){var j=b[d];j.kind==="default"?f.implicit.push(j.graph):f.named.push(j.graph)}f.named.length===0&&f.implicit.length===0&&f.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});
b={kind:"select",token:"executableunit"};b.dataset=f;b.projection=a.vars;b.modifier=a.modifier;b.pattern=c;if(e!=null&&e.limit!=null)b.limit=e.limit;if(e!=null&&e.offset!=null)b.offset=e.offset;if(e!=null&&e.order!=null&&e.order!="")b.order=e.order;if(e!=null&&e.group!=null)b.group=e.group;return b}(e[0],e[2],e[4],e[6]):null;f===null&&(f=null,b=d);(m=c)&&f===null&&j("[6] SelectQuery");x[a]={nextPos:b,result:f};return f}function G(){var a="SubSelect@"+b,c=x[a];if(c)return b=c.nextPos,c.result;c=m;
m=!1;var d=b,f=B();if(f!==null){var e=Z();if(e!==null){var g=T();g!==null?f=[f,e,g]:(f=null,b=d)}else f=null,b=d}else f=null,b=d;(m=c)&&f===null&&j("[7] SubSelect");x[a]={nextPos:b,result:f};return f}function B(){var d="SelectClause@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;for(var k=b,f=b,e=[],z=o();z!==null;)e.push(z),z=o();if(e!==null)if(a.substr(b,6)==="SELECT"?(z="SELECT",b+=6):(z=null,m&&j('"SELECT"')),z===null&&(a.substr(b,6)==="select"?(z="select",b+=6):(z=null,m&&j('"select"')),
z=z!==null?z:null),z!==null){for(var r=[],v=o();v!==null;)r.push(v),v=o();if(r!==null)if(a.substr(b,8)==="DISTINCT"?(v="DISTINCT",b+=8):(v=null,m&&j('"DISTINCT"')),v===null&&(a.substr(b,8)==="distinct"?(v="distinct",b+=8):(v=null,m&&j('"distinct"')),v=v!==null?v:null),v===null&&(a.substr(b,7)==="REDUCED"?(v="REDUCED",b+=7):(v=null,m&&j('"REDUCED"')),v===null&&(a.substr(b,7)==="reduced"?(v="reduced",b+=7):(v=null,m&&j('"reduced"')),v=v!==null?v:null),v=v!==null?v:null),v=v!==null?v:"",v!==null){for(var n=
[],i=o();i!==null;)n.push(i),i=o();if(n!==null){for(var h=b,l=[],q=o();q!==null;)l.push(q),q=o();if(l!==null)if(q=O(),q!==null){for(var t=[],u=o();u!==null;)t.push(u),u=o();t!==null?l=[l,q,t]:(l=null,b=h)}else l=null,b=h;else l=null,b=h;if(l!==null)h=l;else{h=b;l=[];for(q=o();q!==null;)l.push(q),q=o();if(l!==null)if(a.substr(b,1)==="("?(q="(",b+=1):(q=null,m&&j('"("')),q!==null){t=[];for(u=o();u!==null;)t.push(u),u=o();if(t!==null)if(u=L(),u!==null){for(var w=[],y=o();y!==null;)w.push(y),y=o();if(w!==
null)if(a.substr(b,2)==="AS"?(y="AS",b+=2):(y=null,m&&j('"AS"')),y===null&&(a.substr(b,2)==="as"?(y="as",b+=2):(y=null,m&&j('"as"')),y=y!==null?y:null),y!==null){for(var ga=[],D=o();D!==null;)ga.push(D),D=o();if(ga!==null)if(D=O(),D!==null){for(var A=[],Q=o();Q!==null;)A.push(Q),Q=o();if(A!==null)if(a.substr(b,1)===")"?(Q=")",b+=1):(Q=null,m&&j('")"')),Q!==null){for(var M=[],F=o();F!==null;)M.push(F),F=o();M!==null?l=[l,q,t,u,w,y,ga,D,A,Q,M]:(l=null,b=h)}else l=null,b=h;else l=null,b=h}else l=null,
b=h;else l=null,b=h}else l=null,b=h;else l=null,b=h}else l=null,b=h;else l=null,b=h}else l=null,b=h;else l=null,b=h;h=l!==null?l:null}if(h!==null)for(i=[];h!==null;){i.push(h);h=b;l=[];for(q=o();q!==null;)l.push(q),q=o();if(l!==null)if(q=O(),q!==null){t=[];for(u=o();u!==null;)t.push(u),u=o();t!==null?l=[l,q,t]:(l=null,b=h)}else l=null,b=h;else l=null,b=h;if(l!==null)h=l;else{h=b;l=[];for(q=o();q!==null;)l.push(q),q=o();if(l!==null)if(a.substr(b,1)==="("?(q="(",b+=1):(q=null,m&&j('"("')),q!==null){t=
[];for(u=o();u!==null;)t.push(u),u=o();if(t!==null)if(u=L(),u!==null){w=[];for(y=o();y!==null;)w.push(y),y=o();if(w!==null)if(a.substr(b,2)==="AS"?(y="AS",b+=2):(y=null,m&&j('"AS"')),y===null&&(a.substr(b,2)==="as"?(y="as",b+=2):(y=null,m&&j('"as"')),y=y!==null?y:null),y!==null){ga=[];for(D=o();D!==null;)ga.push(D),D=o();if(ga!==null)if(D=O(),D!==null){A=[];for(Q=o();Q!==null;)A.push(Q),Q=o();if(A!==null)if(a.substr(b,1)===")"?(Q=")",b+=1):(Q=null,m&&j('")"')),Q!==null){M=[];for(F=o();F!==null;)M.push(F),
F=o();M!==null?l=[l,q,t,u,w,y,ga,D,A,Q,M]:(l=null,b=h)}else l=null,b=h;else l=null,b=h}else l=null,b=h;else l=null,b=h}else l=null,b=h;else l=null,b=h}else l=null,b=h;else l=null,b=h}else l=null,b=h;else l=null,b=h;h=l!==null?l:null}}else i=null;if(i===null){i=b;h=[];for(l=o();l!==null;)h.push(l),l=o();if(h!==null)if(a.substr(b,1)==="*"?(l="*",b+=1):(l=null,m&&j('"*"')),l!==null){q=[];for(t=o();t!==null;)q.push(t),t=o();q!==null?h=[h,l,q]:(h=null,b=i)}else h=null,b=i;else h=null,b=i;i=h!==null?h:
null}i!==null?e=[e,z,r,v,n,i]:(e=null,b=f)}else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f;f=e!==null?function(a,b){var c=[];if(b.length===3&&b[1]==="*")return{vars:[{token:"variable",kind:"*"}],modifier:zb(a)};for(var e=0;e<b.length;e++){var f=b[e];f.length===3?c.push({token:"variable",kind:"var",value:f[1]}):c.push({token:"variable",kind:"aliased",expression:f[3],alias:f[7]})}return{vars:c,modifier:zb(a)}}(e[3],e[5]):null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[8] SelectClause");
x[d]={nextPos:b,result:f};return f}function H(){var d="ConstructQuery@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;for(var k=b,f=b,e=[],z=o();z!==null;)e.push(z),z=o();if(e!==null)if(a.substr(b,9)==="CONSTRUCT"?(z="CONSTRUCT",b+=9):(z=null,m&&j('"CONSTRUCT"')),z===null&&(a.substr(b,9)==="construct"?(z="construct",b+=9):(z=null,m&&j('"construct"')),z=z!==null?z:null),z!==null){for(var r=[],v=o();v!==null;)r.push(v),v=o();if(r!==null)if(v=Ab(),v!==null){for(var n=[],i=o();i!==null;)n.push(i),
i=o();if(n!==null){for(var i=[],h=J();h!==null;)i.push(h),h=J();if(i!==null){for(var h=[],l=o();l!==null;)h.push(l),l=o();if(h!==null)if(l=Z(),l!==null){for(var q=[],t=o();t!==null;)q.push(t),t=o();q!==null?(t=T(),t!==null?e=[e,z,r,v,n,i,h,l,q,t]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f}else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f;f=e!==null?function(a,b,c,e){for(var f={named:[],implicit:[]},d=0;d<b.length;d++){var j=b[d];j.kind===
"default"?f.implicit.push(j.graph):f.named.push(j.graph)}f.named.length===0&&f.implicit.length===0&&f.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});b={kind:"construct",token:"executableunit"};b.dataset=f;b.template=a;b.pattern=c;if(e!=null&&e.limit!=null)b.limit=e.limit;if(e!=null&&e.offset!=null)b.offset=e.offset;if(e!=null&&e.order!=null&&e.order!="")b.order=e.order;return b}(e[3],e[5],e[7],e[9]):null;f===null&&(f=null,b=
k);(m=g)&&f===null&&j("[9] ConstructQuery");x[d]={nextPos:b,result:f};return f}function K(){var d="DescribeQuery@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b;if(a.substr(b,8)==="DESCRIBE"){var f="DESCRIBE";b+=8}else f=null,m&&j('"DESCRIBE"');if(f!==null){var e=ha();if(e!==null)for(var z=[];e!==null;)z.push(e),e=ha();else z=null;z!==null?e=z:(a.substr(b,1)==="*"?(e="*",b+=1):(e=null,m&&j('"*"')),e=e!==null?e:null);if(e!==null){for(var z=[],r=J();r!==null;)z.push(r),r=J();if(z!==null)if(r=
Z(),r=r!==null?r:"",r!==null){var v=T();v!==null?f=[f,e,z,r,v]:(f=null,b=k)}else f=null,b=k;else f=null,b=k}else f=null,b=k}else f=null,b=k;(m=g)&&f===null&&j("[10] DescribeQuery");x[d]={nextPos:b,result:f};return f}function I(){var d="AskQuery@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;for(var k=b,f=b,e=[],z=o();z!==null;)e.push(z),z=o();if(e!==null)if(a.substr(b,3)==="ASK"?(z="ASK",b+=3):(z=null,m&&j('"ASK"')),z===null&&(a.substr(b,3)==="ask"?(z="ask",b+=3):(z=null,m&&j('"ask"')),z=z!==
null?z:null),z!==null){for(var r=[],v=o();v!==null;)r.push(v),v=o();if(r!==null){for(var v=[],n=J();n!==null;)v.push(n),n=J();if(v!==null){for(var n=[],i=o();i!==null;)n.push(i),i=o();n!==null?(i=Z(),i!==null?e=[e,z,r,v,n,i]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f}else e=null,b=f}else e=null,b=f;else e=null,b=f;f=e!==null?function(a,b){for(var e={named:[],implicit:[]},c=0;c<a.length;c++){var f=a[c];f.kind==="implicit"?e.implicit.push(f.graph):e.named.push(f.graph)}e.named.length===0&&e.implicit.length===
0&&e.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});c={kind:"ask",token:"executableunit"};c.dataset=e;c.pattern=b;return c}(e[3],e[5]):null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[11] AskQuery");x[d]={nextPos:b,result:f};return f}function J(){var d="DatasetClause@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=b;if(a.substr(b,4)==="FROM"){var e="FROM";b+=4}else e=null,m&&j('"FROM"');e===null&&(a.substr(b,
4)==="from"?(e="from",b+=4):(e=null,m&&j('"from"')),e=e!==null?e:null);if(e!==null){for(var z=[],r=o();r!==null;)z.push(r),r=o();if(z!==null)if(r=N(),r===null&&(r=R(),r=r!==null?r:null),r!==null){for(var v=[],n=o();n!==null;)v.push(n),n=o();v!==null?e=[e,z,r,v]:(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;f=e!==null?e[2]:null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[12] DatasetClause");x[d]={nextPos:b,result:f};return f}function N(){var a="DefaultGraphClause@"+b,c=x[a];if(c)return b=
c.nextPos,c.result;c=m;m=!1;for(var d=b,f=b,e=[],g=o();g!==null;)e.push(g),g=o();e!==null?(g=P(),g!==null?e=[e,g]:(e=null,b=f)):(e=null,b=f);f=e!==null?{graph:e[1],kind:"default",token:"graphClause"}:null;f===null&&(f=null,b=d);(m=c)&&f===null&&j("[13] DefaultGraphClause");x[a]={nextPos:b,result:f};return f}function R(){var d="NamedGraphClause@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=b;if(a.substr(b,5)==="NAMED"){var e="NAMED";b+=5}else e=null,m&&j('"NAMED"');e===null&&(a.substr(b,
5)==="named"?(e="named",b+=5):(e=null,m&&j('"named"')),e=e!==null?e:null);if(e!==null){for(var z=[],r=o();r!==null;)z.push(r),r=o();z!==null?(r=P(),r!==null?e=[e,z,r]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;f=e!==null?{graph:e[2],kind:"named",token:"graphCluase"}:null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[14] NamedGraphClause");x[d]={nextPos:b,result:f};return f}function Z(){var d="WhereClause@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=b;if(a.substr(b,5)==="WHERE"){var e=
"WHERE";b+=5}else e=null,m&&j('"WHERE"');e===null&&(a.substr(b,5)==="where"?(e="where",b+=5):(e=null,m&&j('"where"')),e=e!==null?e:null);e=e!==null?e:"";if(e!==null){for(var z=[],r=o();r!==null;)z.push(r),r=o();if(z!==null)if(r=U(),r!==null){for(var v=[],n=o();n!==null;)v.push(n),n=o();v!==null?e=[e,z,r,v]:(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;f=e!==null?e[2]:null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[16] WhereClause");x[d]={nextPos:b,result:f};return f}function T(){var a=
"SolutionModifier@"+b,c=x[a];if(c)return b=c.nextPos,c.result;c=m;m=!1;var d=b,f=b,e=X(),e=e!==null?e:"";if(e!==null){var g=$(),g=g!==null?g:"";if(g!==null){var r=da(),r=r!==null?r:"";if(r!==null){var k=ra(),k=k!==null?k:"";k!==null?e=[e,g,r,k]:(e=null,b=f)}else e=null,b=f}else e=null,b=f}else e=null,b=f;f=e!==null?function(a,b,c){var e={};if(c!=null){if(c.limit!=null)e.limit=c.limit;if(c.offset!=null)e.offset=c.offset}if(a!=null)e.group=a;e.order=b;return e}(e[0],e[2],e[3]):null;f===null&&(f=null,
b=d);(m=c)&&f===null&&j("[17] SolutionModifier");x[a]={nextPos:b,result:f};return f}function X(){var d="GroupClause@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=b;if(a.substr(b,5)==="GROUP"){var e="GROUP";b+=5}else e=null,m&&j('"GROUP"');e===null&&(a.substr(b,5)==="group"?(e="group",b+=5):(e=null,m&&j('"group"')),e=e!==null?e:null);if(e!==null){for(var i=[],r=o();r!==null;)i.push(r),r=o();if(i!==null)if(a.substr(b,2)==="BY"?(r="BY",b+=2):(r=null,m&&j('"BY"')),r===null&&(a.substr(b,
2)==="by"?(r="by",b+=2):(r=null,m&&j('"by"')),r=r!==null?r:null),r!==null){for(var v=[],n=o();n!==null;)v.push(n),n=o();if(v!==null){n=W();if(n!==null)for(var h=[];n!==null;)h.push(n),n=W();else h=null;h!==null?e=[e,i,r,v,h]:(e=null,b=f)}else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;f=e!==null?e[4]:null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[18] GroupClause");x[d]={nextPos:b,result:f};return f}function W(){var d="GroupCondition@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=
m;m=!1;for(var k=b,f=b,e=[],i=o();i!==null;)e.push(i),i=o();if(e!==null)if(i=Ca(),i!==null){for(var r=[],v=o();v!==null;)r.push(v),v=o();r!==null?e=[e,i,r]:(e=null,b=f)}else e=null,b=f;else e=null,b=f;f=e!==null?e[1]:null;f===null&&(f=null,b=k);if(f!==null)k=f;else{f=k=b;e=[];for(i=o();i!==null;)e.push(i),i=o();if(e!==null)if(i=$a(),i!==null){r=[];for(v=o();v!==null;)r.push(v),v=o();r!==null?e=[e,i,r]:(e=null,b=f)}else e=null,b=f;else e=null,b=f;f=e!==null?e[1]:null;f===null&&(f=null,b=k);if(f!==
null)k=f;else{f=k=b;e=[];for(i=o();i!==null;)e.push(i),i=o();if(e!==null)if(a.substr(b,1)==="("?(i="(",b+=1):(i=null,m&&j('"("')),i!==null){r=[];for(v=o();v!==null;)r.push(v),v=o();if(r!==null)if(v=L(),v!==null){for(var n=[],h=o();h!==null;)n.push(h),h=o();if(n!==null){h=b;if(a.substr(b,2)==="AS"){var s="AS";b+=2}else s=null,m&&j('"AS"');s===null&&(a.substr(b,2)==="as"?(s="as",b+=2):(s=null,m&&j('"as"')),s=s!==null?s:null);if(s!==null){for(var l=[],q=o();q!==null;)l.push(q),q=o();l!==null?(q=O(),
q!==null?s=[s,l,q]:(s=null,b=h)):(s=null,b=h)}else s=null,b=h;h=s!==null?s:"";if(h!==null){s=[];for(l=o();l!==null;)s.push(l),l=o();if(s!==null)if(a.substr(b,1)===")"?(l=")",b+=1):(l=null,m&&j('")"')),l!==null){for(var q=[],t=o();t!==null;)q.push(t),t=o();q!==null?e=[e,i,r,v,n,h,s,l,q]:(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f}else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f;f=e!==null?e[5].length!=0?{token:"aliased_expression",expression:e[3],alias:e[5][2]}:
e[3]:null;f===null&&(f=null,b=k);if(f!==null)k=f;else{f=k=b;e=[];for(i=o();i!==null;)e.push(i),i=o();if(e!==null)if(i=O(),i!==null){r=[];for(v=o();v!==null;)r.push(v),v=o();r!==null?e=[e,i,r]:(e=null,b=f)}else e=null,b=f;else e=null,b=f;f=e!==null?e[1]:null;f===null&&(f=null,b=k);k=f!==null?f:null}}}(m=g)&&k===null&&j("[19] GroupCondition");x[d]={nextPos:b,result:k};return k}function $(){var d="HavingClause@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b;if(a.substr(b,6)==="HAVING"){var f=
"HAVING";b+=6}else f=null,m&&j('"HAVING"');if(f!==null){var e=wa();if(e!==null)for(var i=[];e!==null;)i.push(e),e=wa();else i=null;i!==null?f=[f,i]:(f=null,b=k)}else f=null,b=k;(m=g)&&f===null&&j("[20] HavingClause");x[d]={nextPos:b,result:f};return f}function da(){var d="OrderClause@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=b;if(a.substr(b,5)==="ORDER"){var e="ORDER";b+=5}else e=null,m&&j('"ORDER"');e===null&&(a.substr(b,5)==="order"?(e="order",b+=5):(e=null,m&&j('"order"')),
e=e!==null?e:null);if(e!==null){for(var i=[],r=o();r!==null;)i.push(r),r=o();if(i!==null)if(a.substr(b,2)==="BY"?(r="BY",b+=2):(r=null,m&&j('"BY"')),r===null&&(a.substr(b,2)==="by"?(r="by",b+=2):(r=null,m&&j('"by"')),r=r!==null?r:null),r!==null){for(var v=[],n=o();n!==null;)v.push(n),n=o();if(v!==null){var h=fa();if(h!==null)for(n=[];h!==null;)n.push(h),h=fa();else n=null;if(n!==null){for(var h=[],s=o();s!==null;)h.push(s),s=o();h!==null?e=[e,i,r,v,n,h]:(e=null,b=f)}else e=null,b=f}else e=null,b=
f}else e=null,b=f;else e=null,b=f}else e=null,b=f;f=e!==null?e[4]:null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[22] OrderClause");x[d]={nextPos:b,result:f};return f}function fa(){var d="OrderCondition@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=b;if(a.substr(b,3)==="ASC"){var e="ASC";b+=3}else e=null,m&&j('"ASC"');e===null&&(a.substr(b,3)==="asc"?(e="asc",b+=3):(e=null,m&&j('"asc"')),e===null&&(a.substr(b,4)==="DESC"?(e="DESC",b+=4):(e=null,m&&j('"DESC"')),e===null&&(a.substr(b,
4)==="desc"?(e="desc",b+=4):(e=null,m&&j('"desc"')),e=e!==null?e:null)));if(e!==null){for(var i=[],r=o();r!==null;)i.push(r),r=o();if(i!==null)if(r=Da(),r!==null){for(var v=[],n=o();n!==null;)v.push(n),n=o();v!==null?e=[e,i,r,v]:(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;f=e!==null?{direction:e[0].toUpperCase(),expression:e[2]}:null;f===null&&(f=null,b=k);if(f!==null)k=f;else{f=k=b;e=wa();e===null&&(e=O(),e=e!==null?e:null);if(e!==null){i=[];for(r=o();r!==null;)i.push(r),r=o();i!==
null?e=[e,i]:(e=null,b=f)}else e=null,b=f;f=e!==null?function(a){a.token==="var"&&(a={token:"expression",expressionType:"atomic",primaryexpression:"var",value:a});return{direction:"ASC",expression:a}}(e[0]):null;f===null&&(f=null,b=k);k=f!==null?f:null}(m=g)&&k===null&&j("[23] OrderCondition");x[d]={nextPos:b,result:k};return k}function ra(){var a="LimitOffsetClauses@"+b,c=x[a];if(c)return b=c.nextPos,c.result;c=m;m=!1;var d=b,f=b,e=Ta();if(e!==null){var g=Ua(),g=g!==null?g:"";g!==null?e=[e,g]:(e=
null,b=f)}else e=null,b=f;e!==null?f=e:(f=b,e=Ua(),e!==null?(g=Ta(),g=g!==null?g:"",g!==null?e=[e,g]:(e=null,b=f)):(e=null,b=f),f=e!==null?e:null);f=f!==null?function(a){for(var b={},c=0;c<a.length;c++){var e=a[c];if(e.limit!=null)b.limit=e.limit;else if(e.offset!=null)b.offset=e.offset}return b}(f):null;f===null&&(f=null,b=d);(m=c)&&f===null&&j("[24] LimitOffsetClauses");x[a]={nextPos:b,result:f};return f}function Ta(){var d="LimitClause@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=
b,f=b;if(a.substr(b,5)==="LIMIT"){var e="LIMIT";b+=5}else e=null,m&&j('"LIMIT"');e===null&&(a.substr(b,5)==="limit"?(e="limit",b+=5):(e=null,m&&j('"limit"')),e=e!==null?e:null);if(e!==null){for(var i=[],r=o();r!==null;)i.push(r),r=o();if(i!==null)if(r=aa(),r!==null){for(var v=[],n=o();n!==null;)v.push(n),n=o();v!==null?e=[e,i,r,v]:(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;f=e!==null?{limit:parseInt(e[2].value)}:null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[25] LimitClause");
x[d]={nextPos:b,result:f};return f}function Ua(){var d="OffsetClause@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=b;if(a.substr(b,6)==="OFFSET"){var e="OFFSET";b+=6}else e=null,m&&j('"OFFSET"');e===null&&(a.substr(b,6)==="offset"?(e="offset",b+=6):(e=null,m&&j('"offset"')),e=e!==null?e:null);if(e!==null){for(var i=[],r=o();r!==null;)i.push(r),r=o();if(i!==null)if(r=aa(),r!==null){for(var v=[],n=o();n!==null;)v.push(n),n=o();v!==null?e=[e,i,r,v]:(e=null,b=f)}else e=null,b=f;else e=
null,b=f}else e=null,b=f;f=e!==null?{offset:parseInt(e[2].value)}:null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[26] OffsetClause");x[d]={nextPos:b,result:f};return f}function sa(){var d="BindingsClause@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b;if(a.substr(b,8)==="BINDINGS"){var f="BINDINGS";b+=8}else f=null,m&&j('"BINDINGS"');if(f!==null){for(var e=[],i=O();i!==null;)e.push(i),i=O();if(e!==null)if(a.substr(b,1)==="{"?(i="{",b+=1):(i=null,m&&j('"{"')),i!==null){var r=[],v=b;if(a.substr(b,
1)==="("){var n="(";b+=1}else n=null,m&&j('"("');if(n!==null){var h=ta();if(h!==null)for(var o=[];h!==null;)o.push(h),h=ta();else o=null;o!==null?(a.substr(b,1)===")"?(h=")",b+=1):(h=null,m&&j('")"')),h!==null?n=[n,o,h]:(n=null,b=v)):(n=null,b=v)}else n=null,b=v;n!==null?v=n:(v=ia(),v=v!==null?v:null);for(;v!==null;){r.push(v);v=b;a.substr(b,1)==="("?(n="(",b+=1):(n=null,m&&j('"("'));if(n!==null){h=ta();if(h!==null)for(o=[];h!==null;)o.push(h),h=ta();else o=null;o!==null?(a.substr(b,1)===")"?(h=")",
b+=1):(h=null,m&&j('")"')),h!==null?n=[n,o,h]:(n=null,b=v)):(n=null,b=v)}else n=null,b=v;n!==null?v=n:(v=ia(),v=v!==null?v:null)}r!==null?(a.substr(b,1)==="}"?(v="}",b+=1):(v=null,m&&j('"}"')),v!==null?f=[f,e,i,r,v]:(f=null,b=k)):(f=null,b=k)}else f=null,b=k;else f=null,b=k}else f=null,b=k;k=f!==null?f:"";(m=g)&&k===null&&j("[27] BindingsClause");x[d]={nextPos:b,result:k};return k}function ta(){var d="BindingValue@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=P();k===null&&(k=Ea(),k===
null&&(k=Fa(),k===null&&(k=Ga(),k===null&&(a.substr(b,5)==="UNDEF"?(k="UNDEF",b+=5):(k=null,m&&j('"UNDEF"')),k=k!==null?k:null))));(m=g)&&k===null&&j("[28] BindingValue");x[d]={nextPos:b,result:k};return k}function Va(){var d="Update@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=b,e=t();if(e!==null){for(var i=[],r=o();r!==null;)i.push(r),r=o();if(i!==null)if(r=ua(),r!==null){for(var v=b,n=[],h=o();h!==null;)n.push(h),h=o();if(n!==null)if(a.substr(b,1)===";"?(h=";",b+=1):(h=null,m&&
j('";"')),h!==null){for(var s=[],l=o();l!==null;)s.push(l),l=o();s!==null?(l=Va(),l=l!==null?l:"",l!==null?n=[n,h,s,l]:(n=null,b=v)):(n=null,b=v)}else n=null,b=v;else n=null,b=v;v=n!==null?n:"";v!==null?e=[e,i,r,v]:(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;f=e!==null?function(a,b,c){var e={token:"query",kind:"update"};e.prologue=a;a=[b];c.length!=null&&c[3]!=null&&c[3].units!=null&&(a=a.concat(c[3].units));e.units=a;return e}(e[0],e[2],e[3]):null;f===null&&(f=null,b=k);(m=g)&&f===
null&&j("[30] Update");x[d]={nextPos:b,result:f};return f}function ua(){var a="Update1@"+b,c=x[a];if(c)return b=c.nextPos,c.result;c=m;m=!1;var d=qb();d===null&&(d=tb(),d===null&&(d=ub(),d===null&&(d=vb(),d===null&&(d=wb(),d===null&&(d=xb(),d===null&&(d=rb(),d===null&&(d=sb(),d=d!==null?d:null)))))));(m=c)&&d===null&&j("[31] Update1");x[a]={nextPos:b,result:d};return d}function qb(){var d="Load@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=b;if(a.substr(b,4)==="LOAD"){var e="LOAD";
b+=4}else e=null,m&&j('"LOAD"');e===null&&(a.substr(b,4)==="load"?(e="load",b+=4):(e=null,m&&j('"load"')),e=e!==null?e:null);if(e!==null){for(var i=[],r=o();r!==null;)i.push(r),r=o();if(i!==null)if(r=P(),r!==null){for(var v=[],n=o();n!==null;)v.push(n),n=o();if(v!==null){n=b;if(a.substr(b,4)==="INTO"){var h="INTO";b+=4}else h=null,m&&j('"INTO"');h===null&&(a.substr(b,4)==="into"?(h="into",b+=4):(h=null,m&&j('"into"')),h=h!==null?h:null);if(h!==null){for(var s=[],l=o();l!==null;)s.push(l),l=o();s!==
null?(l=Ha(),l!==null?h=[h,s,l]:(h=null,b=n)):(h=null,b=n)}else h=null,b=n;n=h!==null?h:"";n!==null?e=[e,i,r,v,n]:(e=null,b=f)}else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;f=e!==null?function(a,b){var c={kind:"load",token:"executableunit"};c.sourceGraph=a;c.destinyGraph=b[2];return c}(e[2],e[4]):null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[32] Load");x[d]={nextPos:b,result:f};return f}function tb(){var d="Clear@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=
b;if(a.substr(b,5)==="CLEAR"){var e="CLEAR";b+=5}else e=null,m&&j('"CLEAR"');e===null&&(a.substr(b,5)==="clear"?(e="clear",b+=5):(e=null,m&&j('"clear"')),e=e!==null?e:null);if(e!==null){for(var i=[],r=o();r!==null;)i.push(r),r=o();if(i!==null)if(a.substr(b,6)==="SILENT"?(r="SILENT",b+=6):(r=null,m&&j('"SILENT"')),r===null&&(a.substr(b,6)==="silent"?(r="silent",b+=6):(r=null,m&&j('"silent"')),r=r!==null?r:null),r=r!==null?r:"",r!==null){for(var v=[],n=o();n!==null;)v.push(n),n=o();v!==null?(n=ab(),
n!==null?e=[e,i,r,v,n]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;f=e!==null?function(a){var b={kind:"clear",token:"executableunit"};b.destinyGraph=a;return b}(e[4]):null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[33] Clear");x[d]={nextPos:b,result:f};return f}function ub(){var d="Drop@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=b;if(a.substr(b,4)==="DROP"){var e="DROP";b+=4}else e=null,m&&j('"DROP"');e===null&&(a.substr(b,4)==="drop"?(e="drop",
b+=4):(e=null,m&&j('"drop"')),e=e!==null?e:null);if(e!==null){for(var i=[],r=o();r!==null;)i.push(r),r=o();if(i!==null)if(a.substr(b,6)==="SILENT"?(r="SILENT",b+=6):(r=null,m&&j('"SILENT"')),r===null&&(a.substr(b,6)==="silent"?(r="silent",b+=6):(r=null,m&&j('"silent"')),r=r!==null?r:null),r=r!==null?r:"",r!==null){for(var v=[],n=o();n!==null;)v.push(n),n=o();v!==null?(n=ab(),n!==null?e=[e,i,r,v,n]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;f=e!==null?function(a){var b=
{kind:"drop",token:"executableunit"};b.destinyGraph=a;return b}(e[4]):null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[34] Drop");x[d]={nextPos:b,result:f};return f}function vb(){var d="Create@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=b;if(a.substr(b,6)==="CREATE"){var e="CREATE";b+=6}else e=null,m&&j('"CREATE"');e===null&&(a.substr(b,6)==="create"?(e="create",b+=6):(e=null,m&&j('"create"')),e=e!==null?e:null);if(e!==null){for(var i=[],r=o();r!==null;)i.push(r),r=o();if(i!==null)if(a.substr(b,
6)==="SILENT"?(r="SILENT",b+=6):(r=null,m&&j('"SILENT"')),r===null&&(a.substr(b,6)==="silent"?(r="silent",b+=6):(r=null,m&&j('"silent"')),r=r!==null?r:null),r=r!==null?r:"",r!==null){for(var v=[],n=o();n!==null;)v.push(n),n=o();v!==null?(n=Ha(),n!==null?e=[e,i,r,v,n]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;f=e!==null?function(a){var b={kind:"create",token:"executableunit"};b.destinyGraph=a;return b}(e[4]):null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[35] Create");
x[d]={nextPos:b,result:f};return f}function wb(){var d="InsertData@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=b;if(a.substr(b,6)==="INSERT"){var e="INSERT";b+=6}else e=null,m&&j('"INSERT"');e===null&&(a.substr(b,6)==="insert"?(e="insert",b+=6):(e=null,m&&j('"insert"')),e=e!==null?e:null);if(e!==null){for(var i=[],r=o();r!==null;)i.push(r),r=o();if(i!==null)if(a.substr(b,4)==="DATA"?(r="DATA",b+=4):(r=null,m&&j('"DATA"')),r===null&&(a.substr(b,4)==="data"?(r="data",b+=4):(r=null,
m&&j('"data"')),r=r!==null?r:null),r!==null){for(var v=[],n=o();n!==null;)v.push(n),n=o();v!==null?(n=bb(),n!==null?e=[e,i,r,v,n]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;f=e!==null?function(a){var b={kind:"insertdata",token:"executableunit"};b.quads=a;return b}(e[4]):null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[36] InsertData");x[d]={nextPos:b,result:f};return f}function xb(){var d="DeleteData@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=b;
if(a.substr(b,6)==="DELETE"){var e="DELETE";b+=6}else e=null,m&&j('"DELETE"');e===null&&(a.substr(b,6)==="delete"?(e="delete",b+=6):(e=null,m&&j('"delete"')),e=e!==null?e:null);if(e!==null){for(var i=[],r=o();r!==null;)i.push(r),r=o();if(i!==null)if(a.substr(b,4)==="DATA"?(r="DATA",b+=4):(r=null,m&&j('"DATA"')),r===null&&(a.substr(b,4)==="data"?(r="data",b+=4):(r=null,m&&j('"data"')),r=r!==null?r:null),r!==null){var v=bb();v!==null?e=[e,i,r,v]:(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,
b=f;f=e!==null?function(a){var b={kind:"deletedata",token:"executableunit"};b.quads=a;return b}(e[3]):null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[37] DeleteData");x[d]={nextPos:b,result:f};return f}function rb(){var d="DeleteWhere@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=b;if(a.substr(b,6)==="DELETE"){var e="DELETE";b+=6}else e=null,m&&j('"DELETE"');e===null&&(a.substr(b,6)==="delete"?(e="delete",b+=6):(e=null,m&&j('"delete"')),e=e!==null?e:null);if(e!==null){for(var i=
[],r=o();r!==null;)i.push(r),r=o();if(i!==null)if(a.substr(b,5)==="WHERE"?(r="WHERE",b+=5):(r=null,m&&j('"WHERE"')),r===null&&(a.substr(b,5)==="where"?(r="where",b+=5):(r=null,m&&j('"where"')),r=r!==null?r:null),r!==null){for(var v=[],n=o();n!==null;)v.push(n),n=o();v!==null?(n=U(),n!==null?e=[e,i,r,v,n]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;f=e!==null?function(a){var b={kind:"modify"};b.pattern=a;b["with"]=null;b.using=null;for(var c=[],a=a.patterns[0],a=a.triplesContext==
null&&a.patterns!=null?a.patterns[0].triplesContext:a.triplesContext,e=0;e<a.length;e++){var f={},d=a[e];f.subject=d.subject;f.predicate=d.predicate;f.object=d.object;f.graph=d.graph;c.push(f)}b["delete"]=c;return b}(e[4]):null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[38] DeleteWhere");x[d]={nextPos:b,result:f};return f}function sb(){var d="Modify@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=b,e=b;if(a.substr(b,4)==="WITH"){var i="WITH";b+=4}else i=null,m&&j('"WITH"');i===null&&
(a.substr(b,4)==="with"?(i="with",b+=4):(i=null,m&&j('"with"')),i=i!==null?i:null);if(i!==null){for(var r=[],v=o();v!==null;)r.push(v),v=o();r!==null?(v=P(),v!==null?i=[i,r,v]:(i=null,b=e)):(i=null,b=e)}else i=null,b=e;e=i!==null?i:"";if(e!==null){i=[];for(r=o();r!==null;)i.push(r),r=o();if(i!==null){r=b;v=yb();if(v!==null){for(var n=[],h=o();h!==null;)n.push(h),h=o();n!==null?(h=Xa(),h=h!==null?h:"",h!==null?v=[v,n,h]:(v=null,b=r)):(v=null,b=r)}else v=null,b=r;v!==null?r=v:(r=Xa(),r=r!==null?r:null);
if(r!==null){v=[];for(n=o();n!==null;)v.push(n),n=o();if(v!==null){n=[];for(h=cb();h!==null;)n.push(h),h=cb();if(n!==null){for(var h=[],s=o();s!==null;)h.push(s),s=o();if(h!==null)if(a.substr(b,5)==="WHERE"?(s="WHERE",b+=5):(s=null,m&&j('"WHERE"')),s===null&&(a.substr(b,5)==="where"?(s="where",b+=5):(s=null,m&&j('"where"')),s=s!==null?s:null),s!==null){for(var l=[],q=o();q!==null;)l.push(q),q=o();if(l!==null)if(q=U(),q!==null){for(var t=[],u=o();u!==null;)t.push(u),u=o();t!==null?e=[e,i,r,v,n,h,s,
l,q,t]:(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f}else e=null,b=f}else e=null,b=f}else e=null,b=f}else e=null,b=f;f=e!==null?function(a,b,c,e){var f={kind:"modify"};f["with"]=a!=""?a[2]:null;b.length===3&&b[2]===""?(f["delete"]=b[0],f.insert=null):b.length===3&&b[0].length!=null&&b[1].length!=null&&b[2].length!=null?(f["delete"]=b[0],f.insert=b[2]):(f.insert=b,f["delete"]=null);c!=""&&(f.using=c);f.pattern=e;return f}(e[0],e[2],e[4],e[8]):null;f===
null&&(f=null,b=k);(m=g)&&f===null&&j("[39] Modify");x[d]={nextPos:b,result:f};return f}function yb(){var d="DeleteClause@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=b;if(a.substr(b,6)==="DELETE"){var e="DELETE";b+=6}else e=null,m&&j('"DELETE"');e===null&&(a.substr(b,6)==="delete"?(e="delete",b+=6):(e=null,m&&j('"delete"')),e=e!==null?e:null);if(e!==null){var i=db();i!==null?e=[e,i]:(e=null,b=f)}else e=null,b=f;f=e!==null?e[1]:null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[40] DeleteClause");
x[d]={nextPos:b,result:f};return f}function Xa(){var d="InsertClause@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=b;if(a.substr(b,6)==="INSERT"){var e="INSERT";b+=6}else e=null,m&&j('"INSERT"');e===null&&(a.substr(b,6)==="insert"?(e="insert",b+=6):(e=null,m&&j('"insert"')),e=e!==null?e:null);if(e!==null){var i=db();i!==null?e=[e,i]:(e=null,b=f)}else e=null,b=f;f=e!==null?e[1]:null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[41] InsertClause");x[d]={nextPos:b,result:f};return f}function cb(){var d=
"UsingClause@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;for(var k=b,f=b,e=[],i=o();i!==null;)e.push(i),i=o();if(e!==null)if(a.substr(b,5)==="USING"?(i="USING",b+=5):(i=null,m&&j('"USING"')),i===null&&(a.substr(b,5)==="using"?(i="using",b+=5):(i=null,m&&j('"using"')),i=i!==null?i:null),i!==null){for(var r=[],v=o();v!==null;)r.push(v),v=o();if(r!==null){v=P();if(v===null){v=b;if(a.substr(b,5)==="NAMED"){var n="NAMED";b+=5}else n=null,m&&j('"NAMED"');n===null&&(a.substr(b,5)==="named"?(n="named",
b+=5):(n=null,m&&j('"named"')),n=n!==null?n:null);if(n!==null){for(var h=[],s=o();s!==null;)h.push(s),s=o();h!==null?(s=P(),s!==null?n=[n,h,s]:(n=null,b=v)):(n=null,b=v)}else n=null,b=v;v=n!==null?n:null}v!==null?e=[e,i,r,v]:(e=null,b=f)}else e=null,b=f}else e=null,b=f;else e=null,b=f;f=e!==null?e[3].length!=null?{kind:"named",uri:e[3][2]}:{kind:"default",uri:e[3]}:null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[42] UsingClause");x[d]={nextPos:b,result:f};return f}function Ha(){var d="GraphRef@"+
b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=b;if(a.substr(b,5)==="GRAPH"){var e="GRAPH";b+=5}else e=null,m&&j('"GRAPH"');e===null&&(a.substr(b,5)==="graph"?(e="graph",b+=5):(e=null,m&&j('"graph"')),e=e!==null?e:null);if(e!==null){for(var i=[],r=o();r!==null;)i.push(r),r=o();i!==null?(r=P(),r!==null?e=[e,i,r]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;f=e!==null?e[2]:null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[43] GraphRef");x[d]={nextPos:b,result:f};return f}function ab(){var d=
"GraphRefAll@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=Ha(),f=f!==null?f:null;f===null&&(f=null,b=k);f!==null?k=f:(k=b,a.substr(b,7)==="DEFAULT"?(f="DEFAULT",b+=7):(f=null,m&&j('"DEFAULT"')),f===null&&(a.substr(b,7)==="default"?(f="default",b+=7):(f=null,m&&j('"default"')),f=f!==null?f:null),f=f!==null?"default":null,f===null&&(f=null,b=k),f!==null?k=f:(k=b,a.substr(b,5)==="NAMED"?(f="NAMED",b+=5):(f=null,m&&j('"NAMED"')),f===null&&(a.substr(b,5)==="named"?(f="named",b+=5):(f=
null,m&&j('"named"')),f=f!==null?f:null),f=f!==null?"named":null,f===null&&(f=null,b=k),f!==null?k=f:(k=b,a.substr(b,3)==="ALL"?(f="ALL",b+=3):(f=null,m&&j('"ALL"')),f===null&&(a.substr(b,3)==="all"?(f="all",b+=3):(f=null,m&&j('"all"')),f=f!==null?f:null),f=f!==null?"all":null,f===null&&(f=null,b=k),k=f!==null?f:null)));(m=g)&&k===null&&j("[44] GraphRefAll");x[d]={nextPos:b,result:k};return k}function db(){var d="QuadPattern@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;for(var k=b,f=b,e=[],
i=o();i!==null;)e.push(i),i=o();if(e!==null)if(a.substr(b,1)==="{"?(i="{",b+=1):(i=null,m&&j('"{"')),i!==null){for(var r=[],v=o();v!==null;)r.push(v),v=o();if(r!==null)if(v=eb(),v!==null){for(var n=[],h=o();h!==null;)n.push(h),h=o();if(n!==null)if(a.substr(b,1)==="}"?(h="}",b+=1):(h=null,m&&j('"}"')),h!==null){for(var s=[],l=o();l!==null;)s.push(l),l=o();s!==null?e=[e,i,r,v,n,h,s]:(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f;f=e!==null?
e[3].quadsContext:null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[45] QuadPattern");x[d]={nextPos:b,result:f};return f}function bb(){var d="QuadData@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;for(var k=b,f=b,e=[],i=o();i!==null;)e.push(i),i=o();if(e!==null)if(a.substr(b,1)==="{"?(i="{",b+=1):(i=null,m&&j('"{"')),i!==null){for(var r=[],v=o();v!==null;)r.push(v),v=o();if(r!==null)if(v=eb(),v!==null){for(var n=[],h=o();h!==null;)n.push(h),h=o();if(n!==null)if(a.substr(b,1)==="}"?(h="}",b+=
1):(h=null,m&&j('"}"')),h!==null){for(var s=[],l=o();l!==null;)s.push(l),l=o();s!==null?e=[e,i,r,v,n,h,s]:(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f;f=e!==null?e[3].quadsContext:null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[46] QuadData");x[d]={nextPos:b,result:f};return f}function eb(){var d="Quads@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=b,e=ma(),e=e!==null?e:"";if(e!==null){var i=[],r=b,v=fb();if(v!==null){if(a.substr(b,
1)==="."){var n=".";b+=1}else n=null,m&&j('"."');n=n!==null?n:"";if(n!==null){var h=ma(),h=h!==null?h:"";h!==null?v=[v,n,h]:(v=null,b=r)}else v=null,b=r}else v=null,b=r;for(;v!==null;)i.push(v),r=b,v=fb(),v!==null?(a.substr(b,1)==="."?(n=".",b+=1):(n=null,m&&j('"."')),n=n!==null?n:"",n!==null?(h=ma(),h=h!==null?h:"",h!==null?v=[v,n,h]:(v=null,b=r)):(v=null,b=r)):(v=null,b=r);i!==null?e=[e,i]:(e=null,b=f)}else e=null,b=f;f=e!==null?function(a,b){var c=[];if(a.triplesContext!=null&&a.triplesContext!=
null)for(var e=0;e<a.triplesContext.length;e++){var f=a.triplesContext[e];f.graph=null;c.push(f)}if(b&&b.length>0&&b[0].length>0&&(c=c.concat(b[0][0].quadsContext),b[0][2]!=null&&b[0][2].triplesContext!=null))for(e=0;e<b[0][2].triplesContext.length;e++)f=b[0][2].triplesContext[e],f.graph=null,c.push(f);return{token:"quads",quadsContext:c}}(e[0],e[1]):null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[47] Quads");x[d]={nextPos:b,result:f};return f}function fb(){var d="QuadsNotTriples@"+b,g=x[d];if(g)return b=
g.nextPos,g.result;g=m;m=!1;for(var k=b,f=b,e=[],i=o();i!==null;)e.push(i),i=o();if(e!==null)if(a.substr(b,5)==="GRAPH"?(i="GRAPH",b+=5):(i=null,m&&j('"GRAPH"')),i===null&&(a.substr(b,5)==="graph"?(i="graph",b+=5):(i=null,m&&j('"graph"')),i=i!==null?i:null),i!==null){for(var r=[],v=o();v!==null;)r.push(v),v=o();if(r!==null)if(v=ha(),v!==null){for(var n=[],h=o();h!==null;)n.push(h),h=o();if(n!==null)if(a.substr(b,1)==="{"?(h="{",b+=1):(h=null,m&&j('"{"')),h!==null){for(var s=[],l=o();l!==null;)s.push(l),
l=o();if(s!==null)if(l=ma(),l=l!==null?l:"",l!==null){for(var q=[],t=o();t!==null;)q.push(t),t=o();if(q!==null)if(a.substr(b,1)==="}"?(t="}",b+=1):(t=null,m&&j('"}"')),t!==null){for(var u=[],w=o();w!==null;)u.push(w),w=o();u!==null?e=[e,i,r,v,n,h,s,l,q,t,u]:(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f;f=e!==null?function(a,b){for(var c=[],e=0;e<b.triplesContext.length;e++){var f=
b.triplesContext[e];f.graph=a;c.push(f)}return{token:"quadsnottriples",quadsContext:c}}(e[3],e[7]):null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[48] QuadsNotTriples");x[d]={nextPos:b,result:f};return f}function ma(){var d="TriplesTemplate@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=b,e=gb();if(e!==null){for(var i=b,r=[],v=o();v!==null;)r.push(v),v=o();if(r!==null)if(a.substr(b,1)==="."?(v=".",b+=1):(v=null,m&&j('"."')),v!==null){for(var n=[],h=o();h!==null;)n.push(h),h=o();n!==
null?(h=ma(),h=h!==null?h:"",h!==null?r=[r,v,n,h]:(r=null,b=i)):(r=null,b=i)}else r=null,b=i;else r=null,b=i;i=r!==null?r:"";i!==null?e=[e,i]:(e=null,b=f)}else e=null,b=f;f=e!==null?function(a,b){var c=a.triplesContext;typeof b==="object"&&b.length!=null&&b[3].triplesContext!=null&&(c=c.concat(b[3].triplesContext));return{token:"triplestemplate",triplesContext:c}}(e[0],e[1]):null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[49] TriplesTemplate");x[d]={nextPos:b,result:f};return f}function U(){var d=
"GroupGraphPattern@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=b;if(a.substr(b,1)==="{"){var e="{";b+=1}else e=null,m&&j('"{"');if(e!==null){for(var i=[],r=o();r!==null;)i.push(r),r=o();if(i!==null)if(r=G(),r!==null){for(var v=[],n=o();n!==null;)v.push(n),n=o();v!==null?(a.substr(b,1)==="}"?(n="}",b+=1):(n=null,m&&j('"}"')),n!==null?e=[e,i,r,v,n]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;f=e!==null?e[2]:null;f===null&&(f=null,b=k);if(f!==null)k=
f;else{f=k=b;a.substr(b,1)==="{"?(e="{",b+=1):(e=null,m&&j('"{"'));if(e!==null){i=[];for(r=o();r!==null;)i.push(r),r=o();if(i!==null)if(r=Bb(),r!==null){v=[];for(n=o();n!==null;)v.push(n),n=o();v!==null?(a.substr(b,1)==="}"?(n="}",b+=1):(n=null,m&&j('"}"')),n!==null?e=[e,i,r,v,n]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;f=e!==null?e[2]:null;f===null&&(f=null,b=k);k=f!==null?f:null}(m=g)&&k===null&&j("[50] GroupGraphPattern");x[d]={nextPos:b,result:k};return k}function Bb(){var d=
"GroupGraphPatternSub@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=b,e=la(),e=e!==null?e:"";if(e!==null){for(var i=[],r=o();r!==null;)i.push(r),r=o();if(i!==null){var r=[],v=b,n=hb();if(n!==null){for(var h=[],s=o();s!==null;)h.push(s),s=o();if(h!==null)if(a.substr(b,1)==="."?(s=".",b+=1):(s=null,m&&j('"."')),s=s!==null?s:"",s!==null){for(var l=[],q=o();q!==null;)l.push(q),q=o();l!==null?(q=la(),q=q!==null?q:"",q!==null?n=[n,h,s,l,q]:(n=null,b=v)):(n=null,b=v)}else n=null,b=v;else n=
null,b=v}else n=null,b=v;for(;n!==null;)if(r.push(n),v=b,n=hb(),n!==null){h=[];for(s=o();s!==null;)h.push(s),s=o();if(h!==null)if(a.substr(b,1)==="."?(s=".",b+=1):(s=null,m&&j('"."')),s=s!==null?s:"",s!==null){l=[];for(q=o();q!==null;)l.push(q),q=o();l!==null?(q=la(),q=q!==null?q:"",q!==null?n=[n,h,s,l,q]:(n=null,b=v)):(n=null,b=v)}else n=null,b=v;else n=null,b=v}else n=null,b=v;r!==null?e=[e,i,r]:(e=null,b=f)}else e=null,b=f}else e=null,b=f;f=e!==null?function(a,b){var c=[];a!=null&&a!=[]&&c.push(a);
for(var e=0;e<b.length;e++)for(var f=0;f<b[e].length;f++)b[e][f].token!=null&&c.push(b[e][f]);for(var d=[],g=[],j=[],e=0;e<c.length;e++)if(c[e].token!="triplespattern"&&c[e].token!="filter"){if(g.length!=0||j.length!=0){for(var r=[],f=0;f<g.length;f++)r=r.concat(g[f].triplesContext);r.length>0&&d.push({token:"basicgraphpattern",triplesContext:r});g=[]}d.push(c[e])}else c[e].token==="triplespattern"?g.push(c[e]):j.push(c[e]);if(g.length!=0||j.length!=0){r=[];for(f=0;f<g.length;f++)r=r.concat(g[f].triplesContext);
r.length>0&&d.push({token:"basicgraphpattern",triplesContext:r})}return{token:"groupgraphpattern",patterns:d,filters:j}}(e[0],e[2]):null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[51] GroupGraphPatternSub");x[d]={nextPos:b,result:f};return f}function la(){var d="TriplesBlock@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=b,e=Cb();if(e!==null){for(var i=b,r=[],v=o();v!==null;)r.push(v),v=o();if(r!==null)if(a.substr(b,1)==="."?(v=".",b+=1):(v=null,m&&j('"."')),v!==null){var n=la(),
n=n!==null?n:"";n!==null?r=[r,v,n]:(r=null,b=i)}else r=null,b=i;else r=null,b=i;i=r!==null?r:"";i!==null?e=[e,i]:(e=null,b=f)}else e=null,b=f;f=e!==null?function(a,b){var c=a.triplesContext;typeof b==="object"&&b.length!=null&&b[2].triplesContext!=null&&(c=c.concat(b[2].triplesContext));return{token:"triplespattern",triplesContext:c}}(e[0],e[1]):null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[54] TriplesBlock");x[d]={nextPos:b,result:f};return f}function hb(){var a="GraphPatternNotTriples@"+b,c=
x[a];if(c)return b=c.nextPos,c.result;c=m;m=!1;var d=Db();d===null&&(d=Eb(),d===null&&(d=Fb(),d===null&&(d=Gb(),d===null&&(d=Hb(),d===null&&(d=Ib(),d=d!==null?d:null)))));(m=c)&&d===null&&j("[53] GraphPatternNotTriples");x[a]={nextPos:b,result:d};return d}function Eb(){var d="OptionalGraphPattern@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;for(var k=b,f=b,e=[],i=o();i!==null;)e.push(i),i=o();if(e!==null)if(a.substr(b,8)==="OPTIONAL"?(i="OPTIONAL",b+=8):(i=null,m&&j('"OPTIONAL"')),i===null&&
(a.substr(b,8)==="optional"?(i="optional",b+=8):(i=null,m&&j('"optional"')),i=i!==null?i:null),i!==null){for(var r=[],v=o();v!==null;)r.push(v),v=o();r!==null?(v=U(),v!==null?e=[e,i,r,v]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;else e=null,b=f;f=e!==null?{token:"optionalgraphpattern",value:e[3]}:null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[54] OptionalGraphPattern");x[d]={nextPos:b,result:f};return f}function Gb(){var d="GraphGraphPattern@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;
for(var k=b,f=b,e=[],i=o();i!==null;)e.push(i),i=o();if(e!==null)if(a.substr(b,5)==="GRAPH"?(i="GRAPH",b+=5):(i=null,m&&j('"GRAPH"')),i===null&&(a.substr(b,5)==="graph"?(i="graph",b+=5):(i=null,m&&j('"graph"')),i=i!==null?i:null),i!==null){for(var r=[],v=o();v!==null;)r.push(v),v=o();if(r!==null)if(v=ha(),v!==null){for(var n=[],h=o();h!==null;)n.push(h),h=o();n!==null?(h=U(),h!==null?e=[e,i,r,v,n,h]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f;f=e!==null?
function(a,b){for(var c=0;c<b.patterns.length;c++)for(var e=b.patterns[c],f=0;f<e.triplesContext.length;f++)e.triplesContext[f].graph=a;b.token="groupgraphpattern";return b}(e[3],e[5]):null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[55] GraphGraphPattern");x[d]={nextPos:b,result:f};return f}function Hb(){var d="ServiceGraphPattern@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=b;if(a.substr(b,7)==="SERVICE"){var e="SERVICE";b+=7}else e=null,m&&j('"SERVICE"');if(e!==null){var i=ha();
if(i!==null){var r=U();r!==null?e=[e,i,r]:(e=null,b=f)}else e=null,b=f}else e=null,b=f;f=e!==null?{token:"servicegraphpattern",status:"todo",value:[e[1],e[2]]}:null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[56] ServiceGraphPattern");x[d]={nextPos:b,result:f};return f}function Fb(){var d="MinusGraphPattern@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=b;if(a.substr(b,5)==="MINUS"){var e="MINUS";b+=5}else e=null,m&&j('"MINUS"');if(e!==null){var i=U();i!==null?e=[e,i]:(e=null,b=f)}else e=
null,b=f;f=e!==null?{token:"minusgraphpattern",status:"todo",value:e[1]}:null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[57] MinusGraphPattern");x[d]={nextPos:b,result:f};return f}function Db(){var d="GroupOrUnionGraphPattern@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=b,e=U();if(e!==null){for(var i=[],r=b,v=[],n=o();n!==null;)v.push(n),n=o();if(v!==null)if(a.substr(b,5)==="UNION"?(n="UNION",b+=5):(n=null,m&&j('"UNION"')),n===null&&(a.substr(b,5)==="union"?(n="union",b+=5):(n=
null,m&&j('"union"')),n=n!==null?n:null),n!==null){for(var h=[],s=o();s!==null;)h.push(s),s=o();h!==null?(s=U(),s!==null?v=[v,n,h,s]:(v=null,b=r)):(v=null,b=r)}else v=null,b=r;else v=null,b=r;for(;v!==null;){i.push(v);r=b;v=[];for(n=o();n!==null;)v.push(n),n=o();if(v!==null)if(a.substr(b,5)==="UNION"?(n="UNION",b+=5):(n=null,m&&j('"UNION"')),n===null&&(a.substr(b,5)==="union"?(n="union",b+=5):(n=null,m&&j('"union"')),n=n!==null?n:null),n!==null){h=[];for(s=o();s!==null;)h.push(s),s=o();h!==null?(s=
U(),s!==null?v=[v,n,h,s]:(v=null,b=r)):(v=null,b=r)}else v=null,b=r;else v=null,b=r}i!==null?e=[e,i]:(e=null,b=f)}else e=null,b=f;f=e!==null?function(a,b){if(b.length===0)return a;else{for(var c={token:"graphunionpattern",value:[a]},e=0;e<b.length;e++)e==b.length-1?c.value.push(b[e][3]):(c.value.push(b[e][3]),c={token:"graphunionpattern",value:[c]});return c}}(e[0],e[1]):null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[58] GroupOrUnionGraphPattern");x[d]={nextPos:b,result:f};return f}function Ib(){var d=
"Filter@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;for(var k=b,f=b,e=[],i=o();i!==null;)e.push(i),i=o();if(e!==null)if(a.substr(b,6)==="FILTER"?(i="FILTER",b+=6):(i=null,m&&j('"FILTER"')),i===null&&(a.substr(b,6)==="filter"?(i="filter",b+=6):(i=null,m&&j('"filter"')),i=i!==null?i:null),i!==null){for(var r=[],v=o();v!==null;)r.push(v),v=o();r!==null?(v=wa(),v!==null?e=[e,i,r,v]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;else e=null,b=f;f=e!==null?{token:"filter",value:e[3]}:null;f===null&&
(f=null,b=k);(m=g)&&f===null&&j("[59] Filter");x[d]={nextPos:b,result:f};return f}function wa(){var a="Constraint@"+b,c=x[a];if(c)return b=c.nextPos,c.result;c=m;m=!1;var d=Da();d===null&&(d=Ca(),d===null&&(d=$a(),d=d!==null?d:null));(m=c)&&d===null&&j("[60] Constraint");x[a]={nextPos:b,result:d};return d}function $a(){var a="FunctionCall@"+b,c=x[a];if(c)return b=c.nextPos,c.result;c=m;m=!1;var d=b,f=b,e=P();if(e!==null){var g=ib();g!==null?e=[e,g]:(e=null,b=f)}else e=null,b=f;f=e!==null?function(a,
b){var c={token:"expression",expressionType:"irireforfunction"};c.iriref=a;c.args=b.value;return c}(e[0],e[1]):null;f===null&&(f=null,b=d);(m=c)&&f===null&&j("[61] FunctionCall");x[a]={nextPos:b,result:f};return f}function ib(){var d="ArgList@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=ia()!==null?{token:"args",value:[]}:null;f===null&&(f=null,b=k);if(f!==null)k=f;else{f=k=b;if(a.substr(b,1)==="("){var e="(";b+=1}else e=null,m&&j('"("');if(e!==null){if(a.substr(b,8)==="DISTINCT"){var i=
"DISTINCT";b+=8}else i=null,m&&j('"DISTINCT"');i===null&&(a.substr(b,8)==="distinct"?(i="distinct",b+=8):(i=null,m&&j('"distinct"')),i=i!==null?i:null);i=i!==null?i:"";if(i!==null){var r=L();if(r!==null){var h=[],n=b;if(a.substr(b,1)===","){var o=",";b+=1}else o=null,m&&j('","');if(o!==null){var s=L();s!==null?o=[o,s]:(o=null,b=n)}else o=null,b=n;for(;o!==null;)h.push(o),n=b,a.substr(b,1)===","?(o=",",b+=1):(o=null,m&&j('","')),o!==null?(s=L(),s!==null?o=[o,s]:(o=null,b=n)):(o=null,b=n);h!==null?
(a.substr(b,1)===")"?(n=")",b+=1):(n=null,m&&j('")"')),n!==null?e=[e,i,r,h,n]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f}else e=null,b=f}else e=null,b=f;f=e!==null?function(a,b,c){for(var e=[],f=0;f<c.length;f++)e.push(c[f][1]);c={token:"args"};c.value=[b].concat(e);c.distinct=a!=null&&a.toUpperCase()==="DISTINCT"?!0:!1;return c}(e[1],e[2],e[3]):null;f===null&&(f=null,b=k);k=f!==null?f:null}(m=g)&&k===null&&j("[62] ArgList");x[d]={nextPos:b,result:k};return k}function Jb(){var d="ExpressionList@"+
b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=ia()!==null?{token:"args",value:[]}:null;f===null&&(f=null,b=k);if(f!==null)k=f;else{f=k=b;if(a.substr(b,1)==="("){var e="(";b+=1}else e=null,m&&j('"("');if(e!==null){var i=L();if(i!==null){var r=[],h=b;if(a.substr(b,1)===","){var n=",";b+=1}else n=null,m&&j('","');if(n!==null){var o=L();o!==null?n=[n,o]:(n=null,b=h)}else n=null,b=h;for(;n!==null;)r.push(n),h=b,a.substr(b,1)===","?(n=",",b+=1):(n=null,m&&j('","')),n!==null?(o=L(),o!==null?
n=[n,o]:(n=null,b=h)):(n=null,b=h);r!==null?(a.substr(b,1)===")"?(h=")",b+=1):(h=null,m&&j('")"')),h!==null?e=[e,i,r,h]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f}else e=null,b=f;f=e!==null?function(a,b){for(var c=[],e=0;e<b.length;e++)c.push(b[e][1]);e={token:"args"};e.value=[a].concat(c);return e}(e[1],e[2]):null;f===null&&(f=null,b=k);k=f!==null?f:null}(m=g)&&k===null&&j("[63] ExpressionList");x[d]={nextPos:b,result:k};return k}function Ab(){var d="ConstructTemplate@"+b,g=x[d];if(g)return b=g.nextPos,
g.result;g=m;m=!1;var k=b,f=b;if(a.substr(b,1)==="{"){var e="{";b+=1}else e=null,m&&j('"{"');if(e!==null){for(var i=[],r=o();r!==null;)i.push(r),r=o();if(i!==null)if(r=jb(),r=r!==null?r:"",r!==null){for(var h=[],n=o();n!==null;)h.push(n),n=o();h!==null?(a.substr(b,1)==="}"?(n="}",b+=1):(n=null,m&&j('"}"')),n!==null?e=[e,i,r,h,n]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;f=e!==null?e[2]:null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[64] ConstructTemplate");x[d]={nextPos:b,
result:f};return f}function jb(){var d="ConstructTriples@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=b,e=gb();if(e!==null){for(var i=b,r=[],h=o();h!==null;)r.push(h),h=o();if(r!==null)if(a.substr(b,1)==="."?(h=".",b+=1):(h=null,m&&j('"."')),h!==null){for(var n=[],l=o();l!==null;)n.push(l),l=o();n!==null?(l=jb(),l=l!==null?l:"",l!==null?r=[r,h,n,l]:(r=null,b=i)):(r=null,b=i)}else r=null,b=i;else r=null,b=i;i=r!==null?r:"";i!==null?e=[e,i]:(e=null,b=f)}else e=null,b=f;f=e!==null?
function(a,b){var c=a.triplesContext;typeof b==="object"&&b.length!=null&&b[3].triplesContext!=null&&(c=c.concat(b[3].triplesContext));return{token:"triplestemplate",triplesContext:c}}(e[0],e[1]):null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[65] ConstructTriples");x[d]={nextPos:b,result:f};return f}function gb(){var a="TriplesSameSubject@"+b,c=x[a];if(c)return b=c.nextPos,c.result;c=m;m=!1;for(var d=b,f=b,e=[],g=o();g!==null;)e.push(g),g=o();if(e!==null)if(g=Ia(),g!==null){for(var k=[],i=o();i!==
null;)k.push(i),i=o();k!==null?(i=xa(),i!==null?e=[e,g,k,i]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;else e=null,b=f;f=e!==null?function(a,b){var c=b.triplesContext;if(b.pairs)for(var e=0;e<b.pairs.length;e++){var f=b.pairs[e],d=null;f[1].length!=null&&(f[1]=f[1][0]);a.token&&a.token==="triplesnodecollection"?(d={subject:a.chainSubject[0],predicate:f[0],object:f[1]},c.push(d),c=c.concat(a.triplesContext)):(d={subject:a,predicate:f[0],object:f[1]},c.push(d))}e={token:"triplessamesubject"};e.triplesContext=
c;e.chainSubject=a;return e}(e[1],e[3]):null;f===null&&(f=null,b=d);if(f!==null)d=f;else{f=d=b;e=[];for(g=o();g!==null;)e.push(g),g=o();if(e!==null)if(g=Ja(),g!==null){k=[];for(i=o();i!==null;)k.push(i),i=o();k!==null?(i=Kb(),i!==null?e=[e,g,k,i]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;else e=null,b=f;f=e!==null?function(a,b){var c=a.triplesContext,e=a.chainSubject;if(b.pairs)for(var f=0;f<b.pairs.length;f++){var d=b.pairs[f];d[1].length!=null&&(d[1]=d[1][0]);if(a.token==="triplesnodecollection")for(var g=
0;g<e.length;g++){var j=e[g];if(j.triplesContext!=null){var i={subject:j.chainSubject,predicate:d[0],object:d[1]};c.concat(j.triplesContext)}else i={subject:e[g],predicate:d[0],object:d[1]},c.push(i)}else i={subject:e,predicate:d[0],object:d[1]},c.push(i)}f={token:"triplessamesubject"};f.triplesContext=c;f.chainSubject=e;return f}(e[1],e[3]):null;f===null&&(f=null,b=d);d=f!==null?f:null}(m=c)&&d===null&&j("[66] TriplesSameSubject");x[a]={nextPos:b,result:d};return d}function xa(){var d="PropertyListNotEmpty@"+
b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var i=b,f=b,e=Ka();if(e!==null){for(var k=[],r=o();r!==null;)k.push(r),r=o();if(k!==null)if(r=ja(),r!==null){for(var h=[],n=b,l=[],s=o();s!==null;)l.push(s),s=o();if(l!==null)if(a.substr(b,1)===";"?(s=";",b+=1):(s=null,m&&j('";"')),s!==null){for(var q=[],t=o();t!==null;)q.push(t),t=o();if(q!==null){var t=b,u=Ka();if(u!==null){for(var w=[],y=o();y!==null;)w.push(y),y=o();w!==null?(y=ja(),y!==null?u=[u,w,y]:(u=null,b=t)):(u=null,b=t)}else u=null,b=
t;t=u!==null?u:"";t!==null?l=[l,s,q,t]:(l=null,b=n)}else l=null,b=n}else l=null,b=n;else l=null,b=n;for(;l!==null;){h.push(l);n=b;l=[];for(s=o();s!==null;)l.push(s),s=o();if(l!==null)if(a.substr(b,1)===";"?(s=";",b+=1):(s=null,m&&j('";"')),s!==null){q=[];for(t=o();t!==null;)q.push(t),t=o();if(q!==null){t=b;u=Ka();if(u!==null){w=[];for(y=o();y!==null;)w.push(y),y=o();w!==null?(y=ja(),y!==null?u=[u,w,y]:(u=null,b=t)):(u=null,b=t)}else u=null,b=t;t=u!==null?u:"";t!==null?l=[l,s,q,t]:(l=null,b=n)}else l=
null,b=n}else l=null,b=n;else l=null,b=n}h!==null?e=[e,k,r,h]:(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;f=e!==null?function(a,b,c){for(var e={token:"propertylist"},f=[],d=[],g=0;g<b.length;g++)b[g].triplesContext!=null?(f=f.concat(b[g].triplesContext),b[g].token==="triplesnodecollection"&&b[g].chainSubject.length!=null?d.push([a,b[g].chainSubject[0]]):d.push([a,b[g].chainSubject])):d.push([a,b[g]]);for(g=0;g<c.length;g++)for(var b=c[g][3],a=b[0],b=b[2]||[],j=0;j<b.length;j++)b[j].triplesContext!=
null?(f=f.concat(b[j].triplesContext),d.push([a,b[j].chainSubject])):d.push([a,b[j]]);e.pairs=d;e.triplesContext=f;return e}(e[0],e[2],e[3]):null;f===null&&(f=null,b=i);(m=g)&&f===null&&j("[67] PropertyListNotEmpty");x[d]={nextPos:b,result:f};return f}function Kb(){var a="PropertyList@"+b,c=x[a];if(c)return b=c.nextPos,c.result;c=m;m=!1;var d=xa(),d=d!==null?d:"";(m=c)&&d===null&&j("[68] PropertyList");x[a]={nextPos:b,result:d};return d}function ja(){var d="ObjectList@"+b,g=x[d];if(g)return b=g.nextPos,
g.result;g=m;m=!1;var i=b,f=b,e=na();if(e!==null){for(var k=[],r=o();r!==null;)k.push(r),r=o();if(k!==null){var r=[],h=b;if(a.substr(b,1)===","){var n=",";b+=1}else n=null,m&&j('","');if(n!==null){for(var l=[],s=o();s!==null;)l.push(s),s=o();l!==null?(s=na(),s!==null?n=[n,l,s]:(n=null,b=h)):(n=null,b=h)}else n=null,b=h;for(;n!==null;)if(r.push(n),h=b,a.substr(b,1)===","?(n=",",b+=1):(n=null,m&&j('","')),n!==null){l=[];for(s=o();s!==null;)l.push(s),s=o();l!==null?(s=na(),s!==null?n=[n,l,s]:(n=null,
b=h)):(n=null,b=h)}else n=null,b=h;r!==null?e=[e,k,r]:(e=null,b=f)}else e=null,b=f}else e=null,b=f;f=e!==null?function(a,b){var c=[];c.push(a);for(var e=0;e<b.length;e++)for(var f=0;f<b[e].length;f++)typeof b[e][f]=="object"&&b[e][f].token!=null&&c.push(b[e][f]);return c}(e[0],e[2]):null;f===null&&(f=null,b=i);(m=g)&&f===null&&j("[69] ObjectList");x[d]={nextPos:b,result:f};return f}function Ka(){var d="Verb@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var i=ha();if(i===null){i=b;if(a.substr(b,
1)==="a"){var f="a";b+=1}else f=null,m&&j('"a"');f=f!==null?{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}:null;f===null&&(f=null,b=i);i=f!==null?f:null}(m=g)&&i===null&&j("[71] Verb");x[d]={nextPos:b,result:i};return i}function Cb(){var a="TriplesSameSubjectPath@"+b,c=x[a];if(c)return b=c.nextPos,c.result;c=m;m=!1;for(var d=b,f=b,e=[],g=o();g!==null;)e.push(g),g=o();if(e!==null)if(g=Ia(),g!==null){for(var i=[],k=o();k!==null;)i.push(k),k=o();i!==null?
(k=Lb(),k!==null?e=[e,g,i,k]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;else e=null,b=f;f=e!==null?function(a,b){var c=b.triplesContext;if(b.pairs)for(var e=0;e<b.pairs.length;e++){var f=b.pairs[e],d=null;f[1].length!=null&&(f[1]=f[1][0]);a.token&&a.token==="triplesnodecollection"?(d={subject:a.chainSubject[0],predicate:f[0],object:f[1]},c.push(d),c=c.concat(a.triplesContext)):(d={subject:a,predicate:f[0],object:f[1]},c.push(d))}e={token:"triplessamesubject"};e.triplesContext=c;e.chainSubject=a;return e}(e[1],
e[3]):null;f===null&&(f=null,b=d);if(f!==null)d=f;else{f=d=b;e=[];for(g=o();g!==null;)e.push(g),g=o();if(e!==null)if(g=Ja(),g!==null){i=[];for(k=o();k!==null;)i.push(k),k=o();i!==null?(k=Mb(),k!==null?e=[e,g,i,k]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;else e=null,b=f;f=e!==null?function(a,b){var c=a.triplesContext,e=a.chainSubject;if(b.pairs)for(var f=0;f<b.pairs.length;f++){var d=b.pairs[f];d[1].length!=null&&(d[1]=d[1][0]);if(a.token==="triplesnodecollection")for(var g=0;g<e.length;g++){var j=
e[g];if(j.triplesContext!=null){var i={subject:j.chainSubject,predicate:d[0],object:d[1]};c.concat(j.triplesContext)}else i={subject:e[g],predicate:d[0],object:d[1]},c.push(i)}else i={subject:e,predicate:d[0],object:d[1]},c.push(i)}f={token:"triplessamesubject"};f.triplesContext=c;f.chainSubject=e;return f}(e[1],e[3]):null;f===null&&(f=null,b=d);d=f!==null?f:null}(m=c)&&d===null&&j("[72] TriplesSameSubjectPath");x[a]={nextPos:b,result:d};return d}function Lb(){var d="PropertyListNotEmptyPath@"+b,
g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var i=b,f=b,e=La();e===null&&(e=O(),e=e!==null?e:null);if(e!==null){for(var k=[],r=o();r!==null;)k.push(r),r=o();if(k!==null)if(r=ja(),r!==null){for(var h=[],n=b,l=[],s=o();s!==null;)l.push(s),s=o();if(l!==null)if(a.substr(b,1)===";"?(s=";",b+=1):(s=null,m&&j('";"')),s!==null){for(var q=[],t=o();t!==null;)q.push(t),t=o();if(q!==null){var t=b,u=La();u===null&&(u=O(),u=u!==null?u:null);if(u!==null){var y=ja();y!==null?u=[u,y]:(u=null,b=t)}else u=null,
b=t;t=u!==null?u:"";t!==null?l=[l,s,q,t]:(l=null,b=n)}else l=null,b=n}else l=null,b=n;else l=null,b=n;for(;l!==null;){h.push(l);n=b;l=[];for(s=o();s!==null;)l.push(s),s=o();if(l!==null)if(a.substr(b,1)===";"?(s=";",b+=1):(s=null,m&&j('";"')),s!==null){q=[];for(t=o();t!==null;)q.push(t),t=o();q!==null?(t=b,u=La(),u===null&&(u=O(),u=u!==null?u:null),u!==null?(y=ja(),y!==null?u=[u,y]:(u=null,b=t)):(u=null,b=t),t=u!==null?u:"",t!==null?l=[l,s,q,t]:(l=null,b=n)):(l=null,b=n)}else l=null,b=n;else l=null,
b=n}h!==null?e=[e,k,r,h]:(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;f=e!==null?function(a,b,c){token={token:"propertylist"};for(var e=[],f=[],d=0;d<b.length;d++)b[d].triplesContext!=null?(e=e.concat(b[d].triplesContext),b[d].token==="triplesnodecollection"&&b[d].chainSubject.length!=null?f.push([a,b[d].chainSubject[0]]):f.push([a,b[d].chainSubject])):f.push([a,b[d]]);for(d=0;d<c.length;d++)for(var b=c[d][3],a=b[0],b=b[1]||[],g=0;g<b.length;g++)b[g].triplesContext!=null?(e=e.concat(b[g].triplesContext),
f.push([a,b[g].chainSubject])):f.push([a,b[g]]);token.pairs=f;token.triplesContext=e;return token}(e[0],e[2],e[3]):null;f===null&&(f=null,b=i);(m=g)&&f===null&&j("[73] PropertyListNotEmptyPath");x[d]={nextPos:b,result:f};return f}function Mb(){var a="PropertyListPath@"+b,c=x[a];if(c)return b=c.nextPos,c.result;c=m;m=!1;var d=xa(),d=d!==null?d:"";(m=c)&&d===null&&j("[74] PropertyListPath");x[a]={nextPos:b,result:d};return d}function La(){var a="VerbPath@"+b,c=x[a];if(c)return b=c.nextPos,c.result;
c=m;m=!1;var d=b,f=kb(),f=f!==null?f:null;f===null&&(f=null,b=d);(m=c)&&f===null&&j("[75]");x[a]={nextPos:b,result:f};return f}function kb(){var d="PathAlternative@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var i=b,f=b,e=Ma();if(e!==null){var k=[],r=b;if(a.substr(b,1)==="|"){var h="|";b+=1}else h=null,m&&j('"|"');if(h!==null){var n=Ma();n!==null?h=[h,n]:(h=null,b=r)}else h=null,b=r;for(;h!==null;)k.push(h),r=b,a.substr(b,1)==="|"?(h="|",b+=1):(h=null,m&&j('"|"')),h!==null?(n=Ma(),n!==null?
h=[h,n]:(h=null,b=r)):(h=null,b=r);k!==null?e=[e,k]:(e=null,b=f)}else e=null,b=f;f=e!==null?function(a,b){if(b==null||b.length===0)return a;else{for(var c=[],e=0;e<b.length;e++)c.push(b[1]);e={token:"path",kind:"alternative"};e.value=c;return e}}(e[0],e[1]):null;f===null&&(f=null,b=i);(m=g)&&f===null&&j("[78] PathAlternative");x[d]={nextPos:b,result:f};return f}function Ma(){var d="PathSequence@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var i=b,f=b,e=Na();if(e!==null){var k=[],r=b;if(a.substr(b,
1)==="/"){var h="/";b+=1}else h=null,m&&j('"/"');if(h!==null){var n=Na();n!==null?h=[h,n]:(h=null,b=r)}else h=null,b=r;for(;h!==null;)k.push(h),r=b,a.substr(b,1)==="/"?(h="/",b+=1):(h=null,m&&j('"/"')),h!==null?(n=Na(),n!==null?h=[h,n]:(h=null,b=r)):(h=null,b=r);k!==null?e=[e,k]:(e=null,b=f)}else e=null,b=f;f=e!==null?function(a,b){if(b==null||b.length===0)return a;else{for(var c=[a],e=0;e<b.length;e++)c.push(b[e][1]);e={token:"path",kind:"sequence"};e.value=c;return e}}(e[0],e[1]):null;f===null&&
(f=null,b=i);(m=g)&&f===null&&j("[79] PathSequence");x[d]={nextPos:b,result:f};return f}function lb(){var a="PathElt@"+b,c=x[a];if(c)return b=c.nextPos,c.result;c=m;m=!1;var d=b,f=b,e=Nb();if(e!==null){var g=Ob(),g=g!==null?g:"";g!==null?e=[e,g]:(e=null,b=f)}else e=null,b=f;f=e!==null?function(a,b){if(a.token&&a.token!="path"&&b=="")return a;else if(a.token&&a.token!=c&&b!=""){var c={token:"path",kind:"element"};c.value=a;c.modifier=b;return c}else return a.modifier=b,a}(e[0],e[1]):null;f===null&&
(f=null,b=d);(m=c)&&f===null&&j("[88] PathElt");x[a]={nextPos:b,result:f};return f}function Na(){var d="PathEltOrInverse@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var i=lb();if(i===null){var f=i=b;if(a.substr(b,1)==="^"){var e="^";b+=1}else e=null,m&&j('"^"');if(e!==null){var k=lb();k!==null?e=[e,k]:(e=null,b=f)}else e=null,b=f;f=e!==null?function(a){var b={token:"path",kind:"inversePath"};b.value=a;return b}(e[1]):null;f===null&&(f=null,b=i);i=f!==null?f:null}(m=g)&&i===null&&j("[81] PathEltOrInverse");
x[d]={nextPos:b,result:i};return i}function Ob(){var d="PathMod@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;if(a.substr(b,1)==="*"){var i="*";b+=1}else i=null,m&&j('"*"');if(i===null&&(a.substr(b,1)==="?"?(i="?",b+=1):(i=null,m&&j('"?"')),i===null&&(a.substr(b,1)==="+"?(i="+",b+=1):(i=null,m&&j('"+"')),i===null))){i=b;if(a.substr(b,1)==="{"){var f="{";b+=1}else f=null,m&&j('"{"');if(f!==null){var e=b,k=aa();if(k!==null){var r=b;if(a.substr(b,1)===","){var h=",";b+=1}else h=null,m&&j('","');
if(h!==null){if(a.substr(b,1)==="}"){var n="}";b+=1}else n=null,m&&j('"}"');if(n===null){var n=b,o=aa();if(o!==null){if(a.substr(b,1)==="}"){var l="}";b+=1}else l=null,m&&j('"}"');l!==null?o=[o,l]:(o=null,b=n)}else o=null,b=n;n=o!==null?o:null}n!==null?h=[h,n]:(h=null,b=r)}else h=null,b=r;h!==null?r=h:(a.substr(b,1)==="}"?(r="}",b+=1):(r=null,m&&j('"}"')),r=r!==null?r:null);r!==null?k=[k,r]:(k=null,b=e)}else k=null,b=e;k!==null?e=k:(e=b,a.substr(b,1)===","?(k=",",b+=1):(k=null,m&&j('","')),k!==null?
(r=aa(),r!==null?(a.substr(b,1)==="}"?(h="}",b+=1):(h=null,m&&j('"}"')),h!==null?k=[k,r,h]:(k=null,b=e)):(k=null,b=e)):(k=null,b=e),e=k!==null?k:null);e!==null?f=[f,e]:(f=null,b=i)}else f=null,b=i;i=f!==null?f:null}(m=g)&&i===null&&j("[82] PathMod");x[d]={nextPos:b,result:i};return i}function Nb(){var d="PathPrimary@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var i=P();if(i===null){i=b;if(a.substr(b,1)==="a"){var f="a";b+=1}else f=null,m&&j('"a"');f=f!==null?{token:"uri",prefix:null,suffix:null,
value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}:null;f===null&&(f=null,b=i);if(f!==null)i=f;else{i=b;a.substr(b,1)==="!"?(f="!",b+=1):(f=null,m&&j('"!"'));if(f!==null){var e=Pb();e!==null?f=[f,e]:(f=null,b=i)}else f=null,b=i;if(f!==null)i=f;else{f=i=b;a.substr(b,1)==="("?(e="(",b+=1):(e=null,m&&j('"("'));if(e!==null){var k=kb();if(k!==null){if(a.substr(b,1)===")"){var r=")";b+=1}else r=null,m&&j('")"');r!==null?e=[e,k,r]:(e=null,b=f)}else e=null,b=f}else e=null,b=f;f=e!==null?e[1]:null;f===
null&&(f=null,b=i);i=f!==null?f:null}}}(m=g)&&i===null&&j("[83] PathPrimary");x[d]={nextPos:b,result:i};return i}function Pb(){var d="PathNegatedPropertySet@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=ya();if(g===null){g=b;if(a.substr(b,1)==="("){var i="(";b+=1}else i=null,m&&j('"("');if(i!==null){var f=b,e=ya();if(e!==null){var k=[],r=b;if(a.substr(b,1)==="|"){var h="|";b+=1}else h=null,m&&j('"|"');if(h!==null){var n=ya();n!==null?h=[h,n]:(h=null,b=r)}else h=null,b=r;for(;h!==null;)k.push(h),r=
b,a.substr(b,1)==="|"?(h="|",b+=1):(h=null,m&&j('"|"')),h!==null?(n=ya(),n!==null?h=[h,n]:(h=null,b=r)):(h=null,b=r);k!==null?e=[e,k]:(e=null,b=f)}else e=null,b=f;f=e!==null?e:"";f!==null?(a.substr(b,1)===")"?(e=")",b+=1):(e=null,m&&j('")"')),e!==null?i=[i,f,e]:(i=null,b=g)):(i=null,b=g)}else i=null,b=g;g=i!==null?i:null}x[d]={nextPos:b,result:g};return g}function ya(){var d="PathOneInPropertySet@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var i=P();if(i===null&&(a.substr(b,1)==="a"?(i="a",
b+=1):(i=null,m&&j('"a"')),i===null)){i=b;if(a.substr(b,1)==="^"){var f="^";b+=1}else f=null,m&&j('"^"');if(f!==null){var e=P();e===null&&(a.substr(b,1)==="a"?(e="a",b+=1):(e=null,m&&j('"a"')),e=e!==null?e:null);e!==null?f=[f,e]:(f=null,b=i)}else f=null,b=i;i=f!==null?f:null}(m=g)&&i===null&&j("[85] PathOneInPropertySet");x[d]={nextPos:b,result:i};return i}function Ja(){var a="TriplesNode@"+b,c=x[a];if(c)return b=c.nextPos,c.result;c=m;m=!1;var d=b,f=Qb(),f=f!==null?function(a){for(var b=[],c=[],
f=null,d=0;d<a.length;d++)ba++,f=null,a[d].chainSubject==null&&a[d].triplesContext==null?f=a[d]:(f=a[d].chainSubject,b=b.concat(nextSubject.triplesContext)),f={subject:{token:"blank",value:"_:"+ba},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:f},d==0&&c.push(f.subject),b.push(f),f=d===a.length-1?{subject:{token:"blank",value:"_:"+ba},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},
object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+ba},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(ba+1)}},b.push(f);return{token:"triplesnodecollection",triplesContext:b,chainSubject:c}}(f):null;f===null&&(f=null,b=d);f!==null?d=f:(d=Rb(),d=d!==null?d:null);(m=c)&&d===null&&j("[87] TriplesNode");x[a]={nextPos:b,result:d};
return d}function Rb(){var d="BlankNodePropertyList@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;for(var i=b,f=b,e=[],k=o();k!==null;)e.push(k),k=o();if(e!==null)if(a.substr(b,1)==="["?(k="[",b+=1):(k=null,m&&j('"["')),k!==null){for(var r=[],h=o();h!==null;)r.push(h),h=o();if(r!==null)if(h=xa(),h!==null){for(var n=[],l=o();l!==null;)n.push(l),l=o();if(n!==null)if(a.substr(b,1)==="]"?(l="]",b+=1):(l=null,m&&j('"]"')),l!==null){for(var s=[],q=o();q!==null;)s.push(q),q=o();s!==null?e=[e,k,r,
h,n,l,s]:(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f;f=e!==null?function(a){ba++;for(var b={token:"blank",value:"_:"+ba},c=[],e=0;e<a.pairs.length;e++){var f=a.pairs[e],d={};d.subject=b;d.predicate=f[0];f[1].length!=null&&(f[1]=f[1][0]);d.object=f[1];c.push(d)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:a.triplesContext.concat(c),chainSubject:b}}(e[3]):null;f===null&&(f=null,b=i);(m=g)&&f===null&&j("[88] BlankNodePropertyList");
x[d]={nextPos:b,result:f};return f}function Qb(){var d="Collection@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;for(var i=b,f=b,e=[],k=o();k!==null;)e.push(k),k=o();if(e!==null)if(a.substr(b,1)==="("?(k="(",b+=1):(k=null,m&&j('"("')),k!==null){for(var r=[],h=o();h!==null;)r.push(h),h=o();if(r!==null){var n=na();if(n!==null)for(h=[];n!==null;)h.push(n),n=na();else h=null;if(h!==null){for(var n=[],l=o();l!==null;)n.push(l),l=o();if(n!==null)if(a.substr(b,1)===")"?(l=")",b+=1):(l=null,m&&j('")"')),
l!==null){for(var s=[],q=o();q!==null;)s.push(q),q=o();s!==null?e=[e,k,r,h,n,l,s]:(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f}else e=null,b=f}else e=null,b=f;else e=null,b=f;f=e!==null?e[3]:null;f===null&&(f=null,b=i);(m=g)&&f===null&&j("[89] Collection");x[d]={nextPos:b,result:f};return f}function na(){var a="GraphNode@"+b,c=x[a];if(c)return b=c.nextPos,c.result;c=m;m=!1;for(var d=b,f=b,e=[],g=o();g!==null;)e.push(g),g=o();if(e!==null)if(g=Ia(),g!==null){for(var i=[],k=o();k!==null;)i.push(k),
k=o();i!==null?e=[e,g,i]:(e=null,b=f)}else e=null,b=f;else e=null,b=f;if(e!==null)f=e;else{f=b;e=[];for(g=o();g!==null;)e.push(g),g=o();if(e!==null)if(g=Ja(),g!==null){i=[];for(k=o();k!==null;)i.push(k),k=o();i!==null?e=[e,g,i]:(e=null,b=f)}else e=null,b=f;else e=null,b=f;f=e!==null?e:null}f=f!==null?f[1]:null;f===null&&(f=null,b=d);(m=c)&&f===null&&j("[90] GraphNode");x[a]={nextPos:b,result:f};return f}function Ia(){var a="VarOrTerm@"+b,c=x[a];if(c)return b=c.nextPos,c.result;c=m;m=!1;var d=O();
d===null&&(d=Sb(),d=d!==null?d:null);(m=c)&&d===null&&j("[91] VarOrTerm");x[a]={nextPos:b,result:d};return d}function ha(){var a="VarOrIRIref@"+b,c=x[a];if(c)return b=c.nextPos,c.result;c=m;m=!1;var d=O();d===null&&(d=P(),d=d!==null?d:null);(m=c)&&d===null&&j("[92] VarOrIRIref");x[a]={nextPos:b,result:d};return d}function O(){var a="Var@"+b,c=x[a];if(c)return b=c.nextPos,c.result;c=m;m=!1;var d=b,f=Tb();f===null&&(f=Ub(),f=f!==null?f:null);f=f!==null?function(a){var b={token:"var"};b.value=a;return b}(f):
null;f===null&&(f=null,b=d);(m=c)&&f===null&&j("[93] Var");x[a]={nextPos:b,result:f};return f}function Sb(){var a="GraphTerm@"+b,c=x[a];if(c)return b=c.nextPos,c.result;c=m;m=!1;var d=P();d===null&&(d=Ea(),d===null&&(d=Fa(),d===null&&(d=Ga(),d===null&&(d=Vb(),d===null&&(d=ia(),d=d!==null?d:null)))));(m=c)&&d===null&&j("[94] GraphTerm");x[a]={nextPos:b,result:d};return d}function L(){var d="ConditionalOrExpression@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var i=b,f=b,e=Oa();if(e!==null){for(var k=
[],r=b,h=[],n=o();n!==null;)h.push(n),n=o();if(h!==null)if(a.substr(b,2)==="||"?(n="||",b+=2):(n=null,m&&j('"||"')),n!==null){for(var l=[],s=o();s!==null;)l.push(s),s=o();l!==null?(s=Oa(),s!==null?h=[h,n,l,s]:(h=null,b=r)):(h=null,b=r)}else h=null,b=r;else h=null,b=r;for(;h!==null;){k.push(h);r=b;h=[];for(n=o();n!==null;)h.push(n),n=o();if(h!==null)if(a.substr(b,2)==="||"?(n="||",b+=2):(n=null,m&&j('"||"')),n!==null){l=[];for(s=o();s!==null;)l.push(s),s=o();l!==null?(s=Oa(),s!==null?h=[h,n,l,s]:(h=
null,b=r)):(h=null,b=r)}else h=null,b=r;else h=null,b=r}k!==null?e=[e,k]:(e=null,b=f)}else e=null,b=f;f=e!==null?function(a,b){if(b.length===0)return a;for(var c={token:"expression",expressionType:"conditionalor"},e=[a],f=0;f<b.length;f++)e.push(b[f][3]);c.operands=e;return c}(e[0],e[1]):null;f===null&&(f=null,b=i);(m=g)&&f===null&&j("[96] ConditionalOrExpression");x[d]={nextPos:b,result:f};return f}function Oa(){var d="ConditionalAndExpression@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;
var i=b,f=b,e=Pa();if(e!==null){for(var k=[],r=b,h=[],n=o();n!==null;)h.push(n),n=o();if(h!==null)if(a.substr(b,2)==="&&"?(n="&&",b+=2):(n=null,m&&j('"&&"')),n!==null){for(var l=[],s=o();s!==null;)l.push(s),s=o();l!==null?(s=Pa(),s!==null?h=[h,n,l,s]:(h=null,b=r)):(h=null,b=r)}else h=null,b=r;else h=null,b=r;for(;h!==null;){k.push(h);r=b;h=[];for(n=o();n!==null;)h.push(n),n=o();if(h!==null)if(a.substr(b,2)==="&&"?(n="&&",b+=2):(n=null,m&&j('"&&"')),n!==null){l=[];for(s=o();s!==null;)l.push(s),s=o();
l!==null?(s=Pa(),s!==null?h=[h,n,l,s]:(h=null,b=r)):(h=null,b=r)}else h=null,b=r;else h=null,b=r}k!==null?e=[e,k]:(e=null,b=f)}else e=null,b=f;f=e!==null?function(a,b){if(b.length===0)return a;for(var c={token:"expression",expressionType:"conditionaland"},e=[a],f=0;f<b.length;f++)e.push(b[f][3]);c.operands=e;return c}(e[0],e[1]):null;f===null&&(f=null,b=i);(m=g)&&f===null&&j("[97] ConditionalAndExpression");x[d]={nextPos:b,result:f};return f}function Pa(){var d="RelationalExpression@"+b,g=x[d];if(g)return b=
g.nextPos,g.result;g=m;m=!1;var i=b,f=b,e=S();if(e!==null){for(var k=[],r=b,h=[],n=o();n!==null;)h.push(n),n=o();if(h!==null)if(a.substr(b,1)==="="?(n="=",b+=1):(n=null,m&&j('"="')),n!==null){for(var l=[],s=o();s!==null;)l.push(s),s=o();l!==null?(s=S(),s!==null?h=[h,n,l,s]:(h=null,b=r)):(h=null,b=r)}else h=null,b=r;else h=null,b=r;if(h!==null)r=h;else{r=b;h=[];for(n=o();n!==null;)h.push(n),n=o();if(h!==null)if(a.substr(b,2)==="!="?(n="!=",b+=2):(n=null,m&&j('"!="')),n!==null){l=[];for(s=o();s!==null;)l.push(s),
s=o();l!==null?(s=S(),s!==null?h=[h,n,l,s]:(h=null,b=r)):(h=null,b=r)}else h=null,b=r;else h=null,b=r;if(h!==null)r=h;else{r=b;h=[];for(n=o();n!==null;)h.push(n),n=o();if(h!==null)if(a.substr(b,1)==="<"?(n="<",b+=1):(n=null,m&&j('"<"')),n!==null){l=[];for(s=o();s!==null;)l.push(s),s=o();l!==null?(s=S(),s!==null?h=[h,n,l,s]:(h=null,b=r)):(h=null,b=r)}else h=null,b=r;else h=null,b=r;if(h!==null)r=h;else{r=b;h=[];for(n=o();n!==null;)h.push(n),n=o();if(h!==null)if(a.substr(b,1)===">"?(n=">",b+=1):(n=
null,m&&j('">"')),n!==null){l=[];for(s=o();s!==null;)l.push(s),s=o();l!==null?(s=S(),s!==null?h=[h,n,l,s]:(h=null,b=r)):(h=null,b=r)}else h=null,b=r;else h=null,b=r;if(h!==null)r=h;else{r=b;h=[];for(n=o();n!==null;)h.push(n),n=o();if(h!==null)if(a.substr(b,2)==="<="?(n="<=",b+=2):(n=null,m&&j('"<="')),n!==null){l=[];for(s=o();s!==null;)l.push(s),s=o();l!==null?(s=S(),s!==null?h=[h,n,l,s]:(h=null,b=r)):(h=null,b=r)}else h=null,b=r;else h=null,b=r;if(h!==null)r=h;else{r=b;h=[];for(n=o();n!==null;)h.push(n),
n=o();if(h!==null)if(a.substr(b,2)===">="?(n=">=",b+=2):(n=null,m&&j('">="')),n!==null){l=[];for(s=o();s!==null;)l.push(s),s=o();l!==null?(s=S(),s!==null?h=[h,n,l,s]:(h=null,b=r)):(h=null,b=r)}else h=null,b=r;else h=null,b=r;r=h!==null?h:null}}}}}for(;r!==null;){k.push(r);r=b;h=[];for(n=o();n!==null;)h.push(n),n=o();if(h!==null)if(a.substr(b,1)==="="?(n="=",b+=1):(n=null,m&&j('"="')),n!==null){l=[];for(s=o();s!==null;)l.push(s),s=o();l!==null?(s=S(),s!==null?h=[h,n,l,s]:(h=null,b=r)):(h=null,b=r)}else h=
null,b=r;else h=null,b=r;if(h!==null)r=h;else{r=b;h=[];for(n=o();n!==null;)h.push(n),n=o();if(h!==null)if(a.substr(b,2)==="!="?(n="!=",b+=2):(n=null,m&&j('"!="')),n!==null){l=[];for(s=o();s!==null;)l.push(s),s=o();l!==null?(s=S(),s!==null?h=[h,n,l,s]:(h=null,b=r)):(h=null,b=r)}else h=null,b=r;else h=null,b=r;if(h!==null)r=h;else{r=b;h=[];for(n=o();n!==null;)h.push(n),n=o();if(h!==null)if(a.substr(b,1)==="<"?(n="<",b+=1):(n=null,m&&j('"<"')),n!==null){l=[];for(s=o();s!==null;)l.push(s),s=o();l!==null?
(s=S(),s!==null?h=[h,n,l,s]:(h=null,b=r)):(h=null,b=r)}else h=null,b=r;else h=null,b=r;if(h!==null)r=h;else{r=b;h=[];for(n=o();n!==null;)h.push(n),n=o();if(h!==null)if(a.substr(b,1)===">"?(n=">",b+=1):(n=null,m&&j('">"')),n!==null){l=[];for(s=o();s!==null;)l.push(s),s=o();l!==null?(s=S(),s!==null?h=[h,n,l,s]:(h=null,b=r)):(h=null,b=r)}else h=null,b=r;else h=null,b=r;if(h!==null)r=h;else{r=b;h=[];for(n=o();n!==null;)h.push(n),n=o();if(h!==null)if(a.substr(b,2)==="<="?(n="<=",b+=2):(n=null,m&&j('"<="')),
n!==null){l=[];for(s=o();s!==null;)l.push(s),s=o();l!==null?(s=S(),s!==null?h=[h,n,l,s]:(h=null,b=r)):(h=null,b=r)}else h=null,b=r;else h=null,b=r;if(h!==null)r=h;else{r=b;h=[];for(n=o();n!==null;)h.push(n),n=o();if(h!==null)if(a.substr(b,2)===">="?(n=">=",b+=2):(n=null,m&&j('">="')),n!==null){l=[];for(s=o();s!==null;)l.push(s),s=o();l!==null?(s=S(),s!==null?h=[h,n,l,s]:(h=null,b=r)):(h=null,b=r)}else h=null,b=r;else h=null,b=r;r=h!==null?h:null}}}}}}k!==null?e=[e,k]:(e=null,b=f)}else e=null,b=f;
f=e!==null?function(a,b){if(b.length===0)return a;else{var c={expressionType:"relationalexpression"};c.operator=b[0][1];c.op1=a;c.op2=b[0][3];c.token="expression";return c}}(e[0],e[1]):null;f===null&&(f=null,b=i);(m=g)&&f===null&&j("[99] RelationalExpression");x[d]={nextPos:b,result:f};return f}function S(){var d="AdditiveExpression@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var i=b,f=b,e=oa();if(e!==null){for(var k=[],h=b,l=[],n=o();n!==null;)l.push(n),n=o();if(l!==null)if(a.substr(b,1)===
"+"?(n="+",b+=1):(n=null,m&&j('"+"')),n!==null){for(var q=[],s=o();s!==null;)q.push(s),s=o();q!==null?(s=oa(),s!==null?l=[l,n,q,s]:(l=null,b=h)):(l=null,b=h)}else l=null,b=h;else l=null,b=h;if(l!==null)h=l;else{h=b;l=[];for(n=o();n!==null;)l.push(n),n=o();if(l!==null)if(a.substr(b,1)==="-"?(n="-",b+=1):(n=null,m&&j('"-"')),n!==null){q=[];for(s=o();s!==null;)q.push(s),s=o();q!==null?(s=oa(),s!==null?l=[l,n,q,s]:(l=null,b=h)):(l=null,b=h)}else l=null,b=h;else l=null,b=h;if(l!==null)h=l;else{h=b;l=pa();
l===null&&(l=pa(),l=l!==null?l:null);if(l!==null){n=b;q=[];for(s=o();s!==null;)q.push(s),s=o();if(q!==null)if(a.substr(b,1)==="*"?(s="*",b+=1):(s=null,m&&j('"*"')),s!==null){for(var t=[],u=o();u!==null;)t.push(u),u=o();t!==null?(u=Y(),u!==null?q=[q,s,t,u]:(q=null,b=n)):(q=null,b=n)}else q=null,b=n;else q=null,b=n;if(q!==null)n=q;else{n=b;q=[];for(s=o();s!==null;)q.push(s),s=o();if(q!==null)if(a.substr(b,1)==="/"?(s="/",b+=1):(s=null,m&&j('"/"')),s!==null){t=[];for(u=o();u!==null;)t.push(u),u=o();
t!==null?(u=Y(),u!==null?q=[q,s,t,u]:(q=null,b=n)):(q=null,b=n)}else q=null,b=n;else q=null,b=n;n=q!==null?q:null}n=n!==null?n:"";n!==null?l=[l,n]:(l=null,b=h)}else l=null,b=h;h=l!==null?l:null}}for(;h!==null;){k.push(h);h=b;l=[];for(n=o();n!==null;)l.push(n),n=o();if(l!==null)if(a.substr(b,1)==="+"?(n="+",b+=1):(n=null,m&&j('"+"')),n!==null){q=[];for(s=o();s!==null;)q.push(s),s=o();q!==null?(s=oa(),s!==null?l=[l,n,q,s]:(l=null,b=h)):(l=null,b=h)}else l=null,b=h;else l=null,b=h;if(l!==null)h=l;else{h=
b;l=[];for(n=o();n!==null;)l.push(n),n=o();if(l!==null)if(a.substr(b,1)==="-"?(n="-",b+=1):(n=null,m&&j('"-"')),n!==null){q=[];for(s=o();s!==null;)q.push(s),s=o();q!==null?(s=oa(),s!==null?l=[l,n,q,s]:(l=null,b=h)):(l=null,b=h)}else l=null,b=h;else l=null,b=h;if(l!==null)h=l;else{h=b;l=pa();l===null&&(l=pa(),l=l!==null?l:null);if(l!==null){n=b;q=[];for(s=o();s!==null;)q.push(s),s=o();if(q!==null)if(a.substr(b,1)==="*"?(s="*",b+=1):(s=null,m&&j('"*"')),s!==null){t=[];for(u=o();u!==null;)t.push(u),
u=o();t!==null?(u=Y(),u!==null?q=[q,s,t,u]:(q=null,b=n)):(q=null,b=n)}else q=null,b=n;else q=null,b=n;if(q!==null)n=q;else{n=b;q=[];for(s=o();s!==null;)q.push(s),s=o();if(q!==null)if(a.substr(b,1)==="/"?(s="/",b+=1):(s=null,m&&j('"/"')),s!==null){t=[];for(u=o();u!==null;)t.push(u),u=o();t!==null?(u=Y(),u!==null?q=[q,s,t,u]:(q=null,b=n)):(q=null,b=n)}else q=null,b=n;else q=null,b=n;n=q!==null?q:null}n=n!==null?n:"";n!==null?l=[l,n]:(l=null,b=h)}else l=null,b=h;h=l!==null?l:null}}}k!==null?e=[e,k]:
(e=null,b=f)}else e=null,b=f;f=e!==null?function(a,b){if(b.length===0)return a;var c={token:"expression",expressionType:"additiveexpression"};c.summand=a;c.summands=[];for(var e=0;e<b.length;e++){var f=b[e],d={};if(f.length==4&&typeof f[1]==="string")d.operator=f[1],d.expression=f[3];else{var f={},g=d[0],j=d[1][1],i=d[1][3],j=null;g.value<0?(d.operator="-",g.value=-g.value):d.operator="+";f.token="expression";f.expressionType="multiplicativeexpression";f.operator=g;f.factors=[{operator:j,expression:i}];
d.expression=f}c.summands.push(d)}return c}(e[0],e[1]):null;f===null&&(f=null,b=i);(m=g)&&f===null&&j("[101] AdditiveExpression");x[d]={nextPos:b,result:f};return f}function oa(){var d="MultiplicativeExpression@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var i=b,f=b,e=Y();if(e!==null){for(var k=[],h=b,l=[],n=o();n!==null;)l.push(n),n=o();if(l!==null)if(a.substr(b,1)==="*"?(n="*",b+=1):(n=null,m&&j('"*"')),n!==null){for(var q=[],s=o();s!==null;)q.push(s),s=o();q!==null?(s=Y(),s!==null?l=[l,
n,q,s]:(l=null,b=h)):(l=null,b=h)}else l=null,b=h;else l=null,b=h;if(l!==null)h=l;else{h=b;l=[];for(n=o();n!==null;)l.push(n),n=o();if(l!==null)if(a.substr(b,1)==="/"?(n="/",b+=1):(n=null,m&&j('"/"')),n!==null){q=[];for(s=o();s!==null;)q.push(s),s=o();q!==null?(s=Y(),s!==null?l=[l,n,q,s]:(l=null,b=h)):(l=null,b=h)}else l=null,b=h;else l=null,b=h;h=l!==null?l:null}for(;h!==null;){k.push(h);h=b;l=[];for(n=o();n!==null;)l.push(n),n=o();if(l!==null)if(a.substr(b,1)==="*"?(n="*",b+=1):(n=null,m&&j('"*"')),
n!==null){q=[];for(s=o();s!==null;)q.push(s),s=o();q!==null?(s=Y(),s!==null?l=[l,n,q,s]:(l=null,b=h)):(l=null,b=h)}else l=null,b=h;else l=null,b=h;if(l!==null)h=l;else{h=b;l=[];for(n=o();n!==null;)l.push(n),n=o();if(l!==null)if(a.substr(b,1)==="/"?(n="/",b+=1):(n=null,m&&j('"/"')),n!==null){q=[];for(s=o();s!==null;)q.push(s),s=o();q!==null?(s=Y(),s!==null?l=[l,n,q,s]:(l=null,b=h)):(l=null,b=h)}else l=null,b=h;else l=null,b=h;h=l!==null?l:null}}k!==null?e=[e,k]:(e=null,b=f)}else e=null,b=f;f=e!==null?
function(a,b){if(b.length===0)return a;var c={token:"expression",expressionType:"multiplicativeexpression"};c.factor=a;c.factors=[];for(var e=0;e<b.length;e++){var f=b[e],d={};d.operator=f[1];d.expression=f[3];c.factors.push(d)}return c}(e[0],e[1]):null;f===null&&(f=null,b=i);(m=g)&&f===null&&j("[102] MultiplicativeExpression");x[d]={nextPos:b,result:f};return f}function Y(){var d="UnaryExpression@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var i=b,f=b;if(a.substr(b,1)==="!"){var e="!";b+=
1}else e=null,m&&j('"!"');if(e!==null){for(var h=[],k=o();k!==null;)h.push(k),k=o();h!==null?(k=za(),k!==null?e=[e,h,k]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;f=e!==null?function(a){var b={token:"expression",expressionType:"unaryexpression",unaryexpression:"!"};b.expression=a;return b}(e[2]):null;f===null&&(f=null,b=i);if(f!==null)i=f;else{f=i=b;a.substr(b,1)==="+"?(e="+",b+=1):(e=null,m&&j('"+"'));if(e!==null){h=[];for(k=o();k!==null;)h.push(k),k=o();h!==null?(k=za(),k!==null?e=[e,h,k]:(e=null,
b=f)):(e=null,b=f)}else e=null,b=f;f=e!==null?function(a){var b={token:"expression",expressionType:"unaryexpression",unaryexpression:"+"};b.expression=a;return b}(e[2]):null;f===null&&(f=null,b=i);if(f!==null)i=f;else{f=i=b;a.substr(b,1)==="-"?(e="-",b+=1):(e=null,m&&j('"-"'));if(e!==null){h=[];for(k=o();k!==null;)h.push(k),k=o();h!==null?(k=za(),k!==null?e=[e,h,k]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;f=e!==null?function(a){var b={token:"expression",expressionType:"unaryexpression",unaryexpression:"-"};
b.expression=a;return b}(e[2]):null;f===null&&(f=null,b=i);f!==null?i=f:(i=za(),i=i!==null?i:null)}}(m=g)&&i===null&&j("[103] UnaryExpression");x[d]={nextPos:b,result:i};return i}function za(){var a="PrimaryExpression@"+b,c=x[a];if(c)return b=c.nextPos,c.result;c=m;m=!1;var d=Da();if(d===null&&(d=Ca(),d===null&&(d=Wb(),d===null))){var d=b,f=Ea(),f=f!==null?function(a){var b={token:"expression",expressionType:"atomic",primaryexpression:"rdfliteral"};b.value=a;return b}(f):null;f===null&&(f=null,b=
d);f!==null?d=f:(d=b,f=Fa(),f=f!==null?function(a){var b={token:"expression",expressionType:"atomic",primaryexpression:"numericliteral"};b.value=a;return b}(f):null,f===null&&(f=null,b=d),f!==null?d=f:(d=b,f=Ga(),f=f!==null?function(a){var b={token:"expression",expressionType:"atomic",primaryexpression:"booleanliteral"};b.value=a;return b}(f):null,f===null&&(f=null,b=d),f!==null?d=f:(d=Xb(),d===null&&(d=b,f=O(),f=f!==null?function(a){var b={token:"expression",expressionType:"atomic",primaryexpression:"var"};
b.value=a;return b}(f):null,f===null&&(f=null,b=d),d=f!==null?f:null))))}(m=c)&&d===null&&j("[104] PrimaryExpression");x[a]={nextPos:b,result:d};return d}function Da(){var d="BrackettedExpression@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var i=b,f=b;if(a.substr(b,1)==="("){var e="(";b+=1}else e=null,m&&j('"("');if(e!==null){for(var k=[],h=o();h!==null;)k.push(h),h=o();if(k!==null)if(h=L(),h!==null){for(var l=[],n=o();n!==null;)l.push(n),n=o();l!==null?(a.substr(b,1)===")"?(n=")",b+=1):
(n=null,m&&j('")"')),n!==null?e=[e,k,h,l,n]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;f=e!==null?e[2]:null;f===null&&(f=null,b=i);(m=g)&&f===null&&j("[105] BrackettedExpression");x[d]={nextPos:b,result:f};return f}function Ca(){var d="BuiltInCall@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var i=b,f=b;if(a.substr(b,3)==="STR"){var e="STR";b+=3}else e=null,m&&j('"STR"');e===null&&(a.substr(b,3)==="str"?(e="str",b+=3):(e=null,m&&j('"str"')),e=e!==null?e:null);
if(e!==null){for(var k=[],h=o();h!==null;)k.push(h),h=o();if(k!==null)if(a.substr(b,1)==="("?(h="(",b+=1):(h=null,m&&j('"("')),h!==null){for(var l=[],n=o();n!==null;)l.push(n),n=o();if(l!==null)if(n=L(),n!==null){for(var q=[],s=o();s!==null;)q.push(s),s=o();q!==null?(a.substr(b,1)===")"?(s=")",b+=1):(s=null,m&&j('")"')),s!==null?e=[e,k,h,l,n,q,s]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;f=e!==null?function(a){var b={token:"expression",
expressionType:"builtincall",builtincall:"str"};b.args=[a];return b}(e[4]):null;f===null&&(f=null,b=i);if(f!==null)i=f;else{f=i=b;a.substr(b,4)==="LANG"?(e="LANG",b+=4):(e=null,m&&j('"LANG"'));e===null&&(a.substr(b,4)==="lang"?(e="lang",b+=4):(e=null,m&&j('"lang"')),e=e!==null?e:null);if(e!==null){k=[];for(h=o();h!==null;)k.push(h),h=o();if(k!==null)if(a.substr(b,1)==="("?(h="(",b+=1):(h=null,m&&j('"("')),h!==null){l=[];for(n=o();n!==null;)l.push(n),n=o();if(l!==null)if(n=L(),n!==null){q=[];for(s=
o();s!==null;)q.push(s),s=o();q!==null?(a.substr(b,1)===")"?(s=")",b+=1):(s=null,m&&j('")"')),s!==null?e=[e,k,h,l,n,q,s]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;f=e!==null?function(a){var b={token:"expression",expressionType:"builtincall",builtincall:"lang"};b.args=[a];return b}(e[4]):null;f===null&&(f=null,b=i);if(f!==null)i=f;else{f=i=b;a.substr(b,11)==="LANGMATCHES"?(e="LANGMATCHES",b+=11):(e=null,m&&j('"LANGMATCHES"'));if(e!==
null){k=[];for(h=o();h!==null;)k.push(h),h=o();if(k!==null)if(a.substr(b,1)==="("?(h="(",b+=1):(h=null,m&&j('"("')),h!==null){l=[];for(n=o();n!==null;)l.push(n),n=o();if(l!==null)if(n=L(),n!==null){q=[];for(s=o();s!==null;)q.push(s),s=o();if(q!==null)if(a.substr(b,1)===","?(s=",",b+=1):(s=null,m&&j('","')),s!==null){for(var t=[],u=o();u!==null;)t.push(u),u=o();if(t!==null)if(u=L(),u!==null){for(var y=[],w=o();w!==null;)y.push(w),w=o();y!==null?(a.substr(b,1)===")"?(w=")",b+=1):(w=null,m&&j('")"')),
w!==null?e=[e,k,h,l,n,q,s,t,u,y,w]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;f=e!==null?function(a,b){var c={token:"expression",expressionType:"builtincall",builtincall:"langmatches"};c.args=[a,b];return c}(e[4],e[8]):null;f===null&&(f=null,b=i);if(f!==null)i=f;else{f=i=b;a.substr(b,8)==="DATATYPE"?(e="DATATYPE",b+=8):(e=null,m&&j('"DATATYPE"'));e===null&&(a.substr(b,8)===
"datatype"?(e="datatype",b+=8):(e=null,m&&j('"datatype"')),e=e!==null?e:null);if(e!==null){k=[];for(h=o();h!==null;)k.push(h),h=o();if(k!==null)if(a.substr(b,1)==="("?(h="(",b+=1):(h=null,m&&j('"("')),h!==null){l=[];for(n=o();n!==null;)l.push(n),n=o();if(l!==null)if(n=L(),n!==null){q=[];for(s=o();s!==null;)q.push(s),s=o();q!==null?(a.substr(b,1)===")"?(s=")",b+=1):(s=null,m&&j('")"')),s!==null?e=[e,k,h,l,n,q,s]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,
b=f}else e=null,b=f;f=e!==null?function(a){var b={token:"expression",expressionType:"builtincall",builtincall:"datatype"};b.args=[a];return b}(e[4]):null;f===null&&(f=null,b=i);if(f!==null)i=f;else{f=i=b;a.substr(b,5)==="BOUND"?(e="BOUND",b+=5):(e=null,m&&j('"BOUND"'));if(e!==null){k=[];for(h=o();h!==null;)k.push(h),h=o();if(k!==null)if(a.substr(b,1)==="("?(h="(",b+=1):(h=null,m&&j('"("')),h!==null){l=[];for(n=o();n!==null;)l.push(n),n=o();if(l!==null)if(n=O(),n!==null){q=[];for(s=o();s!==null;)q.push(s),
s=o();q!==null?(a.substr(b,1)===")"?(s=")",b+=1):(s=null,m&&j('")"')),s!==null?e=[e,k,h,l,n,q,s]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;f=e!==null?function(a){var b={token:"expression",expressionType:"builtincall",builtincall:"bound"};b.args=[a];return b}(e[4]):null;f===null&&(f=null,b=i);if(f!==null)i=f;else{f=i=b;a.substr(b,3)==="IRI"?(e="IRI",b+=3):(e=null,m&&j('"IRI"'));if(e!==null){k=[];for(h=o();h!==null;)k.push(h),h=o();if(k!==
null)if(a.substr(b,1)==="("?(h="(",b+=1):(h=null,m&&j('"("')),h!==null){l=[];for(n=o();n!==null;)l.push(n),n=o();if(l!==null)if(n=L(),n!==null){q=[];for(s=o();s!==null;)q.push(s),s=o();q!==null?(a.substr(b,1)===")"?(s=")",b+=1):(s=null,m&&j('")"')),s!==null?e=[e,k,h,l,n,q,s]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;f=e!==null?function(a){var b={token:"expression",expressionType:"builtincall",builtincall:"iri"};b.args=[a];return b}(e[4]):
null;f===null&&(f=null,b=i);if(f!==null)i=f;else{f=i=b;a.substr(b,3)==="URI"?(e="URI",b+=3):(e=null,m&&j('"URI"'));if(e!==null){k=[];for(h=o();h!==null;)k.push(h),h=o();if(k!==null)if(a.substr(b,1)==="("?(h="(",b+=1):(h=null,m&&j('"("')),h!==null){l=[];for(n=o();n!==null;)l.push(n),n=o();if(l!==null)if(n=L(),n!==null){q=[];for(s=o();s!==null;)q.push(s),s=o();q!==null?(a.substr(b,1)===")"?(s=")",b+=1):(s=null,m&&j('")"')),s!==null?e=[e,k,h,l,n,q,s]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;else e=
null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;f=e!==null?function(a){var b={token:"expression",expressionType:"builtincall",builtincall:"uri"};b.args=[a];return b}(e[4]):null;f===null&&(f=null,b=i);if(f!==null)i=f;else{f=i=b;a.substr(b,5)==="BNODE"?(e="BNODE",b+=5):(e=null,m&&j('"BNODE"'));if(e!==null){k=[];for(h=o();h!==null;)k.push(h),h=o();if(k!==null){h=b;a.substr(b,1)==="("?(l="(",b+=1):(l=null,m&&j('"("'));if(l!==null){n=[];for(q=o();q!==null;)n.push(q),q=o();if(n!==null)if(q=L(),
q!==null){s=[];for(t=o();t!==null;)s.push(t),t=o();s!==null?(a.substr(b,1)===")"?(t=")",b+=1):(t=null,m&&j('")"')),t!==null?l=[l,n,q,s,t]:(l=null,b=h)):(l=null,b=h)}else l=null,b=h;else l=null,b=h}else l=null,b=h;l!==null?h=l:(h=ia(),h=h!==null?h:null);h!==null?e=[e,k,h]:(e=null,b=f)}else e=null,b=f}else e=null,b=f;f=e!==null?function(a){var b={token:"expression",expressionType:"builtincall",builtincall:"bnode"};b.args=a.length===5?[a[2]]:null;return b}(e[2]):null;f===null&&(f=null,b=i);if(f!==null)i=
f;else{f=i=b;a.substr(b,8)==="COALESCE"?(e="COALESCE",b+=8):(e=null,m&&j('"COALESCE"'));if(e!==null){k=[];for(h=o();h!==null;)k.push(h),h=o();k!==null?(h=Jb(),h!==null?e=[e,k,h]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;f=e!==null?function(a){var b={token:"expression",expressionType:"builtincall",builtincall:"coalesce"};b.args=a;return b}(e[2]):null;f===null&&(f=null,b=i);if(f!==null)i=f;else{f=i=b;a.substr(b,2)==="IF"?(e="IF",b+=2):(e=null,m&&j('"IF"'));if(e!==null){k=[];for(h=o();h!==null;)k.push(h),
h=o();if(k!==null)if(a.substr(b,1)==="("?(h="(",b+=1):(h=null,m&&j('"("')),h!==null){l=[];for(n=o();n!==null;)l.push(n),n=o();if(l!==null)if(n=L(),n!==null){q=[];for(s=o();s!==null;)q.push(s),s=o();if(q!==null)if(a.substr(b,1)===","?(s=",",b+=1):(s=null,m&&j('","')),s!==null){t=[];for(u=o();u!==null;)t.push(u),u=o();if(t!==null)if(u=L(),u!==null){y=[];for(w=o();w!==null;)y.push(w),w=o();if(y!==null)if(a.substr(b,1)===","?(w=",",b+=1):(w=null,m&&j('","')),w!==null){for(var D=[],A=o();A!==null;)D.push(A),
A=o();if(D!==null)if(A=L(),A!==null){for(var M=[],F=o();F!==null;)M.push(F),F=o();M!==null?(a.substr(b,1)===")"?(F=")",b+=1):(F=null,m&&j('")"')),F!==null?e=[e,k,h,l,n,q,s,t,u,y,w,D,A,M,F]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;f=e!==null?function(a,b,c){var e={token:"expression",expressionType:"builtincall",
builtincall:"if"};e.args=[a,b,c];return e}(e[4],e[8],e[12]):null;f===null&&(f=null,b=i);if(f!==null)i=f;else{f=i=b;a.substr(b,9)==="ISLITERAL"?(e="ISLITERAL",b+=9):(e=null,m&&j('"ISLITERAL"'));if(e!==null){k=[];for(h=o();h!==null;)k.push(h),h=o();if(k!==null)if(a.substr(b,1)==="("?(h="(",b+=1):(h=null,m&&j('"("')),h!==null){l=[];for(n=o();n!==null;)l.push(n),n=o();if(l!==null)if(n=L(),n!==null){q=[];for(s=o();s!==null;)q.push(s),s=o();q!==null?(a.substr(b,1)===")"?(s=")",b+=1):(s=null,m&&j('")"')),
s!==null?e=[e,k,h,l,n,q,s]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;f=e!==null?function(a){var b={token:"expression",expressionType:"builtincall",builtincall:"isliteral"};b.args=[a];return b}(e[4]):null;f===null&&(f=null,b=i);if(f!==null)i=f;else{f=i=b;a.substr(b,7)==="ISBLANK"?(e="ISBLANK",b+=7):(e=null,m&&j('"ISBLANK"'));if(e!==null){k=[];for(h=o();h!==null;)k.push(h),h=o();if(k!==null)if(a.substr(b,1)==="("?(h="(",b+=1):(h=null,
m&&j('"("')),h!==null){l=[];for(n=o();n!==null;)l.push(n),n=o();if(l!==null)if(n=L(),n!==null){q=[];for(s=o();s!==null;)q.push(s),s=o();q!==null?(a.substr(b,1)===")"?(s=")",b+=1):(s=null,m&&j('")"')),s!==null?e=[e,k,h,l,n,q,s]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;f=e!==null?function(a){var b={token:"expression",expressionType:"builtincall",builtincall:"isblank"};b.args=[a];return b}(e[4]):null;f===null&&(f=null,b=i);if(f!==null)i=
f;else{f=i=b;a.substr(b,8)==="SAMETERM"?(e="SAMETERM",b+=8):(e=null,m&&j('"SAMETERM"'));if(e!==null){k=[];for(h=o();h!==null;)k.push(h),h=o();if(k!==null)if(a.substr(b,1)==="("?(h="(",b+=1):(h=null,m&&j('"("')),h!==null){l=[];for(n=o();n!==null;)l.push(n),n=o();if(l!==null)if(n=L(),n!==null){q=[];for(s=o();s!==null;)q.push(s),s=o();if(q!==null)if(a.substr(b,1)===","?(s=",",b+=1):(s=null,m&&j('","')),s!==null){t=[];for(u=o();u!==null;)t.push(u),u=o();if(t!==null)if(u=L(),u!==null){y=[];for(w=o();w!==
null;)y.push(w),w=o();y!==null?(a.substr(b,1)===")"?(w=")",b+=1):(w=null,m&&j('")"')),w!==null?e=[e,k,h,l,n,q,s,t,u,y,w]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;f=e!==null?function(a,b){var c={token:"expression",expressionType:"builtincall",builtincall:"sameterm"};c.args=[a,b];return c}(e[4],e[8]):null;f===null&&(f=null,b=i);if(f!==null)i=f;else{f=i=b;a.substr(b,5)===
"ISURI"?(e="ISURI",b+=5):(e=null,m&&j('"ISURI"'));e===null&&(a.substr(b,5)==="isuri"?(e="isuri",b+=5):(e=null,m&&j('"isuri"')),e===null&&(a.substr(b,5)==="ISIRI"?(e="ISIRI",b+=5):(e=null,m&&j('"ISIRI"')),e===null&&(a.substr(b,5)==="isiri"?(e="isiri",b+=5):(e=null,m&&j('"isiri"')),e=e!==null?e:null)));if(e!==null){k=[];for(h=o();h!==null;)k.push(h),h=o();if(k!==null)if(a.substr(b,1)==="("?(h="(",b+=1):(h=null,m&&j('"("')),h!==null){l=[];for(n=o();n!==null;)l.push(n),n=o();if(l!==null)if(n=L(),n!==
null){q=[];for(s=o();s!==null;)q.push(s),s=o();q!==null?(a.substr(b,1)===")"?(s=")",b+=1):(s=null,m&&j('")"')),s!==null?e=[e,k,h,l,n,q,s]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;f=e!==null?function(a){var b={token:"expression",expressionType:"builtincall",builtincall:"isuri"};b.args=[a];return b}(e[4]):null;f===null&&(f=null,b=i);f!==null?i=f:(i=Yb(),i===null&&(i=Zb(),i===null&&(i=$b(),i=i!==null?i:null)))}}}}}}}}}}}}}(m=g)&&i===null&&
j("[106] BuiltInCall");x[d]={nextPos:b,result:i};return i}function Yb(){var d="RegexExpression@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var h=b,f=b;if(a.substr(b,5)==="REGEX"){var e="REGEX";b+=5}else e=null,m&&j('"REGEX"');e===null&&(a.substr(b,5)==="regex"?(e="regex",b+=5):(e=null,m&&j('"regex"')),e=e!==null?e:null);if(e!==null){for(var i=[],k=o();k!==null;)i.push(k),k=o();if(i!==null)if(a.substr(b,1)==="("?(k="(",b+=1):(k=null,m&&j('"("')),k!==null){for(var l=[],n=o();n!==null;)l.push(n),
n=o();if(l!==null)if(n=L(),n!==null){for(var q=[],s=o();s!==null;)q.push(s),s=o();if(q!==null)if(a.substr(b,1)===","?(s=",",b+=1):(s=null,m&&j('","')),s!==null){for(var t=[],u=o();u!==null;)t.push(u),u=o();if(t!==null)if(u=L(),u!==null){for(var w=[],y=o();y!==null;)w.push(y),y=o();if(w!==null){y=b;if(a.substr(b,1)===","){var D=",";b+=1}else D=null,m&&j('","');if(D!==null){for(var A=[],M=o();M!==null;)A.push(M),M=o();A!==null?(M=L(),M!==null?D=[D,A,M]:(D=null,b=y)):(D=null,b=y)}else D=null,b=y;y=D!==
null?D:"";if(y!==null){D=[];for(A=o();A!==null;)D.push(A),A=o();D!==null?(a.substr(b,1)===")"?(A=")",b+=1):(A=null,m&&j('")"')),A!==null?e=[e,i,k,l,n,q,s,t,u,w,y,D,A]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f}else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;f=e!==null?function(a,b,c){var e={token:"expression",expressionType:"regex"};e.text=a;e.pattern=b;e.flags=c[2];return e}(e[4],e[8],
e[10]):null;f===null&&(f=null,b=h);(m=g)&&f===null&&j("[107] RegexExpression");x[d]={nextPos:b,result:f};return f}function Zb(){var d="ExistsFunc@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var h=b,f=b;if(a.substr(b,6)==="EXISTS"){var e="EXISTS";b+=6}else e=null,m&&j('"EXISTS"');e===null&&(a.substr(b,6)==="exists"?(e="exists",b+=6):(e=null,m&&j('"exists"')),e=e!==null?e:null);if(e!==null){for(var i=[],k=o();k!==null;)i.push(k),k=o();i!==null?(k=U(),k!==null?e=[e,i,k]:(e=null,b=f)):(e=null,
b=f)}else e=null,b=f;f=e!==null?function(a){var b={token:"expression",expressionType:"builtincall",builtincall:"exists"};b.args=[a];return b}(e[2]):null;f===null&&(f=null,b=h);(m=g)&&f===null&&j("[108] ExistsFunc");x[d]={nextPos:b,result:f};return f}function $b(){var d="NotExistsFunc@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var h=b,f=b;if(a.substr(b,3)==="NOT"){var e="NOT";b+=3}else e=null,m&&j('"NOT"');e===null&&(a.substr(b,3)==="not"?(e="not",b+=3):(e=null,m&&j('"not"')),e=e!==null?
e:null);if(e!==null){for(var k=[],i=o();i!==null;)k.push(i),i=o();if(k!==null)if(a.substr(b,6)==="EXISTS"?(i="EXISTS",b+=6):(i=null,m&&j('"EXISTS"')),i===null&&(a.substr(b,6)==="exists"?(i="exists",b+=6):(i=null,m&&j('"exists"')),i=i!==null?i:null),i!==null){for(var l=[],n=o();n!==null;)l.push(n),n=o();l!==null?(n=U(),n!==null?e=[e,k,i,l,n]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;f=e!==null?function(a){var b={token:"expression",expressionType:"builtincall",builtincall:"notexists"};
b.args=[a];return b}(e[4]):null;f===null&&(f=null,b=h);(m=g)&&f===null&&j("[109] NotExistsFunc");x[d]={nextPos:b,result:f};return f}function Xb(){var d="Aggregate@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var h=b,f=b;if(a.substr(b,5)==="COUNT"){var e="COUNT";b+=5}else e=null,m&&j('"COUNT"');e===null&&(a.substr(b,5)==="count"?(e="count",b+=5):(e=null,m&&j('"count"')),e=e!==null?e:null);if(e!==null){for(var i=[],k=o();k!==null;)i.push(k),k=o();if(i!==null)if(a.substr(b,1)==="("?(k="(",b+=
1):(k=null,m&&j('"("')),k!==null){for(var l=[],n=o();n!==null;)l.push(n),n=o();if(l!==null)if(a.substr(b,8)==="DISTINCT"?(n="DISTINCT",b+=8):(n=null,m&&j('"DISTINCT"')),n===null&&(a.substr(b,8)==="distinct"?(n="distinct",b+=8):(n=null,m&&j('"distinct"')),n=n!==null?n:null),n=n!==null?n:"",n!==null){for(var q=[],s=o();s!==null;)q.push(s),s=o();if(q!==null)if(a.substr(b,1)==="*"?(s="*",b+=1):(s=null,m&&j('"*"')),s===null&&(s=L(),s=s!==null?s:null),s!==null){for(var t=[],u=o();u!==null;)t.push(u),u=
o();if(t!==null)if(a.substr(b,1)===")"?(u=")",b+=1):(u=null,m&&j('")"')),u!==null){for(var y=[],w=o();w!==null;)y.push(w),w=o();y!==null?e=[e,i,k,l,n,q,s,t,u,y]:(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;f=e!==null?function(a,b){var c={token:"expression",expressionType:"aggregate",aggregateType:"count"};c.distinct=a!=""?"DISTINCT":a;c.expression=b;return c}(e[4],e[6]):null;f===null&&(f=
null,b=h);if(f!==null)h=f;else{f=h=b;a.substr(b,3)==="SUM"?(e="SUM",b+=3):(e=null,m&&j('"SUM"'));e===null&&(a.substr(b,3)==="sum"?(e="sum",b+=3):(e=null,m&&j('"sum"')),e=e!==null?e:null);if(e!==null){i=[];for(k=o();k!==null;)i.push(k),k=o();if(i!==null)if(a.substr(b,1)==="("?(k="(",b+=1):(k=null,m&&j('"("')),k!==null){l=[];for(n=o();n!==null;)l.push(n),n=o();if(l!==null)if(a.substr(b,8)==="DISTINCT"?(n="DISTINCT",b+=8):(n=null,m&&j('"DISTINCT"')),n===null&&(a.substr(b,8)==="distinct"?(n="distinct",
b+=8):(n=null,m&&j('"distinct"')),n=n!==null?n:null),n=n!==null?n:"",n!==null){q=[];for(s=o();s!==null;)q.push(s),s=o();if(q!==null)if(s=L(),s!==null){t=[];for(u=o();u!==null;)t.push(u),u=o();if(t!==null)if(a.substr(b,1)===")"?(u=")",b+=1):(u=null,m&&j('")"')),u!==null){y=[];for(w=o();w!==null;)y.push(w),w=o();y!==null?e=[e,i,k,l,n,q,s,t,u,y]:(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;
f=e!==null?function(a,b){var c={token:"expression",expressionType:"aggregate",aggregateType:"sum"};c.distinct=a!=""?"DISTINCT":a;c.expression=b;return c}(e[4],e[6]):null;f===null&&(f=null,b=h);if(f!==null)h=f;else{f=h=b;a.substr(b,3)==="MIN"?(e="MIN",b+=3):(e=null,m&&j('"MIN"'));e===null&&(a.substr(b,3)==="min"?(e="min",b+=3):(e=null,m&&j('"min"')),e=e!==null?e:null);if(e!==null){i=[];for(k=o();k!==null;)i.push(k),k=o();if(i!==null)if(a.substr(b,1)==="("?(k="(",b+=1):(k=null,m&&j('"("')),k!==null){l=
[];for(n=o();n!==null;)l.push(n),n=o();if(l!==null)if(a.substr(b,8)==="DISTINCT"?(n="DISTINCT",b+=8):(n=null,m&&j('"DISTINCT"')),n===null&&(a.substr(b,8)==="distinct"?(n="distinct",b+=8):(n=null,m&&j('"distinct"')),n=n!==null?n:null),n=n!==null?n:"",n!==null){q=[];for(s=o();s!==null;)q.push(s),s=o();if(q!==null)if(s=L(),s!==null){t=[];for(u=o();u!==null;)t.push(u),u=o();if(t!==null)if(a.substr(b,1)===")"?(u=")",b+=1):(u=null,m&&j('")"')),u!==null){y=[];for(w=o();w!==null;)y.push(w),w=o();y!==null?
e=[e,i,k,l,n,q,s,t,u,y]:(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;f=e!==null?function(a,b){var c={token:"expression",expressionType:"aggregate",aggregateType:"min"};c.distinct=a!=""?"DISTINCT":a;c.expression=b;return c}(e[4],e[6]):null;f===null&&(f=null,b=h);if(f!==null)h=f;else{f=h=b;a.substr(b,3)==="MAX"?(e="MAX",b+=3):(e=null,m&&j('"MAX"'));e===null&&(a.substr(b,3)==="max"?(e="max",
b+=3):(e=null,m&&j('"max"')),e=e!==null?e:null);if(e!==null){i=[];for(k=o();k!==null;)i.push(k),k=o();if(i!==null)if(a.substr(b,1)==="("?(k="(",b+=1):(k=null,m&&j('"("')),k!==null){l=[];for(n=o();n!==null;)l.push(n),n=o();if(l!==null)if(a.substr(b,8)==="DISTINCT"?(n="DISTINCT",b+=8):(n=null,m&&j('"DISTINCT"')),n===null&&(a.substr(b,8)==="distinct"?(n="distinct",b+=8):(n=null,m&&j('"distinct"')),n=n!==null?n:null),n=n!==null?n:"",n!==null){q=[];for(s=o();s!==null;)q.push(s),s=o();if(q!==null)if(s=
L(),s!==null){t=[];for(u=o();u!==null;)t.push(u),u=o();if(t!==null)if(a.substr(b,1)===")"?(u=")",b+=1):(u=null,m&&j('")"')),u!==null){y=[];for(w=o();w!==null;)y.push(w),w=o();y!==null?e=[e,i,k,l,n,q,s,t,u,y]:(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;f=e!==null?function(a,b){var c={token:"expression",expressionType:"aggregate",aggregateType:"max"};c.distinct=a!=""?"DISTINCT":a;c.expression=
b;return c}(e[4],e[6]):null;f===null&&(f=null,b=h);if(f!==null)h=f;else{f=h=b;a.substr(b,3)==="AVG"?(e="AVG",b+=3):(e=null,m&&j('"AVG"'));e===null&&(a.substr(b,3)==="avg"?(e="avg",b+=3):(e=null,m&&j('"avg"')),e=e!==null?e:null);if(e!==null){i=[];for(k=o();k!==null;)i.push(k),k=o();if(i!==null)if(a.substr(b,1)==="("?(k="(",b+=1):(k=null,m&&j('"("')),k!==null){l=[];for(n=o();n!==null;)l.push(n),n=o();if(l!==null)if(a.substr(b,8)==="DISTINCT"?(n="DISTINCT",b+=8):(n=null,m&&j('"DISTINCT"')),n===null&&
(a.substr(b,8)==="distinct"?(n="distinct",b+=8):(n=null,m&&j('"distinct"')),n=n!==null?n:null),n=n!==null?n:"",n!==null){q=[];for(s=o();s!==null;)q.push(s),s=o();if(q!==null)if(s=L(),s!==null){t=[];for(u=o();u!==null;)t.push(u),u=o();if(t!==null)if(a.substr(b,1)===")"?(u=")",b+=1):(u=null,m&&j('")"')),u!==null){y=[];for(w=o();w!==null;)y.push(w),w=o();y!==null?e=[e,i,k,l,n,q,s,t,u,y]:(e=null,b=f)}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=null,b=f;else e=null,b=f}else e=
null,b=f;else e=null,b=f}else e=null,b=f;f=e!==null?function(a,b){var c={token:"expression",expressionType:"aggregate",aggregateType:"avg"};c.distinct=a!=""?"DISTINCT":a;c.expression=b;return c}(e[4],e[6]):null;f===null&&(f=null,b=h);h=f!==null?f:null}}}}(m=g)&&h===null&&j("[110] Aggregate");x[d]={nextPos:b,result:h};return h}function Wb(){var a="IRIrefOrFunction@"+b,c=x[a];if(c)return b=c.nextPos,c.result;c=m;m=!1;var d=b,f=b,e=P();if(e!==null){var g=ib(),g=g!==null?g:"";g!==null?e=[e,g]:(e=null,
b=f)}else e=null,b=f;f=e!==null?function(a,b){var c={token:"expression",expressionType:"irireforfunction"};c.iriref=a;c.args=b.value;return c}(e[0],e[1]):null;f===null&&(f=null,b=d);(m=c)&&f===null&&j("[117] IRIrefOrFunction");x[a]={nextPos:b,result:f};return f}function Ea(){var d="RDFLiteral@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var h=b,f=b,e=ac();if(e!==null){var k=bc();if(k===null){k=b;if(a.substr(b,2)==="^^"){var i="^^";b+=2}else i=null,m&&j('"^^"');if(i!==null){var l=P();l!==null?
i=[i,l]:(i=null,b=k)}else i=null,b=k;k=i!==null?i:null}k=k!==null?k:"";k!==null?e=[e,k]:(e=null,b=f)}else e=null,b=f;f=e!==null?function(a,b){return typeof b==="string"&&b.length>0?{token:"literal",value:a.value,lang:b.slice(1),type:null}:typeof b==="object"?(b.shift(),{token:"literal",value:a.value,lang:null,type:b[0]}):{token:"literal",value:a.value,lang:null,type:null}}(e[0],e[1]):null;f===null&&(f=null,b=h);(m=g)&&f===null&&j("[112] RDFLiteral");x[d]={nextPos:b,result:f};return f}function Fa(){var a=
"NumericLiteral@"+b,c=x[a];if(c)return b=c.nextPos,c.result;c=m;m=!1;var d=cc();d===null&&(d=dc(),d===null&&(d=pa(),d=d!==null?d:null));(m=c)&&d===null&&j("[113] NumericLiteral");x[a]={nextPos:b,result:d};return d}function cc(){var a="NumericLiteralUnsigned@"+b,c=x[a];if(c)return b=c.nextPos,c.result;c=m;m=!1;var d=Qa();d===null&&(d=Ra(),d===null&&(d=aa(),d=d!==null?d:null));(m=c)&&d===null&&j("[114] NumericLiteralUnsigned");x[a]={nextPos:b,result:d};return d}function dc(){var a="NumericLiteralPositive@"+
b,c=x[a];if(c)return b=c.nextPos,c.result;c=m;m=!1;var d=ec();d===null&&(d=fc(),d===null&&(d=gc(),d=d!==null?d:null));(m=c)&&d===null&&j("[115] NumericLiteralPositive");x[a]={nextPos:b,result:d};return d}function pa(){var a="NumericLiteralNegative@"+b,c=x[a];if(c)return b=c.nextPos,c.result;c=m;m=!1;var d=hc();d===null&&(d=ic(),d===null&&(d=jc(),d=d!==null?d:null));(m=c)&&d===null&&j("[116] NumericLiteralNegative");x[a]={nextPos:b,result:d};return d}function Ga(){var d="BooleanLiteral@"+b,g=x[d];
if(g)return b=g.nextPos,g.result;g=m;m=!1;var h=b;if(a.substr(b,4)==="TRUE"){var f="TRUE";b+=4}else f=null,m&&j('"TRUE"');f===null&&(a.substr(b,4)==="true"?(f="true",b+=4):(f=null,m&&j('"true"')),f=f!==null?f:null);f=f!==null?{token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!0}:null;f===null&&(f=null,b=h);f!==null?h=f:(h=b,a.substr(b,5)==="FALSE"?(f="FALSE",b+=5):(f=null,m&&j('"FALSE"')),f===null&&(a.substr(b,5)==="false"?(f="false",b+=5):(f=null,m&&j('"false"')),f=
f!==null?f:null),f=f!==null?{token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!1}:null,f===null&&(f=null,b=h),h=f!==null?f:null);(m=g)&&h===null&&j("[117] BooleanLiteral");x[d]={nextPos:b,result:h};return h}function ac(){var a="String@"+b,c=x[a];if(c)return b=c.nextPos,c.result;c=m;m=!1;var d=b,f=kc(),f=f!==null?{token:"string",value:f}:null;f===null&&(f=null,b=d);f!==null?d=f:(d=b,f=lc(),f=f!==null?{token:"string",value:f}:null,f===null&&(f=null,b=d),f!==null?d=f:(d=
b,f=mc(),f=f!==null?{token:"string",value:f}:null,f===null&&(f=null,b=d),f!==null?d=f:(d=b,f=nc(),f=f!==null?{token:"string",value:f}:null,f===null&&(f=null,b=d),d=f!==null?f:null)));(m=c)&&d===null&&j("[118] String");x[a]={nextPos:b,result:d};return d}function P(){var a="IRIref@"+b,c=x[a];if(c)return b=c.nextPos,c.result;c=m;m=!1;var d=b,f=ka(),f=f!==null?{token:"uri",prefix:null,suffix:null,value:f}:null;f===null&&(f=null,b=d);f!==null?d=f:(d=b,f=oc(),f=f!==null?f:null,f===null&&(f=null,b=d),d=
f!==null?f:null);(m=c)&&d===null&&j("[119] IRIref");x[a]={nextPos:b,result:d};return d}function oc(){var a="PrefixedName@"+b,c=x[a];if(c)return b=c.nextPos,c.result;c=m;m=!1;var d=b,f=pc(),f=f!==null?{token:"uri",prefix:f[0],suffix:f[1],value:null}:null;f===null&&(f=null,b=d);f!==null?d=f:(d=b,f=Ba(),f=f!==null?{token:"uri",prefix:f,suffix:"",value:null}:null,f===null&&(f=null,b=d),d=f!==null?f:null);(m=c)&&d===null&&j("[120] PrefixedName");x[a]={nextPos:b,result:d};return d}function Vb(){var a="BlankNode@"+
b,c=x[a];if(c)return b=c.nextPos,c.result;c=m;m=!1;var d=b,f=qc(),f=f!==null?{token:"blank",value:f}:null;f===null&&(f=null,b=d);f!==null?d=f:(d=b,rc()!==null?(ba++,f={token:"blank",value:"_:"+ba}):f=null,f===null&&(f=null,b=d),d=f!==null?f:null);(m=c)&&d===null&&j("[121] BlankNode");x[a]={nextPos:b,result:d};return d}function ka(){var d="IRI_REF@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var h=b,f=b;if(a.substr(b,1)==="<"){var e="<";b+=1}else e=null,m&&j('"<"');if(e!==null){var k=[];if(a.substr(b).match(/^[^<>"{}|^`\\]/)!==
null){var i=a.charAt(b);b++}else i=null,m&&j('[^<>"{}|^`\\\\]');for(;i!==null;)k.push(i),a.substr(b).match(/^[^<>"{}|^`\\]/)!==null?(i=a.charAt(b),b++):(i=null,m&&j('[^<>"{}|^`\\\\]'));k!==null?(a.substr(b,1)===">"?(i=">",b+=1):(i=null,m&&j('">"')),i!==null?e=[e,k,i]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;f=e!==null?e[1].join(""):null;f===null&&(f=null,b=h);(m=g)&&f===null&&j("[122] IRI_REF");x[d]={nextPos:b,result:f};return f}function Ba(){var d="PNAME_NS@"+b,g=x[d];if(g)return b=g.nextPos,g.result;
g=m;m=!1;var h=b,f=b,e=Za(),e=e!==null?e:"";if(e!==null){if(a.substr(b,1)===":"){var k=":";b+=1}else k=null,m&&j('":"');k!==null?e=[e,k]:(e=null,b=f)}else e=null,b=f;f=e!==null?e[0]:null;f===null&&(f=null,b=h);(m=g)&&f===null&&j("[123] PNAME_NS");x[d]={nextPos:b,result:f};return f}function pc(){var a="PNAME_LN@"+b,c=x[a];if(c)return b=c.nextPos,c.result;c=m;m=!1;var d=b,f=b,e=Ba();if(e!==null){var g=mb();g!==null?e=[e,g]:(e=null,b=f)}else e=null,b=f;f=e!==null?[e[0],e[1]]:null;f===null&&(f=null,b=
d);(m=c)&&f===null&&j("[124] PNAME_LN");x[a]={nextPos:b,result:f};return f}function qc(){var d="BLANK_NODE_LABEL@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var h=b,f=b;if(a.substr(b,2)==="_:"){var e="_:";b+=2}else e=null,m&&j('"_:"');if(e!==null){var k=mb();k!==null?e=[e,k]:(e=null,b=f)}else e=null,b=f;f=e!==null?e[1]:null;f===null&&(f=null,b=h);(m=g)&&f===null&&j("[125] BLANK_NODE_LABEL");x[d]={nextPos:b,result:f};return f}function Tb(){var d="VAR1@"+b,g=x[d];if(g)return b=g.nextPos,g.result;
g=m;m=!1;var h=b,f=b;if(a.substr(b,1)==="?"){var e="?";b+=1}else e=null,m&&j('"?"');if(e!==null){var k=nb();k!==null?e=[e,k]:(e=null,b=f)}else e=null,b=f;f=e!==null?e[1]:null;f===null&&(f=null,b=h);(m=g)&&f===null&&j("[126] VAR1");x[d]={nextPos:b,result:f};return f}function Ub(){var d="VAR2@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var h=b,f=b;if(a.substr(b,1)==="$"){var e="$";b+=1}else e=null,m&&j('"$"');if(e!==null){var k=nb();k!==null?e=[e,k]:(e=null,b=f)}else e=null,b=f;f=e!==null?
e[1]:null;f===null&&(f=null,b=h);(m=g)&&f===null&&j("[127] VAR2");x[d]={nextPos:b,result:f};return f}function bc(){var d="LANGTAG@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var h=b,f=b;if(a.substr(b,1)==="@"){var e="@";b+=1}else e=null,m&&j('"@"');if(e!==null){if(a.substr(b).match(/^[a-zA-Z]/)!==null){var k=a.charAt(b);b++}else k=null,m&&j("[a-zA-Z]");if(k!==null)for(var i=[];k!==null;)i.push(k),a.substr(b).match(/^[a-zA-Z]/)!==null?(k=a.charAt(b),b++):(k=null,m&&j("[a-zA-Z]"));else i=null;
if(i!==null){var k=[],l=b;if(a.substr(b,1)==="-"){var n="-";b+=1}else n=null,m&&j('"-"');if(n!==null){if(a.substr(b).match(/^[a-zA-Z0-9]/)!==null){var o=a.charAt(b);b++}else o=null,m&&j("[a-zA-Z0-9]");if(o!==null)for(var q=[];o!==null;)q.push(o),a.substr(b).match(/^[a-zA-Z0-9]/)!==null?(o=a.charAt(b),b++):(o=null,m&&j("[a-zA-Z0-9]"));else q=null;q!==null?n=[n,q]:(n=null,b=l)}else n=null,b=l;for(;n!==null;)if(k.push(n),l=b,a.substr(b,1)==="-"?(n="-",b+=1):(n=null,m&&j('"-"')),n!==null){a.substr(b).match(/^[a-zA-Z0-9]/)!==
null?(o=a.charAt(b),b++):(o=null,m&&j("[a-zA-Z0-9]"));if(o!==null)for(q=[];o!==null;)q.push(o),a.substr(b).match(/^[a-zA-Z0-9]/)!==null?(o=a.charAt(b),b++):(o=null,m&&j("[a-zA-Z0-9]"));else q=null;q!==null?n=[n,q]:(n=null,b=l)}else n=null,b=l;k!==null?e=[e,i,k]:(e=null,b=f)}else e=null,b=f}else e=null,b=f;f=e!==null?e[2].length===0?("@"+e[1].join("")).toLowerCase():("@"+e[1].join("")+"-"+e[2][0][1].join("")).toLowerCase():null;f===null&&(f=null,b=h);(m=g)&&f===null&&j("[128] LANGTAG");x[d]={nextPos:b,
result:f};return f}function aa(){var d="INTEGER@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var h=b;if(a.substr(b).match(/^[0-9]/)!==null){var f=a.charAt(b);b++}else f=null,m&&j("[0-9]");if(f!==null)for(var e=[];f!==null;)e.push(f),a.substr(b).match(/^[0-9]/)!==null?(f=a.charAt(b),b++):(f=null,m&&j("[0-9]"));else e=null;f=e!==null?function(a){var b={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#integer"};b.value=V(a);return b}(e):null;f===null&&(f=null,b=h);(m=g)&&f===
null&&j("[129] INTEGER");x[d]={nextPos:b,result:f};return f}function Ra(){var d="DECIMAL@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var h=b,f=b;if(a.substr(b).match(/^[0-9]/)!==null){var e=a.charAt(b);b++}else e=null,m&&j("[0-9]");if(e!==null)for(var k=[];e!==null;)k.push(e),a.substr(b).match(/^[0-9]/)!==null?(e=a.charAt(b),b++):(e=null,m&&j("[0-9]"));else k=null;if(k!==null)if(a.substr(b,1)==="."?(e=".",b+=1):(e=null,m&&j('"."')),e!==null){var i=[];if(a.substr(b).match(/^[0-9]/)!==null){var l=
a.charAt(b);b++}else l=null,m&&j("[0-9]");for(;l!==null;)i.push(l),a.substr(b).match(/^[0-9]/)!==null?(l=a.charAt(b),b++):(l=null,m&&j("[0-9]"));i!==null?k=[k,e,i]:(k=null,b=f)}else k=null,b=f;else k=null,b=f;f=k!==null?function(a,b,c){var d={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"};d.value=V([a,b,c]);return d}(k[0],k[1],k[2]):null;f===null&&(f=null,b=h);if(f!==null)h=f;else{f=h=b;a.substr(b,1)==="."?(k=".",b+=1):(k=null,m&&j('"."'));if(k!==null){a.substr(b).match(/^[0-9]/)!==
null?(e=a.charAt(b),b++):(e=null,m&&j("[0-9]"));if(e!==null)for(i=[];e!==null;)i.push(e),a.substr(b).match(/^[0-9]/)!==null?(e=a.charAt(b),b++):(e=null,m&&j("[0-9]"));else i=null;i!==null?k=[k,i]:(k=null,b=f)}else k=null,b=f;f=k!==null?function(a,b){var c={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"};c.value=V([a,b]);return c}(k[0],k[1]):null;f===null&&(f=null,b=h);h=f!==null?f:null}(m=g)&&h===null&&j("[130] DECIMAL");x[d]={nextPos:b,result:h};return h}function Qa(){var d=
"DOUBLE@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var h=b,f=b;if(a.substr(b).match(/^[0-9]/)!==null){var e=a.charAt(b);b++}else e=null,m&&j("[0-9]");if(e!==null)for(var k=[];e!==null;)k.push(e),a.substr(b).match(/^[0-9]/)!==null?(e=a.charAt(b),b++):(e=null,m&&j("[0-9]"));else k=null;if(k!==null)if(a.substr(b,1)==="."?(e=".",b+=1):(e=null,m&&j('"."')),e!==null){var i=[];if(a.substr(b).match(/^[0-9]/)!==null){var l=a.charAt(b);b++}else l=null,m&&j("[0-9]");for(;l!==null;)i.push(l),a.substr(b).match(/^[0-9]/)!==
null?(l=a.charAt(b),b++):(l=null,m&&j("[0-9]"));i!==null?(l=Sa(),l!==null?k=[k,e,i,l]:(k=null,b=f)):(k=null,b=f)}else k=null,b=f;else k=null,b=f;f=k!==null?function(a,b,c,d){var e={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};e.value=V([a,b,c,d]);return e}(k[0],k[1],k[2],k[3]):null;f===null&&(f=null,b=h);if(f!==null)h=f;else{f=h=b;a.substr(b,1)==="."?(k=".",b+=1):(k=null,m&&j('"."'));if(k!==null){a.substr(b).match(/^[0-9]/)!==null?(i=a.charAt(b),b++):(i=null,m&&j("[0-9]"));
if(i!==null)for(e=[];i!==null;)e.push(i),a.substr(b).match(/^[0-9]/)!==null?(i=a.charAt(b),b++):(i=null,m&&j("[0-9]"));else e=null;e!==null?(i=Sa(),i!==null?k=[k,e,i]:(k=null,b=f)):(k=null,b=f)}else k=null,b=f;f=k!==null?function(a,b,c){var d={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};d.value=V([a,b,c]);return d}(k[0],k[1],k[2]):null;f===null&&(f=null,b=h);if(f!==null)h=f;else{f=h=b;a.substr(b).match(/^[0-9]/)!==null?(e=a.charAt(b),b++):(e=null,m&&j("[0-9]"));if(e!==
null)for(k=[];e!==null;)k.push(e),a.substr(b).match(/^[0-9]/)!==null?(e=a.charAt(b),b++):(e=null,m&&j("[0-9]"));else k=null;k!==null?(e=Sa(),e!==null?k=[k,e]:(k=null,b=f)):(k=null,b=f);f=k!==null?function(a,b){var c={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};c.value=V([a,b]);return c}(k[0],k[1]):null;f===null&&(f=null,b=h);h=f!==null?f:null}}(m=g)&&h===null&&j("[131] DOUBLE");x[d]={nextPos:b,result:h};return h}function gc(){var d="INTEGER_POSITIVE@"+b,g=x[d];if(g)return b=
g.nextPos,g.result;g=m;m=!1;var k=b,f=b;if(a.substr(b,1)==="+"){var e="+";b+=1}else e=null,m&&j('"+"');if(e!==null){var h=aa();h!==null?e=[e,h]:(e=null,b=f)}else e=null,b=f;f=e!==null?function(a){a.value="+"+a.value;return a}(e[1]):null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[132] INTEGER_POSITIVE");x[d]={nextPos:b,result:f};return f}function fc(){var d="DECIMAL_POSITIVE@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=b;if(a.substr(b,1)==="+"){var e="+";b+=1}else e=null,m&&j('"+"');
if(e!==null){var h=Ra();h!==null?e=[e,h]:(e=null,b=f)}else e=null,b=f;f=e!==null?function(a){a.value="+"+a.value;return a}(e[1]):null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[133] DECIMAL_POSITIVE");x[d]={nextPos:b,result:f};return f}function ec(){var d="DOUBLE_POSITIVE@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=b;if(a.substr(b,1)==="+"){var e="+";b+=1}else e=null,m&&j('"+"');if(e!==null){var h=Qa();h!==null?e=[e,h]:(e=null,b=f)}else e=null,b=f;f=e!==null?function(a){a.value=
"+"+a.value;return a}(e[1]):null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[134] DOUBLE_POSITIVE");x[d]={nextPos:b,result:f};return f}function jc(){var d="INTEGER_NEGATIVE@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=b;if(a.substr(b,1)==="-"){var e="-";b+=1}else e=null,m&&j('"-"');if(e!==null){var h=aa();h!==null?e=[e,h]:(e=null,b=f)}else e=null,b=f;f=e!==null?function(a){a.value="-"+a.value;return a}(e[1]):null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[135] INTEGER_NEGATIVE");
x[d]={nextPos:b,result:f};return f}function ic(){var d="DECIMAL_NEGATIVE@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=b;if(a.substr(b,1)==="-"){var e="-";b+=1}else e=null,m&&j('"-"');if(e!==null){var h=Ra();h!==null?e=[e,h]:(e=null,b=f)}else e=null,b=f;f=e!==null?function(a){a.value="-"+a.value;return a}(e[1]):null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[136] DECIMAL_NEGATIVE");x[d]={nextPos:b,result:f};return f}function hc(){var d="DOUBLE_NEGATIVE@"+b,g=x[d];if(g)return b=g.nextPos,
g.result;g=m;m=!1;var k=b,f=b;if(a.substr(b,1)==="-"){var e="-";b+=1}else e=null,m&&j('"-"');if(e!==null){var h=Qa();h!==null?e=[e,h]:(e=null,b=f)}else e=null,b=f;f=e!==null?function(a){a.value="-"+a.value;return a}(e[1]):null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[137] DOUBLE_NEGATIVE");x[d]={nextPos:b,result:f};return f}function Sa(){var d="EXPONENT@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=b;if(a.substr(b).match(/^[eE]/)!==null){var e=a.charAt(b);b++}else e=null,m&&j("[eE]");
if(e!==null){if(a.substr(b).match(/^[+\-]/)!==null){var h=a.charAt(b);b++}else h=null,m&&j("[+\\-]");h=h!==null?h:"";if(h!==null){if(a.substr(b).match(/^[0-9]/)!==null){var i=a.charAt(b);b++}else i=null,m&&j("[0-9]");if(i!==null)for(var l=[];i!==null;)l.push(i),a.substr(b).match(/^[0-9]/)!==null?(i=a.charAt(b),b++):(i=null,m&&j("[0-9]"));else l=null;l!==null?e=[e,h,l]:(e=null,b=f)}else e=null,b=f}else e=null,b=f;f=e!==null?V([e[0],e[1],e[2]]):null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[138] EXPONENT");
x[d]={nextPos:b,result:f};return f}function mc(){var d="STRING_LITERAL1@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=b;if(a.substr(b,1)==="'"){var e="'";b+=1}else e=null,m&&j('"\'"');if(e!==null){var h=[];if(a.substr(b).match(/^[^'\\\n\r]/)!==null){var i=a.charAt(b);b++}else i=null,m&&j("[^'\\\\\\n\\r]");i===null&&(i=ca(),i=i!==null?i:null);for(;i!==null;)h.push(i),a.substr(b).match(/^[^'\\\n\r]/)!==null?(i=a.charAt(b),b++):(i=null,m&&j("[^'\\\\\\n\\r]")),i===null&&(i=ca(),i=i!==
null?i:null);h!==null?(a.substr(b,1)==="'"?(i="'",b+=1):(i=null,m&&j('"\'"')),i!==null?e=[e,h,i]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;f=e!==null?V(e[1]):null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[139] STRING_LITERAL1");x[d]={nextPos:b,result:f};return f}function nc(){var d="STRING_LITERAL2@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=b;if(a.substr(b,1)==='"'){var e='"';b+=1}else e=null,m&&j('"\\""');if(e!==null){var h=[];if(a.substr(b).match(/^[^"\\\n\r]/)!==null){var i=
a.charAt(b);b++}else i=null,m&&j('[^"\\\\\\n\\r]');i===null&&(i=ca(),i=i!==null?i:null);for(;i!==null;)h.push(i),a.substr(b).match(/^[^"\\\n\r]/)!==null?(i=a.charAt(b),b++):(i=null,m&&j('[^"\\\\\\n\\r]')),i===null&&(i=ca(),i=i!==null?i:null);h!==null?(a.substr(b,1)==='"'?(i='"',b+=1):(i=null,m&&j('"\\""')),i!==null?e=[e,h,i]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;f=e!==null?V(e[1]):null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[140] STRING_LITERAL2");x[d]={nextPos:b,result:f};return f}function kc(){var d=
"STRING_LITERAL_LONG1@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=b;if(a.substr(b,3)==="'''"){var e="'''";b+=3}else e=null,m&&j("\"'''\"");if(e!==null){var h=[];if(a.substr(b).match(/^[^'\\]/)!==null){var i=a.charAt(b);b++}else i=null,m&&j("[^'\\\\]");i===null&&(i=ca(),i=i!==null?i:null);for(;i!==null;)h.push(i),a.substr(b).match(/^[^'\\]/)!==null?(i=a.charAt(b),b++):(i=null,m&&j("[^'\\\\]")),i===null&&(i=ca(),i=i!==null?i:null);h!==null?(a.substr(b,3)==="'''"?(i="'''",b+=3):(i=
null,m&&j("\"'''\"")),i!==null?e=[e,h,i]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;f=e!==null?V(e[1]):null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[141] STRING_LITERAL_LONG1");x[d]={nextPos:b,result:f};return f}function lc(){var d="STRING_LITERAL_LONG2@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var k=b,f=b;if(a.substr(b,3)==='"""'){var e='"""';b+=3}else e=null,m&&j('"\\"\\"\\""');if(e!==null){var h=[];if(a.substr(b).match(/^[^"\\]/)!==null){var i=a.charAt(b);b++}else i=null,m&&j('[^"\\\\]');
i===null&&(i=ca(),i=i!==null?i:null);for(;i!==null;)h.push(i),a.substr(b).match(/^[^"\\]/)!==null?(i=a.charAt(b),b++):(i=null,m&&j('[^"\\\\]')),i===null&&(i=ca(),i=i!==null?i:null);h!==null?(a.substr(b,3)==='"""'?(i='"""',b+=3):(i=null,m&&j('"\\"\\"\\""')),i!==null?e=[e,h,i]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;f=e!==null?V(e[1]):null;f===null&&(f=null,b=k);(m=g)&&f===null&&j("[142] STRING_LITERAL_LONG2");x[d]={nextPos:b,result:f};return f}function ca(){var d="ECHAR@"+b,g=x[d];if(g)return b=
g.nextPos,g.result;g=m;m=!1;var i=b;if(a.substr(b,1)==="\\"){var f="\\";b+=1}else f=null,m&&j('"\\\\"');if(f!==null){if(a.substr(b).match(/^[tbnrf"']/)!==null){var e=a.charAt(b);b++}else e=null,m&&j("[tbnrf\"']");e!==null?f=[f,e]:(f=null,b=i)}else f=null,b=i;(m=g)&&f===null&&j("[143] ECHAR");x[d]={nextPos:b,result:f};return f}function ia(){var d="NIL@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var i=b,f=b;if(a.substr(b,1)==="("){var e="(";b+=1}else e=null,m&&j('"("');if(e!==null){for(var k=
[],h=o();h!==null;)k.push(h),h=o();k!==null?(a.substr(b,1)===")"?(h=")",b+=1):(h=null,m&&j('")"')),h!==null?e=[e,k,h]:(e=null,b=f)):(e=null,b=f)}else e=null,b=f;f=e!==null?{token:"triplesnodecollection",triplesContext:[],chainSubject:[{token:"uri",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}]}:null;f===null&&(f=null,b=i);(m=g)&&f===null&&j("[144] NIL");x[d]={nextPos:b,result:f};return f}function o(){var d="WS@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;if(a.substr(b).match(/^[ ]/)!==
null){var i=a.charAt(b);b++}else i=null,m&&j("[ ]");i===null&&(a.substr(b).match(/^[\t]/)!==null?(i=a.charAt(b),b++):(i=null,m&&j("[\t]")),i===null&&(a.substr(b).match(/^[\r]/)!==null?(i=a.charAt(b),b++):(i=null,m&&j("[\\r]")),i===null&&(a.substr(b).match(/^[\n]/)!==null?(i=a.charAt(b),b++):(i=null,m&&j("[\\n]")),i===null&&(i=sc(),i=i!==null?i:null))));(m=g)&&i===null&&j("[145] WS");x[d]={nextPos:b,result:i};return i}function sc(){var d="COMMENT@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;
var i=b;if(a.substr(b,1)==="#"){var f="#";b+=1}else f=null,m&&j('"#"');if(f!==null){var e=[];if(a.substr(b).match(/^[^\n\r]/)!==null){var k=a.charAt(b);b++}else k=null,m&&j("[^\\n\\r]");for(;k!==null;)e.push(k),a.substr(b).match(/^[^\n\r]/)!==null?(k=a.charAt(b),b++):(k=null,m&&j("[^\\n\\r]"));e!==null?f=[f,e]:(f=null,b=i)}else f=null,b=i;(m=g)&&f===null&&j(" COMMENT");x[d]={nextPos:b,result:f};return f}function rc(){var d="ANON@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var i=b;if(a.substr(b,
1)==="["){var f="[";b+=1}else f=null,m&&j('"["');if(f!==null){for(var e=[],k=o();k!==null;)e.push(k),k=o();e!==null?(a.substr(b,1)==="]"?(k="]",b+=1):(k=null,m&&j('"]"')),k!==null?f=[f,e,k]:(f=null,b=i)):(f=null,b=i)}else f=null,b=i;(m=g)&&f===null&&j("[146] ANON");x[d]={nextPos:b,result:f};return f}function ob(){var d="PN_CHARS_BASE@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;if(a.substr(b).match(/^[A-Z]/)!==null){var i=a.charAt(b);b++}else i=null,m&&j("[A-Z]");i===null&&(a.substr(b).match(/^[a-z]/)!==
null?(i=a.charAt(b),b++):(i=null,m&&j("[a-z]")),i===null&&(a.substr(b).match(/^[\xC0-\xD6]/)!==null?(i=a.charAt(b),b++):(i=null,m&&j("[\\xC0-\\xD6]")),i===null&&(a.substr(b).match(/^[\xD8-\xF6]/)!==null?(i=a.charAt(b),b++):(i=null,m&&j("[\\xD8-\\xF6]")),i===null&&(a.substr(b).match(/^[\xF8-\u02FF]/)!==null?(i=a.charAt(b),b++):(i=null,m&&j("[\\xF8-\\u02FF]")),i===null&&(a.substr(b).match(/^[\u0370-\u037D]/)!==null?(i=a.charAt(b),b++):(i=null,m&&j("[\\u0370-\\u037D]")),i===null&&(a.substr(b).match(/^[\u037F-\u1FFF]/)!==
null?(i=a.charAt(b),b++):(i=null,m&&j("[\\u037F-\\u1FFF]")),i===null&&(a.substr(b).match(/^[\u200C-\u200D]/)!==null?(i=a.charAt(b),b++):(i=null,m&&j("[\\u200C-\\u200D]")),i===null&&(a.substr(b).match(/^[\u2070-\u218F]/)!==null?(i=a.charAt(b),b++):(i=null,m&&j("[\\u2070-\\u218F]")),i===null&&(a.substr(b).match(/^[\u2C00-\u2FEF]/)!==null?(i=a.charAt(b),b++):(i=null,m&&j("[\\u2C00-\\u2FEF]")),i===null&&(a.substr(b).match(/^[\u3001-\uD7FF]/)!==null?(i=a.charAt(b),b++):(i=null,m&&j("[\\u3001-\\uD7FF]")),
i===null&&(a.substr(b).match(/^[\uF900-\uFDCF]/)!==null?(i=a.charAt(b),b++):(i=null,m&&j("[\\uF900-\\uFDCF]")),i===null&&(a.substr(b).match(/^[\uFDF0-\uFFFD]/)!==null?(i=a.charAt(b),b++):(i=null,m&&j("[\\uFDF0-\\uFFFD]")),i===null&&(a.substr(b).match(/^[\u1000-\uEFFF]/)!==null?(i=a.charAt(b),b++):(i=null,m&&j("[\\u1000-\\uEFFF]")),i=i!==null?i:null)))))))))))));(m=g)&&i===null&&j("[147] PN_CHARS_BASE");x[d]={nextPos:b,result:i};return i}function qa(){var d="PN_CHARS_U@"+b,g=x[d];if(g)return b=g.nextPos,
g.result;g=m;m=!1;var i=ob();i===null&&(a.substr(b,1)==="_"?(i="_",b+=1):(i=null,m&&j('"_"')),i=i!==null?i:null);(m=g)&&i===null&&j("[148] PN_CHARS_U");x[d]={nextPos:b,result:i};return i}function nb(){var d="VARNAME@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var i=b,f=b,e=qa();e===null&&(a.substr(b).match(/^[0-9]/)!==null?(e=a.charAt(b),b++):(e=null,m&&j("[0-9]")),e=e!==null?e:null);if(e!==null){var k=[],h=qa();h===null&&(a.substr(b).match(/^[0-9]/)!==null?(h=a.charAt(b),b++):(h=null,m&&
j("[0-9]")),h===null&&(a.substr(b).match(/^[\xB7]/)!==null?(h=a.charAt(b),b++):(h=null,m&&j("[\\xB7]")),h===null&&(a.substr(b).match(/^[\u0300-\u036F]/)!==null?(h=a.charAt(b),b++):(h=null,m&&j("[\\u0300-\\u036F]")),h===null&&(a.substr(b).match(/^[\u203F-\u2040]/)!==null?(h=a.charAt(b),b++):(h=null,m&&j("[\\u203F-\\u2040]")),h=h!==null?h:null))));for(;h!==null;)k.push(h),h=qa(),h===null&&(a.substr(b).match(/^[0-9]/)!==null?(h=a.charAt(b),b++):(h=null,m&&j("[0-9]")),h===null&&(a.substr(b).match(/^[\xB7]/)!==
null?(h=a.charAt(b),b++):(h=null,m&&j("[\\xB7]")),h===null&&(a.substr(b).match(/^[\u0300-\u036F]/)!==null?(h=a.charAt(b),b++):(h=null,m&&j("[\\u0300-\\u036F]")),h===null&&(a.substr(b).match(/^[\u203F-\u2040]/)!==null?(h=a.charAt(b),b++):(h=null,m&&j("[\\u203F-\\u2040]")),h=h!==null?h:null))));k!==null?e=[e,k]:(e=null,b=f)}else e=null,b=f;f=e!==null?e[0]+e[1].join(""):null;f===null&&(f=null,b=i);(m=g)&&f===null&&j("[149] VARNAME");x[d]={nextPos:b,result:f};return f}function Aa(){var d="PN_CHARS@"+
b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var i=qa();i===null&&(a.substr(b,1)==="-"?(i="-",b+=1):(i=null,m&&j('"-"')),i===null&&(a.substr(b).match(/^[0-9]/)!==null?(i=a.charAt(b),b++):(i=null,m&&j("[0-9]")),i===null&&(a.substr(b).match(/^[\xB7]/)!==null?(i=a.charAt(b),b++):(i=null,m&&j("[\\xB7]")),i===null&&(a.substr(b).match(/^[\u0300-\u036F]/)!==null?(i=a.charAt(b),b++):(i=null,m&&j("[\\u0300-\\u036F]")),i===null&&(a.substr(b).match(/^[\u203F-\u2040]/)!==null?(i=a.charAt(b),b++):(i=null,
m&&j("[\\u203F-\\u2040]")),i=i!==null?i:null)))));(m=g)&&i===null&&j("[150] PN_CHARS");x[d]={nextPos:b,result:i};return i}function Za(){var d="PN_PREFIX@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var i=b,f=b,e=ob();if(e!==null){var h=[],k=Aa();k===null&&(a.substr(b,1)==="."?(k=".",b+=1):(k=null,m&&j('"."')),k=k!==null?k:null);for(;k!==null;)h.push(k),k=Aa(),k===null&&(a.substr(b,1)==="."?(k=".",b+=1):(k=null,m&&j('"."')),k=k!==null?k:null);h!==null?e=[e,h]:(e=null,b=f)}else e=null,b=f;f=
e!==null?function(a,b){if(b[b.length-1]==".")throw Error("Wrong PN_PREFIX, cannot finish with '.'");else return a+b.join("")}(e[0],e[1]):null;f===null&&(f=null,b=i);(m=g)&&f===null&&j("[151] PN_PREFIX");x[d]={nextPos:b,result:f};return f}function mb(){var d="PN_LOCAL@"+b,g=x[d];if(g)return b=g.nextPos,g.result;g=m;m=!1;var i=b,f=b,e=qa();e===null&&(a.substr(b).match(/^[0-9]/)!==null?(e=a.charAt(b),b++):(e=null,m&&j("[0-9]")),e=e!==null?e:null);if(e!==null){for(var h=[],k=Aa();k!==null;)h.push(k),
k=Aa();h!==null?e=[e,h]:(e=null,b=f)}else e=null,b=f;f=e!==null?e[0]+e[1].join(""):null;f===null&&(f=null,b=i);(m=g)&&f===null&&j("[152] PN_LOCAL");x[d]={nextPos:b,result:f};return f}function pb(){var d=function(a){a.sort();for(var b=null,c=[],d=0;d<a.length;d++)a[d]!==b&&(c.push(a[d]),b=a[d]);switch(c.length){case 0:return"end of input";case 1:return c[0];default:return c.slice(0,c.length-1).join(", ")+" or "+c[c.length-1]}}(Ya),g=Math.max(b,va),g=g<a.length?k(a.charAt(g)):"end of input";return"Expected "+
d+" but "+g+" found."}function tc(){for(var b=1,d=1,g=!1,f=0;f<va;f++){var e=a.charAt(f);e==="\n"?(g||b++,d=1,g=!1):e==="\r"|e==="\u2028"||e==="\u2029"?(b++,d=1,g=!0):(d++,g=!1)}return{line:b,column:d}}var ea={ANON:rc,AdditiveExpression:S,Aggregate:Xb,ArgList:ib,AskQuery:I,BLANK_NODE_LABEL:qc,BaseDecl:u,BindingValue:ta,BindingsClause:sa,BlankNode:Vb,BlankNodePropertyList:Rb,BooleanLiteral:Ga,BrackettedExpression:Da,BuiltInCall:Ca,COMMENT:sc,Clear:tb,Collection:Qb,ConditionalAndExpression:Oa,ConditionalOrExpression:L,
Constraint:wa,ConstructQuery:H,ConstructTemplate:Ab,ConstructTriples:jb,Create:vb,DECIMAL:Ra,DECIMAL_NEGATIVE:ic,DECIMAL_POSITIVE:fc,DOCUMENT:function(){var a="DOCUMENT@"+b,c=x[a];if(c)return b=c.nextPos,c.result;c=i();c===null&&(c=w(),c=c!==null?c:null);x[a]={nextPos:b,result:c};return c},DOUBLE:Qa,DOUBLE_NEGATIVE:hc,DOUBLE_POSITIVE:ec,DatasetClause:J,DefaultGraphClause:N,DeleteClause:yb,DeleteData:xb,DeleteWhere:rb,DescribeQuery:K,Drop:ub,ECHAR:ca,EXPONENT:Sa,ExistsFunc:Zb,ExpressionList:Jb,Filter:Ib,
FunctionCall:$a,GraphGraphPattern:Gb,GraphNode:na,GraphPatternNotTriples:hb,GraphRef:Ha,GraphRefAll:ab,GraphTerm:Sb,GroupClause:X,GroupCondition:W,GroupGraphPattern:U,GroupGraphPatternSub:Bb,GroupOrUnionGraphPattern:Db,HavingClause:$,INTEGER:aa,INTEGER_NEGATIVE:jc,INTEGER_POSITIVE:gc,IRI_REF:ka,IRIref:P,IRIrefOrFunction:Wb,InsertClause:Xa,InsertData:wb,LANGTAG:bc,LimitClause:Ta,LimitOffsetClauses:ra,Load:qb,MinusGraphPattern:Fb,Modify:sb,MultiplicativeExpression:oa,NIL:ia,NamedGraphClause:R,NotExistsFunc:$b,
NumericLiteral:Fa,NumericLiteralNegative:pa,NumericLiteralPositive:dc,NumericLiteralUnsigned:cc,ObjectList:ja,OffsetClause:Ua,OptionalGraphPattern:Eb,OrderClause:da,OrderCondition:fa,PNAME_LN:pc,PNAME_NS:Ba,PN_CHARS:Aa,PN_CHARS_BASE:ob,PN_CHARS_U:qa,PN_LOCAL:mb,PN_PREFIX:Za,PathAlternative:kb,PathElt:lb,PathEltOrInverse:Na,PathMod:Ob,PathNegatedPropertySet:Pb,PathOneInPropertySet:ya,PathPrimary:Nb,PathSequence:Ma,PrefixDecl:q,PrefixedName:oc,PrimaryExpression:za,Prologue:t,PropertyList:Kb,PropertyListNotEmpty:xa,
PropertyListNotEmptyPath:Lb,PropertyListPath:Mb,QuadData:bb,QuadPattern:db,Quads:eb,QuadsNotTriples:fb,Query:h,RDFLiteral:Ea,RegexExpression:Yb,RelationalExpression:Pa,SPARQL:i,STRING_LITERAL1:mc,STRING_LITERAL2:nc,STRING_LITERAL_LONG1:kc,STRING_LITERAL_LONG2:lc,SelectClause:B,SelectQuery:C,ServiceGraphPattern:Hb,SolutionModifier:T,String:ac,SubSelect:G,TURTLE:w,TriplesBlock:la,TriplesNode:Ja,TriplesSameSubject:gb,TriplesSameSubjectPath:Cb,TriplesTemplate:ma,UnaryExpression:Y,Update:Va,Update1:ua,
UsingClause:cb,VAR1:Tb,VAR2:Ub,VARNAME:nb,Var:O,VarOrIRIref:ha,VarOrTerm:Ia,Verb:Ka,VerbPath:La,WS:o,WhereClause:Z,base:E,directive:A,prefixID:F,statement:y};if(d!==void 0){if(ea[d]===void 0)throw Error("Invalid rule name: "+k(d)+".");}else d="DOCUMENT";var b=0,m=!0,va=0,Ya=[],x={},V=function(a){for(var b="",c=0;c<a.length;c++)b+=typeof a[c]==="string"?a[c]:a[c].join("");return b},ba=0,zb=function(a){for(var b="",c=0;c<a.length;c++)b+=a[c];return b.toUpperCase()},ea=ea[d]();if(ea===null||b!==a.length)throw ea=
tc(),new this.SyntaxError(pb(),ea.line,ea.column);return ea},toSource:function(){return this._source},SyntaxError:function(a,d,g){this.name="SyntaxError";this.message=a;this.line=d;this.column=g}};a.SyntaxError.prototype=Error.prototype;return a}();var $={};(new Date).getTime();$.combined_parser=fa.parser;$.parser={};$.parser.parse=function(a,c){for(var d=[],g=$.combined_parser.parse(a),h={},j={namespaces:h,base:"",blankCounter:0},i=0;i<g.length;i++){var l=g[i];if(l.token==="base")j.base=l.value;
else if(l.token==="prefix")h[l.prefix]=l.local;else if(l.token==="triples"||l.token==="triplespattern")for(var t=0;t<l.triplesContext.length;t++){var u=l.triplesContext[t],u={subject:y.lexicalFormTerm(u.subject,j),predicate:y.lexicalFormTerm(u.predicate,j),object:y.lexicalFormTerm(u.object,j),graph:c};d.push(u)}}return d};var w={defaultContext:{rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",xsd:"http://www.w3.org/2001/XMLSchema#",
dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",cal:"http://www.w3.org/2002/12/cal/ical#",vcard:"http://www.w3.org/2006/vcard/ns# ",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",cc:"http://creativecommons.org/ns#",sioc:"http://rdfs.org/sioc/ns#",doap:"http://usefulinc.com/ns/doap#",com:"http://purl.org/commerce#",ps:"http://purl.org/payswarm#",gr:"http://purl.org/goodrelations/v1#",sig:"http://purl.org/signature#",ccard:"http://purl.org/commerce/creditcard#"},UrisMap:function(){this.defaultNs=
"";this.interfaceProperties=["get","remove","set","setDefault","addAll","resolve","shrink"]}};w.UrisMap.prototype.values=function(){var a={},c;for(c in this)!y.include(this.interfaceProperties,c)&&typeof this[c]!=="function"&&c!=="defaultNs"&&c!=="interfaceProperties"&&(a[c]=this[c]);return a};w.UrisMap.prototype.get=function(a){if(a.indexOf(" ")!=-1)throw"Prefix must not contain any whitespaces";return this[a]};w.UrisMap.prototype.remove=function(a){if(a.indexOf(" ")!=-1)throw"Prefix must not contain any whitespaces";
delete this[a];return null};w.UrisMap.prototype.set=function(a,c){if(a.indexOf(" ")!=-1)throw"Prefix must not contain any whitespaces";this[a]=c};w.UrisMap.prototype.setDefault=function(a){this.defaultNs=a};w.UrisMap.prototype.addAll=function(a,c){for(var d in a)y.include(this.interfaceProperties,d)||(this[d]!=null?c===!0&&(this[d]=a[d]):this[d]=a[d]);return this};w.UrisMap.prototype.resolve=function(a){var c=a.split(":"),a=c[0],c=c[1];return a===""?this.defaultNs==null?null:this.defaultNs+c:this[a]!=
null?this[a]+c:null};w.UrisMap.prototype.shrink=function(a){for(var c in this){var d=this[c];if(a.indexOf(d)===0&&d!==""&&c!="defaultNs")return a=a.split(d)[1],c+":"+a}return a};w.Profile=function(){this.prefixes=new w.UrisMap;this.terms=new w.UrisMap};w.Profile.prototype.importProfile=function(a,c){this.prefixes.addAll(a.prefixes,c);this.terms.addAll(a.terms,c)};w.Profile.prototype.resolve=function(a){return a.indexOf(":")!=-1?this.prefixes.resolve(a):this.terms[a]!=null?this.terms.resolve(a):null};
w.Profile.prototype.setDefaultPrefix=function(a){this.prefixes.setDefault(a)};w.Profile.prototype.setDefaultVocabulary=function(a){this.terms.setDefault(a)};w.Profile.prototype.setPrefix=function(a,c){this.prefixes.set(a,c)};w.Profile.prototype.setTerm=function(a,c){this.terms.set(a,c)};w.RDFEnvironment=function(){this.blankNodeCounter=0;var a=this;this.filters={s:function(a){return function(c){return c.subject.equals(a)}},p:function(a){return function(c){return c.predicate.equals(a)}},o:function(a){return function(c){return c.object.equals(a)}},
sp:function(a,c){return function(h){return h.subject.equals(a)&&h.predicate.equals(c)}},so:function(a,c){return function(h){return h.subject.equals(a)&&h.object.equals(c)}},po:function(a,c){return function(h){return h.predicate.equals(a)&&h.object.equals(c)}},spo:function(a,c,h){return function(j){return j.subject.equals(a)&&j.predicate.equals(c)&&j.object.equals(h)}},describes:function(a){return function(c){return c.subject.equals(a)||c.object.equals(a)}},type:function(c){var g=a.resolve("rdf:type");
return function(a){return a.predicate.equals(g)&&a.object.equals(c)}}};for(var c in w.defaultContext)this.prefixes.set(c,w.defaultContext[c])};y["extends"](w.Profile,w.RDFEnvironment);w.RDFEnvironment.prototype.createBlankNode=function(){var a=new w.BlankNode(this.blankNodeCounter);this.blankNodeCounter++;return a};w.RDFEnvironment.prototype.createNamedNode=function(a){var c=this.resolve(a);return c!=null?new w.NamedNode(c):new w.NamedNode(a)};w.RDFEnvironment.prototype.createLiteral=function(a,c,
d){return d!=null?new w.Literal(a,c,d.toString()):new w.Literal(a,c,d)};w.RDFEnvironment.prototype.createTriple=function(a,c,d){return new w.Triple(a,c,d)};w.RDFEnvironment.prototype.createGraph=function(a){var c=new w.Graph;if(a!=null)for(var d=0;d<a.length;d++)c.add(a[d]);return c};w.RDFEnvironment.prototype.createAction=function(a,c){return function(d){return a(d)?c(d):d}};w.RDFEnvironment.prototype.createProfile=function(a){return a===!0?new w.RDFEnvironment.Profile:(a=new w.RDFEnvironment.Profile,
a.importProfile(this),a)};w.RDFEnvironment.prototype.createTermMap=function(a){if(a===!0)return new w.UrisMap;else{var a=this.terms.values(),c=new w.UrisMap,d;for(d in a)c[d]=a[d];return c}};w.RDFEnvironment.prototype.createPrefixMap=function(a){if(a===!0)return new w.UrisMap;else{var a=this.prefixes.values(),c=new w.UrisMap,d;for(d in a)c[d]=a[d];return c}};w.RDFNode=function(a){this.interfaceName=a;this.attributes=["interfaceName","nominalValue"]};w.RDFNode.prototype.equals=function(a){if(a.interfaceName==
null)return this.valueOf()==a;else{for(var c in this.attributes){var d=this.attributes[c];if(this[d]!=a[d])return!1}return!0}};w.BlankNode=function(a){w.RDFNode.call(this,"BlankNode");this.nominalValue="_:"+a;this.bnodeId=a};y["extends"](w.RDFNode,w.BlankNode);w.BlankNode.prototype.toString=function(){return this.nominalValue};w.BlankNode.prototype.toNT=function(){return this.nominalValue};w.BlankNode.prototype.valueOf=function(){return this.nominalValue};w.Literal=function(a,c,d){w.RDFNode.call(this,
"Literal");this.nominalValue=a;if(c!=null)this.language=c;else if(d!=null)this.datatype=d};y["extends"](w.RDFNode,w.Literal);w.Literal.prototype.toString=function(){var a='"'+this.nominalValue+'"';if(this.language!=null)a=a+"@"+this.language;else if(this.datatype!=null||this.type)a=a+"^^<"+(this.datatype||this.type)+">";return a};w.Literal.prototype.toNT=function(){return this.toString()};w.Literal.prototype.valueOf=function(){return h.effectiveTypeValue({token:"literal",type:this.type,value:this.nominalValue,
language:this.language})};w.NamedNode=function(a){w.RDFNode.call(this,"NamedNode");this.nominalValue=a.value!=null?a.value:a};y["extends"](w.RDFNode,w.NamedNode);w.NamedNode.prototype.toString=function(){return this.nominalValue};w.NamedNode.prototype.toNT=function(){return"<"+this.toString()+">"};w.NamedNode.prototype.valueOf=function(){return this.nominalValue};w.Triple=function(a,c,d){this.subject=a;this.predicate=c;this.object=d};w.Triple.prototype.equals=function(a){return this.subject.equals(a.subject)&&
this.predicate.equals(a.predicate)&&this.object.equals(a.object)};w.Triple.prototype.toString=function(){return this.subject.toNT()+" "+this.predicate.toNT()+" "+this.object.toNT()+" . \r\n"};w.Graph=function(){this.triples=[];this.duplicates={};this.actions=[]};w.Graph.prototype.add=function(a){for(var c=0;c<this.actions.length;c++)a=this.actions[c](a);c=a.subject.toString()+a.predicate.toString()+a.object.toString();this.duplicates[c]||(this.duplicates[c]=!0,this.triples.push(a));return this};w.Graph.prototype.addAction=
function(a,c){this.actions.push(a);if(c==!0)for(var d=0;d<this.triples.length;d++)this.triples[d]=a(this.triples[d]);return this};w.Graph.prototype.addAll=function(a){for(var a=a.toArray(),c=0;c<a.length;c++)this.add(a[c]);return this};w.Graph.prototype.remove=function(a){for(var c=null,d=0;d<this.triples.length;d++)if(this.triples[d].equals(a)){delete this.duplicates[a.subject.toString()+a.predicate.toString()+a.object.toString()];c=d;break}c!=null&&this.triples.splice(c,1);return this};w.Graph.prototype.toArray=
function(){return this.triples};w.Graph.prototype.some=function(a){for(var c=0;c<this.triples.length;c++)if(a(this.triples[c],this)===!0)return!0;return!1};w.Graph.prototype.every=function(a){for(var c=0;c<this.triples.length;c++)if(a(this.triples[c],this)===!1)return!1;return!0};w.Graph.prototype.filter=function(a){for(var c=new w.Graph,d=0;d<this.triples.length;d++)a(this.triples[d],this)===!0&&c.add(this.triples[d]);return c};w.Graph.prototype.forEach=function(a){for(var c=0;c<this.triples.length;c++)a(this.triples[c],
this)};w.Graph.prototype.merge=function(){for(var a=new w.Graph,c=0;c<this.triples;c++){var d=this.triples[c];a.add(d)}for(c=0;c<triples.length;c++)d=triples[c],this.add(d);return a};w.Graph.prototype.match=function(a,c,d,g){for(var h=new w.Graph,j=0,i=0;i<this.triples.length;i++){var l=this.triples[i];if(a==null||l.subject.equals(a))if(c==null||l.predicate.equals(c))if(d==null||l.object.equals(d))if(g==null||j<g)j++,h.add(l);else break}return h};w.Graph.prototype.removeMatches=function(a,c,d){for(var g=
[],h=0;h<this.triples.length;h++){var j=this.triples[h];if(a==null||j.subject.equals(a))if(c==null||j.predicate.equals(c))(d==null||j.object.equals(d))&&g.push(j)}for(h=0;h<g.length;h++)this.remove(g[h]);return this};w.Graph.prototype.toNT=function(){var a="";this.forEach(function(c){a+=c.toString()});return a};w.buildRDFResource=function(a,c,d,g){return a.token==="blank"?w.buildBlankNode(a,c,d,g):a.token==="literal"?w.buildLiteral(a,c,d,g):a.token==="uri"?w.buildNamedNode(a,c,d,g):a.token==="var"?
(a=c[a.value],a!=null?w.buildRDFResource(a,c,d,g):null):null};w.buildBlankNode=function(a){if(a.valuetmp!=null)a.value=a.valuetmp;if(a.value.indexOf("_:")===0)a.value=a.value.split("_:")[1];return new w.BlankNode(a.value)};w.buildLiteral=function(a){return new w.Literal(a.value,a.lang,a.type)};w.buildNamedNode=function(a,c,d,g){if(a.value==null&&a.prefix!=null)c=d.resolveNsInEnvironment(a.prefix,g),a.value=c+a.suffix;return new w.NamedNode(a)};w.rdf=new w.RDFEnvironment;var h={checkFilters:function(a,
c,d,g,k,j){var i=a.filter,l=[];if(i==null||a.length!=null)return c;for(a=0;a<i.length;a++){for(var c=h.run(i[a].value,c,d,g,k,j),t=[],u=0;u<c.length;u++)c[u].__nullify__!=null?l.push(c[u]):t.push(c[u]);c=t}return c.concat(l)}};h.boundVars=function(a){if(a.expressionType!=null){var c=a.expressionType;if(c=="relationalexpression")return c=a.op2,h.boundVars(a.op1)+h.boundVars(c);else if(c=="conditionalor"||c=="conditionaland"){for(var d=[],c=0;c<a.operands;c++)d=d.concat(h.boundVars(a.operands[c]));
return d}else if(c=="builtincall")if(a.args==null)return[];else{d=[];for(c=0;c<a.args.length;c++)d=d.concat(h.boundVars(a.args[c]));return d}else if(c=="multiplicativeexpression"){d=h.boundVars(a.factor);for(c=0;c<a.factors.length;c++)d=d.concat(h.boundVars(a.factors[c].expression));return d}else if(c=="additiveexpression"){d=h.boundVars(a.summand);for(c=0;c<a.summands.length;c++)d=d.concat(h.boundVars(a.summands[c].expression));return d}else if(c=="regex")return d=h.boundVars(a.expression1),d.concat(h.boundVars(a.expression2));
else if(c=="unaryexpression")return h.boundVars(a.expression);else if(c=="atomic")return a.primaryexpression=="var"?[a.value]:[]}else throw console.log("ERROR"),console.log(a),"Cannot find bound expressions in a no expression token";};h.run=function(a,c,d,g,k,j){for(var i=j.copyDenormalizedBindings(c,k.outCache),l=[],t=0;t<c.length;t++){var u=h.runFilter(a,i[t],j,g,k),u=h.ebv(u);h.isEbvError(u)?d&&(u={__nullify__:!0,bindings:c[t]},l.push(u)):u===!0?l.push(c[t]):d&&(u={__nullify__:!0,bindings:c[t]},
l.push(u))}return l};h.collect=function(a,c,d,g,k){for(var j=k.copyDenormalizedBindings(c,g.outCache),i=[],l=0;l<j.length;l++){var t=h.runFilter(a,j[l],k,d,g);i.push({binding:c[l],value:t})}return i};h.runDistinct=function(){};h.runAggregator=function(a,c,d,g,k){if(c==null||c.length===0)return h.ebvError();else if(a.token==="variable"&&a.kind=="var")return c[0][a.value.value];else if(a.token==="variable"&&a.kind==="aliased")if(a.expression.expressionType==="atomic"&&a.expression.primaryexpression===
"var")return c[0][a.expression.value.value];else if(a.expression.expressionType==="aggregate")if(a.expression.aggregateType==="max"){for(var j=null,i=0;i<c.length;i++){var l=c[i],l=h.runFilter(a.expression.expression,l,d,g,k);h.isEbvError(l)||(j===null?j=l:h.runLtFunction(j,l).value===!0&&(j=l))}return j===null?h.ebvError():j}else if(a.expression.aggregateType==="min"){j=null;for(i=0;i<c.length;i++)l=c[i],l=h.runFilter(a.expression.expression,l,d,g,k),h.isEbvError(l)||(j===null?j=l:h.runGtFunction(j,
l).value===!0&&(j=l));return j===null?h.ebvError():j}else if(a.expression.aggregateType==="count"){var j={},t=0;if(a.expression.expression==="*")if(a.expression.distinct!=null&&a.expression.distinct!="")for(i=0;i<c.length;i++){var l=c[i],u=y.hashTerm(l);j[u]==null&&(j[u]=!0,t++)}else t=c.length;else for(i=0;i<c.length;i++)l=c[i],l=h.runFilter(a.expression.expression,l,d,g,k),h.isEbvError(l)||(a.expression.distinct!=null&&a.expression.distinct!=""?(u=y.hashTerm(l),j[u]==null&&(j[u]=!0,t++)):t++);return{token:"literal",
type:"http://www.w3.org/2001/XMLSchema#integer",value:""+t}}else if(a.expression.aggregateType==="avg"){for(var j={},q={token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:"0"},i=t=0;i<c.length;i++)l=c[i],l=h.runFilter(a.expression.expression,l,d,g,k),h.isEbvError(l)||(a.expression.distinct!=null&&a.expression.distinct!=""?(u=y.hashTerm(l),j[u]==null&&(j[u]=!0,h.isNumeric(l)&&(q=h.runSumFunction(q,l),t++))):h.isNumeric(l)&&(q=h.runSumFunction(q,l),t++));a=h.runDivFunction(q,{token:"literal",
type:"http://www.w3.org/2001/XMLSchema#integer",value:""+t});a.value=""+a.value;return a}else if(a.expression.aggregateType==="sum"){j={};q={token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:"0"};for(i=0;i<c.length;i++)l=c[i],l=h.runFilter(a.expression.expression,l,d,g,k),h.isEbvError(l)||(a.expression.distinct!=null&&a.expression.distinct!=""?(u=y.hashTerm(l),j[u]==null&&(j[u]=!0,h.isNumeric(l)&&(q=h.runSumFunction(q,l)))):h.isNumeric(l)&&(q=h.runSumFunction(q,l)));q.value=""+
q.value;return q}else return l=h.runFilter(aggregate.expression,c[0],g,{blanks:{},outCache:{}})};h.runFilter=function(a,c,d,g,k){if(a.expressionType!=null){var j=a.expressionType;if(j=="relationalexpression"){var j=h.runFilter(a.op1,c,d,g,k),i=h.runFilter(a.op2,c,d,g,k);return h.runRelationalFilter(a,j,i,c,d,g,k)}else if(j=="conditionalor")return h.runOrFunction(a,c,d,g,k);else if(j=="conditionaland")return h.runAndFunction(a,c,d,g,k);else if(j=="additiveexpression")return h.runAddition(a.summand,
a.summands,c,d,g,k);else if(j=="builtincall")return h.runBuiltInCall(a.builtincall,a.args,c,d,g,k);else if(j=="multiplicativeexpression")return h.runMultiplication(a.factor,a.factors,c,d,g,k);else if(j=="unaryexpression")return h.runUnaryExpression(a.unaryexpression,a.expression,c,d,g,k);else if(j=="irireforfunction")return h.runIriRefOrFunction(a.iriref,a.args,c,d,g,k);else if(j=="regex")return h.runRegex(a.text,a.pattern,a.flags,c,d,g,k);else if(j=="atomic")if(a.primaryexpression=="var")return c[a.value.value];
else{if(typeof a.value=="object"&&!(a.value.type==null||typeof a.value.type!="object"))a.value.type=y.lexicalFormBaseUri(a.value.type,k);return a.value}else throw"Unknown filter expression type";}else throw"Cannot find bound expressions in a no expression token";};h.isRDFTerm=function(a){return a==null?!1:a.token&&a.token=="literal"||a.token&&a.token=="uri"||a.token&&a.token=="blank"?!0:!1};h.RDFTermEquality=function(a,c,d,g){return a.token==="literal"&&c.token==="literal"?a.lang==c.lang&&a.type==
c.type&&a.value==c.value?!0:a.type!=null&&c.type!=null?h.ebvError():h.isSimpleLiteral(a)&&c.type!=null?h.ebvError():h.isSimpleLiteral(c)&&a.type!=null?h.ebvError():!1:a.token==="uri"&&c.token==="uri"?y.lexicalFormBaseUri(a,g)==y.lexicalFormBaseUri(c,g):a.token==="blank"&&c.token==="blank"?a.value==c.value:!1};h.isInteger=function(a){return a==null?!1:a.token==="literal"?a.type=="http://www.w3.org/2001/XMLSchema#integer"||a.type=="http://www.w3.org/2001/XMLSchema#decimal"||a.type=="http://www.w3.org/2001/XMLSchema#double"||
a.type=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||a.type=="http://www.w3.org/2001/XMLSchema#negativeInteger"||a.type=="http://www.w3.org/2001/XMLSchema#long"||a.type=="http://www.w3.org/2001/XMLSchema#int"||a.type=="http://www.w3.org/2001/XMLSchema#short"||a.type=="http://www.w3.org/2001/XMLSchema#byte"||a.type=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||a.type=="http://www.w3.org/2001/XMLSchema#unsignedLong"||a.type=="http://www.w3.org/2001/XMLSchema#unsignedInt"||a.type==
"http://www.w3.org/2001/XMLSchema#unsignedShort"||a.type=="http://www.w3.org/2001/XMLSchema#unsignedByte"||a.type=="http://www.w3.org/2001/XMLSchema#positiveInteger"?!0:!1:!1};h.isFloat=function(a){return a==null?!1:a.token==="literal"?a.type=="http://www.w3.org/2001/XMLSchema#float"?!0:!1:!1};h.isDecimal=function(a){return a==null?!1:a.token==="literal"?a.type=="http://www.w3.org/2001/XMLSchema#decimal"?!0:!1:!1};h.isDouble=function(a){return a==null?!1:a.token==="literal"?a.type=="http://www.w3.org/2001/XMLSchema#double"?
!0:!1:!1};h.isNumeric=function(a){return a==null?!1:a.token==="literal"?a.type=="http://www.w3.org/2001/XMLSchema#integer"||a.type=="http://www.w3.org/2001/XMLSchema#decimal"||a.type=="http://www.w3.org/2001/XMLSchema#float"||a.type=="http://www.w3.org/2001/XMLSchema#double"||a.type=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||a.type=="http://www.w3.org/2001/XMLSchema#negativeInteger"||a.type=="http://www.w3.org/2001/XMLSchema#long"||a.type=="http://www.w3.org/2001/XMLSchema#int"||a.type==
"http://www.w3.org/2001/XMLSchema#short"||a.type=="http://www.w3.org/2001/XMLSchema#byte"||a.type=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||a.type=="http://www.w3.org/2001/XMLSchema#unsignedLong"||a.type=="http://www.w3.org/2001/XMLSchema#unsignedInt"||a.type=="http://www.w3.org/2001/XMLSchema#unsignedShort"||a.type=="http://www.w3.org/2001/XMLSchema#unsignedByte"||a.type=="http://www.w3.org/2001/XMLSchema#positiveInteger"?!0:!1:!1};h.isSimpleLiteral=function(a){return a&&a.token=="literal"?
a.type==null&&a.lang==null?!0:!1:!1};h.isXsdType=function(a,c){return c&&c.token=="literal"?c.type=="http://www.w3.org/2001/XMLSchema#"+a:!1};h.ebv=function(a){if(a==null||h.isEbvError(a))return h.ebvError();else if(a.token&&a.token==="literal")if(a.type=="http://www.w3.org/2001/XMLSchema#integer"||a.type=="http://www.w3.org/2001/XMLSchema#decimal"||a.type=="http://www.w3.org/2001/XMLSchema#double"||a.type=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||a.type=="http://www.w3.org/2001/XMLSchema#negativeInteger"||
a.type=="http://www.w3.org/2001/XMLSchema#long"||a.type=="http://www.w3.org/2001/XMLSchema#int"||a.type=="http://www.w3.org/2001/XMLSchema#short"||a.type=="http://www.w3.org/2001/XMLSchema#byte"||a.type=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||a.type=="http://www.w3.org/2001/XMLSchema#unsignedLong"||a.type=="http://www.w3.org/2001/XMLSchema#unsignedInt"||a.type=="http://www.w3.org/2001/XMLSchema#unsignedShort"||a.type=="http://www.w3.org/2001/XMLSchema#unsignedByte"||a.type=="http://www.w3.org/2001/XMLSchema#positiveInteger"){var c=
parseFloat(a.value);return isNaN(c)?!1:parseFloat(a.value)!=0}else return a.type==="http://www.w3.org/2001/XMLSchema#boolean"?a.value==="true"||a.value===!0||a.value==="True":a.type==="http://www.w3.org/2001/XMLSchema#string"?a.value!="":a.type==="http://www.w3.org/2001/XMLSchema#dateTime"?new Date(a.value)!=null:h.isEbvError(a)?a:a.type==null?a.value!=""?!0:!1:h.ebvError();else return a.value===!0};h.ebvTrue=function(){return{token:"literal",type:"http://www.w3.org/2001/XMLSchema#boolean",value:!0}};
h.ebvFalse=function(){return{token:"literal",type:"http://www.w3.org/2001/XMLSchema#boolean",value:!1}};h.ebvError=function(){return{token:"literal",type:"https://github.com/antoniogarrote/js-tools/types#error",value:null}};h.isEbvError=function(a){return typeof a=="object"&&a!=null?a.type==="https://github.com/antoniogarrote/js-tools/types#error":!1};h.ebvBoolean=function(a){return h.isEbvError(a)?a:a===!0?h.ebvTrue():h.ebvFalse()};h.runRelationalFilter=function(a,c,d,g,k,j,i){a=a.operator;if(a===
"=")return h.runEqualityFunction(c,d,g,k,j,i);else if(a==="!="){c=h.runEqualityFunction(c,d,g,k,j,i);if(!h.isEbvError(c))c.value=!c.value;return c}else if(a==="<")return h.runLtFunction(c,d,g);else if(a===">")return h.runGtFunction(c,d,g);else if(a==="<=")return h.runLtEqFunction(c,d,g);else if(a===">=")return h.runGtEqFunction(c,d,g);else throw"Error applying relational filter, unknown operator";};h.effectiveTypeValue=function(a){if(a.token=="literal")if(a.type=="http://www.w3.org/2001/XMLSchema#integer")return a=
parseInt(a.value);else if(a.type=="http://www.w3.org/2001/XMLSchema#decimal")return a=parseFloat(a.value);else if(a.type=="http://www.w3.org/2001/XMLSchema#float")return a=parseFloat(a.value);else if(a.type=="http://www.w3.org/2001/XMLSchema#double")return a=parseFloat(a.value);else if(a.type=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger")return a=parseFloat(a.value);else if(a.type=="http://www.w3.org/2001/XMLSchema#negativeInteger")return a=parseInt(a.value);else if(a.type=="http://www.w3.org/2001/XMLSchema#long")return a=
parseInt(a.value);else if(a.type=="http://www.w3.org/2001/XMLSchema#int")return a=parseInt(a.value);else if(a.type=="http://www.w3.org/2001/XMLSchema#short")return a=parseInt(a.value);else if(a.type=="http://www.w3.org/2001/XMLSchema#byte")return a=parseInt(a.value);else if(a.type=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger")return a=parseInt(a.value);else if(a.type=="http://www.w3.org/2001/XMLSchema#unsignedLong")return a=parseInt(a.value);else if(a.type=="http://www.w3.org/2001/XMLSchema#unsignedInt")return a=
parseInt(a.value);else if(a.type=="http://www.w3.org/2001/XMLSchema#unsignedShort")return a=parseInt(a.value);else if(a.type=="http://www.w3.org/2001/XMLSchema#unsignedByte")return a=parseInt(a.value);else if(a.type=="http://www.w3.org/2001/XMLSchema#positiveInteger")return a=parseInt(a.value);else if(a.type=="http://www.w3.org/2001/XMLSchema#date"||a.type=="http://www.w3.org/2001/XMLSchema#dateTime")try{return y.parseISO8601(a.value)}catch(c){return null}else return a.type=="http://www.w3.org/2001/XMLSchema#boolean"?
a.value===!0||a.value==="true"||a.value==="1"||a.value===1||a.value===!0?!0:a.value===!1||a.value==="false"||a.value==="0"||a.value===0||a.value===!1?!1:void 0:a.type=="http://www.w3.org/2001/XMLSchema#string"?a.value===null||a.value===void 0?void 0:""+a.value:a.value;else throw console.log("not implemented yet"),"value not supported in operations yet";};h.runOrFunction=function(a,c,d,g,k){for(var j=null,i=0;i<a.operands.length;i++){var l=h.runFilter(a.operands[i],c,d,g,k);h.isEbvError(l)==!1&&(l=
h.ebv(l));j==null?j=l:h.isEbvError(l)?j=h.isEbvError(j)?h.ebvError():j===!0?!0:h.ebvError():l===!0?j=!0:h.isEbvError(j)&&(j=h.ebvError())}return h.ebvBoolean(j)};h.runAndFunction=function(a,c,d,g,k){for(var j=null,i=0;i<a.operands.length;i++){var l=h.runFilter(a.operands[i],c,d,g,k);h.isEbvError(l)==!1&&(l=h.ebv(l));j==null?j=l:h.isEbvError(l)?j=h.isEbvError(j)?h.ebvError():j===!0?h.ebvError():!1:l===!0?h.isEbvError(j)&&(j=h.ebvError()):j=!1}return h.ebvBoolean(j)};h.runEqualityFunction=function(a,
c,d,g,k,j){if(h.isEbvError(a)||h.isEbvError(c))return h.ebvError();if(h.isNumeric(a)&&h.isNumeric(c))return d=h.effectiveTypeValue(a),k=h.effectiveTypeValue(c),isNaN(d)||isNaN(k)?h.ebvBoolean(h.RDFTermEquality(a,c,g,j)):h.ebvBoolean(d==k);else if((h.isSimpleLiteral(a)||h.isXsdType("string",a))&&(h.isSimpleLiteral(c)||h.isXsdType("string",c)))return h.ebvBoolean(h.effectiveTypeValue(a)==h.effectiveTypeValue(c));else if(h.isXsdType("boolean",a)&&h.isXsdType("boolean",c))return h.ebvBoolean(h.effectiveTypeValue(a)==
h.effectiveTypeValue(c));else if((h.isXsdType("dateTime",a)||h.isXsdType("date",a))&&(h.isXsdType("dateTime",c)||h.isXsdType("date",c))){if(h.isXsdType("dateTime",a)&&h.isXsdType("date",c))return h.ebvFalse();if(h.isXsdType("date",a)&&h.isXsdType("dateTime",c))return h.ebvFalse();a=y.compareDateComponents(a.value,c.value);return a!=null?a==0?h.ebvTrue():h.ebvFalse():h.ebvError()}else return h.isRDFTerm(a)&&h.isRDFTerm(c)?h.ebvBoolean(h.RDFTermEquality(a,c,g,j)):h.ebvFalse()};h.runGtFunction=function(a,
c){if(h.isEbvError(a)||h.isEbvError(c))return h.ebvError();if(h.isNumeric(a)&&h.isNumeric(c))return h.ebvBoolean(h.effectiveTypeValue(a)>h.effectiveTypeValue(c));else if(h.isSimpleLiteral(a)&&h.isSimpleLiteral(c))return h.ebvBoolean(h.effectiveTypeValue(a)>h.effectiveTypeValue(c));else if(h.isXsdType("string",a)&&h.isXsdType("string",c))return h.ebvBoolean(h.effectiveTypeValue(a)>h.effectiveTypeValue(c));else if(h.isXsdType("boolean",a)&&h.isXsdType("boolean",c))return h.ebvBoolean(h.effectiveTypeValue(a)>
h.effectiveTypeValue(c));else if((h.isXsdType("dateTime",a)||h.isXsdType("date",a))&&(h.isXsdType("dateTime",c)||h.isXsdType("date",c))){if(h.isXsdType("dateTime",a)&&h.isXsdType("date",c))return h.ebvFalse();if(h.isXsdType("date",a)&&h.isXsdType("dateTime",c))return h.ebvFalse();var d=y.compareDateComponents(a.value,c.value);return d!=null?d==1?h.ebvTrue():h.ebvFalse():h.ebvError()}else return h.ebvFalse()};h.runTotalGtFunction=function(a,c){return h.isEbvError(a)||h.isEbvError(c)?h.ebvError():h.isNumeric(a)&&
h.isNumeric(c)||h.isSimpleLiteral(a)&&h.isSimpleLiteral(c)||h.isXsdType("string",a)&&h.isSimpleLiteral("string",c)||h.isXsdType("boolean",a)&&h.isSimpleLiteral("boolean",c)||h.isXsdType("dateTime",a)&&h.isSimpleLiteral("dateTime",c)?h.runGtFunction(a,c,[]):a.token&&a.token==="uri"&&c.token&&c.token==="uri"?h.ebvBoolean(a.value>c.value):a.token&&a.token==="literal"&&c.token&&c.token==="literal"?h.ebvBoolean(""+a.value+a.type+a.lang>""+c.value+c.type+c.lang):a.token&&a.token==="blank"&&c.token&&c.token===
"blank"?h.ebvBoolean(a.value>c.value):a.value&&c.value?h.ebvBoolean(a.value>c.value):h.ebvTrue()};h.runLtFunction=function(a,c){if(h.isEbvError(a)||h.isEbvError(c))return h.ebvError();if(h.isNumeric(a)&&h.isNumeric(c))return h.ebvBoolean(h.effectiveTypeValue(a)<h.effectiveTypeValue(c));else if(h.isSimpleLiteral(a)&&h.isSimpleLiteral(c))return h.ebvBoolean(h.effectiveTypeValue(a)<h.effectiveTypeValue(c));else if(h.isXsdType("string",a)&&h.isXsdType("string",c))return h.ebvBoolean(h.effectiveTypeValue(a)<
h.effectiveTypeValue(c));else if(h.isXsdType("boolean",a)&&h.isXsdType("boolean",c))return h.ebvBoolean(h.effectiveTypeValue(a)<h.effectiveTypeValue(c));else if((h.isXsdType("dateTime",a)||h.isXsdType("date",a))&&(h.isXsdType("dateTime",c)||h.isXsdType("date",c))){if(h.isXsdType("dateTime",a)&&h.isXsdType("date",c))return h.ebvFalse();if(h.isXsdType("date",a)&&h.isXsdType("dateTime",c))return h.ebvFalse();var d=y.compareDateComponents(a.value,c.value);return d!=null?d==-1?h.ebvTrue():h.ebvFalse():
h.ebvError()}else return h.ebvFalse()};h.runGtEqFunction=function(a,c){if(h.isEbvError(a)||h.isEbvError(c))return h.ebvError();if(h.isNumeric(a)&&h.isNumeric(c))return h.ebvBoolean(h.effectiveTypeValue(a)>=h.effectiveTypeValue(c));else if(h.isSimpleLiteral(a)&&h.isSimpleLiteral(c))return h.ebvBoolean(h.effectiveTypeValue(a)>=h.effectiveTypeValue(c));else if(h.isXsdType("string",a)&&h.isXsdType("string",c))return h.ebvBoolean(h.effectiveTypeValue(a)>=h.effectiveTypeValue(c));else if(h.isXsdType("boolean",
a)&&h.isXsdType("boolean",c))return h.ebvBoolean(h.effectiveTypeValue(a)>=h.effectiveTypeValue(c));else if((h.isXsdType("dateTime",a)||h.isXsdType("date",a))&&(h.isXsdType("dateTime",c)||h.isXsdType("date",c))){if(h.isXsdType("dateTime",a)&&h.isXsdType("date",c))return h.ebvFalse();if(h.isXsdType("date",a)&&h.isXsdType("dateTime",c))return h.ebvFalse();var d=y.compareDateComponents(a.value,c.value);return d!=null?d!=-1?h.ebvTrue():h.ebvFalse():h.ebvError()}else return h.ebvFalse()};h.runLtEqFunction=
function(a,c){if(h.isEbvError(a)||h.isEbvError(c))return h.ebvError();if(h.isNumeric(a)&&h.isNumeric(c))return h.ebvBoolean(h.effectiveTypeValue(a)<=h.effectiveTypeValue(c));else if(h.isSimpleLiteral(a)&&h.isSimpleLiteral(c))return h.ebvBoolean(h.effectiveTypeValue(a)<=h.effectiveTypeValue(c));else if(h.isXsdType("string",a)&&h.isXsdType("string",c))return h.ebvBoolean(h.effectiveTypeValue(a)<=h.effectiveTypeValue(c));else if(h.isXsdType("boolean",a)&&h.isXsdType("boolean",c))return h.ebvBoolean(h.effectiveTypeValue(a)<=
h.effectiveTypeValue(c));else if((h.isXsdType("dateTime",a)||h.isXsdType("date",a))&&(h.isXsdType("dateTime",c)||h.isXsdType("date",c))){if(h.isXsdType("dateTime",a)&&h.isXsdType("date",c))return h.ebvFalse();if(h.isXsdType("date",a)&&h.isXsdType("dateTime",c))return h.ebvFalse();var d=y.compareDateComponents(a.value,c.value);return d!=null?d!=1?h.ebvTrue():h.ebvFalse():h.ebvError()}else return h.ebvFalse()};h.runAddition=function(a,c,d,g,k,j){var i=h.runFilter(a,d,g,k,j);if(h.isEbvError(i))return h.ebvError();
a=i;if(h.isNumeric(i)){for(i=0;i<c.length;i++){var l=h.runFilter(c[i].expression,d,g,k,j);if(h.isNumeric(l))c[i].operator==="+"?a=h.runSumFunction(a,l):c[i].operator==="-"&&(a=h.runSubFunction(a,l));else return h.ebvFalse()}return a}else return h.ebvFalse()};h.runSumFunction=function(a,c){if(h.isEbvError(a)||h.isEbvError(c))return h.ebvError();var d=h.effectiveTypeValue(a)+h.effectiveTypeValue(c);return h.isDouble(a)||h.isDouble(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:d}:
h.isFloat(a)||h.isFloat(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",value:d}:h.isDecimal(a)||h.isDecimal(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:d}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:d}};h.runSubFunction=function(a,c){if(h.isEbvError(a)||h.isEbvError(c))return h.ebvError();var d=h.effectiveTypeValue(a)-h.effectiveTypeValue(c);return h.isDouble(a)||h.isDouble(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",
value:d}:h.isFloat(a)||h.isFloat(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",value:d}:h.isDecimal(a)||h.isDecimal(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:d}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:d}};h.runMultiplication=function(a,c,d,g,k,j){a=h.runFilter(a,d,g,k,j);if(h.isEbvError(a))return a;var i=a;if(h.isNumeric(a)){for(var l=0;l<c.length;l++){var t=h.runFilter(c[l].expression,d,g,k,j);if(h.isEbvError(t))return a;
if(h.isNumeric(t))c[l].operator==="*"?i=h.runMulFunction(i,t):c[l].operator==="/"&&(i=h.runDivFunction(i,t));else return h.ebvFalse()}return i}else return h.ebvFalse()};h.runMulFunction=function(a,c){if(h.isEbvError(a)||h.isEbvError(c))return h.ebvError();var d=h.effectiveTypeValue(a)*h.effectiveTypeValue(c);return h.isDouble(a)||h.isDouble(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:d}:h.isFloat(a)||h.isFloat(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",
value:d}:h.isDecimal(a)||h.isDecimal(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:d}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:d}};h.runDivFunction=function(a,c){if(h.isEbvError(a)||h.isEbvError(c))return h.ebvError();var d=h.effectiveTypeValue(a)/h.effectiveTypeValue(c);return h.isDouble(a)||h.isDouble(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:d}:h.isFloat(a)||h.isFloat(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",
value:d}:h.isDecimal(a)||h.isDecimal(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:d}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:d}};h.runBuiltInCall=function(a,c,d,g,k,j){if(a==="notexists"||a==="exists"){var i=JSON.parse(JSON.stringify(c[0])),i=g.abstractQueryTree.parseSelect({pattern:i},d),i=g.abstractQueryTree.bind(i.pattern,d),d=g.executeSelectUnit([{kind:"*"}],k,i,j);return a==="exists"?h.ebvBoolean(d.length!==0):h.ebvBoolean(d.length===
0)}else{for(var i=[],l=0;l<c.length;l++)if(c[l].token==="var")i.push(c[l]);else{var t=h.runFilter(c[l],d,g,k,j);if(h.isEbvError(t))return t;i.push(t)}if(a==="str")return i[0].token==="literal"?{token:"literal",type:null,value:""+i[0].value}:i[0].token==="uri"?{token:"literal",type:null,value:i[0].value}:h.ebvFalse();else if(a==="lang")return i[0].token==="literal"?i[0].lang!=null?{token:"literal",value:""+i[0].lang}:{token:"literal",value:""}:h.ebvError();else if(a==="datatype")return i[0].token===
"literal"?(a=i[0],a.type!=null?typeof a.type==="string"?{token:"uri",value:a.type,prefix:null,suffix:null}:a.type:a.lang==null?{token:"uri",value:"http://www.w3.org/2001/XMLSchema#string",prefix:null,suffix:null}:h.ebvError()):h.ebvError();else if(a==="isliteral")return i[0].token==="literal"?h.ebvTrue():h.ebvFalse();else if(a==="isblank")return i[0].token==="blank"?h.ebvTrue():h.ebvFalse();else if(a==="isuri"||a==="isiri")return i[0].token==="uri"?h.ebvTrue():h.ebvFalse();else if(a==="sameterm")return a=
h.RDFTermEquality(i[0],i[1],g,j),h.isEbvError(a)&&(a=!1),h.ebvBoolean(a);else if(a==="langmatches")return a=i[0],d=i[1],a.token==="literal"&&d.token==="literal"?d.value==="*"&&a.value!=""?h.ebvTrue():h.ebvBoolean(a.value.toLowerCase().indexOf(d.value.toLowerCase())===0):h.ebvError();else if(a==="bound")return a=i[0].value,a==null?h.ebvError():d[a]!=null?h.ebvTrue():h.ebvFalse();else throw"Builtin call "+a+" not implemented yet";}};h.runUnaryExpression=function(a,c,d,g,k,j){c=h.runFilter(c,d,g,k,j);
if(h.isEbvError(c))return c;if(a==="!"){var i=h.ebv(c);return h.isEbvError(i)?h.ebvFalse():h.ebvBoolean(!i)}else if(a==="+")return h.isNumeric(c)?c:h.ebvError();else if(a==="-")if(h.isNumeric(c)){a={};for(i in c)a[i]=c[i];a.value=-a.value;return a}else return h.ebvError()};h.runRegex=function(a,c,d,g,k,j,i){if(a!=null)a=h.runFilter(a,g,k,j,i);else return h.ebvError();if(c!=null)c=h.runFilter(c,g,k,j,i);else return h.ebvError();d!=null&&(d=h.runFilter(d,g,k,j,i));if(c!=null&&c.token==="literal"&&(d==
null||d.token==="literal"))c=c.value,d=d==null?null:d.value;else return h.ebvError();if(a!=null&&a.token=="var")if(g[a.value]!=null)a=g[a.value];else return h.ebvError();else if(a!=null&&a.token==="literal")if(a.type==null||h.isXsdType("string",a))a=a.value;else return h.ebvError();else return h.ebvError();return(d==null?RegExp(c):RegExp(c,d.toLowerCase())).exec(a)?h.ebvTrue():h.ebvFalse()};h.normalizeLiteralDatatype=function(a,c,d){if(!(a.value.type==null||typeof a.value.type!="object"))a.value.type=
y.lexicalFormBaseUri(a.value.type,d);return a};h.runIriRefOrFunction=function(a,c,d,g,k,j){if(c==null)return a;else{for(var i=[],l=0;l<c.length;l++)i.push(h.runFilter(c[l],d,g,k,j));a=y.lexicalFormBaseUri(a,j);if(a=="http://www.w3.org/2001/XMLSchema#integer"||a=="http://www.w3.org/2001/XMLSchema#decimal"||a=="http://www.w3.org/2001/XMLSchema#double"||a=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||a=="http://www.w3.org/2001/XMLSchema#negativeInteger"||a=="http://www.w3.org/2001/XMLSchema#long"||
a=="http://www.w3.org/2001/XMLSchema#int"||a=="http://www.w3.org/2001/XMLSchema#short"||a=="http://www.w3.org/2001/XMLSchema#byte"||a=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||a=="http://www.w3.org/2001/XMLSchema#unsignedLong"||a=="http://www.w3.org/2001/XMLSchema#unsignedInt"||a=="http://www.w3.org/2001/XMLSchema#unsignedShort"||a=="http://www.w3.org/2001/XMLSchema#unsignedByte"||a=="http://www.w3.org/2001/XMLSchema#positiveInteger")if(i=i[0],i.token==="literal")if(i=h.normalizeLiteralDatatype(i,
g,j),i.type=="http://www.w3.org/2001/XMLSchema#integer"||i.type=="http://www.w3.org/2001/XMLSchema#decimal"||i.type=="http://www.w3.org/2001/XMLSchema#double"||i.type=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||i.type=="http://www.w3.org/2001/XMLSchema#negativeInteger"||i.type=="http://www.w3.org/2001/XMLSchema#long"||i.type=="http://www.w3.org/2001/XMLSchema#int"||i.type=="http://www.w3.org/2001/XMLSchema#short"||i.type=="http://www.w3.org/2001/XMLSchema#byte"||i.type=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||
i.type=="http://www.w3.org/2001/XMLSchema#unsignedLong"||i.type=="http://www.w3.org/2001/XMLSchema#unsignedInt"||i.type=="http://www.w3.org/2001/XMLSchema#unsignedShort"||i.type=="http://www.w3.org/2001/XMLSchema#unsignedByte"||i.type=="http://www.w3.org/2001/XMLSchema#positiveInteger")return i.type=a,i;else if(i.type=="http://www.w3.org/2001/XMLSchema#boolean")return h.ebv(i)==!0?(i.type=a,i.value=1):(i.type=a,i.value=0),i;else if(i.type=="http://www.w3.org/2001/XMLSchema#float"||i.type=="http://www.w3.org/2001/XMLSchema#double")return i.type=
a,i.value=parseInt(i.value),i;else if(i.type=="http://www.w3.org/2001/XMLSchema#string"||i.type==null){if(i.value.split(".").length>2)return h.ebvError();else if(i.value.split("-").length>2)return h.ebvError();else if(i.value.split("/").length>2)return h.ebvError();else if(i.value.split("+").length>2)return h.ebvError();if(a=="http://www.w3.org/2001/XMLSchema#decimal"&&(i.value.indexOf("e")!=-1||i.value.indexOf("E")!=-1))return h.ebvError();if(a=="http://www.w3.org/2001/XMLSchema#int"||a=="http://www.w3.org/2001/XMLSchema#integer")if(i.value.indexOf("e")!=
-1||i.value.indexOf("E")!=-1||i.value.indexOf(".")!=-1)return h.ebvError();try{return i.value=parseInt(parseFloat(i.value)),isNaN(i.value)?h.ebvError():(i.type=a,i)}catch(t){return h.ebvError()}}else return h.ebvError();else return h.ebvError();else if(a=="http://www.w3.org/2001/XMLSchema#boolean")return i=i[0],i.token==="literal"&&i.type==null?i.value==="true"||i.value==="1"?h.ebvTrue():i.value==="false"||i.value==="0"?h.ebvFalse():h.ebvError():i.token==="literal"?h.isEbvError(i)?i:h.ebvBoolean(i):
h.ebvError();else if(a=="http://www.w3.org/2001/XMLSchema#string")if(i=i[0],i.token==="literal")if(i=h.normalizeLiteralDatatype(i,g,j),i.type=="http://www.w3.org/2001/XMLSchema#integer"||i.type=="http://www.w3.org/2001/XMLSchema#decimal"||i.type=="http://www.w3.org/2001/XMLSchema#double"||i.type=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||i.type=="http://www.w3.org/2001/XMLSchema#negativeInteger"||i.type=="http://www.w3.org/2001/XMLSchema#long"||i.type=="http://www.w3.org/2001/XMLSchema#int"||
i.type=="http://www.w3.org/2001/XMLSchema#short"||i.type=="http://www.w3.org/2001/XMLSchema#byte"||i.type=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||i.type=="http://www.w3.org/2001/XMLSchema#unsignedLong"||i.type=="http://www.w3.org/2001/XMLSchema#unsignedInt"||i.type=="http://www.w3.org/2001/XMLSchema#unsignedShort"||i.type=="http://www.w3.org/2001/XMLSchema#unsignedByte"||i.type=="http://www.w3.org/2001/XMLSchema#positiveInteger"||i.type=="http://www.w3.org/2001/XMLSchema#float")return i.type=
a,i.value=""+i.value,i;else if(i.type=="http://www.w3.org/2001/XMLSchema#string")return i;else if(i.type=="http://www.w3.org/2001/XMLSchema#boolean")return h.ebv(i)?(i.type=a,i.value="true"):(i.type=a,i.value="false"),i;else if(i.type=="http://www.w3.org/2001/XMLSchema#dateTime"||i.type=="http://www.w3.org/2001/XMLSchema#date"){i.type=a;if(typeof i.value!="string")i.value=y.iso8601(i.value);return i}else return i.type==null?(i.value=""+i.value,i.type=a,i):h.ebvError();else return i.token==="uri"?
{token:"literal",value:y.lexicalFormBaseUri(i,j),type:a,lang:null}:h.ebvError();else if(a=="http://www.w3.org/2001/XMLSchema#dateTime"||a=="http://www.w3.org/2001/XMLSchema#date")if(i=i[0],i.type=="http://www.w3.org/2001/XMLSchema#dateTime"||i.type=="http://www.w3.org/2001/XMLSchema#date")return i;else if(i.type=="http://www.w3.org/2001/XMLSchema#string"||i.type==null)try{return i.value=y.iso8601(y.parseStrictISO8601(i.value)),i.type=a,i}catch(u){return h.ebvError()}else return h.ebvError();else if(a==
"http://www.w3.org/2001/XMLSchema#float")if(i=i[0],i.token==="literal")if(i=h.normalizeLiteralDatatype(i,g,j),i.type=="http://www.w3.org/2001/XMLSchema#decimal"||i.type=="http://www.w3.org/2001/XMLSchema#int")return i.type=a,i.value=parseFloat(i.value),i;else if(i.type=="http://www.w3.org/2001/XMLSchema#boolean")return h.ebv(i)==!0?(i.type=a,i.value=1):(i.type=a,i.value=0),i;else if(i.type=="http://www.w3.org/2001/XMLSchema#float"||i.type=="http://www.w3.org/2001/XMLSchema#double")return i.type=a,
i.value=parseFloat(i.value),i;else if(i.type=="http://www.w3.org/2001/XMLSchema#string")try{return i.value=parseFloat(i.value),isNaN(i.value)?h.ebvError():(i.type=a,i)}catch(q){return h.ebvError()}else if(i.type==null){if(i.value.split(".").length>2)return h.ebvError();else if(i.value.split("-").length>2)return h.ebvError();else if(i.value.split("/").length>2)return h.ebvError();else if(i.value.split("+").length>2)return h.ebvError();try{return i.value=parseFloat(i.value),isNaN(i.value)?h.ebvError():
(i.type=a,i)}catch(w){return h.ebvError()}}else return h.ebvError();else return h.ebvError();else return h.ebvError()}};var E={variablesInBGP:function(a){var c=a.variables;if(c)return c;var d=a.value||a,c=[],g;for(g in d)d[g]&&d[g].token==="var"?c.push(d[g].value):d[g]&&d[g].token==="blank"&&c.push("blank:"+d[g].value);return a.variables=c},connected:function(a,c){for(var d="/"+a.vars.join("/")+"/",g=0;g<c.vars.length;g++)if(d.indexOf("/"+c.vars[g]+"/")!=-1)return!0;return!1},variablesIntersectionBGP:function(a,
c){for(var d=E.variablesInBGP(a).sort(),g=E.variablesInBGP(c).sort(),h=0,j=0,i=[];h<d.length&&j<g.length;)d[h]===g[j]?(i.push(d[h]),h++,j++):d[h]<g[j]?h++:j++;return i},executeAndBGPsGroups:function(a){for(var c={},d={},g=0,h=0;h<a.length;h++){var j=a[h],i=[],l;for(l in j)l!="_cost"&&(j[l].token==="var"?i.push(j[l].value):j[l].token==="blank"&&i.push(j[l].value));var t=!1,u;for(u in d){for(var q=d[u],y=0;y<i.length;y++)if(q.indexOf("/"+i[y]+"/")!=-1){c[u].push(j);d[u]=q+i.join("/")+"/";t=!0;break}if(t)break}t||
(c[g]=[j],d[g]="/"+i.join("/")+"/",g++)}a=[];for(g in c)a.push(c[g]);return a},intersectionSize:function(a,c){for(var d=c.i.split("_"),g=0;g<d.length;g++)if(d[g]!=""&&a.i.indexOf("_"+d[g]+"_")!=-1)return 1;return 0},createJoinTree:function(a,c){for(var d="/"+a.vars.join("/")+"/",g=a.vars.concat([]),h=[],j=0;j<c.vars.length;j++)d.indexOf("/"+c.vars[j]+"/")!=-1?c.vars[j].indexOf("_:")==0?h.push("blank:"+c.vars[j]):h.push(c.vars[j]):g.push(c.vars[j]);for(var i=c.i.split("_"),l=a.i.split("_"),d={},j=
0;j<i.length;j++)i[j]!=""&&(d[i[j]]=!0);for(j=0;j<l.length;j++)l[j]!=""&&(d[l[j]]=!0);var j=[],t;for(t in d)j.push(t);return{left:a,right:c,cost:a.cost+c.cost,i:"_"+j.sort().join("_")+"_",vars:g,join:h}}};E.executeBushyTree=function(a,c,d,g){if(a.left==null)return E.executeEmptyJoinBGP(a.right,c,d,g);else if(a.right==null)return E.executeEmptyJoinBGP(a.left,c,d,g);else{var h=E.executeBushyTree(a.left,c,d,g);if(h!=null)return c=E.executeBushyTree(a.right,c,d,g),c!=null?E.joinBindings2(a.join,h,c):
null}};E.executeAndBGPsDPSize=function(a,c,d,g){for(var h=E.executeAndBGPsGroups(a),a=[],j=0;j<h.length;j++){var i=h[j];d.computeCosts(i,g);var l={},t={},u={},q=1,y=null,w={};u["1"]=[];for(var A=0;A<i.length;A++){var q=[],C;for(C in i[A])C!="_cost"&&(i[A][C].token==="var"?q.push(i[A][C].value):i[A][C].token==="blank"&&q.push(i[A][C].value));t["_"+A+"_"]={left:i[A],right:null,cost:i[A]._cost,i:"_"+A+"_",vars:q};q={left:i[A],right:null,cost:i[A]._cost,i:"_"+A+"_",vars:q};l["_"+A+"_"]=q;delete i[A]._cost;
w["_"+A+"_"]=!0;u["1"].push("_"+A+"_");if(y==null||y.cost>q.cost)y=q}for(var F=2;F<=i.length;F++)for(var B=1;B<F;B++)for(var G=u[""+B]||[],H=u[""+(F-B)]||[],A=0;A<G.length;A++)for(var K=0;K<H.length;K++)if(G[A]!==H[K]){var J=t[G[A]],I=t[H[K]];if(E.intersectionSize(J,I)==0&&E.connected(J,I)&&(q=F,I=E.createJoinTree(l[J.i],l[I.i]),!w[I.i])){w[I.i]=!0;var N=I.cost+1;if(l[I.i]!=null)N=l[I.i].cost;J=u[F]||[];J.push(I.i);t[I.i]=I;u[F]=J;N>I.cost&&(q===F&&(y=I),l[I.i]=I)}}a.push(y)}J=null;for(j=0;j<a.length;j++)C=
E.executeBushyTree(a[j],c,d,g),J=J==null?C:E.crossProductBindings(J,C);return J};E.executeEmptyJoinBGP=function(a,c,d,g){return E.executeBGPDatasets(a,c,d,g)};E.executeBGPDatasets=function(a,c,d,g){var h={};if(a.graph==null){for(var j=[],i=0;i<c.implicit.length;i++)if(h[c.implicit[i].oid]==null){h[c.implicit[i].oid]=!0;a.graph=c.implicit[i];var l=d.rangeQuery(a,g),l=E.buildBindingsFromRange(l,a);j.push(l)}return a=E.unionManyBindings(j)}else if(a.graph.token==="var"){for(var t=a.graph.value,j=[],
i=0;i<c.named.length;i++)if(h[c.named[i].oid]==null)if(h[c.named[i].oid]=!0,a.graph=c.named[i],l=d.rangeQuery(a,g),l!=null){for(var l=E.buildBindingsFromRange(l,a),u=0;u<l.length;u++)l[u][t]=c.named[i].oid;j.push(l)}else return null;return a=E.unionManyBindings(j||[])}else return l=d.rangeQuery(a,g),l!=null?l=E.buildBindingsFromRange(l,a):null};E.buildBindingsFromRange=function(a,c){E.variablesInBGP(c);var d={},g=c.value||c,d={};for(l in g)g[l]&&g[l].token==="var"?d[l]=g[l].value:g[l]&&g[l].token===
"blank"&&(d[l]="blank:"+g[l].value);g=[];if(a!=null)for(var h=0;h<a.length;h++){var j={},i=a[h],l;for(l in d)j[d[l]]=i[l];g.push(j)}return g};E.areCompatibleBindings=function(a,c){for(var d in a)if(c[d]!=null&&c[d]!=a[d])return!1;return!0};E.mergeBindings=function(a,c){var d={},g;for(g in a)d[g]=a[g];for(g in c)d[g]=c[g];return d};E.joinBindings2=function(a,c,d){for(var g={},h,j,i,l,t=[],u=0;u<c.length;u++){h=c[u];l=g;for(var q=0;q<a.length;q++)j=a[q],j=h[j],q==a.length-1?(i=l[j]||[],i.push(h),l[j]=
i):(i=l[j]||{},l=l[j]=i)}for(u=0;u<d.length;u++){h=d[u];l=g;for(q=0;q<a.length;q++)if(j=a[q],j=h[j],l[j]!=null)if(q==a.length-1)for(c=0;c<l[j].length;c++)t.push(E.mergeBindings(l[j][c],h));else l=l[j]}return t};E.joinBindings=function(a,c){for(var d=[],g=0;g<a.length;g++)for(var h=a[g],j=0;j<c.length;j++){var i=c[j];E.areCompatibleBindings(h,i)&&d.push(E.mergeBindings(h,i))}return d};E.augmentMissingBindings=function(a,c){for(var d in c)a[d]==null&&(a[d]=null);return a};E.leftOuterJoinBindings=function(a,
c){for(var d=[],g=0;g<a.length;g++){for(var h=a[g],j=!1,i=0;i<c.length;i++){var l=c[i];E.areCompatibleBindings(h,l)&&(j=!0,d.push(E.mergeBindings(h,l)))}j===!1&&(E.augmentMissingBindings(h,l),d.push(h))}return d};E.crossProductBindings=function(a,c){for(var d=[],g=0;g<a.length;g++)for(var h=a[g],j=0;j<c.length;j++)d.push(E.mergeBindings(h,c[j]));return d};E.unionBindings=function(a,c){return a.concat(c)};E.unionManyBindings=function(a){for(var c=[],d=0;d<a.length;d++)c=E.unionBindings(c,a[d]);return c};
var B={},da=E;B.QueryEngine=function(a){if(arguments.length!=0)this.backend=a.backend,this.lexicon=a.lexicon,this.eventsOnBatchLoad=a.eventsOnBatchLoad||!1,this.defaultPrefixes={},this.abstractQueryTree=new I.AbstractQueryTree,this.rdfLoader=new X.RDFLoader(a.communication),this.callbacksBackend=new G.CallbacksBackend(this)};B.QueryEngine.prototype.registerNsInEnvironment=function(a,c){var d=[];if(a!=null&&a.prefixes!=null)d=a.prefixes;var g={},h;for(h in this.defaultPrefixes)g[h]=this.defaultPrefixes[h];
for(h=0;h<d.length;h++){var j=d[h];if(j.token==="prefix")g[j.prefix]=j.local}c.namespaces=g;c.base=a!=null&&a.base&&typeof a.base==="object"?a.base.value:null};B.QueryEngine.prototype.applyModifier=function(a,c){if(a=="DISTINCT"){for(var d={},g=[],h=0;h<c.length;h++){var j=c[h],i="",l;for(l in j){var t=j[l];t==null?i=i+l+"null":t.token=="literal"?(t.value!=null&&(i+=t.value),t.lang!=null&&(i+=t.lang),t.type!=null&&(i+=t.type)):i=t.value?i+l+t.value:i+l+t}d[i]==null&&(g.push(j),d[i]=!0)}return g}else return c};
B.QueryEngine.prototype.applyLimitOffset=function(a,c,d){if(c==null&&a==null)return d;a==null&&(a=0);c=c==null?d.length:a+c;return d.slice(a,c)};B.QueryEngine.prototype.applySingleOrderBy=function(a,c,d,g){for(var k=[],j=0;j<a.length;j++){var i=h.collect(a[j].expression,[c],d,g,this);k.push(i[0].value)}return{binding:c,value:k}};B.QueryEngine.prototype.applyOrderBy=function(a,c,d,g){var h=this,j=[];if(a!=null&&a.length>0){for(var i=0;i<c.length;i++){var l=h.applySingleOrderBy(a,c[i],d,g);j.push(l)}j.sort(function(c,
d){return h.compareFilteredBindings(c,d,a,g)});c=[];for(i=0;i<j.length;i++)c.push(j[i].binding)}return c};B.QueryEngine.prototype.compareFilteredBindings=function(a,c,d,g){for(var k=0;;){if(k==a.value.length)return 0;var j=d[k].direction;if(a.value[k]==null&&c.value[k]==null)k++;else{if(a.value[k]==null)a={value:!1};else if(c.value[k]==null)a={value:!0};else if(a.value[k].token==="blank"&&c.value[k].token==="blank"){k++;continue}else if(a.value[k].token==="blank")a={value:!1};else if(c.value[k].token===
"blank")a={value:!0};else if(a.value[k].token==="uri"&&c.value[k].token==="uri")if(h.runEqualityFunction(a.value[k],c.value[k],[],this,g).value==!0){k++;continue}else a=h.runTotalGtFunction(a.value[k],c.value[k],[]);else if(a.value[k].token==="uri")a={value:!1};else if(c.value[k].token==="uri")a={value:!0};else if(a.value[k].token==="literal"&&c.value[k].token==="literal"&&a.value[k].type==null&&c.value[k].type==null)if(h.runEqualityFunction(a.value[k],c.value[k],[],this,g).value==!0){k++;continue}else a=
h.runTotalGtFunction(a.value[k],c.value[k],[]);else if(a.value[k].token==="literal"&&a.value[k].type==null)a={value:!1};else if(c.value[k].token==="literal"&&c.value[k].type==null)a={value:!0};else if(h.runEqualityFunction(a.value[k],c.value[k],[],this,g).value==!0){k++;continue}else a=h.runTotalGtFunction(a.value[k],c.value[k],[]);return a.value==!0?j==="ASC"?1:-1:j==="ASC"?-1:1}}};B.QueryEngine.prototype.removeDefaultGraphBindings=function(a,c){for(var d=[],g={},h=0;h<c.named.length;h++)g[c.named[h].oid]=
!0;for(h=0;h<c.implicit.length;h++)g[c.implicit[h].oid]==null&&d.push(c.implicit[h].oid);d=[];for(h=0;h<a.length;h++){var j=a[h],i=!1,l;for(l in j){for(var t=0;t<g.length;t++)if(j[l]===g[t]){i=!0;break}if(i)break}i||d.push(j)}return d};B.QueryEngine.prototype.aggregateBindings=function(a,c,d,g){for(var c=this.copyDenormalizedBindings(c,g.outCache),k={},j=0;j<a.length;j++){var i=h.runAggregator(a[j],c,this,d,g);a[j].alias?k[a[j].alias.value]=i:k[a[j].value.value]=i}return k};B.QueryEngine.prototype.projectBindings=
function(a,c,d){if(a[0].kind==="*")return c;else{for(var g=[],k=0;k<c.length;k++){for(var j=c[k],i={},l=!0,t=0;t<a.length;t++)if(a[t].token=="variable"&&a[t].kind!="aliased")i[a[t].value.value]=j[a[t].value.value];else if(a[t].token=="variable"&&a[t].kind=="aliased"){var u=h.runFilter(a[t].expression,j,this,d,{blanks:{},outCache:{}});if(h.isEbvError(u)){l=!1;break}else i[a[t].alias.value]=u}l===!0&&g.push(i)}return g}};B.QueryEngine.prototype.resolveNsInEnvironment=function(a,c){return c.namespaces[a]};
B.QueryEngine.prototype.termCost=function(a,c){if(a.token==="uri"){var d=y.lexicalFormBaseUri(a,c);return d==null?0:this.lexicon.resolveUriCost(d)}else return a.token==="literal"?this.lexicon.resolveLiteralCost(y.lexicalFormLiteral(a,c)):a.token==="blank"?this.lexicon.resolveBlankCost(a.value):a.token==="var"?this.lexicon.oidCounter/3:null};B.QueryEngine.prototype.normalizeTerm=function(a,c,d){if(a.token==="uri")return c=y.lexicalFormBaseUri(a,c),c==null?null:d?this.lexicon.registerUri(c):this.lexicon.resolveUri(c);
else if(a.token==="literal")return c=y.lexicalFormLiteral(a,c),a=d?this.lexicon.registerLiteral(c):this.lexicon.resolveLiteral(c);else if(a.token==="blank"){var g=a.value,a=c.blanks[g];a==null&&(a=d?this.lexicon.registerBlank(g):this.lexicon.resolveBlank(g),c.blanks[g]=a);return a}else return a.token==="var"?a.value:null};B.QueryEngine.prototype.normalizeDatasets=function(a,c){for(var d=0;d<a.length;d++){var g=a[d];if(g.value===this.lexicon.defaultGraphUri)g.oid=this.lexicon.defaultGraphOid;else{var h=
this.normalizeTerm(g,c,!1);if(h!=null)g.oid=h;else return null}}return!0};B.QueryEngine.prototype.normalizeQuad=function(a,c,d){var g=null,h=null,j=g=null,i;if(a.graph==null)j=0;else if(i=this.normalizeTerm(a.graph,c,d),i!=null)j=i,d===!0&&a.graph.token!="var"&&this.lexicon.registerGraph(i);else return null;i=this.normalizeTerm(a.subject,c,d);if(i!=null)g=i;else return null;i=this.normalizeTerm(a.predicate,c,d);if(i!=null)h=i;else return null;i=this.normalizeTerm(a.object,c,d);return i==null?null:
{subject:g,predicate:h,object:i,graph:j}};B.QueryEngine.prototype.quadCost=function(a,c){var d=null,g=null,h=null,j=null,j=a.graph==null?this.lexicon.oidCounter/4:this.termCost(a.graph,c),d=this.termCost(a.subject,c),g=this.termCost(a.predicate,c),h=this.termCost(a.object,c);return j+d+g+h};B.QueryEngine.prototype.denormalizeBindingsList=function(a,c){for(var d=[],g=0;g<a.length;g++){var h=this.denormalizeBindings(a[g],c);d.push(h)}return d};B.QueryEngine.prototype.copyDenormalizedBindings=function(a,
c){for(var d=[],g=0;g<a.length;g++){for(var h={},j=a[g],i=y.keys(j),l=0;l<i.length;l++){var t=j[i[l]];if(t==null)h[i[l]]=null;else if(typeof t==="object")h[i[l]]=t;else{var u=c[t];u==null&&(u=this.lexicon.retrieve(t),c[t]=u);h[i[l]]=u}}d.push(h)}return d};B.QueryEngine.prototype.denormalizeBindings=function(a,c){for(var d=y.keys(a),g=c.outCache,h=0;h<d.length;h++){var j=a[d[h]];if(j==null)a[d[h]]=null;else if(g[j]!=null)a[d[h]]=g[j];else{var i=this.lexicon.retrieve(j);a[d[h]]=i;i.token==="blank"&&
(c.blanks[i.value]=j)}}return a};B.QueryEngine.prototype.execute=function(a,c,d,g){a=y.normalizeUnicodeLiterals(a);a=this.abstractQueryTree.parseQueryString(a);if(a==null)c(!1,"Error parsing query string");else if(a.token==="query"&&a.kind=="update"){this.callbacksBackend.startGraphModification();var h=this;this.executeUpdate(a,function(a,d){h.lexicon.updateAfterWrite&&h.lexicon.updateAfterWrite();a?h.callbacksBackend.endGraphModification(function(){c(a,d)}):(h.callbacksBackend.cancelGraphModification(),
c(a,d))})}else a.token==="query"&&a.kind=="query"&&this.executeQuery(a,c,d,g)};B.QueryEngine.prototype.executeQuery=function(a,c,d,g){var h=a.units,j=this,i={blanks:{},outCache:{}};this.registerNsInEnvironment(a.prologue,i);var l=j.abstractQueryTree.parseExecutableUnit(h[0]);if(l.kind==="select")this.executeSelect(l,i,d,g,function(a,d){a?typeof d==="object"&&d.denorm===!0?c(!0,d.bindings):(d=j.denormalizeBindingsList(d,i),d!=null?c(!0,d):c(!1,d)):c(!1,d)});else if(l.kind==="ask")l.projection=[{token:"variable",
kind:"*"}],this.executeSelect(l,i,d,g,function(a,d){a?a?d.length>0?c(!0,!0):c(!0,!1):c(!1,d):c(!1,d)});else if(l.kind==="construct")l.projection=[{token:"variable",kind:"*"}],j=this,this.executeSelect(l,i,d,g,function(a,d){if(a)if(a)if(d=j.denormalizeBindingsList(d,i),d!=null){var g=new w.Graph;if(l.template==null)l.template={triplesContext:l.pattern};for(var h=1,k=[],y=0;y<d.length;y++){for(var C=d[y],F=0;F<k.length;F++)delete k[F].valuetmp;for(F=0;F<l.template.triplesContext.length;F++){for(var E=
["subject","predicate","object"],B=l.template.triplesContext[F],G=0;G<E.length;G++){var H=E[G];if(B[H].token==="blank"&&!(B[H].valuetmp&&B[H].valuetmp!=null)){var I="_:b"+h;h++;B[H].valuetmp=I;k.push(B[H])}}E=w.buildRDFResource(B.subject,C,j,i);G=w.buildRDFResource(B.predicate,C,j,i);B=w.buildRDFResource(B.object,C,j,i);E!=null&&G!=null&&B!=null&&(G=new w.Triple(E,G,B),g.add(G))}}c(!0,g)}else c(!1,d);else c(!1,d);else c(!1,d)})};B.QueryEngine.prototype.executeSelect=function(a,c,d,g,h){if(a.kind===
"select"||a.kind==="ask"||a.kind==="construct"||a.kind==="modify"){var j=a.projection,i=a.dataset,l=a.modifier,t=a.limit,u=a.offset,q=a.order;if(d!=null||g!=null)i.implicit=d||[],i.named=g||[];i.implicit!=null&&i.implicit.length===0&&i.named!=null&&i.named.length===0&&i.implicit.push(this.lexicon.defaultGraphUriTerm);if(this.normalizeDatasets(i.implicit.concat(i.named),c)!=null)if(g=this.executeSelectUnit(j,i,a.pattern,c),g!=null){if(a.group!=null&&a.group===""){for(var y=!1,d=0;d<a.projection.length;d++)if(a.projection[d].expression!=
null&&a.projection[d].expression.expressionType==="aggregate"){y=!0;break}if(y===!0)a.group="singleGroup"}if(a.group&&a.group!="")if(this.checkGroupSemantics(a.group,j)){t=this.groupSolution(g,a.group,i,c);u=[];for(d=0;d<t.length;d++)l=this.aggregateBindings(j,t[d],i,c),u.push(l);h(!0,{bindings:u,denorm:!0})}else h(!1,"Incompatible Group and Projection variables");else c=this.applyOrderBy(q,g,i,c),j=this.projectBindings(j,c,i),j=this.applyModifier(l,j),i=this.removeDefaultGraphBindings(this.applyLimitOffset(u,
t,j),i),h(!0,i)}else h(!1,g);else h(!1,"Error normalizing datasets")}else h(!1,"Cannot execute "+a.kind+" query as a select query")};B.QueryEngine.prototype.groupSolution=function(a,c,d,g){var k=[],j=[],i=!1;if(c==="singleGroup")return[a];else{for(var l=0;l<a.length;l++){for(var t=a[l],u=!0,q=0;q<c.length;q++){var y=c[q],w=null;if(y.token==="var")w=y.value,i==!1&&k.push(w);else if(y.token==="aliased_expression")if(w=y.alias.value,i==!1&&k.push(w),y.expression.primaryexpression==="var")t[y.alias.value]=
t[y.expression.value.value];else if(w=this.copyDenormalizedBindings([t],g.outCache),w=h.runFilter(y.expression,w[0],this,d,g),h.isEbvError(w))u=!1;else{if(w.value!=null)w.value=""+w.value;t[y.alias.value]=w}else w=this.copyDenormalizedBindings([t],g.outCache),w=h.runFilter(y,w[0],this,g),h.isEbvError(w)?u=!1:(t["groupCondition"+env._i]=w,w="groupCondition"+env._i,i==!1&&k.push(w))}i==!1&&(i=!0);u===!0&&j.push(t)}a={};for(l=0;l<j.length;l++){c=j[l];d="";for(q=0;q<k.length;q++)g=c[k[q]],d+=typeof g===
"object"?g.value:g;a[d]==null?a[d]=[c]:a[d].push(c)}var k=[],A;for(A in a)k.push(a[A]);return k}};B.QueryEngine.prototype.executeSelectUnit=function(a,c,d,g){return d.kind==="BGP"?this.executeAndBGP(a,c,d,g):d.kind==="UNION"?this.executeUNION(a,c,d.value,g):d.kind==="JOIN"?this.executeJOIN(a,c,d,g):d.kind==="LEFT_JOIN"?this.executeLEFT_JOIN(a,c,d,g):d.kind==="FILTER"?(a=this.executeSelectUnit(a,c,d.value,g),a!=null?a=h.checkFilters(d,a,!1,c,g,this):[]):d.kind==="EMPTY_PATTERN"?[]:d.kind==="ZERO_OR_MORE_PATH"||
d.kind==="ONE_OR_MORE_PATH"?this.executeZeroOrMorePath(d,c,g):(console.log("Cannot execute query pattern "+d.kind+". Not implemented yet."),null)};B.QueryEngine.prototype.executeZeroOrMorePath=function(a,c,d){var g=[];a.x.token==="var"&&g.push({token:"variable",kind:"var",value:a.x.value});a.y.token==="var"&&g.push({token:"variable",kind:"var",value:a.y.value});g.length===0&&g.push({token:"variable",kind:"*"});if(a.x.token==="var"&&a.y.token==="var"){var h=this.executeAndBGP(g,c,a.path,d),j={},g=
[],i,l,t,u,q=a.x.value;l=a.x;for(var w=a.path,D=0;D<h.length;D++)if(i=h[D][q],j[i]==null){u=this.lexicon.retrieve(i);a.x=u;a.path=this.abstractQueryTree.replace(w,l,u,d);w=y.clone(a.path);l=this.executeZeroOrMorePath(a,c,d);for(var A=0;A<l.length;A++)t=l[A],t[q]=i,g.push(t);l=u}return g}else if(a.x.token!=="var"&&a.y.token==="var"){j={};i=!0;u=[];for(q=[];i==!0||u.length!==0;){i===!0?(h=this.executeAndBGP(g,c,a.path,d),l=a.x,i=!1):(w=this.lexicon.retrieve(u.pop()),h=a.path,h=this.abstractQueryTree.replace(h,
l,w,d),h=this.executeAndBGP(g,c,h,d),l=w);for(D=0;D<h.length;D++)w=h[D][a.y.value],j[w]!==!0&&(t={},t[a.y.value]=w,q.push(t),j[w]=!0,u.push(w))}return q}else throw"Kind of path not supported!";};B.QueryEngine.prototype.executeUNION=function(a,c,d,g){var k=d[0],j=d[1],i=null,l=null;if(d.length!=2)throw"SPARQL algebra UNION with more than two components";i=this.executeSelectUnit(a,c,k,g);if(i==null)return null;l=this.executeSelectUnit(a,c,j,g);if(l==null)return null;a=da.unionBindings(i,l);return a=
h.checkFilters(d,a,!1,c,g,this)};B.QueryEngine.prototype.executeAndBGP=function(a,c,d,g){a=da.executeAndBGPsDPSize(d.value,c,this,g);return a!=null?h.checkFilters(d,a,!1,c,g,this):null};B.QueryEngine.prototype.executeLEFT_JOIN=function(a,c,d,g){var k=d.rvalue,j=null,i=null,j=this.executeSelectUnit(a,c,d.lvalue,g);if(j==null)return null;i=this.executeSelectUnit(a,c,k,g);if(i==null)return null;a=da.leftOuterJoinBindings(j,i);c=h.checkFilters(d,a,!0,c,g,this);if(j.length>1&&i.length>1){var d=[],g={},
l;for(l in j[0])g[l]=!0;for(l in i[0])g[l]!=!0&&d.push(l);j=[];i={};for(g=0;g<c.length;g++)if(c[g].__nullify__===!0){for(k=0;k<d.length;k++)c[g].bindings[d[k]]=null;k=[];a=[];for(l in c[g].bindings)c[g].bindings[l]!=null&&(k.push(l+c[g].bindings[l]),k.sort(),a.push(k.join("")));if(i[k.join("")]==null){for(k=0;k<a.length;k++)i[a[k]]=!0;j.push(c[g].bindings)}}else for(l in j.push(c[g]),k=[],c[g])k.push(l+c[g][l]),k.sort(),i[k.join("")]=!0;return j}else return c};B.QueryEngine.prototype.executeJOIN=
function(a,c,d,g){var k=d.lvalue,j=d.rvalue,i=null,l=null,i=this.executeSelectUnit(a,c,k,g);if(i==null)return null;l=this.executeSelectUnit(a,c,j,g);if(l==null)return null;a=null;if(i.length===0||l.length===0)a=[];else{var a={},t=[],u;for(u in i[0])a[u]=!1;for(u in l[0])a[u]===!1&&t.push(u);a=t.length==0?da.joinBindings(i,l):this.abstractQueryTree.treeWithUnion(k)||this.abstractQueryTree.treeWithUnion(j)?da.joinBindings(i,l):da.joinBindings2(t,i,l)}return a=h.checkFilters(d,a,!1,c,g,this)};B.QueryEngine.prototype.rangeQuery=
function(a,c){var d=this.normalizeQuad(a,c,!1);return d!=null?(d=this.backend.range(new R.Pattern(d)),d==null||d.length==0?[]:d):(console.log("ERROR normalizing quad"),null)};B.QueryEngine.prototype.executeUpdate=function(a,c){var d=a.units,g=this,h={blanks:{},outCache:{}};this.registerNsInEnvironment(a.prologue,h);for(var j=0;j<d.length;j++){var i=g.abstractQueryTree.parseExecutableUnit(d[j]);if(i.kind==="insertdata"){for(var l=0;l<i.quads.length;l++){var t=i.quads[l];if(g._executeQuadInsert(t,h)!==
!0)return c(!1,error)}c(!0)}else if(i.kind==="deletedata"){for(l=0;l<i.quads.length;l++)t=i.quads[l],this._executeQuadDelete(t,h);c(!0)}else if(i.kind==="modify")this._executeModifyQuery(i,h,c);else if(i.kind==="create")c(!0);else if(i.kind==="load")l={uri:y.lexicalFormBaseUri(i.sourceGraph,h)},i.destinyGraph!=null&&(l={uri:y.lexicalFormBaseUri(i.destinyGraph,h)}),g=this,this.rdfLoader.load(i.sourceGraph.value,l,function(a,d){a==!1?(console.log("Error loading graph"),console.log(d),c(!1,"error batch loading quads")):
(d=g.batchLoad(d),c(d!=null,d||"error batch loading quads"))});else if(i.kind==="drop")this._executeClearGraph(i.destinyGraph,h,c);else if(i.kind==="clear")this._executeClearGraph(i.destinyGraph,h,c);else throw Error("not supported execution unit");}};B.QueryEngine.prototype.batchLoad=function(a,c){var d=null,g=null,h=null,j=null,i=0,l=!0,t={},u,q;this.eventsOnBatchLoad&&this.callbacksBackend.startGraphModification();for(var w=0;w<a.length;w++){q=a[w];if(q.subject.uri||q.subject.token==="uri"){if(u=
this.lexicon.registerUri(q.subject.uri||q.subject.value),q.subject.uri!=null)q.subject={token:"uri",value:q.subject.uri},delete q.subject.uri}else if(q.subject.literal||q.subject.token==="literal"){if(u=this.lexicon.registerLiteral(q.subject.literal||q.subject.value),q.subject.literal!=null)q.subject=this.lexicon.parseLiteral(q.subject.literal),delete q.subject.literal}else if(u=t[q.subject.blank||q.subject.value],u==null&&(u=this.lexicon.registerBlank(q.subject.blank||q.subject.value),t[q.subject.blank||
q.subject.value]=u),q.subject.token==null)q.subject.token="blank",q.subject.value=q.subject.blank,delete q.subject.blank;d=u;if(q.predicate.uri||q.predicate.token==="uri"){if(u=this.lexicon.registerUri(q.predicate.uri||q.predicate.value),q.predicate.uri!=null)q.predicate={token:"uri",value:q.predicate.uri},delete q.subject.uri}else if(q.predicate.literal||q.predicate.token==="literal"){if(u=this.lexicon.registerLiteral(q.predicate.literal||q.predicate.value),q.predicate.literal!=null)q.predicate=
this.lexicon.parseLiteral(q.predicate.literal),delete q.predicate.literal}else if(u=t[q.predicate.blank||q.predicate.value],u==null&&(u=this.lexicon.registerBlank(q.predicate.blank||q.predicate.value),t[q.predicate.blank||q.predicate.value]=u),q.predicate.token==null)q.predicate.token="blank",q.predicate.value=q.predicate.blank,delete q.predicate.blank;g=u;if(q.object.uri||q.object.token==="uri"){if(u=this.lexicon.registerUri(q.object.uri||q.object.value),q.object.uri!=null)q.object={token:"uri",
value:q.object.uri},delete q.subject.uri}else if(q.object.literal||q.object.token==="literal"){if(u=this.lexicon.registerLiteral(q.object.literal||q.object.value),q.object.literal!=null)q.object=this.lexicon.parseLiteral(q.object.literal),delete q.object.literal}else if(u=t[q.object.blank||q.object.value],u==null&&(u=this.lexicon.registerBlank(q.object.blank||q.object.value),t[q.object.blank||q.object.value]=u),q.object.token==null)q.object.token="blank",q.object.value=q.object.blank,delete q.object.blank;
h=u;if(q.graph.uri||q.graph.token==="uri"){u=this.lexicon.registerUri(q.graph.uri||q.graph.value);if(q.graph.uri!=null)q.graph={token:"uri",value:q.graph.uri},delete q.subject.uri;this.lexicon.registerGraph(u)}else if(q.graph.literal||q.graph.token==="literal"){if(u=this.lexicon.registerLiteral(q.graph.literal||q.graph.value),q.predicate.literal!=null)q.predicate=this.lexicon.parseLiteral(q.predicate.literal),delete q.predicate.literal}else if(u=t[q.graph.blank||q.graph.value],u==null&&(u=this.lexicon.registerBlank(q.graph.blank||
q.graph.value),t[q.graph.blank||q.graph.value]=u),q.graph.token==null)q.graph.token="blank",q.graph.value=q.graph.blank,delete q.graph.blank;j=u;u=q;q={subject:d,predicate:g,object:h,graph:j};d=new R.NodeKey(q);g=this.backend.search(d);if(!g)if(g=this.backend.index(d),g==!0)this.eventsOnBatchLoad&&this.callbacksBackend.nextGraphModification(G.added,[u,q]),i+=1;else{l=!1;break}}this.lexicon.updateAfterWrite!=null&&this.lexicon.updateAfterWrite();var y=function(){l?c&&c(!0,i):c&&c(!1,null)};this.eventsOnBatchLoad?
this.callbacksBackend.endGraphModification(function(){y()}):y();return l?i:null};B.QueryEngine.prototype.computeCosts=function(a,c){for(var d=0;d<a.length;d++)a[d]._cost=this.quadCost(a[d],c);return a};B.QueryEngine.prototype._executeModifyQuery=function(a,c,d){var g=this,h=!0,j=null,i=["subject","predicate","object","graph"];a.insert=a.insert==null?[]:a.insert;a["delete"]=a["delete"]==null?[]:a["delete"];y.seq(function(d){var i=[],u=[];a["with"]!=null&&i.push(a["with"]);if(a.using!=null)for(var u=
[],q=0;q<a.using.length;q++){var w=a.using[q];w.kind==="named"?u.push(w.uri):i.push(w.uri)}a.dataset={};a.projection=[{token:"variable",kind:"*"}];g.executeSelect(a,c,i,u,function(a,i){a?(i=g.denormalizeBindingsList(i,c),i!=null?j=i:h=!1):h=!1;return d()})},function(d){var t=a["with"];if(h){for(var u=[],q=0;q<a["delete"].length;q++)for(var w=a["delete"][q],y=0;y<j.length;y++){for(var A={},B=j[y],F=0;F<i.length;F++){var C=i[F];C=="graph"&&w[C]==null?A.graph=t:A[C]=w[C].token==="var"?B[w[C].value]:
w[C]}u.push(A)}for(y=0;y<u.length;y++)A=u[y],g._executeQuadDelete(A,c)}d()},function(d){var t=a["with"];if(h){for(var u=[],q=0;q<a.insert.length;q++)for(var w=a.insert[q],y=0;y<j.length;y++){for(var A={},C=j[y],F=0;F<i.length;F++){var B=i[F];B=="graph"&&w[B]==null?A.graph=t:A[B]=w[B].token==="var"?C[w[B].value]:w[B]}u.push(A)}for(q=0;q<u.length;q++)A=u[q],g._executeQuadInsert(A,c)}d()})(function(){d(h)})};B.QueryEngine.prototype._executeQuadInsert=function(a,c){var d=this.normalizeQuad(a,c,!0);if(d!=
null){var g=new R.NodeKey(d),h=this.backend.search(g);return h?h:(h=this.backend.index(g),h==!0?(this.callbacksBackend.nextGraphModification(G.added,[a,d]),!0):(console.log("ERROR inserting quad"),!1))}else return console.log("ERROR normalizing quad"),!1};B.QueryEngine.prototype._executeQuadDelete=function(a,c){var d=this.normalizeQuad(a,c,!1);if(d!=null){var g=new R.NodeKey(d);this.backend["delete"](g);return this.lexicon.unregister(a,g)==!0?(this.callbacksBackend.nextGraphModification(G.deleted,
[a,d]),!0):(console.log("ERROR unregistering quad"),!1)}else return console.log("ERROR normalizing quad"),!1};B.QueryEngine.prototype._executeClearGraph=function(a,c,d){if(a==="default")this.execute("DELETE { ?s ?p ?o } WHERE { ?s ?p ?o }",d);else if(a==="named"){var g=this,h=this.lexicon.registeredGraphs(!0);if(h!=null){var j=!1;y.repeat(0,h.length,function(a,c){var d=h[c._i],u=arguments.callee;j?a(u,c):g.execute("DELETE { GRAPH <"+d+"> { ?s ?p ?o } } WHERE { GRAPH <"+d+"> { ?s ?p ?o } }",function(d){j=
!d;a(u,c)})},function(){d(!j)})}else d(!1,"Error deleting named graphs")}else a==="all"?(g=this,this.execute("CLEAR DEFAULT",function(a,c){a?g.execute("CLEAR NAMED",d):d(!1,c)})):a.token=="uri"?(a=y.lexicalFormBaseUri(a,c),a!=null?this.execute("DELETE { GRAPH <"+a+"> { ?s ?p ?o } } WHERE { GRAPH <"+a+"> { ?s ?p ?o } }",d):d(!1,"wrong graph URI")):d(!1,"wrong graph URI")};B.QueryEngine.prototype.checkGroupSemantics=function(a,c){if(a==="singleGroup")return!0;for(var d={},g=0;g<a.length;g++){var h=
a[g];h.token==="var"?d[h.value]=!0:h.token==="aliased_expression"&&(d[h.alias.value]=!0)}for(g=0;g<c.length;g++)if(h=c[g],h.kind==="var"){if(d[h.value.value]==null)return!1}else if(h.kind==="aliased"&&h.expression&&h.expression.primaryexpression==="var"&&d[h.expression.value.value]==null)return!1;return!0};B.QueryEngine.prototype.registerDefaultNamespace=function(a,c){this.defaultPrefixes[a]=c};var G={ANYTHING:{token:"var",value:"_"},added:"added",deleted:"deleted",eventsFlushed:"eventsFlushed",CallbacksBackend:function(a){this.aqt=
new I.AbstractQueryTree;this.engine=a;this.indexMap={};this.observersMap={};this.queriesIndexMap={};this.emptyNotificationsMap={};this.queriesList=[];this.pendingQueries=[];this.matchedQueries=[];this.updateInProgress=null;this.indices=["SPOG","GP","OGS","POG","GSP","OS"];this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate",
"object"],OS:["object","subject","predicate","graph"]};this.callbackCounter=0;this.callbacksMap={};this.callbacksInverseMap={};this.queryCounter=0;this.queriesMap={};this.queriesCallbacksMap={};this.queriesInverseMap={};for(a=0;a<this.indices.length;a++){var c=this.indices[a];this.indexMap[c]={};this.queriesIndexMap[c]={}}}};G.CallbacksBackend.prototype.startGraphModification=function(){this.pendingQueries=[].concat(this.queriesList);this.matchedQueries=[];if(this.updateInProgress==null)this.updateInProgress=
{added:[],deleted:[]}};G.CallbacksBackend.prototype.nextGraphModification=function(a,c){this.updateInProgress[a].push(c)};G.CallbacksBackend.prototype.endGraphModification=function(a){var c=this;if(this.updateInProgress!=null){var d=c.updateInProgress;c.updateInProgress=null;this.sendNotification(G.deleted,d[G.deleted],function(){c.sendNotification(G.added,d[G.added],function(){c.sendEmptyNotification(G.eventsFlushed,null,function(){c.dispatchQueries(function(){a(!0)})})})})}else a(!0)};G.CallbacksBackend.prototype.cancelGraphModification=
function(){this.updateInProgress=null};G.CallbacksBackend.prototype.sendNotification=function(a,c,d){for(var g={},h=0;h<c.length;h++){var j=c[h],i;for(i in this.indexMap){var l=this.indexMap[i],t=this.componentOrders[i];this._searchCallbacksInIndex(l,t,a,j,g);this.pendingQueries.length!=0&&(l=this.queriesIndexMap[i],this._searchQueriesInIndex(l,t,j))}}this.dispatchNotifications(g);d!=null&&d(!0)};G.CallbacksBackend.prototype.sendEmptyNotification=function(a,c,d){for(var g=this.emptyNotificationsMap[a]||
[],h=0;h<g.length;h++)g[h](a,c);d()};G.CallbacksBackend.prototype.dispatchNotifications=function(a){for(var c in a){var d=this.callbacksMap[c],g=a[c][G.deleted];if(g!=null)try{d(G.deleted,g)}catch(h){}for(var j in a[c])if(j!=G.deleted)try{d(j,a[c][j])}catch(i){}}};G.CallbacksBackend.prototype._searchCallbacksInIndex=function(a,c,d,g,h){for(var j=g[1],g=g[0],i=0;i<c.length+1;i++){for(var l=a._||[],t=[],u=0;u<l.length;u++){var q=l[u];this.callbacksMap[q]!=null&&(h[q]=h[q]||{},h[q][d]=h[q][d]||[],h[q][d].push(g),
t.push(q))}a._=t;l=c[i];if(a[""+j[l]]!=null)a=a[""+j[l]];else break}};G.CallbacksBackend.prototype.subscribeEmpty=function(a,c){var d=this.emptyNotificationsMap[a]||[];d.push(c);this.emptyNotificationsMap[a]=d};G.CallbacksBackend.prototype.unsubscribeEmpty=function(a,c){var d=this.emptyNotificationsMap[a];d!=null&&(d=y.remove(d,c));this.emptyNotificationsMap[a]=d};G.CallbacksBackend.prototype.subscribe=function(a,c,d,g,h,j){a=this._tokenizeComponents(a,c,d,g);c={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,
c);a=this.engine.normalizeQuad(a,c,!0);d=this._indexForPattern(new R.Pattern(a));c=this.componentOrders[d];d=this.indexMap[d];for(g=0;g<c.length;g++){var i=a[c[g]];if(i==="_"){d._==null&&(d._=[]);this.callbackCounter++;d._.push(this.callbackCounter);this.callbacksMap[this.callbackCounter]=h;this.callbacksInverseMap[h]=this.callbackCounter;break}else g===c.length-1?(d[i]=d[i]||{_:[]},this.callbackCounter++,d[i]._.push(this.callbackCounter),this.callbacksMap[this.callbackCounter]=h,this.callbacksInverseMap[h]=
this.callbackCounter):(d[i]=d[i]||{},d=d[i])}j!=null&&j(!0)};G.CallbacksBackend.prototype.unsubscribe=function(a){var c=this.callbacksInverseMap[a];c!=null&&(delete this.callbacksInverseMap[a],delete this.callbacksMap[c])};G.CallbacksBackend.prototype._tokenizeComponents=function(a,c,d,g){var h={};h.subject=a==null?G.ANYTHING:a.indexOf("_:")==0?{token:"blank",value:a}:{token:"uri",value:a};h.predicate=c==null?G.ANYTHING:{token:"uri",value:c};h.object=d==null?G.ANYTHING:{token:"uri",value:d};h.graph=
g==null?G.ANYTHING:{token:"uri",value:g};return h};G.CallbacksBackend.prototype._indexForPattern=function(a){for(var a=a.indexKey,c=this.indices,d=0;d<c.length;d++)for(var g=c[d],h=this.componentOrders[g],j=0;j<h.length;j++){if(y.include(a,h[j])===!1)break;if(j==a.length-1)return g}return"SPOG"};G.CallbacksBackend.prototype.observeNode=function(){var a,c,d,g;arguments.length===4?(a=arguments[0],c=arguments[1],d=arguments[2],g=arguments[3]):(a=arguments[0],c=this.engine.lexicon.defaultGraphUri,d=arguments[1],
g=arguments[2]);c="CONSTRUCT { <"+a+"> ?p ?o } WHERE { GRAPH <"+c+"> { <"+a+"> ?p ?o } }";var h=this,j={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,j);var i=[];this.engine.execute(c,function(c,t){if(c){var u=!1,q=function(a,c){if(a==="eventsFlushed"&&u){u=!1;try{d(t)}catch(g){}}else if(a!=="eventsFlushed"){u=!0;for(var l=0;l<c.length;l++){var q=c[l],y=w.buildRDFResource(q.subject,i,h.engine,j),B=w.buildRDFResource(q.predicate,i,h.engine,j),q=w.buildRDFResource(q.object,i,h.engine,
j);y!=null&&B!=null&&q!=null&&(q=new w.Triple(y,B,q),a===G.added?t.add(q):a===G.deleted&&t.remove(q))}}};h.observersMap[d]=q;h.subscribeEmpty(G.eventsFlushed,q);h.subscribe(a,null,null,null,q,function(){try{d(t)}catch(a){}g&&g(!0)})}else g&&g(!1)})};G.CallbacksBackend.prototype.stopObservingNode=function(a){return(a=this.observersMap[a])?(this.unsubscribe(a),this.unsubscribeEmpty(G.eventsFlushed,a),!0):!1};G.CallbacksBackend.prototype.observeQuery=function(a,c,d){var g=this.aqt.collectBasicTriples(this.aqt.parseSelect(this.aqt.parseQueryString(a).units[0])),
h={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,h);var j,i,l,t=this.queryCounter;this.queryCounter++;this.queriesMap[t]=a;this.queriesInverseMap[a]=t;this.queriesList.push(t);this.queriesCallbacksMap[t]=c;for(var u=0;u<g.length;u++){i=g[u];if(i.graph==null)i.graph=this.engine.lexicon.defaultGraphUriTerm;i=this.engine.normalizeQuad(i,h,!0);j=new R.Pattern(i);l=this._indexForPattern(j);j=this.componentOrders[l];l=this.queriesIndexMap[l];for(var q=0;q<j.length;q++){var w=i[j[q]];if(typeof w===
"string"){l._==null&&(l._=[]);l._.push(t);break}else q===j.length-1?(l[w]=l[w]||{_:[]},l[w]._.push(t)):(l[w]=l[w]||{},l=l[w])}}this.engine.execute(a,function(a,d){a?c(d):console.log("ERROR in query callback "+d)});d!=null&&d()};G.CallbacksBackend.prototype.stopObservingQuery=function(a){var c=this.queriesInverseMap[a];if(c!=null)delete this.queriesInverseMap[a],delete this.queriesMap[c],this.queriesList=y.remove(this.queriesList,c)};G.CallbacksBackend.prototype._searchQueriesInIndex=function(a,c,
d){for(var d=d[1],g=0;g<c.length+1;g++){for(var h=a._||[],j=[],i=0;i<h.length;i++){var l=h[i];y.include(this.pendingQueries,l)&&(y.remove(this.pendingQueries,l),this.matchedQueries.push(l));this.queriesMap[l]!=null&&j.push(l)}a._=j;h=c[g];if(a[""+d[h]]!=null)a=a[""+d[h]];else break}};G.CallbacksBackend.prototype.dispatchQueries=function(a){var c=this,d,g,h,j;y.repeat(0,this.matchedQueries.length,function(a,l){d=arguments.callee;h=c.matchedQueries[l._i];g=c.queriesMap[h];j=c.queriesCallbacksMap[h];
y.recur(function(){c.engine.execute(g,function(c,g){if(c)try{j(g)}catch(h){}else console.log("ERROR executing query callback "+g);a(d,l)})})},function(){a()})};var K={};try{typeof Worker=="undefined"&&(Worker=null)}catch(uc){Worker=null}if(Worker)K.RDFStoreClient=function(a,c,d){console.log("trying to load "+a);this.connection=Worker.Worker?new Worker.Worker(a):new Worker(a);this.callbacksCounter=1;var g=this;this.rdf=w.rdf;console.log("The worker");console.log(this.connection);g=this;this.connection.onmessage=
function(a){g.receive(a)};this.observingCallbacks={};this.callbacks={0:{cb:function(a,c){a===!0?d(!0,g):d(!1,c)},fn:"create"}};this.connection.postMessage({fn:"create",args:c,callback:"0"})},K.RDFStoreClient.prototype.receive=function(a){a=a.data||a;if(a.fn==="workerRequest:NetworkTransport:load"){var c=this,d=a.callback,a=a.arguments.concat(function(a,g){c.connection.postMessage({fn:"workerRequestResponse",results:[a,g],callback:d})});N.load.apply(N,a)}else{var g=this.callbacks[a.callback];g&&(g.fn===
"create"||g.fn==="execute"||g.fn==="insert"||g.fn=="graph"||g.fn==="node"||g.fn==="insert"||g.fn==="delete"||g.fn==="clear"||g.fn==="load"||g.fn==="startObservingQueryEndCb"||g.fn==="registeredGraphs"?(delete this.callbacks[a.callback],g.cb(a.success,a.result)):g.fn==="startObservingQuery"?g.cb(a.result):g.fn==="startObservingNode"?g.cb(a.result):g.fn==="subscribe"&&g.cb(a.event,a.result))}},K.RDFStoreClient.prototype.registerCallback=function(a,c){var d=""+this.callbacksCounter;this.callbacks[d]=
{fn:a,cb:c};this.callbacksCounter++;return d},K.RDFStoreClient.prototype.execute=function(){if(arguments.length===3)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2]);else if(arguments.length===4)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2],arguments[3]);else{var a,c;arguments.length===1?(a=arguments[0],c=function(){}):arguments.length===2&&(a=arguments[0],c=arguments[1]);c=this.registerCallback("execute",c);this.connection.postMessage({fn:"execute",args:[a],
callback:c})}},K.RDFStoreClient.prototype.insert=function(){var a,c,d;if(arguments.length===1)c=arguments[0],this.connection.postMessage({fn:"insert",args:[c]});else if(arguments.length===2)c=arguments[0],d=arguments[1]||function(){},d=this.registerCallback("insert",d),this.connection.postMessage({fn:"insert",args:[c],callback:d});else if(arguments.length===3)c=arguments[0],a=arguments[1],d=arguments[2]||function(){},d=this.registerCallback("insert",d),this.connection.postMessage({fn:"insert",args:[c,
a],callback:d});else throw"The triples to insert, an optional graph and callback must be provided";},K.RDFStoreClient.prototype.graph=function(){var a=null,c=null;if(arguments.length===1)c=arguments[0]||function(){};else if(arguments.length===2)c=arguments[1]||function(){},a=arguments[0];else throw"An optional graph URI and a callback function must be provided";var d=this,g=this.registerCallback("insert",function(a,g){if(a){for(var h,l=0;l<g.triples.length;l++)h=g.triples[l],g.triples[l]=new w.Triple(d.adaptJSInterface(h.subject),
d.adaptJSInterface(h.predicate),d.adaptJSInterface(h.object));c(a,d.rdf.createGraph(g.triples))}else c(a,g)});a==null?this.connection.postMessage({fn:"graph",args:[],callback:g}):this.connection.postMessage({fn:"graph",args:[a],callback:g})},K.RDFStoreClient.prototype.node=function(){var a=null,c=null,d=null;if(arguments.length===2)d=arguments[0],c=arguments[1]||function(){};else if(arguments.length===3)d=arguments[0],a=arguments[1],c=arguments[2]||function(){};else throw"An optional graph URI and a callback function must be provided";
var g=this,h=this.registerCallback("insert",function(a,d){if(a){for(var h,k=0;k<d.triples.length;k++)h=d.triples[k],d.triples[k]=new w.Triple(g.adaptJSInterface(h.subject),g.adaptJSInterface(h.predicate),g.adaptJSInterface(h.object));c(a,g.rdf.createGraph(d.triples))}else c(a,d)});a==null?this.connection.postMessage({fn:"node",args:[d],callback:h}):this.connection.postMessage({fn:"node",args:[d,a],callback:h})},K.RDFStoreClient.prototype.setPrefix=function(a,c){this.rdf.setPrefix(a,c);this.connection.postMessage({fn:"rdf/setPrefix",
args:[a,c],callback:null})},K.RDFStoreClient.prototype.setDefaultPrefix=function(a){this.rdf.setDefaultPrefix(a);this.connection.postMessage({fn:"rdf/setDefaultPrefix",args:[a],callback:null})},K.RDFStoreClient.prototype["delete"]=function(){var a,c,d;if(arguments.length===1)c=arguments[0],this.connection.postMessage({fn:"delete",args:[c]});else if(arguments.length===2)c=arguments[0],d=arguments[1]||function(){},d=this.registerCallback("delete",d),this.connection.postMessage({fn:"delete",args:[c],
callback:d});else if(arguments.length===3)c=arguments[0],a=arguments[1],d=arguments[2]||function(){},d=this.registerCallback("delete",d),this.connection.postMessage({fn:"delete",args:[c,a],callback:d});else throw"The triples to delete, an optional graph and callback must be provided";},K.RDFStoreClient.prototype.clear=function(){var a,c;if(arguments.length===1)c=arguments[0]||function(){},c=this.registerCallback("clear",c),this.connection.postMessage({fn:"clear",args:[],callback:c});else if(arguments.length===
2)a=arguments[0],c=arguments[1]||function(){},c=this.registerCallback("clear",c),this.connection.postMessage({fn:"clear",args:[a],callback:c});else throw"The optional graph and a callback must be provided";},K.RDFStoreClient.prototype.setBatchLoadEvents=function(a){this.connection.postMessage({fn:"setBatchLoadEvents",args:[a]})},K.RDFStoreClient.prototype.registerDefaultNamespace=function(a,c){this.connection.postMessage({fn:"registerDefaultNamespace",args:[a,c]})},K.RDFStoreClient.prototype.registerDefaultProfileNamespaces=
function(){this.connection.postMessage({fn:"registerDefaultProfileNamespaces",args:[]})},K.RDFStoreClient.prototype.load=function(){var a,c,d,g;if(arguments.length===3)a=arguments[0],c=arguments[1],g=arguments[2]||function(){},g=this.registerCallback("load",g),this.connection.postMessage({fn:"load",args:[a,c],callback:g});else if(arguments.length===4)a=arguments[0],c=arguments[1],d=arguments[2],g=arguments[3]||function(){},g=this.registerCallback("load",g),this.connection.postMessage({fn:"load",args:[a,
c,d],callback:g});else if(arguments.length===2)throw"The mediaType of the parser, the data a callback and an optional graph must be provided";},K.RDFStoreClient.prototype.startObservingQuery=function(a,c,d){d!=null?(c=this.registerCallback("startObservingQuery",c),this.observingCallbacks[a]=c,d=this.registerCallback("startObservingQueryEndCb",d),this.connection.postMessage({fn:"startObservingQuery",args:[a],callback:[c,d]})):(c=this.registerCallback("startObservingQuery",c),this.observingCallbacks[a]=
c,this.connection.postMessage({fn:"startObservingQuery",args:[a],callback:[c]}))},K.RDFStoreClient.prototype.stopObservingQuery=function(a){var c=this.observingCallbacks[a];delete this.observingCallbacks[a];delete this.callbacks[c];this.connection.postMessage({fn:"stopObservingQuery",args:[a],callback:[]})},K.RDFStoreClient.prototype.startObservingNode=function(){var a,c,d;if(arguments.length===2){a=arguments[0];d=arguments[1];var g=this,h=this.registerCallback("startObservingNode",function(a){for(var c,
h=0;h<a.triples.length;h++)c=a.triples[h],a.triples[h]=new w.Triple(g.adaptJSInterface(c.subject),g.adaptJSInterface(c.predicate),g.adaptJSInterface(c.object));d(g.rdf.createGraph(a.triples))});this.observingCallbacks[d]=h;this.connection.postMessage({fn:"startObservingNode",args:[a],callback:h})}else arguments.length===3&&(a=arguments[0],c=arguments[1],d=arguments[2],g=this,h=this.registerCallback("startObservingNode",function(a){for(var c,h=0;h<a.triples.length;h++)c=a.triples[h],a.triples[h]=new w.Triple(g.adaptJSInterface(c.subject),
g.adaptJSInterface(c.predicate),g.adaptJSInterface(c.object));d(g.rdf.createGraph(a.triples))}),this.observingCallbacks[d]=h,this.connection.postMessage({fn:"startObservingNode",args:[a,c],callback:h}))},K.RDFStoreClient.prototype.stopObservingNode=function(a){var c=this.observingCallbacks[a];delete this.observingCallbacks[a];delete this.callbacks[c];this.connection.postMessage({fn:"stopObservingNode",args:[c],callback:[]})},K.RDFStoreClient.prototype.subscribe=function(a,c,d,g,h){var j=this,i=this.registerCallback("subscribe",
function(a,c){for(var d,g=0;g<c.length;g++)d=c[g],c[g]=new w.Triple(j.adaptJSInterface(d.subject),j.adaptJSInterface(d.predicate),j.adaptJSInterface(d.object));h(a,c)});this.observingCallbacks[h]=i;this.connection.postMessage({fn:"subscribe",args:[a,c,d,g],callback:i})},K.RDFStoreClient.prototype.unsubscribe=function(a){var c=this.observingCallbacks[a];delete this.observingCallbacks[a];delete this.callbacks[c];this.connection.postMessage({fn:"unsubscribe",args:[c],callback:[]})},K.RDFStoreClient.prototype.registeredGraphs=
function(a){var c=this;this.connection.postMessage({fn:"registeredGraphs",args:[],callback:this.registerCallback("registeredGraphs",function(d,g){if(d)for(var h=0;h<g.length;h++)g[h]=c.adaptJSInterface(g[h]);a(d,g)})})},K.RDFStoreClient.prototype.adaptJSInterface=function(a){if(a.interfaceName==="BlankNode")return new w.BlankNode(a.bnodeId);else if(a.interfaceName==="Literal")return new w.Literal(a.nominalValue,a.language,a.datatype);else if(a.interfaceName==="NamedNode")return new w.NamedNode(a.nominalValue)},
K.RDFStoreClient.prototype.isWebWorkerConnection=!0;var H={},pb={MongodbQueryEngine:function(){throw"MongoDB backend not supported in the browser version";}};H.VERSION="0.5.13";H.connect=function(){var a,c,d;arguments.length==1&&(a=__dirname,c={},d=arguments[0]);arguments.length==2?(typeof arguments[0]==="string"?(a=arguments[0],c={}):(a=__dirname+"/index.js",c=arguments[0]),d=arguments[1]):(a=arguments[0],c=arguments[1],d=arguments[2]);try{Worker?new K.RDFStoreClient(a,c,function(a,c){d(a,c)}):H.create(c,
function(a){d(!1,a)})}catch(g){H.create(c,function(a){d(!1,a)})}};H.create=function(){return arguments.length==1?new H.Store(arguments[0]):arguments.length==2?new H.Store(arguments[0],arguments[1]):new H.Store};H.Store=function(a,c){var d=null,g=null;if(arguments.length==0)g={};else if(arguments.length==1)g={},d=a;else if(arguments.length>1)g=a,d=c;else throw"An optional argument map and a callback must be provided";g.treeOrder==null&&(g.treeOrder=15);this.functionMap={};var h=this;g.engine==="mongodb"?
(this.isMongodb=!0,this.engine=new pb.MongodbQueryEngine(g),this.engine.readConfiguration(function(){g.overwrite===!0?h.engine.clean(function(){d(h)}):d(h)})):new J.Lexicon(function(a){g.overwrite===!0&&a.clear();new T.QuadBackend(g,function(c){g.overwrite===!0&&c.clear();g.backend=c;g.lexicon=a;h.engine=new B.QueryEngine(g);d&&d(h)})},g.name)};H.Store.prototype.rdf=w.rdf;H.Store.prototype.execute=function(){if(arguments.length===3)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2]);
else if(arguments.length===4)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2],arguments[3]);else{var a,c;arguments.length===1?(a=arguments[0],c=function(){}):arguments.length===2&&(a=arguments[0],c=arguments[1]);this.engine.execute(a,c)}};H.Store.prototype.executeWithEnvironment=function(){var a,c,d;if(arguments.length===3){a=arguments[0];var g=function(){};c=arguments[1];d=arguments[2]}else arguments.length===4&&(a=arguments[0],g=arguments[3],c=arguments[1],d=arguments[2]);for(var h=
[],j=[],i=0;i<c.length;i++)h.push({token:"uri",value:c[i]});for(i=0;i<d.length;i++)j.push({token:"uri",value:d[i]});this.engine.execute(a,g,h,j)};H.Store.prototype.graph=function(){var a=null,c=null;if(arguments.length===1)c=arguments[0]||function(){},a=this.engine.lexicon.defaultGraphUri;else if(arguments.length===2)c=arguments[1]||function(){},a=arguments[0];else throw"An optional graph URI and a callback function must be provided";this.rdf.resolve(a)!=null&&(a=this.rdf.resolve(a));this.engine.execute("CONSTRUCT { ?s ?p ?o } WHERE { GRAPH <"+
a+"> { ?s ?p ?o } }",c)};H.Store.prototype.node=function(){var a=null,c=null,d=null;if(arguments.length===2)d=arguments[0],c=arguments[1]||function(){},a=this.engine.lexicon.defaultGraphUri;else if(arguments.length===3)d=arguments[0],a=arguments[1],c=arguments[2]||function(){};else throw"An optional graph URI, node URI and a callback function must be provided";this.rdf.resolve(a)!=null&&(a=this.rdf.resolve(a));this.rdf.resolve(d)!=null&&(d=this.rdf.resolve(d));this.engine.execute("CONSTRUCT { <"+
d+"> ?p ?o } WHERE { GRAPH <"+a+"> { <"+d+"> ?p ?o } }",c)};H.Store.prototype.startObservingNode=function(){var a,c,d;arguments.length===2?(a=arguments[0],d=arguments[1],this.engine.callbacksBackend.observeNode(a,d,function(){})):arguments.length===3&&(a=arguments[0],c=arguments[1],d=arguments[2],this.engine.callbacksBackend.observeNode(a,c,d,function(){}))};H.Store.prototype.stopObservingNode=function(a){this.engine.callbacksBackend.stopObservingNode(a)};H.Store.prototype.startObservingQuery=function(a,
c,d){d!=null?this.engine.callbacksBackend.observeQuery(a,c,d):this.engine.callbacksBackend.observeQuery(a,c,function(){})};H.Store.prototype.stopObservingQuery=function(a){this.engine.callbacksBackend.stopObservingQuery(a)};H.Store.prototype.subscribe=function(a,c,d,g,h){var j=this,i=function(a,c){for(var d=[],g={blanks:{},outCache:{}},i=[],y=0;y<c.length;y++){var A=c[y],B=w.buildRDFResource(A.subject,i,j.engine,g),C=w.buildRDFResource(A.predicate,i,j.engine,g),A=w.buildRDFResource(A.object,i,j.engine,
g);B!=null&&C!=null&&A!=null&&(A=new w.Triple(B,C,A),d.push(A))}h(a,d)};this.functionMap[h]=i;this.engine.callbacksBackend.subscribe(a,c,d,g,i,function(){})};H.Store.prototype.unsubscribe=function(a){this.engine.callbacksBackend.unsubscribe(this.functionMap[a]);delete this.functionMap[a]};H.Store.prototype.setPrefix=function(a,c){this.rdf.setPrefix(a,c)};H.Store.prototype.setDefaultPrefix=function(a){this.rdf.setDefaultPrefix(a)};H.Store.prototype.insert=function(){var a,c,d;if(arguments.length===
1)c=arguments[0];else if(arguments.length===2)a=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),c=arguments[0],d=arguments[1]||function(){};else if(arguments.length===3)c=arguments[0],a=this.rdf.createNamedNode(arguments[1]),d=arguments[2]||function(){};else throw"The triples to insert, an optional graph and callback must be provided";var g="",h=this;c.forEach(function(a){g=g+h._nodeToQuery(a.subject)+h._nodeToQuery(a.predicate)+h._nodeToQuery(a.object)+"."});g=a!=null?"INSERT DATA { GRAPH "+
this._nodeToQuery(a)+" { "+g+" } }":"INSERT DATA { "+this._nodeToQuery(a)+" { "+g+" }";this.engine.execute(g,d)};H.Store.prototype._nodeToQuery=function(a){if(a.interfaceName==="NamedNode"){var c=this.rdf.resolve(a.valueOf());return c!=null?"<"+c+">":"<"+a.valueOf()+">"}else{if(a.interfaceName!=="")if(a.lang!=null)return'"'+a.valueOf()+'"@'+a.lang;else if(a.datatype!=null)return'"'+a.valueOf()+'"^^<'+a.datatype+">";return a.toString()}};H.Store.prototype["delete"]=function(){var a,c,d;if(arguments.length===
1)c=arguments[0];else if(arguments.length===2)a=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),c=arguments[0],d=arguments[1]||function(){};else if(arguments.length===3)c=arguments[0],a=this.rdf.createNamedNode(arguments[1]),d=arguments[2]||function(){};else throw"The triples to delete, an optional graph and callback must be provided";var g="",h=this;c.forEach(function(a){g=g+h._nodeToQuery(a.subject)+h._nodeToQuery(a.predicate)+h._nodeToQuery(a.object)+"."});g=a!=null?"DELETE DATA { GRAPH "+
this._nodeToQuery(a)+" { "+g+" } }":"DELETE DATA { "+this._nodeToQuery(a)+" { "+g+" }";this.engine.execute(g,d)};H.Store.prototype.clear=function(){var a,c;if(arguments.length===0)a=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),c=function(){};else if(arguments.length===1)a=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),c=arguments[0]||function(){};else if(arguments.length===2)a=this.rdf.createNamedNode(arguments[0]),c=arguments[1]||function(){};else throw"The optional graph and a callback must be provided";
this.engine.execute("CLEAR GRAPH "+this._nodeToQuery(a),c)};H.Store.prototype.setBatchLoadEvents=function(a){this.engine.eventsOnBatchLoad=a};H.Store.prototype.registerDefaultNamespace=function(a,c){this.rdf.prefixes.set(a,c);this.engine.registerDefaultNamespace(a,c)};H.Store.prototype.registerDefaultProfileNamespaces=function(){var a=this.rdf.prefixes.values(),c;for(c in a)this.registerDefaultNamespace(c,a[c])};H.Store.prototype.load=function(){var a,c,d,g;if(arguments.length===3)d=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),
a=arguments[0],c=arguments[1],g=arguments[2]||function(){};else if(arguments.length===4)a=arguments[0],c=arguments[1],d=this.rdf.createNamedNode(arguments[2]),g=arguments[3]||function(){};else if(arguments.length===2)throw"The mediaType of the parser, the data a callback and an optional graph must be provided";if(a==="remote")c=this.rdf.createNamedNode(c),this.engine.execute("LOAD <"+c.valueOf()+"> INTO GRAPH <"+d.valueOf()+">",g);else if(c&&typeof c==="string"&&c.indexOf("file://")===0){a=this.engine.rdfLoader.parsers[a];
var h=this;this.engine.rdfLoader.loadFromFile(a,{token:"uri",value:d.valueOf()},c,function(a,c){a?h.engine.batchLoad(c,g):g(a,c)})}else a=this.engine.rdfLoader.parsers[a],h=this,this.engine.rdfLoader.tryToParse(a,{token:"uri",value:d.valueOf()},c,function(a,c){a?h.engine.batchLoad(c,g):g(a,c)})};H.Store.prototype.registerParser=function(a,c){this.engine.rdfLoader.registerParser(a,c)};H.Store.prototype.registeredGraphs=function(a){if(this.isMongodb)this.engine.registeredGraphs(!0,function(c){for(var d=
[],g=0;g<c.length;g++){var h=new w.NamedNode(c[g]);d.push(h)}return a(!0,d)});else{for(var c=this.engine.lexicon.registeredGraphs(!0),d=[],g=0;g<c.length;g++){var h=new w.NamedNode(c[g]);d.push(h)}return a(!0,d)}};H.Store.prototype._nodeToQuery=function(a){if(a.interfaceName==="NamedNode"){var c=this.rdf.resolve(a.valueOf());return c!=null?"<"+c+">":"<"+a.valueOf()+">"}else return a.toString()};H.Store.prototype.getNetworkTransport=function(){return N};H.Store.prototype.setNetworkTransport=function(a){N=
a};RDFStoreWorker={observingCallbacks:{},workerCallbacksCounter:0,workerCallbacks:{}};RDFStoreWorker.registerCallback=function(a){var c=""+RDFStoreWorker.workerCallbacksCounter;RDFStoreWorker.workerCallbacksCounter++;RDFStoreWorker.workerCallbacks[c]=a;return c};RDFStoreWorker.handleCreate=function(a,c){typeof N!="undefined"&&N!=null&&(N={load:function(a,c,d){var h=RDFStoreWorker.registerCallback(function(a){d.apply(d,a)});postMessage({fn:"workerRequest:NetworkTransport:load",callback:h,arguments:[a,
c]})},loadFromFile:function(){}});var d=[a];d.push(function(a){RDFStoreWorker.store=a;postMessage({callback:c,result:"created",success:!0})});H.create.apply(H,d)};RDFStoreWorker.receive=function(a){var c=a.data||a;if(c.fn==="workerRequestResponse"){var d=c.callback,g=RDFStoreWorker.workerCallbacks[d];g!=null&&(delete RDFStoreWorker.workerCallbacks[d],g(c.results))}else if(c.fn==="create"&&c.args!=null)RDFStoreWorker.handleCreate(c.args,c.callback);else if(c.fn==="setBatchLoadEvents")RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,
c.args);else if(c.fn==="registerDefaultNamespace")RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,c.args);else if(c.fn==="registerDefaultProfileNamespaces")RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,c.args);else if((c.fn==="execute"||c.fn==="executeWithEnvironment"||c.fn==="graph"||c.fn==="node"||c.fn==="clear"||c.fn==="load")&&c.args!=null){c.args.push(function(a,d){c.callback!=null&&postMessage({callback:c.callback,result:d,success:a})});try{RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,
c.args)}catch(h){console.log("Error executing method through connection"),console.log(h)}}else if((c.fn==="insert"||c.fn==="delete")&&c.args!=null)try{c.args.push(function(a,d){c.callback!=null&&postMessage({callback:c.callback,result:d,success:a})});g=c.args[0];for(a=0;a<g.triples.length;a++)d=g.triples[a],g.triples[a]=new w.Triple(RDFStoreWorker.adaptJSInterface(d.subject),RDFStoreWorker.adaptJSInterface(d.predicate),RDFStoreWorker.adaptJSInterface(d.object));c.args[1].interfaceName!=null&&(c.args[1]=
RDFStoreWorker.adaptJSInterface(c.args[1]));c.args[0]=RDFStoreWorker.store.rdf.createGraph(g.triples);RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,c.args)}catch(j){console.log("Error executing method through connection"),console.log(j)}else c.fn==="rdf/setPrefix"&&c.args!=null?RDFStoreWorker.store.rdf.setPrefix(c.args[0],c.args[1]):c.fn==="rdf/setDefaultPrefix"&&c.args!=null?RDFStoreWorker.store.rdf.setDefaultPrefix(c.args[0]):c.fn==="startObservingQuery"&&c.args!=null?(d=function(a,d){postMessage({callback:c.callback[0],
result:d,success:a})},RDFStoreWorker.observingCallbacks[c.args[0]]=d,c.args.push(d),c.args.push(function(a,d){c.callback&&c.callback[1]!=null&&postMessage({callback:c.callback[1],result:d,success:a})}),RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,c.args)):c.fn==="stopObservingQuery"?((d=RDFStoreWorker.observingCallbacks[c.args[0]])&&RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,[d]),delete RDFStoreWorker.observingCallbacks[c.args[0]]):c.fn==="startObservingNode"&&c.args!=null?(d=
function(a){postMessage({callback:c.callback,result:a})},RDFStoreWorker.observingCallbacks[c.callback]=d,c.args.push(d),RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,c.args)):c.fn==="stopObservingNode"&&c.args!=null?((d=RDFStoreWorker.observingCallbacks[c.args[0]])&&RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,[d]),delete RDFStoreWorker.observingCallbacks[c.args[0]]):c.fn==="subscribe"&&c.args!=null?(d=function(a,d){postMessage({callback:c.callback,event:a,result:d})},RDFStoreWorker.observingCallbacks[c.callback]=
d,c.args.push(d),RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,c.args)):c.fn==="stopObservingNode"&&c.args!=null?((d=RDFStoreWorker.observingCallbacks[c.args[0]])&&RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,[d]),delete RDFStoreWorker.observingCallbacks[c.args[0]]):c.fn==="registeredGraphs"&&c.args!=null&&RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,[function(a,d){c.callback!=null&&postMessage({callback:c.callback,result:d,success:a})}])};RDFStoreWorker.adaptJSInterface=
function(a){if(a.interfaceName==="BlankNode")return new w.BlankNode(a.bnodeId);else if(a.interfaceName==="Literal")return new w.Literal(a.nominalValue,a.language,a.datatype);else if(a.interfaceName==="NamedNode")return new w.NamedNode(a.nominalValue)};onmessage=RDFStoreWorker.receive;try{window.rdfstore=H}catch(vc){}})();
