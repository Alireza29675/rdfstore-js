(function(){try{console=console||{}}catch(Dc){console={log:function(){}}}var y={"extends":function(b,c){c.prototype=new b},stackCounterLimit:1E3,stackCounter:0};y.recur=function(b){y.stackCounter===y.stackCounterLimit?(y.stackCounter=0,setTimeout(b,0)):(y.stackCounter++,b())};y.clone=function(b){return JSON.parse(JSON.stringify(b))};y.shuffle=function(b){for(var c,e,j=b.length;j;c=parseInt(Math.random()*j),e=b[--j],b[j]=b[c],b[c]=e);return b};y.include=function(b,c,e){for(var j=b.length-1;j>=0;j--){var k=
!1,k=e==null?b[j]===c:e(b[j],c)===0;if(k===!0)return!0}return!1};y.remove=function(b,c){for(var e=[],j=0;j<b.length;j++)b[j]!==c&&e.push(b[j]);return e};y.repeat=function(b,c,e,j,k){arguments.length===4&&(k={});b<c?(k._i=b,e(function(h,e){y.recur(function(){y.repeat(b+1,c,h,j,e)})},k)):j(k)};Utilsmeanwhile=function(b,c,e,j){arguments.length===3&&(j={});j._stack_counter==null&&(j._stack_counter=0);b===!0?c(function(c,b,j){j._stack_counter%40==39?(j._stack_counter+=1,setTimeout(function(){Utilsmeanwhile(c,
b,e,j)},0)):(j._stack_counter+=1,Utilsmeanwhile(c,b,e,j))},j):e(j)};y.seq=function(){var b=arguments;return function(c){y.repeat(0,b.length,function(c,j){var k=arguments.callee;b[j._i](function(){c(k,j)})},function(){c()})}};y.partition=function(b,c){for(var e=b.length%c,j=[],k=0;k<e;k++)j.push(null);e=[];for(k=0;k<b.length;k++)j.push(b[k]),j.length%c==0&&(e.push(j),j=[]);return e};y.keys=function(b){var c=[],e;for(e in b)c.push(e);return c};y.iso8601=function(b){function c(c){return c<10?"0"+c:c}
return b.getUTCFullYear()+"-"+c(b.getUTCMonth()+1)+"-"+c(b.getUTCDate())+"T"+c(b.getUTCHours())+":"+c(b.getUTCMinutes())+":"+c(b.getUTCSeconds())+"Z"};y.parseStrictISO8601=function(b){var b=b.match(RegExp("([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?")),c=0,e=new Date(b[1],0,1);if(b[3])e.setMonth(b[3]-1);else throw"missing ISO8061 component";if(b[5])e.setDate(b[5]);else throw"missing ISO8061 component";if(b[7])e.setHours(b[7]);
else throw"missing ISO8061 component";if(b[8])e.setMinutes(b[8]);else throw"missing ISO8061 component";if(b[10])e.setSeconds(b[10]);else throw"missing ISO8061 component";b[12]&&e.setMilliseconds(Number("0."+b[12])*1E3);b[14]&&(c=Number(b[16])*60+Number(b[17]),c*=b[15]=="-"?1:-1);c-=e.getTimezoneOffset();time=Number(e)+c*6E4;b=new Date;b.setTime(Number(time));return b};y.parseISO8601=function(b){var b=b.match(RegExp("([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?")),
c=0,e=new Date(b[1],0,1);b[3]&&e.setMonth(b[3]-1);b[5]&&e.setDate(b[5]);b[7]&&e.setHours(b[7]);b[8]&&e.setMinutes(b[8]);b[10]&&e.setSeconds(b[10]);b[12]&&e.setMilliseconds(Number("0."+b[12])*1E3);b[14]&&(c=Number(b[16])*60+Number(b[17]),c*=b[15]=="-"?1:-1);c-=e.getTimezoneOffset();time=Number(e)+c*6E4;b=new Date;b.setTime(Number(time));return b};y.parseISO8601Components=function(b){var b=b.match(RegExp("([0-9]{4})(-([0-9]{2}))(-([0-9]{2}))(T([0-9]{2}):([0-9]{2})(:([0-9]{2}))?(.([0-9]+))?)?(Z|([-+])([0-9]{2})(:([0-9]{2}))?)?")),
c,e,j,k,h,i,g,o;c=Number(b[1]);e=b[3]-1;j=Number(b[5]);k=Number(b[7]);h=Number(b[8]);i=Number(b[10]);b[12]&&(g=Number("0."+b[12])*1E3);b[13]==="Z"?o=0:b[14]?(o=0,b[17]&&(o=Number(b[17])),o+=Number(b[15])*60,o*=b[14]=="-"?-1:1):b[14]==null&&b[11]&&(o=Number(b[12])*60);return{year:isNaN(c)?null:c,month:isNaN(e)?null:e,date:isNaN(j)?null:j,hours:isNaN(k)?null:k,minutes:isNaN(h)?null:h,seconds:isNaN(i)?null:i,millisecs:isNaN(g)?null:g,timezone:isNaN(o)?null:o}};y.compareDateComponents=function(b,c){var e=
y.parseISO8601Components(b),j=y.parseISO8601Components(c);return e.timezone==null&&j.timezone==null||e.timezone!=null&&j.timezone!=null?(da=y.parseISO8601(b),db=y.parseISO8601(c),da.getTime()==db.getTime()?0:da.getTime()<db.getTime()?-1:1):e.timezone!=null&&j.timezone==null?(da=y.parseISO8601(b),db=y.parseISO8601(c),ta=da.getTime(),tb=db.getTime(),e=50400,ta<tb&&ta<tb+e?-1:ta>tb&&ta>tb-e?1:null):(da=y.parseISO8601(b),db=y.parseISO8601(c),ta=da.getTime(),tb=db.getTime(),e=50400,ta<tb&&ta+e<tb?-1:ta>
tb&&ta+e>tb?1:null)};y.lexicalFormLiteral=function(b,c){var e=b.value,j=b.lang,k=b.type,h=null;if(e!=null&&k!=null&&typeof k!="string"){e=k.value;if(e==null)e=k.suffix,k=c.namespaces[k.prefix],b.type=k+e,e=k+e;h=e.indexOf("hexBinary")!=-1?'"'+b.value.toLowerCase()+'"^^<'+e+">":'"'+b.value+'"^^<'+e+">"}else h=j==null&&k==null?'"'+e+'"':k==null?'"'+e+'"@'+j:k.indexOf("hexBinary")!=-1?'"'+b.value.toLowerCase()+'"^^<'+k+">":'"'+b.value+'"^^<'+k+">";return h};y.lexicalFormBaseUri=function(b,c){var e=null;
if(b.value==null)var e=b.prefix,j=b.suffix,k=c.namespaces[e],e=k!=null?k+j:e+":"+j;else e=b.value;if(e===null)return null;else e.indexOf(":")==-1&&(e=(c.base||"")+e);return e};y.lexicalFormTerm=function(b,c){if(b.token==="uri")return{uri:y.lexicalFormBaseUri(b,c)};else if(b.token==="literal")return{literal:y.lexicalFormLiteral(b,c)};else if(b.token==="blank")return{blank:"_:"+b.value};else throw"Error, cannot get lexical form of unknown token: "+b.token;};y.normalizeUnicodeLiterals=function(b){for(var c=
b.match(/\\u[0-9abcdefABCDEF]{4,4}/g)||[],e={},j=0;j<c.length;j++)e[c[j]]==null&&(e[c[j]]=!0,b=b.replace(RegExp("\\"+c[j],"g"),eval("'"+c[j]+"'")));return b};y.hashTerm=function(b){try{if(b==null)return"";if(b.token==="uri")return"u"+b.value;else if(b.token==="blank")return"b"+b.value;else if(b.token==="literal")return l="l"+b.value,l+=b.type||"",l+=b.lang||"",l}catch(c){if(typeof b==="object"){var e="";for(p in b)e=e+p+b[p];return e}return b}};var N={Tree:function(b){if(arguments.length!=0)this.order=
b,this.root=this._allocateNode(),this.root.isLeaf=!0,this.root.level=0,this._diskWrite(this.root),this._updateRootNode(this.root),this.comparator=function(c,b){return c<b?-1:c>b?1:0},this.merger=null}};N.Tree.prototype._allocateNode=function(){return new N.Node};N.Tree.prototype._diskWrite=function(){};N.Tree.prototype._diskRead=function(b){return b};N.Tree.prototype._diskDelete=function(){};N.Tree.prototype._updateRootNode=function(b){return b};N.Tree.prototype.clear=function(){this.root=this._allocateNode();
this.root.isLeaf=!0;this.root.level=0;this._updateRootNode(this.root)};N.Tree.prototype.search=function(b,c){for(var e=!0,j=this.root;e;){for(var k=0;k<j.numberActives&&this.comparator(b,j.keys[k].key)===1;)k++;if(k<j.numberActives&&this.comparator(j.keys[k].key,b)===0)return c!=null&&c==!0?!0:j.keys[k].data;else j.isLeaf===!0?e=!1:j=this._diskRead(j.children[k])}return null};N.Tree.prototype.walk=function(b){this._walk(b,this.root)};N.Tree.prototype._walk=function(b,c){if(c.isLeaf)for(var e=0;e<
c.numberActives;e++)b(c.keys[e]);else{for(e=0;e<c.numberActives;e++)this._walk(b,this._diskRead(c.children[e])),b(c.keys[e]);this._walk(b,this._diskRead(c.children[c.numberActives]))}};N.Tree.prototype.walkNodes=function(b){this._walkNodes(b,this.root)};N.Tree.prototype._walkNodes=function(b,c){if(c.isLeaf)b(c);else{b(c);for(var e=0;e<c.numberActives;e++)this._walkNodes(b,this._diskRead(c.children[e]));this._walkNodes(b,this._diskRead(c.children[c.numberActives]))}};N.Tree.prototype._splitChild=function(b,
c,e){var j=this._allocateNode();j.isLeaf=e.isLeaf;j.level=e.level;j.numberActives=this.order-1;var k=e.keys[this.order-1];e.keys[this.order-1]=null;for(var h=0;h<this.order-1;h++)j.keys[h]=e.keys[h+this.order],e.keys[h+this.order]=null,e.isLeaf||(j.children[h]=e.children[h+this.order],e.children[h+this.order]=null);e.isLeaf||(j.children[h]=e.children[h+this.order],e.children[h+this.order]=null);e.numberActives=this.order-1;for(h=b.numberActives+1;h>c+1;h--)b.children[h]=b.children[h-1];b.children[c+
1]=j;for(h=b.numberActives;h>c;h--)b.keys[h]=b.keys[h-1];b.keys[c]=k;b.numberActives++;this._diskWrite(j);this._diskWrite(b);this._diskWrite(e)};N.Tree.prototype.insert=function(b,c){if(this.root.numberActives===2*this.order-1){var e=this._allocateNode();e.isLeaf=!1;e.level=this.root.level+1;e.numberActives=0;e.children[0]=this.root;this._splitChild(e,0,this.root);this.root=e;this._updateRootNode(this.root);this._insertNonFull(e,b,c)}else this._insertNonFull(this.root,b,c)};N.Tree.prototype._insertNonFull=
function(b,c,e){for(var j=b.numberActives-1;!b.isLeaf;){for(;j>=0&&this.comparator(c,b.keys[j].key)===-1;)j--;j++;var k=this._diskRead(b.children[j]);k.numberActives===2*this.order-1&&(this._splitChild(b,j,k),this.comparator(c,b.keys[j].key)===1&&j++);b=this._diskRead(b.children[j]);j=b.numberActives-1}for(;j>=0&&this.comparator(c,b.keys[j].key)===-1;)b.keys[j+1]=b.keys[j],j--;b.keys[j+1]={key:c,data:e};b.numberActives++;this._diskWrite(b)};N.Tree.prototype["delete"]=function(b){for(var c=this.root,
e=null,j=!0,k=null,h=null,i=null,g=!0;g===!0;){for(g=!1;j===!0;){o=0;if(c.numberActives===0)return!1;for(;o<c.numberActives&&this.comparator(b,c.keys[o].key)===1;)o++;k=o;o<c.numberActives&&this.comparator(b,c.keys[o].key)===0&&(j=!1);if(j===!0){if(c.isLeaf===!0)return!1;e=c;c=this._diskRead(c.children[o]);if(c===null)return!1;k===e.numberActives?(h=this._diskRead(e.children[k-1]),i=null):k===0?(h=null,i=this._diskRead(e.children[1])):(h=this._diskRead(e.children[k-1]),i=this._diskRead(e.children[k+
1]));c.numberActives===this.order-1&&e!=null&&(i!=null&&i.numberActives>this.order-1?this._moveKey(e,o,-1):h!=null&&h.numberActives>this.order-1?this._moveKey(e,o,1):h!=null&&h.numberActives===this.order-1?c=this._mergeSiblings(e,o,-1):i!=null&&i.numberActives===this.order-1&&(c=this._mergeSiblings(e,o,1)))}}if(c.isLeaf&&c.numberActives>this.order-1)return this._deleteKeyFromNode(c,k),!0;if(c.isLeaf&&c===this.root)return this._deleteKeyFromNode(c,k),!0;if(c.isLeaf===!1)if(e=o=null,(o=this._diskRead(c.children[k])).numberActives>
this.order-1)b=this._getMaxKeyPos(o),b=b.node.keys[b.index],c.keys[k]=b,this._diskWrite(c),c=o,b=b.key,j=g=!0;else if((o=this._diskRead(c.children[k+1])).numberActives>this.order-1)b=this._getMinKeyPos(o),b=b.node.keys[b.index],c.keys[k]=b,this._diskWrite(c),c=o,b=b.key,j=g=!0;else if((o=this._diskRead(c.children[k])).numberActives===this.order-1&&(e=this._diskRead(c.children[k+1])).numberActives===this.order-1){j=this._mergeNodes(o,c.keys[k],e);c.children[k]=j;k++;for(var o=k;o<c.numberActives;o++)c.children[o]=
c.children[o+1],c.keys[o-1]=c.keys[o];c.children[o]=null;c.keys[o-1]=null;c.numberActives--;if(c.numberActives===0&&this.root===c)this.root=j;this._diskWrite(c);c=j;j=g=!0}c.isLeaf&&c.numberActives>this.order-1&&j===!1&&this._deleteKeyFromNode(c,k);if(g===!1)return!0}};N.Tree.prototype._moveKey=function(b,c,e){e===1&&c--;var j=this._diskRead(b.children[c]),k=this._diskRead(b.children[c+1]);if(e==-1){j.keys[j.numberActives]=b.keys[c];j.children[j.numberActives+1]=k.children[0];k.children[0]=null;j.numberActives++;
b.keys[c]=k.keys[0];for(e=1;e<k.numberActives;e++)k.keys[e-1]=k.keys[e],k.children[e-1]=k.children[e];k.children[k.numberActives-1]=k.children[k.numberActives];k.numberActives--}else{k.children[k.numberActives+1]=k.children[k.numberActives];for(e=k.numberActives;e>0;e--)k.children[e]=k.children[e-1],k.keys[e]=k.keys[e-1];k.keys[0]=null;k.children[0]=null;k.children[0]=j.children[j.numberActives];k.keys[0]=b.keys[c];k.numberActives++;j.children[j.numberActives]=null;b.keys[c]=j.keys[j.numberActives-
1];j.keys[j.numberActives-1]=null;j.numberActives--}this._diskWrite(j);this._diskWrite(k);this._diskWrite(b)};N.Tree.prototype._mergeSiblings=function(b,c){var e,j,k;c===b.numberActives?(c--,j=this._diskRead(b.children[b.numberActives-1]),k=this._diskRead(b.children[b.numberActives])):(j=this._diskRead(b.children[c]),k=this._diskRead(b.children[c+1]));var h=this._allocateNode();h.isLeaf=j.isLeaf;h.level=j.level;for(e=0;e<this.order-1;e++)h.keys[e]=j.keys[e],h.children[e]=j.children[e];h.keys[this.order-
1]=b.keys[c];h.children[this.order-1]=j.children[this.order-1];for(e=0;e<this.order-1;e++)h.keys[e+this.order]=k.keys[e],h.children[e+this.order]=k.children[e];h.children[2*this.order-1]=k.children[this.order-1];b.children[c]=h;for(e=c;e<b.numberActives;e++)b.keys[e]=b.keys[e+1],b.children[e+1]=b.children[e+2];h.numberActives=j.numberActives+k.numberActives+1;b.numberActives--;for(e=b.numberActives;e<2*this.order-1;e++)b.keys[e]=null;if(b.numberActives===0&&this.root===b)this.root=h,h.isLeaf=h.level?
!1:!0;this._diskWrite(h);this.root===h&&this._updateRootNode(this.root);this._diskWrite(b);this._diskDelete(j);this._diskDelete(k);return h};N.Tree.prototype._deleteKeyFromNode=function(b,c){var e=2*this.order-1;if(b.numberActives<e)e=b.numberActives;var j;if(b.isLeaf===!1)return!1;for(j=c;j<e-1;j++)b.keys[j]=b.keys[j+1];b.keys.pop();b.numberActives--;this._diskWrite(b);return!0};N.Tree.prototype._mergeNodes=function(b,c,e){var j,k;j=this._allocateNode();j.isLeaf=!0;for(k=0;k<b.numberActives;k++)j.keys[k]=
b.keys[k],j.children[k]=b.children[k];j.children[b.numberActives]=b.children[b.numberActives];j.keys[b.numberActives]=c;for(k=0;k<e.numberActives;k++)j.keys[k+b.numberActives+1]=e.keys[k],j.children[k+b.numberActives+1]=e.children[k];j.children[2*this.order-1]=e.children[e.numberActives];j.numberActives=b.numberActives+e.numberActives+1;j.isLeaf=b.isLeaf;j.level=b.level;this._diskWrite(j);return j};N.Tree.prototype.audit=function(b){var c=[],e=[],j=this,k=function(h){for(var k=0;k<e.length;k++)if(j.comparator(e[k],
h)===0){var g=" !!! duplicated key "+h;b===!0&&console.log(g);c.push(g)}},h=null,j=this;this.walkNodes(function(i){b===!0&&(console.log("--- Node at "+i.level+" level"),console.log(" - leaf? "+i.isLeaf),console.log(" - num actives? "+i.numberActives),console.log(" - keys: "));for(var g=i.numberActives;g<i.keys.length;g++)i.keys[g]!=null&&b===!0&&(console.log(" * warning : redundant key data"),c.push(" * warning : redundant key data"));for(g=i.numberActives+1;g<i.children.length;g++)i.children[g]!=
null&&b===!0&&(console.log(" * warning : redundant children data"),c.push(" * warning : redundant key data"));if(i.isLeaf===!1)for(g=0;g<i.numberActives;g++){var o=j._diskRead(i.children[g]).keys[j._diskRead(i.children[g]).numberActives-1].key,u=j._diskRead(i.children[g+1]).keys[0].key;b===!0&&console.log("   "+i.keys[g].key+"("+o+","+u+")");if(j.comparator(i.keys[g].key,o)===-1){var s=" !!! value max left "+o+" > key "+i.keys[g].key;b===!0&&console.log(s);c.push(s)}j.comparator(i.keys[g].key,u)===
1&&(s=" !!! value min right "+u+" < key "+i.keys[g].key,b===!0&&console.log(s),c.push(s));k(i.keys[g].key);e.push(i.keys[g].key)}else{h===null?h=i.level:h!=i.level&&(s=" !!! Leaf node with wrong level value",b===!0&&console.log(s),c.push(s));for(g=0;g<i.numberActives;g++)b===!0&&console.log(" "+i.keys[g].key),k(i.keys[g].key),e.push(i.keys[g].key)}i!=j.root&&(i.numberActives>2*j.order-1&&(b===!0&&(s=" !!!! MAX num keys restriction violated "),console.log(s),c.push(s)),i.numberActives<j.order-1&&(b===
!0&&(s=" !!!! MIN num keys restriction violated "),console.log(s),c.push(s)))});return c};N.Tree.prototype._getMaxKeyPos=function(b){for(var c={};;){if(b===null)break;if(b.isLeaf===!0){c.node=b;c.index=b.numberActives-1;break}else c.node=b,c.index=b.numberActives-1,b=this._diskRead(b.children[b.numberActives])}return c};N.Tree.prototype._getMinKeyPos=function(b){for(var c={};;){if(b===null)break;if(b.isLeaf===!0){c.node=b;c.index=0;break}else c.node=b,c.index=0,b=this._diskRead(b.children[0])}return c};
N.Node=function(){this.numberActives=0;this.isLeaf=null;this.keys=[];this.children=[];this.level=0};var $={NodeKey:function(b,c){this.subject=b.subject;this.predicate=b.predicate;this.object=b.object;this.graph=b.graph;this.order=c}};$.NodeKey.prototype.comparator=function(b){for(var c=0;c<this.order.length;c++){var e=this.order[c];if(b[e]==null)break;else if(this[e]<b[e])return-1;else if(this[e]>b[e])return 1}return 0};$.Pattern=function(b){this.subject=b.subject;this.predicate=b.predicate;this.object=
b.object;this.graph=b.graph;this.indexKey=[];this.keyComponents={};for(var c=[],e=[],b=["subject","predicate","object","graph"],j=0;j<b.length;j++)typeof this[b[j]]==="string"?(e.push(b[j]),this.keyComponents[b[j]]=null):(c.push(b[j]),this.keyComponents[b[j]]=this[b[j]],this.indexKey.push(b[j]));this.order=c.concat(e);this.key=new $.NodeKey(this.keyComponents,this.order)};var ca={Tree:function(b,c){if(arguments!=0)this.componentOrder=b.componentOrder,N.Tree.call(this,b.order,b.name,b.persistent,b.cacheMaxSize),
this.comparator=function(c,b){for(var k=0;k<this.componentOrder.length;k++){var h=this.componentOrder[k],i=c[h],h=b[h];if(i<h)return-1;else if(i>h)return 1}return 0},this.rangeComparator=function(c,b){for(var k=0;k<this.componentOrder.length;k++){var h=this.componentOrder[k];if(b[h]==null||c[h]==null)break;else if(c[h]<b[h])return-1;else if(c[h]>b[h])return 1}return 0},c!=null&&c(this)}};y["extends"](N.Tree,ca.Tree);ca.Tree.prototype.insert=function(b,c){N.Tree.prototype.insert.call(this,b,null);
c&&c(!0);return!0};ca.Tree.prototype.search=function(b,c){var e=N.Tree.prototype.search.call(this,b,!0);c&&c(e);return e};ca.Tree.prototype.range=function(b,c){var e=null,e=typeof this.root==="string"?this._rangeTraverse(this,this._diskRead(this.root),b):this._rangeTraverse(this,this.root,b);c&&c(e);return e};ca.Tree.prototype._rangeTraverse=function(b,c,e){for(var e=e.key,j=[],k=[c],h;k.length>0;){c=k.shift();for(h=0;h<c.numberActives&&b.rangeComparator(c.keys[h].key,e)===-1;)h++;if(c.isLeaf===!0)for(;h<
c.numberActives&&b.rangeComparator(c.keys[h].key,e)===0;)j.push(c.keys[h].key),h++;else{var i=b._diskRead(c.children[h]);for(k.push(i);;)if(h<c.numberActives&&b.rangeComparator(c.keys[h].key,e)===0)j.push(c.keys[h].key),h++,i=b._diskRead(c.children[h]),k.push(i);else break}}return j};var T={QuadBackend:function(b,c){if(arguments!=0){this.indexMap={};this.treeOrder=b.treeOrder;this.indices=["SPOG","GP","OGS","POG","GSP","OS"];this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph",
"predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]};for(var e=0;e<this.indices.length;e++){var j=this.indices[e],k=new ca.Tree({order:this.treeOrder,componentOrder:this.componentOrders[j],persistent:b.persistent,name:(b.name||"")+j,cacheMaxSize:b.cacheMaxSize});this.indexMap[j]=k}c&&c(this)}}};T.QuadBackend.prototype.clear=function(){for(var b=
0;b<this.indices.length;b++)this.indexMap[this.indices[b]].clear()};T.QuadBackend.prototype._indexForPattern=function(b){for(var b=b.indexKey,c=this.indices,e=0;e<c.length;e++)for(var j=c[e],k=this.componentOrders[j],h=0;h<k.length;h++){if(y.include(b,k[h])===!1)break;if(h==b.length-1)return j}return"SPOG"};T.QuadBackend.prototype.index=function(b,c){for(var e=0;e<this.indices.length;e++)this.indexMap[this.indices[e]].insert(b);c&&c(!0);return!0};T.QuadBackend.prototype.range=function(b,c){var e=
this.indexMap[this._indexForPattern(b)].range(b);c&&c(e);return e};T.QuadBackend.prototype.search=function(b,c){var e=this.indexMap[this.indices[0]].search(b);c&&c(e!=null);return e!=null};T.QuadBackend.prototype["delete"]=function(b,c){for(var e,j=0;j<this.indices.length;j++)e=this.indices[j],e=this.indexMap[e],e["delete"](b);c&&c(!0);return!0};var Q={Lexicon:function(b){this.uriToOID={};this.OIDToUri={};this.literalToOID={};this.OIDToLiteral={};this.blankToOID={};this.OIDToBlank={};this.defaultGraphOid=
0;this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph";this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri,oid:this.defaultGraphOid};this.oidCounter=1;this.knownGraphs={};b!=null&&b(this)}};Q.Lexicon.prototype.registerGraph=function(b){b!=this.defaultGraphOid&&(this.knownGraphs[b]=!0);return!0};Q.Lexicon.prototype.registeredGraphs=function(b){var c=[],e;for(e in this.knownGraphs)b===!0?c.push(this.OIDToUri["u"+e]):c.push(e);return c};
Q.Lexicon.prototype.registerUri=function(b){if(b===this.defaultGraphUri)return this.defaultGraphOid;else{if(this.uriToOID[b]==null){var c=this.oidCounter;this.oidCounter++;this.uriToOID[b]=[c,0];this.OIDToUri["u"+c]=b}else{var e=this.uriToOID[b],c=e[0];this.uriToOID[b]=[c,e[1]+1]}return c}};Q.Lexicon.prototype.resolveUri=function(b){return b===this.defaultGraphUri?this.defaultGraphOid:(b=this.uriToOID[b],b!=null?b[0]:-1)};Q.Lexicon.prototype.resolveUriCost=function(b){return b===this.defaultGraphUri?
this.defaultGraphOid:(b=this.uriToOID[b],b!=null?b[1]:-1)};Q.Lexicon.prototype.registerBlank=function(){var b=this.oidCounter;this.oidCounter++;b=""+b;this.OIDToBlank[b]=!0;return b};Q.Lexicon.prototype.resolveBlank=function(){var b=this.oidCounter;this.oidCounter++;return""+b};Q.Lexicon.prototype.resolveBlankCost=function(){return 0};Q.Lexicon.prototype.registerLiteral=function(b){if(this.literalToOID[b]==null){var c=this.oidCounter;this.oidCounter++;this.literalToOID[b]=[c,0];this.OIDToLiteral["l"+
c]=b}else{var e=this.literalToOID[b],c=e[0];this.literalToOID[b]=[c,e[1]+1]}return c};Q.Lexicon.prototype.resolveLiteral=function(b){b=this.literalToOID[b];return b!=null?b[0]:-1};Q.Lexicon.prototype.resolveLiteralCost=function(b){b=this.literalToOID[b];return b!=null?b[1]:0};Q.Lexicon.prototype.parseLiteral=function(b){var c=b.lastIndexOf("@");if(c!=-1&&b[c-1]==='"'&&b.substring(c,b.length).match(/^@[a-zA-Z\-]+$/g)!=null){var e=b.substring(1,c-1),b=b.substring(c+1,b.length);return{token:"literal",
value:e,lang:b}}c=b.lastIndexOf("^^");if(c!=-1&&b[c-1]==='"'&&b[c+2]==="<"&&b[b.length-1]===">")return e=b.substring(1,c-1),b=b.substring(c+3,b.length-1),{token:"literal",value:e,type:b};e=b.substring(1,b.length-1);return{token:"literal",value:e}};Q.Lexicon.prototype.parseUri=function(b){return{token:"uri",value:b}};Q.Lexicon.prototype.retrieve=function(b){try{if(b===this.defaultGraphOid)return{token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0};else{var c=this.OIDToUri["u"+
b];if(c!=null)return this.parseUri(c);else{var e=this.OIDToLiteral["l"+b];if(e!=null)return this.parseLiteral(e);else if(this.OIDToBlank[""+b]!=null)return{token:"blank",value:"_:"+b};else throw"Null value for OID";}}}catch(j){throw console.log("error in lexicon retrieving OID:"),console.log(b),j.message||j.stack?(j.message&&console.log(j.message),j.stack&&console.log(j.stack)):console.log(j),Error("Unknown retrieving OID in lexicon:"+b);}};Q.Lexicon.prototype.clear=function(){this.uriToOID={};this.OIDToUri=
{};this.literalToOID={};this.OIDToLiteral={};this.blankToOID={};this.OIDToBlank={}};Q.Lexicon.prototype.unregister=function(b,c){try{return this.unregisterTerm(b.subject.token,c.subject),this.unregisterTerm(b.predicate.token,c.predicate),this.unregisterTerm(b.object.token,c.object),b.graph!=null&&this.unregisterTerm(b.graph.token,c.graph),!0}catch(e){return console.log("Error unregistering quad"),console.log(e.message),!1}};Q.Lexicon.prototype.unregisterTerm=function(b,c){if(b==="uri"){if(c!=this.defaultGraphOid){var e=
"u"+c,j=this.OIDToUri[e],k=this.uriToOID[j],h=k[1];if(""+k[0]===""+c)h===0?(delete this.OIDToUri[e],delete this.uriToOID[j],delete this.knownGraphs[c]):this.uriToOID[j]=[c,h-1];else throw"Not matching OID : "+c+" vs "+k[0];}}else if(b==="literal")if(this.oidCounter++,e="l"+c,j=this.OIDToLiteral[e],k=this.literalToOID[j],h=k[1],""+k[0]===""+c)h===0?(delete this.OIDToLiteral[e],delete this.literalToOID[j]):this.literalToOID[j]=[c,h-1];else throw"Not matching OID : "+c+" vs "+k[0];else b==="blank"&&
delete this.OIDToBlank[""+c]};var X={};X.load=function(b,c,e){jQuery.ajax({url:b,headers:{Accept:c},success:function(c,b,h){if((""+h.status)[0]=="2"){for(var b=h.getAllResponseHeaders().split("\n"),h={},i=0;i<b.length;i++){var g=b[i].split(":");h[g[0]]=g[1]}e(!0,{headers:h,data:c})}},error:function(b){(""+b.status)[0]=="3"?redirection==0?e(!1,500):(b=b.getAllResponseHeaders().Location||b.getAllResponseHeaders().location,b!=null?X.load(b,c,e,redirection-1):e(!1,500)):e(!1,b.statusCode())}})};var xa=
null;(function(){var b=function(c,b){c.stack="";for(var h in b)c[h]=b[h]};if(typeof module!=="undefined"&&module.exports){var c={};Exception=function(c){b(this,c);this.stack=Error().stack}}else typeof window!=="undefined"?(c=window.jsonld=window.jsonld||{},Exception=function(c){b(this,c)}):(window={},c=window.jsonld={},Exception=function(c){b(this,c)});xa=c;var e={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",xsd:"http://www.w3.org/2001/XMLSchema#",
dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",cal:"http://www.w3.org/2002/12/cal/ical#",vcard:"http://www.w3.org/2006/vcard/ns# ",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",cc:"http://creativecommons.org/ns#",sioc:"http://rdfs.org/sioc/ns#",doap:"http://usefulinc.com/ns/doap#",com:"http://purl.org/commerce#",ps:"http://purl.org/payswarm#",gr:"http://purl.org/goodrelations/v1#",sig:"http://purl.org/signature#",ccard:"http://purl.org/commerce/creditcard#"},j={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",
xsd:"http://www.w3.org/2001/XMLSchema#"},k={"boolean":j.xsd+"boolean","double":j.xsd+"double",integer:j.xsd+"integer"},h=function(c,b,h){b in c?c[b].constructor===Array?c[b].push(h):c[b]=[c[b],h]:c[b]=h},i=function(c){var b;if(c.constructor===Object){b={};var h=y.keys(c).sort(),e;for(e in h){var j=h[e];b[j]=i(c[j])}}else if(c.constructor===Array)for(e in b=[],c)b[e]=i(c[e]);else b=c;return b},g=function(c){var b={"@datatype":"@datatype","@iri":"@iri","@language":"@language","@literal":"@literal",
"@subject":"@subject","@type":"@type"};if(c){var h={},e;for(e in c)c[e].constructor===String&&c[e]in b&&(h[c[e]]=e);for(e in h)b[e]=h[e]}return b},o=function(c,b,h){var e=null,k;for(k in c)if(k.length>0&&k[0]!=="@"&&b===c[k]){e=k;h!==null&&(h[k]=c[k]);break}e===null&&b===j.rdf+"type"&&(e=g(c)["@type"]);if(e===null)for(k in c)if(k.length>0&&k[0]!=="@"){var i=c[k];if(b.indexOf(i)===0&&b.length>i.length){e=k+":"+b.substr(i.length);h!==null&&(h[k]=i);break}}e===null&&(e=b);return e},u=function(c,b,h){var e,
k=g(c);e=b.indexOf(":");e!=-1?(k=b.substr(0,e),k in c?(e=c[k]+b.substr(e+1),h!==null&&(h[k]=c[k])):e=b):b in c?(e=c[b],h!==null&&(h[b]=e)):b===k["@subject"]?e=k["@subject"]:b===k["@type"]?e=j.rdf+"type":(e=b,"@vocab"in c&&(e=c["@vocab"]+e,h!==null&&(h["@vocab"]=c["@vocab"])));return e};c.normalize=function(c){return(new s).normalize(c)};c.expand=function(c){return(new s).expand({},null,c,!1)};c.compact=function(b,h){var e=null;if(h!==null){var h=c.expand(h),j;h.constructor===Array?(e=[],j=h):j=[h];
for(var k in j){var g={},n=(new s).compact(i(b),null,j[k],g);y.keys(g).length>0&&(n["@context"]=g);e===null?e=n:e.push(n)}}return e};c.mergeContexts=function(c,b){var h=i(c),e=i(b),j;for(j in e)if(j.indexOf("@")!==0)for(var k in h)if(h[k]===e[j]){delete h[k];break}if(k="@coerce"in h||"@coerce"in e){var g="@coerce"in h?h["@coerce"]:{},n="@coerce"in e?e["@coerce"]:{};delete h["@coerce"];delete e["@coerce"]}for(j in e)h[j]=e[j];if(k){for(var o in g)if(o in n){j=g[o];k=n[o];k.constructor!==Array&&(k=
[k]);for(var s in k)if(e=k[s],j.constructor!==Array&&j!==e||j.constructor===Array&&j.indexOf(e)==-1)j.constructor===Array?j.push(e):j=g[o]=[j,e]}for(o in n)o in g||(g[o]=n[o]);n={};j=[];for(o in g)for(s in e=g[o],e.constructor===String&&(e=[e]),e)e[s]in n?j.indexOf(e[s])==-1&&j.push(e[s]):n[e[s]]=!0;if(j.length>0)throw{message:"Invalid type coercion specification. More than one type specified for at least one property.",duplicates:j};h["@coerce"]=g}return h};c.expandTerm=u;c.compactIri=function(c,
b){return o(c,b,null)};c.frame=function(c,b,h){return(new s).frame(c,b,h)};c.toTriples=function(b,h,e){var j=null;normalized=c.normalize(b);e=e||null;e===null&&(j=[],e=function(c,b,e){j.push({subject:y.lexicalFormTerm(c),predicate:y.lexicalFormTerm(b),object:y.lexicalFormTerm(e),graph:h})});var k=!1,i;for(i in normalized){var b=normalized[i],g={token:"uri",value:b["@subject"]["@iri"]};if(g.value[0]==="_")g.token="blank",g.label=g.value.split(":")[1];for(var n in b)if(n!=="@subject"){var o=b[n];o.constructor!==
Array&&(o=[o]);for(var s in o)if(k=o[s],typeof k==="string"?k={token:"literal",value:k}:k["@iri"]!=null?k=k["@iri"][0]=="_"?{token:"blank",value:k["@iri"].split(":")[1]}:{token:"uri",value:k["@iri"]}:k["@datatype"]!=null?k={token:"literal",value:k["@literal"],type:k["@datatype"]}:k["@language"]!=null&&(k={token:"literal",value:k["@literal"],lang:k["@language"]}),k=e(g,{token:"uri",value:n},k)===!1)break;if(k)break}if(k)break}return j};var s=function(){};s.prototype.compact=function(c,b,h,e){var j,
s=g(c);if(h===null)j=null,this.getCoerceType(c,b,e);else if(h.constructor===Array){j=[];for(var u in h)j.push(this.compact(c,b,h[u],e))}else if(h.constructor===Object&&"@subject"in h&&h["@subject"].constructor===Array)j={},j[s["@subject"]]=this.compact(c,b,h["@subject"],e);else if(h.constructor===Object&&!("@literal"in h)&&!("@iri"in h)){j={};for(var x in h)if(h[x]!=="@context"&&(s=o(c,x,e),s!==x||!(s in j)))j[s]=this.compact(c,x,h[x],e)}else{b=this.getCoerceType(c,b,e);u=null;h.constructor===Object?
"@language"in h||(u="@datatype"in h?h["@datatype"]:"@iri"in h?"@iri":b):h.constructor===String&&(u=b);if(b===null&&(u===k["boolean"]||u===k.integer||u===k["double"]))b=u;if(b!==null)if(u===null)throw{message:"Cannot coerce type when a language is specified. The language information would be lost."};else if(u!==b)throw new Exception({message:"Cannot coerce type because the datatype does not match.",type:u,expected:b});else h.constructor===Object?"@iri"in h?j=h["@iri"]:"@literal"in h&&(j=h["@literal"]):
j=h,b===k["boolean"]?j=j==="true"||j!=0:b===k["double"]?j=parseFloat(j):b===k.integer&&(j=parseInt(j));else if(h.constructor===Object)for(x in j={},h)j[s[x]]=h[x];else j=i(h);u==="@iri"&&(j.constructor===Object?j[s["@iri"]]=o(c,j[s["@iri"]],e):j=o(c,j,e))}return j};s.prototype.expand=function(b,e,j,o){var s;if(j===null)s=null;else if(e===null&&j.constructor===String)s=u(b,j,null);else if(j.constructor===Array){s=[];for(var x in j)s.push(this.expand(b,e,j[x],o))}else if(j.constructor===Object)if("@context"in
j&&(b=c.mergeContexts(b,j["@context"])),x=g(b),x["@literal"]in j||x["@iri"]in j)s={},x["@iri"]in j?s["@iri"]=j[x["@iri"]]:(s["@literal"]=j[x["@literal"]],x["@language"]in j?s["@language"]=j[x["@language"]]:x["@datatype"]in j&&(s["@datatype"]=j[x["@datatype"]]));else{s={};for(var S in j)S==="@embed"||S==="@explicit"||S==="@default"||S==="@omitDefault"?h(s,S,i(j[S])):S!=="@context"&&h(s,u(b,S,null),this.expand(b,S,j[S],o))}else{S=this.getCoerceType(b,e,null);x=g(b);if(S===null&&(j.constructor===Number||
j.constructor===Boolean))S=j.constructor===Boolean?k["boolean"]:(""+j).indexOf(".")==-1?k.integer:k["double"];S!==null&&(e!==x["@subject"]||o)?(s={},S==="@iri"?s["@iri"]=u(b,j,null):(s["@datatype"]=S,S===k["double"]&&(j=j.toExponential(6).replace(/(e(?:\+|-))([0-9])$/,"$10$2")),s["@literal"]=""+j)):s=""+j}return s};s.prototype.normalize=function(c){var b=[];if(c!==null){this.ng={tmp:null,c14n:null};var h=this.expand(e,null,c,!0);this.nameBlankNodes(h);c={};N(null,null,h,c);for(var j in c){var h=c[j],
k={},i=y.keys(h).sort(),g;for(g in i){var n=i[g];k[n]=h[n]}b.push(k)}this.canonicalizeBlankNodes(b);b.sort(function(c,b){return F(c["@subject"]["@iri"],b["@subject"]["@iri"])})}return b};s.prototype.getCoerceType=function(c,b,e){var k=null,b=u(c,b,null);if(b==="@subject"||b===j.rdf+"type")k="@iri";else if("@coerce"in c){var b=o(c,b,null),i;for(i in c["@coerce"]){var g=c["@coerce"][i];g.constructor!==Array&&(g=[g]);for(var n in g)if(g[n]===b){k=u(c,i,e);e!==null&&("@coerce"in e||(e["@coerce"]={}),
i in e["@coerce"]?(g=e["@coerce"][i],(g.constructor===Array&&g.indexOf(b)==-1||g.constructor===String&&g!==b)&&h(e["@coerce"],i,b)):e["@coerce"][i]=b);break}}}return k};var x=function(c){return c.indexOf("_:")===0},F=function(c,b){var h=0;if(c.constructor===Array&&b.constructor===Array)for(var e=0;e<c.length&&h===0;++e)h=F(c[e],b[e]);else h=c<b?-1:c>b?1:0;return h},L=function(c,b,h){var e=0;h in c?e=h in b?F(c[h],b[h]):-1:h in b&&(e=1);return e},K=function(c,b){var h=0;c.constructor===String?h=b.constructor!==
String?-1:F(c,b):b.constructor===String?h=1:(h=L(c,b,"@literal"),h===0&&("@literal"in c?(h=L(c,b,"@datatype"),h===0&&(h=L(c,b,"@language"))):h=F(c["@iri"],b["@iri"])));return h},H=function(c,b){var h=0,e;for(e in c){h=F(c[e].constructor===Array?c[e].length:1,b[e].constructor===Array?b[e].length:1);if(h===0){var j=c[e],k=b[e];j.constructor!==Array&&(j=[j],k=[k]);j=j.filter(function(c){return c.constructor===String||!("@iri"in c&&x(c["@iri"]))});k=k.filter(function(c){return c.constructor===String||
!("@iri"in c&&x(c["@iri"]))});h=F(j.length,k.length)}if(h===0){j.sort(K);k.sort(K);for(var i=0;i<j.length&&h===0;++i)h=K(j[i],k[i])}if(h!==0)break}return h},J=function(c){var b=-1,h={next:function(){++b;return h.current()},current:function(){return"_:"+c+b},inNamespace:function(b){return b.indexOf("_:"+c)===0}};return h},E=function(c,b,h){if(c!==null)if(c.constructor===Array)for(var e in c)E(c[e],b,h);else if(c.constructor===Object){"@subject"in c?c["@subject"].constructor==Array?E(c["@subject"],
b,h):b[c["@subject"]["@iri"]]=c:c.constructor===Object&&!("@iri"in c||"@literal"in c)&&(!("@subject"in c)||c.constructor===Object&&"@subject"in c&&"@iri"in c["@subject"]&&x(c["@subject"]["@iri"]))&&h.push(c);for(var j in c)E(c[j],b,h)}},N=function(c,b,h,e){var j=null;if(h!==null)if(h.constructor===Array)for(var k in h)N(c,b,h[k],e);else if(h.constructor===Object)if("@subject"in h&&h["@subject"].constructor===Array){if(c!==null)throw{message:"Embedded graph literals cannot be flattened."};for(var g in h["@subject"])N(c,
b,h["@subject"][g],e)}else if("@literal"in h||"@iri"in h)j=i(h);else for(g in h["@subject"]["@iri"]in e?k=e[h["@subject"]["@iri"]]:(k={},"@subject"in h&&(e[h["@subject"]["@iri"]]=k)),j=k,h){var n=h[g];n!==null&&(g in k?k[g].constructor!==Array&&(k[g]=[k[g]]):k[g]=[],N(k[g],null,n,e),k[g].length===1&&(k[g]=k[g][0]))}else j=h;j!==null&&c!==null&&(j.constructor===Object&&"@subject"in j&&(j=j["@subject"]),c.constructor===Array?(b=!1,j.constructor===Object&&"@iri"in j&&(b=c.filter(function(c){return c.constructor===
Object&&"@iri"in c&&c["@iri"]===j["@iri"]}).length>0),b||c.push(j)):c[b]=j)};s.prototype.nameBlankNodes=function(c){var b=this.ng.tmp=J("tmp"),h={},e=[];E(c,h,e);for(var j in e)if(c=e[j],!("@subject"in c)){for(;b.next()in h;);c["@subject"]={"@iri":b.current()};h[b.current()]=c}};s.prototype.renameBlankNode=function(c,b){var h=c["@subject"]["@iri"];c["@subject"]["@iri"]=b;var e=this.subjects;e[b]=e[h];delete e[h];this.edges.refs[b]=this.edges.refs[h];this.edges.props[b]=this.edges.props[h];delete this.edges.refs[h];
delete this.edges.props[h];var j=this.edges.refs[b].all,k;for(k in j){var i=j[k].s;i===h&&(i=b);var g=e[i],n=this.edges.props[i].all,o;for(o in n)if(n[o].s===h){n[o].s=b;var i=n[o].p,i=g[i].constructor===Object?[g[i]]:g[i].constructor===Array?g[i]:[],s;for(s in i)i[s].constructor===Object&&"@iri"in i[s]&&i[s]["@iri"]===h&&(i[s]["@iri"]=b)}}n=this.edges.props[b].all;for(k in n){var i=n[k].s,j=this.edges.refs[i].all,u;for(u in j)if(j[u].s===h)j[u].s=b}};s.prototype.canonicalizeBlankNodes=function(c){this.renamed=
{};this.mappings={};this.serializations={};var b=this.edges={refs:{},props:{}},h=this.subjects={},e=[],j;for(j in c){var k=c[j]["@subject"]["@iri"];h[k]=c[j];b.refs[k]={all:[],bnodes:[]};b.props[k]={all:[],bnodes:[]};x(k)&&e.push(c[j])}this.collectEdges();var c=this.ng.c14n=J("c14n"),i=this.ng.tmp;for(j in e){var g=e[j],k=g["@subject"]["@iri"];if(c.inNamespace(k)){for(;i.next()in h;);this.renameBlankNode(g,i.current());k=g["@subject"]["@iri"]}this.serializations[k]={props:null,refs:null}}for(var n=
this;e.length>0;){e.sort(function(c,b){return n.deepCompareBlankNodes(c,b)});var g=e.shift(),k=g["@subject"]["@iri"],i=["props","refs"],o;for(o in i){g=i[o];if(this.serializations[k][g]===null){var s={};s[k]="s1"}else s=this.serializations[k][g].m;var u=y.keys(s);u.sort(function(c,b){return F(s[c],s[b])});var L=[];for(j in u){var E=u[j];!c.inNamespace(k)&&E in h&&(this.renameBlankNode(h[E],c.next()),L.push(E))}u=e;e=[];for(j in u){var E=u[j],H=E["@subject"]["@iri"];if(!c.inNamespace(H)){for(var N in L)this.markSerializationDirty(H,
L[N],g);e.push(E)}}}}for(var Ga in b.props)if(b.props[Ga].bnodes.length>0){var g=h[Ga],M;for(M in g)M.indexOf("@")!==0&&g[M].constructor===Array&&g[M].sort(K)}};MappingBuilder=function(){this.count=1;this.processed={};this.mapping={};this.adj={};this.keyStack=[{keys:["s1"],idx:0}];this.done={};this.s=""};MappingBuilder.prototype.copy=function(){var c=new MappingBuilder;c.count=this.count;c.processed=i(this.processed);c.mapping=i(this.mapping);c.adj=i(this.adj);c.keyStack=i(this.keyStack);c.done=i(this.done);
c.s=this.s;return c};MappingBuilder.prototype.mapNode=function(c){c in this.mapping||(this.mapping[c]=c.indexOf("_:c14n")===0?"c"+c.substr(6):"s"+this.count++);return this.mapping[c]};MappingBuilder.prototype.serialize=function(c,b){if(this.keyStack.length>0)for(var h=this.keyStack.pop();h.idx<h.keys.length;++h.idx){var e=h.keys[h.idx];if(!(e in this.adj)){this.keyStack.push(h);break}if(e in this.done)this.s+="_"+e;else{this.done[e]=!0;var j=e,e=this.adj[e],k=e.i;if(k in c){var i=c[k],g="",n=!0,o=
void 0;for(o in i)if(o!=="@subject"){n?n=!1:g+="|";g+="<"+o+">";var s=i[o].constructor===Array?i[o]:[i[o]],u;for(u in s){var y=s[u];y.constructor===Object?"@iri"in y?g+=x(y["@iri"])?"_:":"<"+y["@iri"]+">":(g+='"'+y["@literal"]+'"',"@datatype"in y?g+="^^<"+y["@datatype"]+">":"@language"in y&&(g+="@"+y["@language"])):g+='"'+y+'"'}}j+="["+g+"]";i=!0;j+="[";var k=b.refs[k].all,F;for(F in k)i?i=!1:j+="|",j+="<"+k[F].p+">",j+=x(k[F].s)?"_:":"<"+k[F].s+">";j+="]"}j+=e.k.join("");this.s+=j;this.keyStack.push({keys:e.k,
idx:0});this.serialize(c,b)}}};s.prototype.markSerializationDirty=function(c,b,h){c=this.serializations[c];c[h]!==null&&b in c[h].m&&(c[h]=null)};var M=function(c,b){var h=0;return h=c.length==b.length?F(c,b):c.length>b.length?F(c.substr(0,b.length),b):F(c,b.substr(0,c.length))};s.prototype.serializeCombos=function(c,b,h,e,j,k,g){if(g.length>0){k=i(k);k[e.mapNode(g[0].s)]=g[0].s;for(var n=e.copy(),g=g.slice(1),o=Math.max(1,g.length),s=0;s<o;++s){var u=s===0?e:n.copy();this.serializeCombos(c,b,h,u,
j,k,g);g.unshift.apply(g,g.splice(1,g.length))}}else if(g=y.keys(k).sort(),e.adj[h]={i:b,k:g,m:k},e.serialize(this.subjects,this.edges),c[j]===null||M(e.s,c[j].s)<=0){for(n in g)this.serializeBlankNode(c,k[g[n]],e,j);e.serialize(this.subjects,this.edges);if(c[j]===null||M(e.s,c[j].s)<=0&&e.s.length>=c[j].s.length)c[j]={s:e.s,m:e.mapping}}};s.prototype.serializeBlankNode=function(c,b,h,e){if(!(b in h.processed)){h.processed[b]=!0;var j=h.mapNode(b),k=h.copy(),i=this.edges[e][b].bnodes,g={},n=[],o;
for(o in i)i[o].s in h.mapping?g[h.mapping[i[o].s]]=i[o].s:n.push(i[o]);i=Math.max(1,n.length);for(o=0;o<i;++o){var s=o===0?h:k.copy();this.serializeCombos(c,b,j,s,e,g,n)}}};s.prototype.deepCompareBlankNodes=function(c,b){var h=0,e=c["@subject"]["@iri"],j=b["@subject"]["@iri"];if(e===j)h=0;else if(h=this.shallowCompareBlankNodes(c,b),h===0)for(var k=["props","refs"],g=0;h===0&&g<k.length;++g){var h=k[g],n=this.serializations[e],o=this.serializations[j];if(n[h]===null){var s=new MappingBuilder;if(h===
"refs")s.mapping=i(n.props.m),s.count=y.keys(s.mapping).length+1;this.serializeBlankNode(n,e,s,h)}if(o[h]===null){s=new MappingBuilder;if(h==="refs")s.mapping=i(o.props.m),s.count=y.keys(s.mapping).length+1;this.serializeBlankNode(o,j,s,h)}h=F(n[h].s,o[h].s)}return h};s.prototype.shallowCompareBlankNodes=function(c,b){var h=0,e=y.keys(c),j=y.keys(b),h=F(e.length,j.length);h===0&&(h=F(e.sort(),j.sort()));h===0&&(h=H(c,b));if(h===0)var k=this.edges.refs[c["@subject"]["@iri"]].all,i=this.edges.refs[b["@subject"]["@iri"]].all,
h=F(k.length,i.length);if(h===0)for(e=0;e<k.length&&h===0;++e)h=this.compareEdges(k[e],i[e]);return h};s.prototype.compareEdges=function(c,b){var h=0,e=x(c.s),j=x(b.s),k=this.ng.c14n;e!=j?h=e?1:-1:(e||(h=F(c.s,b.s)),h===0&&(h=F(c.p,b.p)),h===0&&k!==null&&(e=k.inNamespace(c.s),k=k.inNamespace(b.s),e!=k?h=e?1:-1:e&&(h=F(c.s,b.s))));return h};s.prototype.collectEdges=function(){var c=this.edges.refs,b=this.edges.props,h;for(h in this.subjects){var e=this.subjects[h],j;for(j in e)if(j!=="@subject"){var k=
e[j],k=k.constructor!==Array?[k]:k,i;for(i in k){var g=k[i];g.constructor===Object&&"@iri"in g&&g["@iri"]in this.subjects&&(g=g["@iri"],c[g].all.push({s:h,p:j}),b[h].all.push({s:g,p:j}))}}}var n=this;for(h in c)c[h].all.sort(function(c,b){return n.compareEdges(c,b)}),c[h].bnodes=c[h].all.filter(function(c){return x(c.s)});for(h in b)b[h].all.sort(function(c,b){return n.compareEdges(c,b)}),b[h].bnodes=b[h].all.filter(function(c){return x(c.s)})};var O=function(c,b){var h=!1;if(!(j.rdf+"type"in b)){var e=
y.keys(b).filter(function(c){return c.indexOf("@")!==0});if(e.length===0)h=!0;else if(c.constructor===Object&&"@subject"in c){var h=!0,k;for(k in e)if(!(e[k]in c)){h=!1;break}}}return h},R=function(c,b,h,e,k,i,g,n){var o=null,s=-1,u;h.constructor===Array?(o=[],u=h,u.length===0&&u.push({})):(u=[h],s=1);for(var x=[],y=0;y<u.length&&s!==0;++y){h=u[y];if(h.constructor!==Object)throw{message:"Invalid JSON-LD frame. Frame must be an object or an array.",frame:h};x[y]=[];for(var F=0;F<b.length&&s!==0;++F){var G=
b[F],L=!1,E=j.rdf+"type";if(E in h&&G.constructor===Object&&"@subject"in G&&E in G)for(var K=G[E].constructor===Array?G[E]:[G[E]],H=h[E].constructor===Array?h[E]:[h[E]],J=0;J<H.length&&!L;++J){var E=H[J]["@iri"],N;for(N in K)if(K[N]["@iri"]===E){L=!0;break}}if(L||O(G,h))x[y].push(G),--s}}for(var ab in x)for(var Ga in x[ab]){h=u[ab];s=x[ab][Ga];if(s.constructor===Object&&"@subject"in s)if(b=c,y=e,G=k,L=i,E=g,F=n,K=s["@subject"]["@iri"],H=K in y?y[K]:null,(h["@embed"]===!0||F.defaults.embedOn)&&(H===
null||H.autoembed&&!G)){H===null?(H={},y[K]=H):H.parent!==null&&(H.parent[H.key]=s["@subject"]);H.autoembed=G;H.parent=L;H.key=E;if(h["@explicit"]===!0||F.defaults.explicitOn)for(key in s)key!=="@subject"&&!(key in h)&&delete s[key];for(key in s)if(key.indexOf("@")!==0&&key!==j.rdf+"type"){key in h?(G=h[key],L=!1):(G=s[key].constructor===Array?[]:{},L=!0);var E=s[key],E=E.constructor===Array?E:[E],M;for(M in E)E[M].constructor===Object&&"@iri"in E[M]&&E[M]["@iri"]in b&&(E[M]=b[E[M]["@iri"]]);s[key]=
R(b,E,G,y,L,s,key,F)}for(key in h)key.indexOf("@")!==0&&key!==j.rdf+"type"&&!(key in s)&&(G=h[key],G.constructor===Array?s[key]=[]:(G.constructor===Array&&(G=G.length>0?G[0]:{}),G["@omitDefault"]===!0||F.defaults.omitDefaultOn||(s[key]="@default"in G?G["@default"]:null)))}else s=s["@subject"];o===null?o=s:o.push(s)}return o};s.prototype.frame=function(b,h,e){var b=c.normalize(b),j=null;"@context"in h&&(j=i(h["@context"]));var h=c.expand(h),e={defaults:{embedOn:!0,explicitOn:!1,omitDefaultOn:!1}},
k={},g;for(g in b)k[b[g]["@subject"]["@iri"]]=b[g];b=R(k,b,h,{},!1,null,null,e);j!==null&&b!==null&&(b=c.compact(j,b));return b}})();var za={parser:{}};za.parser.parse=function(b,c){typeof b==="string"&&(b=JSON.parse(b));return xa.toTriples(b,c)};var Y={RDFLoader:function(b){this.precedences=["text/turtle","text/n3","application/json"];this.parsers={"text/turtle":ea.parser,"text/n3":ea.parser,"application/json":za.parser};if(b!=null)for(var c in b.parsers)this.parsers[c]=b.parsers[c];if(b&&b.precedences!=
null)for(c in this.precedences=b.precedences,b.parsers)y.include(this.precedences,c)||this.precedences.push(c);this.acceptHeaderValue="";for(b=0;b<this.precedences.length;b++)b!=0?this.acceptHeaderValue=this.acceptHeaderValue+","+this.precedences[b]:this.acceptHeaderValue+=this.precedences[b]}};Y.RDFLoader.prototype.registerParser=function(b,c){this.parsers[b]=c;this.precedences.push(b)};Y.RDFLoader.prototype.unregisterParser=function(b){delete this.parsers[b];for(var c=[],e=0;e<this.precedences.length;e++)this.precedences[e]!=
b&&c.push(this.precedences[e]);this.precedences=c};Y.RDFLoader.prototype.setAcceptHeaderPrecedence=function(b){this.precedences=b};Y.RDFLoader.prototype.load=function(b,c,e){var j=this;X.load(b,this.acceptHeaderValue,function(k,h){if(k==!0){var i=h.headers["Content-Type"]||h.headers["content-type"],g=h.data;if(i!=null){var i=i.split(";")[0],o;for(o in j.parsers)if(o.indexOf("/")!=-1){var u=o.split("/");if(u[1]==="*"){if(i.indexOf(u[0])!=-1)return j.tryToParse(j.parsers[o],c,g,e)}else if(i.indexOf(o)!=
-1)return j.tryToParse(j.parsers[o],c,g,e);else if(i.indexOf(u[1])!=-1)return j.tryToParse(j.parsers[o],c,g,e)}else if(i.indexOf(o)!=-1)return j.tryToParse(j.parsers[o],b,c,e);e(!1,"Unknown media type : "+i)}else console.log("Unknown media type"),console.log(h.headers),e(!1,"Uknown media type")}else e(!1,"Network error: "+h)})};Y.RDFLoader.prototype.loadFromFile=function(b,c,e,j){try{var k=this;fs=require("fs");fs.readFile(e.split("file:/")[1],function(h,e){if(h)throw h;e=e.toString("utf8");k.tryToParse(b,
c,e,j)})}catch(h){j(!1,h)}};Y.RDFLoader.prototype.tryToParse=function(b,c,e,j){try{typeof e==="string"&&(e=y.normalizeUnicodeLiterals(e));var k=b.parse(e,c);k!=null?j(!0,k):j(!1,"parsing error")}catch(h){console.log(h.message),console.log(h.stack),j(!1,"parsing error with mime type : "+h)}};var O={AbstractQueryTree:function(){}};O.AbstractQueryTree.prototype.parseQueryString=function(b){return ja.parser.parse(b)};O.AbstractQueryTree.prototype.parseExecutableUnit=function(b){if(b.kind==="select")return this.parseSelect(b);
else if(b.kind==="ask")return this.parseSelect(b);else if(b.kind==="modify")return this.parseSelect(b);else if(b.kind==="construct")return this.parseSelect(b);else if(b.kind==="insertdata")return this.parseInsertData(b);else if(b.kind==="deletedata")return this.parseInsertData(b);else if(b.kind==="load")return b;else if(b.kind==="clear")return b;else if(b.kind==="drop")return b;else if(b.kind==="create")return b;else throw Error("unknown executable unit: "+b.kind);};O.AbstractQueryTree.prototype.parseSelect=
function(b){return b==null?(console.log("error parsing query"),null):(b.pattern=this.build(b.pattern,{freshCounter:0}),b)};O.AbstractQueryTree.prototype.parseInsertData=function(b){return b==null?(console.log("error parsing query"),null):b};O.AbstractQueryTree.prototype.build=function(b,c){if(b.token==="groupgraphpattern")return this._buildGroupGraphPattern(b,c);else if(b.token==="basicgraphpattern"){var e={kind:"BGP",value:b.triplesContext};return e=O.translatePathExpressionsInBGP(e,c)}else if(b.token===
"graphunionpattern"){var e=this.build(b.value[0],c),j=this.build(b.value[1],c);return{kind:"UNION",value:[e,j]}}else if(b.token==="graphgraphpattern")return{kind:"GRAPH",value:this.build(b.value,c),graph:b.graph};else throw Error("not supported token in query:"+b.token);};O.translatePathExpressionsInBGP=function(b,c){for(var e,j=[],k=0;k<b.value.length;k++)if(b.value[k].predicate&&b.value[k].predicate.token==="path"){e=b.value[k];rest=b.value.slice(k+1);var h=O.translatePathExpression(e,c);e=null;
if(h.kind==="BGP")j=j.concat(h.value);else if(h.kind==="ZERO_OR_MORE_PATH"||h.kind==="ONE_OR_MORE_PATH"){bottomJoin=j.length>0?{kind:"JOIN",lvalue:{kind:"BGP",value:j},rvalue:h}:h;if(h.kind==="ZERO_OR_MORE_PATH")if(h.y.token==="var"&&h.y.value.indexOf("fresh:")===0&&h.x.token==="var"&&h.x.value.indexOf("fresh:")===0)for(k=0;k<b.value.length;k++){if(b.value[k].object&&b.value[k].object.token==="var"&&b.value[k].object.value===h.x.value)e=y.clone(b.value[k]),e.object=h.y}else if(h.y.token==="var"&&
h.y.value.indexOf("fresh:")===0)for(k=0;k<b.value.length;k++)if(b.value[k].subject&&b.value[k].subject.token==="var"&&b.value[k].subject.value===h.y.value)e=y.clone(b.value[k]),e.subject=h.x;return rest.length>0?(k=O.translatePathExpressionsInBGP({kind:"BGP",value:rest},c),e!=null?(j=j.concat([e]).concat(rest),{kind:"UNION",value:[{kind:"JOIN",lvalue:bottomJoin,rvalue:k},{kind:"BGP",value:j}]}):{kind:"JOIN",lvalue:bottomJoin,rvalue:k}):bottomJoin}else return h}else j.push(b.value[k]);b.value=j;return b};
O.translatePathExpression=function(b,c){if(b.predicate.kind==="element")if(b.predicate.modifier==="+"){b.predicate.modifier=null;var e=O.translatePathExpression(b,c);return{kind:"ONE_OR_MORE_PATH",path:e,x:b.subject,y:b.object}}else return b.predicate.modifier==="*"?(b.predicate.modifier=null,e=O.translatePathExpression(b,c),{kind:"ZERO_OR_MORE_PATH",path:e,x:b.subject,y:b.object}):(b.predicate=b.predicate.value,{kind:"BGP",value:[b]});else if(b.predicate.kind==="sequence"){for(var e=b.subject,j=
b.object,k=b.graph,h,i,g=[],o=0;o<b.predicate.value.length;o++){o!=b.predicate.value.length-1?(h={token:"var",value:"fresh:"+c.freshCounter},c.freshCounter++):h=j;i={subject:e,predicate:b.predicate.value[o],object:h};if(k!=null)i.graph=y.clone(k);g.push(i);o!=b.predicate.value.length-1&&(e=y.clone(h))}bgp={kind:"BGP",value:g};return O.translatePathExpressionsInBGP(bgp,c)}};O.AbstractQueryTree.prototype._buildGroupGraphPattern=function(b,c){for(var e=b.filters||[],j={kind:"EMPTY_PATTERN"},k=0;k<b.patterns.length;k++){var h=
b.patterns[k];h.token==="optionalgraphpattern"?(h=this.build(h.value,c),j=h.kind==="FILTER"?{kind:"LEFT_JOIN",lvalue:j,rvalue:h.value,filter:h.filter}:{kind:"LEFT_JOIN",lvalue:j,rvalue:h,filter:!0}):(h=this.build(h,c),j=j.kind=="EMPTY_PATTERN"?h:{kind:"JOIN",lvalue:j,rvalue:h})}if(e.length!=0)if(j.kind==="EMPTY_PATTERN")return{kind:"FILTER",filter:e,value:j};else if(j.kind==="LEFT_JOIN"&&j.filter===!0)return{kind:"FILTER",filter:e,value:j};else if(j.kind==="LEFT_JOIN")return{kind:"FILTER",filter:e,
value:j};else if(j.kind==="JOIN")return{kind:"FILTER",filter:e,value:j};else if(j.kind==="UNION")return{kind:"FILTER",filter:e,value:j};else if(j.kind==="GRAPH")return{kind:"FILTER",filter:e,value:j};else if(j.kind==="BGP")return{kind:"FILTER",filter:e,value:j};else throw Error("Unknow kind of algebra expression: "+j.kind);else return j};O.AbstractQueryTree.prototype.collectBasicTriples=function(b,c){c==null&&(c=[]);if(b.kind==="select")c=this.collectBasicTriples(b.pattern,c);else if(b.kind==="BGP")c=
c.concat(b.value);else if(b.kind==="ZERO_OR_MORE_PATH")c=this.collectBasicTriples(b.path);else if(b.kind==="UNION")c=this.collectBasicTriples(b.value[0],c),c=this.collectBasicTriples(b.value[1],c);else if(b.kind==="GRAPH")c=this.collectBasicTriples(b.value,c);else if(b.kind==="LEFT_JOIN"||b.kind==="JOIN")c=this.collectBasicTriples(b.lvalue,c),c=this.collectBasicTriples(b.rvalue,c);else if(b.kind==="FILTER")c=this.collectBasicTriples(b.value,c);else if(b.kind==="construct")c=this.collectBasicTriples(b.pattern,
c);else if(b.kind!=="EMPTY_PATTERN")throw"Unknown pattern: "+b.kind;return c};O.AbstractQueryTree.prototype.bind=function(b,c){if(b.graph!=null&&b.graph.token&&b.graph.token==="var"&&c[b.graph.value]!=null)b.graph=c[b.graph.value];if(b.filter!=null){for(var e=[],j=0;j<b.filter.length;j++)b.filter[j].value=this._bindFilter(b.filter[j].value,c),e.push(b.filter[j]);b.filter=e}if(b.kind==="select")b.pattern=this.bind(b.pattern,c);else if(b.kind==="BGP")b.value=this._bindTripleContext(b.value,c);else if(b.kind===
"ZERO_OR_MORE_PATH"){b.path=this._bindTripleContext(b.path,c);if(b.x&&b.x.token==="var"&&c[b.x.value]!=null)b.x=c[b.x.value];if(b.y&&b.y.token==="var"&&c[b.y.value]!=null)b.y=c[b.y.value]}else if(b.kind==="UNION")b.value[0]=this.bind(b.value[0],c),b.value[1]=this.bind(b.value[1],c);else if(b.kind==="GRAPH")b.value=this.bind(b.value,c);else if(b.kind==="LEFT_JOIN"||b.kind==="JOIN")b.lvalue=this.bind(b.lvalue,c),b.rvalue=this.bind(b.rvalue,c);else if(b.kind==="FILTER")b.filter=this._bindFilter(b.filter[j].value,
c);else if(b.kind!=="EMPTY_PATTERN")throw"Unknown pattern: "+b.kind;return b};O.AbstractQueryTree.prototype._bindTripleContext=function(b,c){for(var e=0;e<b.length;e++){delete b[e].graph;delete b[e].variables;for(var j in b[e]){var k=b[e][j];k.token==="var"&&c[k.value]!=null&&(b[e][j]=c[k.value])}}return b};O.AbstractQueryTree.prototype._bindFilter=function(b,c){if(b.expressionType!=null){var e=b.expressionType;if(e=="relationalexpression")b.op1=this._bindFilter(b.op1,c),b.op2=this._bindFilter(b.op2,
c);else if(e=="conditionalor"||e=="conditionaland")for(e=0;e<b.operands.length;e++)b.operands[e]=this._bindFilter(b.operands[e],c);else if(e=="additiveexpression"){b.summand=this._bindFilter(b.summand,c);for(e=0;e<b.summands.length;e++)b.summands[e].expression=this._bindFilter(b.summands[e].expression,c)}else if(e=="builtincall")for(e=0;e<b.args.length;e++)b.args[e]=this._bindFilter(b.args[e],c);else if(e=="multiplicativeexpression"){b.factor=this._bindFilter(b.factor,c);for(e=0;e<b.factors.length;e++)b.factors[e].expression=
this._bindFilter(b.factors[e].expression,c)}else if(e=="unaryexpression")b.expression=this._bindFilter(b.expression,c);else if(e=="irireforfunction")for(e=0;e<b.factors.args;e++)b.args[e]=this._bindFilter(b.args[e],c);else if(e=="atomic"&&b.primaryexpression=="var"&&c[b.value.value]!=null)e=c[b.value.value],b.primaryexpression=e.token==="uri"?"iri":"literal",b.value=e}return b};O.AbstractQueryTree.prototype.replace=function(b,c,e,j){if(b.graph!=null&&b.graph.token&&b.graph.token===c.token&&b.graph.value==
c.value)b.graph=y.clone(e);if(b.filter!=null){for(var k=[],h=0;h<b.filter.length;h++)b.filter[h].value=this._replaceFilter(b.filter[h].value,c,e,j),k.push(b.filter[h]);b.filter=k}if(b.kind==="select")b.pattern=this.replace(b.pattern,c,e,j);else if(b.kind==="BGP")b.value=this._replaceTripleContext(b.value,c,e,j);else if(b.kind==="ZERO_OR_MORE_PATH"){b.path=this._replaceTripleContext(b.path,c,e,j);if(b.x&&b.x.token===c.token&&b.value===c.value)b.x=y.clone(e);if(b.y&&b.y.token===c.token&&b.value===c.value)b.y=
y.clone(e)}else if(b.kind==="UNION")b.value[0]=this.replace(b.value[0],c,e,j),b.value[1]=this.replace(b.value[1],c,e,j);else if(b.kind==="GRAPH")b.value=this.replace(b.value,c,e);else if(b.kind==="LEFT_JOIN"||b.kind==="JOIN")b.lvalue=this.replace(b.lvalue,c,e,j),b.rvalue=this.replace(b.rvalue,c,e,j);else if(b.kind==="FILTER")b.value=this._replaceFilter(b.value,c,e,j);else if(b.kind!=="EMPTY_PATTERN")throw"Unknown pattern: "+b.kind;return b};O.AbstractQueryTree.prototype._replaceTripleContext=function(b,
c,e,j){for(var k=0;k<b.length;k++)for(var h in b[k]){var i=b[k][h];if(i.token==="var"&&c.token==="var"&&i.value===c.value)b[k][h]=e;else if(i.token==="blank"&&c.token==="blank"&&i.value===c.value)b[k][h]=e;else if((i.token==="literal"||i.token==="uri")&&(c.token==="literal"||c.token==="uri")&&i.token===c.token&&y.lexicalFormTerm(i,j)[i.token]===y.lexicalFormTerm(c,j)[i.token])b[k][h]=e}return b};O.AbstractQueryTree.prototype._replaceFilter=function(b,c,e,j){if(b.expressionType!=null){var k=b.expressionType;
if(k=="relationalexpression")b.op1=this._replaceFilter(b.op1,c,e,j),b.op2=this._replaceFilter(b.op2,c,e,j);else if(k=="conditionalor"||k=="conditionaland")for(k=0;k<b.operands.length;k++)b.operands[k]=this._replaceFilter(b.operands[k],c,e,j);else if(k=="additiveexpression"){b.summand=this._replaceFilter(b.summand,c,e,j);for(k=0;k<b.summands.length;k++)b.summands[k].expression=this._replaceFilter(b.summands[k].expression,c,e,j)}else if(k=="builtincall")for(k=0;k<b.args.length;k++)b.args[k]=this._replaceFilter(b.args[k],
c,e,j);else if(k=="multiplicativeexpression"){b.factor=this._replaceFilter(b.factor,c,e,j);for(k=0;k<b.factors.length;k++)b.factors[k].expression=this._replaceFilter(b.factors[k].expression,c,e,j)}else if(k=="unaryexpression")b.expression=this._replaceFilter(b.expression,c,e,j);else if(k=="irireforfunction")for(k=0;k<b.factors.args;k++)b.args[k]=this._replaceFilter(b.args[k],c,e,j);else if(k=="atomic"){j=null;if(b.primaryexpression==c.token&&b.value==c.value)j=e.value;else if(b.primaryexpression==
"iri"&&c.token=="uri"&&b.value==c.value)j=e.value;if(j!=null)b.primaryexpression=e.token==="uri"?"iri":e.token,b.value=j}}return b};var ja={};ja.parser=function(){var b={parse:function(c,b){function j(a){var c=a.charCodeAt(0);if(c<=255)var a="x",b=2;else a="u",b=4;var a="\\"+a,f=c.toString(16).toUpperCase(),c=f;b-=f.length;for(f=0;f<b;f++)c="0"+c;return a+c}function k(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/[\x80-\uFFFF]/g,j)+'"'}
function h(c){a<Aa||(a>Aa&&(Aa=a,cb=[]),cb.push(c))}function i(){var c="SPARQL@"+a,b=A[c];if(b)return a=b.nextPos,b.result;b=g();b===null&&(b=bb(),b=b!==null?b:null);A[c]={nextPos:a,result:b};return b}function g(){var c="Query@"+a,b=A[c];if(b)return a=b.nextPos,b.result;b=m;m=!1;var e=a,f=a,d=o();if(d!==null){var w=K();w===null&&(w=N(),w===null&&(w=O(),w===null&&(w=R(),w=w!==null?w:null)));w!==null?d=[d,w]:(d=null,a=f)}else d=null,a=f;f=d!==null?{token:"query",kind:"query",prologue:d[0],units:[d[1]]}:
null;f===null&&(f=null,a=e);(m=b)&&f===null&&h("[2] Query");A[c]={nextPos:a,result:f};return f}function o(){var c="Prologue@"+a,b=A[c];if(b)return a=b.nextPos,b.result;b=m;m=!1;var e=a,f=a,d=u(),d=d!==null?d:"";if(d!==null){for(var w=[],t=q();t!==null;)w.push(t),t=q();if(w!==null){for(var t=[],v=s();v!==null;)t.push(v),v=s();t!==null?d=[d,w,t]:(d=null,a=f)}else d=null,a=f}else d=null,a=f;f=d!==null?{token:"prologue",base:d[0],prefixes:d[2]}:null;f===null&&(f=null,a=e);(m=b)&&f===null&&h("[3] Prologue");
A[c]={nextPos:a,result:f};return f}function u(){var b="BaseDecl@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;for(var j=a,f=a,d=[],w=q();w!==null;)d.push(w),w=q();if(d!==null)if(c.substr(a,1)==="B"?(w="B",a+=1):(w=null,m&&h('"B"')),w===null&&(c.substr(a,1)==="b"?(w="b",a+=1):(w=null,m&&h('"b"')),w=w!==null?w:null),w!==null){if(c.substr(a,1)==="A"){var t="A";a+=1}else t=null,m&&h('"A"');t===null&&(c.substr(a,1)==="a"?(t="a",a+=1):(t=null,m&&h('"a"')),t=t!==null?t:null);if(t!==null){if(c.substr(a,
1)==="S"){var v="S";a+=1}else v=null,m&&h('"S"');v===null&&(c.substr(a,1)==="s"?(v="s",a+=1):(v=null,m&&h('"s"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="E"){var z="E";a+=1}else z=null,m&&h('"E"');z===null&&(c.substr(a,1)==="e"?(z="e",a+=1):(z=null,m&&h('"e"')),z=z!==null?z:null);if(z!==null){for(var k=[],r=q();r!==null;)k.push(r),r=q();k!==null?(r=oa(),r!==null?d=[d,w,t,v,z,k,r]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f;
f=d!==null?function(a){base={token:"base"};base.value=a;return base}(d[6]):null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[4] BaseDecl");A[b]={nextPos:a,result:f};return f}function s(){var b="PrefixDecl@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;for(var j=a,f=a,d=[],w=q();w!==null;)d.push(w),w=q();if(d!==null)if(c.substr(a,1)==="P"?(w="P",a+=1):(w=null,m&&h('"P"')),w===null&&(c.substr(a,1)==="p"?(w="p",a+=1):(w=null,m&&h('"p"')),w=w!==null?w:null),w!==null){if(c.substr(a,1)==="R"){var t=
"R";a+=1}else t=null,m&&h('"R"');t===null&&(c.substr(a,1)==="r"?(t="r",a+=1):(t=null,m&&h('"r"')),t=t!==null?t:null);if(t!==null){if(c.substr(a,1)==="E"){var v="E";a+=1}else v=null,m&&h('"E"');v===null&&(c.substr(a,1)==="e"?(v="e",a+=1):(v=null,m&&h('"e"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="F"){var z="F";a+=1}else z=null,m&&h('"F"');z===null&&(c.substr(a,1)==="f"?(z="f",a+=1):(z=null,m&&h('"f"')),z=z!==null?z:null);if(z!==null){if(c.substr(a,1)==="I"){var k="I";a+=1}else k=null,
m&&h('"I"');k===null&&(c.substr(a,1)==="i"?(k="i",a+=1):(k=null,m&&h('"i"')),k=k!==null?k:null);if(k!==null){if(c.substr(a,1)==="X"){var r="X";a+=1}else r=null,m&&h('"X"');r===null&&(c.substr(a,1)==="x"?(r="x",a+=1):(r=null,m&&h('"x"')),r=r!==null?r:null);if(r!==null){for(var i=[],g=q();g!==null;)i.push(g),g=q();if(i!==null)if(g=Ha(),g!==null){for(var C=[],pa=q();pa!==null;)C.push(pa),pa=q();C!==null?(pa=oa(),pa!==null?d=[d,w,t,v,z,k,r,i,g,C,pa]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,
a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f;f=d!==null?function(a,c){prefix={token:"prefix"};prefix.prefix=a;prefix.local=c;return prefix}(d[8],d[10]):null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[5] PrefixDecl");A[b]={nextPos:a,result:f};return f}function x(){var c="TURTLE@"+a,b=A[c];if(b)return a=b.nextPos,b.result;for(var b=a,h=[],f=y();f!==null;)h.push(f),f=y();h=h!==null?h:null;h===null&&(h=null,a=b);A[c]={nextPos:a,result:h};
return h}function y(){var b="statement@"+a,e=A[b];if(e)return a=e.nextPos,e.result;for(var j=e=a,f=[],d=q();d!==null;)f.push(d),d=q();if(f!==null)if(d=L(),d!==null){for(var w=[],t=q();t!==null;)w.push(t),t=q();if(w!==null)if(c.substr(a,1)==="."?(t=".",a+=1):(t=null,m&&h('"."')),t!==null){for(var v=[],z=q();z!==null;)v.push(z),z=q();v!==null?f=[f,d,w,t,v]:(f=null,a=j)}else f=null,a=j;else f=null,a=j}else f=null,a=j;else f=null,a=j;j=f!==null?f[1]:null;j===null&&(j=null,a=e);if(j!==null)e=j;else{j=
e=a;f=[];for(d=q();d!==null;)f.push(d),d=q();if(f!==null)if(d=qa(),d!==null){w=[];for(t=q();t!==null;)w.push(t),t=q();w!==null?f=[f,d,w]:(f=null,a=j)}else f=null,a=j;else f=null,a=j;j=f!==null?f[1]:null;j===null&&(j=null,a=e);if(j!==null)e=j;else{e=q();if(e!==null)for(j=[];e!==null;)j.push(e),e=q();else j=null;e=j!==null?j:null}}A[b]={nextPos:a,result:e};return e}function L(){var c="directive@"+a,b=A[c];if(b)return a=b.nextPos,b.result;b=H();b===null&&(b=E(),b=b!==null?b:null);A[c]={nextPos:a,result:b};
return b}function E(){var b="base@"+a,e=A[b];if(e)return a=e.nextPos,e.result;for(var j=e=a,f=[],d=q();d!==null;)f.push(d),d=q();if(f!==null)if(c.substr(a,5)==="@base"?(d="@base",a+=5):(d=null,m&&h('"@base"')),d!==null){var w=q();if(w!==null)for(var t=[];w!==null;)t.push(w),w=q();else t=null;t!==null?(w=oa(),w!==null?f=[f,d,t,w]:(f=null,a=j)):(f=null,a=j)}else f=null,a=j;else f=null,a=j;j=f!==null?function(a){base={token:"base"};base.value=a;return base}(f[3]):null;j===null&&(j=null,a=e);A[b]={nextPos:a,
result:j};return j}function H(){var b="prefixID@"+a,e=A[b];if(e)return a=e.nextPos,e.result;for(var j=e=a,f=[],d=q();d!==null;)f.push(d),d=q();if(f!==null)if(c.substr(a,7)==="@prefix"?(d="@prefix",a+=7):(d=null,m&&h('"@prefix"')),d!==null){var w=q();if(w!==null)for(var t=[];w!==null;)t.push(w),w=q();else t=null;if(t!==null)if(w=eb(),w=w!==null?w:"",w!==null){if(c.substr(a,1)===":"){var v=":";a+=1}else v=null,m&&h('":"');if(v!==null){for(var z=[],k=q();k!==null;)z.push(k),k=q();z!==null?(k=oa(),k!==
null?f=[f,d,t,w,v,z,k]:(f=null,a=j)):(f=null,a=j)}else f=null,a=j}else f=null,a=j;else f=null,a=j}else f=null,a=j;else f=null,a=j;j=f!==null?function(a,c){prefix={token:"prefix"};prefix.prefix=a;prefix.local=c;return prefix}(f[3],f[6]):null;j===null&&(j=null,a=e);A[b]={nextPos:a,result:j};return j}function K(){var c="SelectQuery@"+a,b=A[c];if(b)return a=b.nextPos,b.result;b=m;m=!1;var e=a,f=a,d=M();if(d!==null){for(var w=[],t=q();t!==null;)w.push(t),t=q();if(w!==null){for(var t=[],v=Q();v!==null;)t.push(v),
v=Q();if(t!==null){for(var v=[],z=q();z!==null;)v.push(z),z=q();if(v!==null)if(z=T(),z!==null){for(var j=[],k=q();k!==null;)j.push(k),k=q();if(j!==null)if(k=Y(),k!==null){for(var i=[],g=q();g!==null;)i.push(g),g=q();i!==null?(g=za(),g!==null?d=[d,w,t,v,z,j,k,i,g]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?function(a,c,b,d){for(var f={named:[],"default":[]},h=0;h<c.length;h++){var m=c[h];m.kind===
"default"?f["default"].push(m.graph):f.named.push(m.graph)}f.named.length===0&&f["default"].length===0&&f["default"].push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});c={kind:"select",token:"executableunit"};c.dataset=f;c.projection=a.vars;c.modifier=a.modifier;c.pattern=b;if(d!=null&&d.limit!=null)c.limit=d.limit;if(d!=null&&d.offset!=null)c.offset=d.offset;if(d!=null&&d.order!=null&&d.order!="")c.order=d.order;if(d!=null&&d.group!=null)c.group=
d.group;return c}(d[0],d[2],d[4],d[6]):null;f===null&&(f=null,a=e);(m=b)&&f===null&&h("[6] SelectQuery");A[c]={nextPos:a,result:f};return f}function J(){var c="SubSelect@"+a,b=A[c];if(b)return a=b.nextPos,b.result;b=m;m=!1;var e=a,f=M();if(f!==null){var d=T();if(d!==null){var w=Y();w!==null?f=[f,d,w]:(f=null,a=e)}else f=null,a=e}else f=null,a=e;(m=b)&&f===null&&h("[7] SubSelect");A[c]={nextPos:a,result:f};return f}function M(){var b="SelectClause@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=
!1;for(var j=a,f=a,d=[],w=q();w!==null;)d.push(w),w=q();if(d!==null)if(c.substr(a,1)==="S"?(w="S",a+=1):(w=null,m&&h('"S"')),w===null&&(c.substr(a,1)==="s"?(w="s",a+=1):(w=null,m&&h('"s"')),w=w!==null?w:null),w!==null){if(c.substr(a,1)==="E"){var t="E";a+=1}else t=null,m&&h('"E"');t===null&&(c.substr(a,1)==="e"?(t="e",a+=1):(t=null,m&&h('"e"')),t=t!==null?t:null);if(t!==null){if(c.substr(a,1)==="L"){var v="L";a+=1}else v=null,m&&h('"L"');v===null&&(c.substr(a,1)==="l"?(v="l",a+=1):(v=null,m&&h('"l"')),
v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="E"){var z="E";a+=1}else z=null,m&&h('"E"');z===null&&(c.substr(a,1)==="e"?(z="e",a+=1):(z=null,m&&h('"e"')),z=z!==null?z:null);if(z!==null){if(c.substr(a,1)==="C"){var k="C";a+=1}else k=null,m&&h('"C"');k===null&&(c.substr(a,1)==="c"?(k="c",a+=1):(k=null,m&&h('"c"')),k=k!==null?k:null);if(k!==null){if(c.substr(a,1)==="T"){var r="T";a+=1}else r=null,m&&h('"T"');r===null&&(c.substr(a,1)==="t"?(r="t",a+=1):(r=null,m&&h('"t"')),r=r!==null?r:null);if(r!==
null){for(var i=[],g=q();g!==null;)i.push(g),g=q();if(i!==null){g=a;if(c.substr(a,1)==="D"){var C="D";a+=1}else C=null,m&&h('"D"');C===null&&(c.substr(a,1)==="d"?(C="d",a+=1):(C=null,m&&h('"d"')),C=C!==null?C:null);if(C!==null){if(c.substr(a,1)==="I"){var n="I";a+=1}else n=null,m&&h('"I"');n===null&&(c.substr(a,1)==="i"?(n="i",a+=1):(n=null,m&&h('"i"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="S"){var D="S";a+=1}else D=null,m&&h('"S"');D===null&&(c.substr(a,1)==="s"?(D="s",a+=1):(D=null,
m&&h('"s"')),D=D!==null?D:null);if(D!==null){if(c.substr(a,1)==="T"){var B="T";a+=1}else B=null,m&&h('"T"');B===null&&(c.substr(a,1)==="t"?(B="t",a+=1):(B=null,m&&h('"t"')),B=B!==null?B:null);if(B!==null){if(c.substr(a,1)==="I"){var o="I";a+=1}else o=null,m&&h('"I"');o===null&&(c.substr(a,1)==="i"?(o="i",a+=1):(o=null,m&&h('"i"')),o=o!==null?o:null);if(o!==null){if(c.substr(a,1)==="N"){var s="N";a+=1}else s=null,m&&h('"N"');s===null&&(c.substr(a,1)==="n"?(s="n",a+=1):(s=null,m&&h('"n"')),s=s!==null?
s:null);if(s!==null){if(c.substr(a,1)==="C"){var u="C";a+=1}else u=null,m&&h('"C"');u===null&&(c.substr(a,1)==="c"?(u="c",a+=1):(u=null,m&&h('"c"')),u=u!==null?u:null);if(u!==null){if(c.substr(a,1)==="T"){var x="T";a+=1}else x=null,m&&h('"T"');x===null&&(c.substr(a,1)==="t"?(x="t",a+=1):(x=null,m&&h('"t"')),x=x!==null?x:null);x!==null?C=[C,n,D,B,o,s,u,x]:(C=null,a=g)}else C=null,a=g}else C=null,a=g}else C=null,a=g}else C=null,a=g}else C=null,a=g}else C=null,a=g}else C=null,a=g;C!==null?g=C:(g=a,c.substr(a,
1)==="R"?(C="R",a+=1):(C=null,m&&h('"R"')),C===null&&(c.substr(a,1)==="r"?(C="r",a+=1):(C=null,m&&h('"r"')),C=C!==null?C:null),C!==null?(c.substr(a,1)==="E"?(n="E",a+=1):(n=null,m&&h('"E"')),n===null&&(c.substr(a,1)==="e"?(n="e",a+=1):(n=null,m&&h('"e"')),n=n!==null?n:null),n!==null?(c.substr(a,1)==="D"?(D="D",a+=1):(D=null,m&&h('"D"')),D===null&&(c.substr(a,1)==="d"?(D="d",a+=1):(D=null,m&&h('"d"')),D=D!==null?D:null),D!==null?(c.substr(a,1)==="U"?(B="U",a+=1):(B=null,m&&h('"U"')),B===null&&(c.substr(a,
1)==="u"?(B="u",a+=1):(B=null,m&&h('"u"')),B=B!==null?B:null),B!==null?(c.substr(a,1)==="C"?(o="C",a+=1):(o=null,m&&h('"C"')),o===null&&(c.substr(a,1)==="c"?(o="c",a+=1):(o=null,m&&h('"c"')),o=o!==null?o:null),o!==null?(c.substr(a,1)==="E"?(s="E",a+=1):(s=null,m&&h('"E"')),s===null&&(c.substr(a,1)==="e"?(s="e",a+=1):(s=null,m&&h('"e"')),s=s!==null?s:null),s!==null?(c.substr(a,1)==="D"?(u="D",a+=1):(u=null,m&&h('"D"')),u===null&&(c.substr(a,1)==="d"?(u="d",a+=1):(u=null,m&&h('"d"')),u=u!==null?u:null),
u!==null?C=[C,n,D,B,o,s,u]:(C=null,a=g)):(C=null,a=g)):(C=null,a=g)):(C=null,a=g)):(C=null,a=g)):(C=null,a=g)):(C=null,a=g),g=C!==null?C:null);g=g!==null?g:"";if(g!==null){C=[];for(n=q();n!==null;)C.push(n),n=q();if(C!==null){D=a;B=[];for(o=q();o!==null;)B.push(o),o=q();if(B!==null)if(o=U(),o!==null){s=[];for(u=q();u!==null;)s.push(u),u=q();s!==null?B=[B,o,s]:(B=null,a=D)}else B=null,a=D;else B=null,a=D;if(B!==null)D=B;else{D=a;B=[];for(o=q();o!==null;)B.push(o),o=q();if(B!==null)if(c.substr(a,1)===
"("?(o="(",a+=1):(o=null,m&&h('"("')),o!==null){s=[];for(u=q();u!==null;)s.push(u),u=q();if(s!==null)if(u=P(),u!==null){for(var x=[],y=q();y!==null;)x.push(y),y=q();if(x!==null)if(c.substr(a,1)==="A"?(y="A",a+=1):(y=null,m&&h('"A"')),y===null&&(c.substr(a,1)==="a"?(y="a",a+=1):(y=null,m&&h('"a"')),y=y!==null?y:null),y!==null){if(c.substr(a,1)==="S"){var F="S";a+=1}else F=null,m&&h('"S"');F===null&&(c.substr(a,1)==="s"?(F="s",a+=1):(F=null,m&&h('"s"')),F=F!==null?F:null);if(F!==null){for(var G=[],
L=q();L!==null;)G.push(L),L=q();if(G!==null)if(L=U(),L!==null){for(var E=[],H=q();H!==null;)E.push(H),H=q();if(E!==null)if(c.substr(a,1)===")"?(H=")",a+=1):(H=null,m&&h('")"')),H!==null){for(var K=[],J=q();J!==null;)K.push(J),J=q();K!==null?B=[B,o,s,u,x,y,F,G,L,E,H,K]:(B=null,a=D)}else B=null,a=D;else B=null,a=D}else B=null,a=D;else B=null,a=D}else B=null,a=D}else B=null,a=D;else B=null,a=D}else B=null,a=D;else B=null,a=D}else B=null,a=D;else B=null,a=D;D=B!==null?B:null}if(D!==null)for(n=[];D!==
null;){n.push(D);D=a;B=[];for(o=q();o!==null;)B.push(o),o=q();if(B!==null)if(o=U(),o!==null){s=[];for(u=q();u!==null;)s.push(u),u=q();s!==null?B=[B,o,s]:(B=null,a=D)}else B=null,a=D;else B=null,a=D;if(B!==null)D=B;else{D=a;B=[];for(o=q();o!==null;)B.push(o),o=q();if(B!==null)if(c.substr(a,1)==="("?(o="(",a+=1):(o=null,m&&h('"("')),o!==null){s=[];for(u=q();u!==null;)s.push(u),u=q();if(s!==null)if(u=P(),u!==null){x=[];for(y=q();y!==null;)x.push(y),y=q();if(x!==null)if(c.substr(a,1)==="A"?(y="A",a+=
1):(y=null,m&&h('"A"')),y===null&&(c.substr(a,1)==="a"?(y="a",a+=1):(y=null,m&&h('"a"')),y=y!==null?y:null),y!==null)if(c.substr(a,1)==="S"?(F="S",a+=1):(F=null,m&&h('"S"')),F===null&&(c.substr(a,1)==="s"?(F="s",a+=1):(F=null,m&&h('"s"')),F=F!==null?F:null),F!==null){G=[];for(L=q();L!==null;)G.push(L),L=q();if(G!==null)if(L=U(),L!==null){E=[];for(H=q();H!==null;)E.push(H),H=q();if(E!==null)if(c.substr(a,1)===")"?(H=")",a+=1):(H=null,m&&h('")"')),H!==null){K=[];for(J=q();J!==null;)K.push(J),J=q();
K!==null?B=[B,o,s,u,x,y,F,G,L,E,H,K]:(B=null,a=D)}else B=null,a=D;else B=null,a=D}else B=null,a=D;else B=null,a=D}else B=null,a=D;else B=null,a=D;else B=null,a=D}else B=null,a=D;else B=null,a=D}else B=null,a=D;else B=null,a=D;D=B!==null?B:null}}else n=null;if(n===null){n=a;D=[];for(B=q();B!==null;)D.push(B),B=q();if(D!==null)if(c.substr(a,1)==="*"?(B="*",a+=1):(B=null,m&&h('"*"')),B!==null){o=[];for(s=q();s!==null;)o.push(s),s=q();o!==null?D=[D,B,o]:(D=null,a=n)}else D=null,a=n;else D=null,a=n;n=
D!==null?D:null}n!==null?d=[d,w,t,v,z,k,r,i,g,C,n]:(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f;f=d!==null?function(a,c){var b=[];if(c.length===3&&c[1]==="*")return{vars:[{token:"variable",kind:"*"}],modifier:Gb(a)};for(var d=0;d<c.length;d++){var f=c[d];f.length===3?b.push({token:"variable",kind:"var",value:f[1]}):b.push({token:"variable",kind:"aliased",expression:f[3],
alias:f[8]})}return{vars:b,modifier:Gb(a)}}(d[8],d[10]):null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[8] SelectClause");A[b]={nextPos:a,result:f};return f}function N(){var b="ConstructQuery@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;for(var j=a,f=a,d=[],w=q();w!==null;)d.push(w),w=q();if(d!==null)if(c.substr(a,1)==="C"?(w="C",a+=1):(w=null,m&&h('"C"')),w===null&&(c.substr(a,1)==="c"?(w="c",a+=1):(w=null,m&&h('"c"')),w=w!==null?w:null),w!==null){if(c.substr(a,1)==="O"){var t="O";a+=1}else t=
null,m&&h('"O"');t===null&&(c.substr(a,1)==="o"?(t="o",a+=1):(t=null,m&&h('"o"')),t=t!==null?t:null);if(t!==null){if(c.substr(a,1)==="N"){var v="N";a+=1}else v=null,m&&h('"N"');v===null&&(c.substr(a,1)==="n"?(v="n",a+=1):(v=null,m&&h('"n"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="S"){var z="S";a+=1}else z=null,m&&h('"S"');z===null&&(c.substr(a,1)==="s"?(z="s",a+=1):(z=null,m&&h('"s"')),z=z!==null?z:null);if(z!==null){if(c.substr(a,1)==="T"){var k="T";a+=1}else k=null,m&&h('"T"');k===
null&&(c.substr(a,1)==="t"?(k="t",a+=1):(k=null,m&&h('"t"')),k=k!==null?k:null);if(k!==null){if(c.substr(a,1)==="R"){var r="R";a+=1}else r=null,m&&h('"R"');r===null&&(c.substr(a,1)==="r"?(r="r",a+=1):(r=null,m&&h('"r"')),r=r!==null?r:null);if(r!==null){if(c.substr(a,1)==="U"){var i="U";a+=1}else i=null,m&&h('"U"');i===null&&(c.substr(a,1)==="u"?(i="u",a+=1):(i=null,m&&h('"u"')),i=i!==null?i:null);if(i!==null){if(c.substr(a,1)==="C"){var g="C";a+=1}else g=null,m&&h('"C"');g===null&&(c.substr(a,1)===
"c"?(g="c",a+=1):(g=null,m&&h('"c"')),g=g!==null?g:null);if(g!==null){if(c.substr(a,1)==="T"){var C="T";a+=1}else C=null,m&&h('"T"');C===null&&(c.substr(a,1)==="t"?(C="t",a+=1):(C=null,m&&h('"t"')),C=C!==null?C:null);if(C!==null){for(var n=[],o=q();o!==null;)n.push(o),o=q();if(n!==null)if(o=Hb(),o!==null){for(var s=[],u=q();u!==null;)s.push(u),u=q();if(s!==null){for(var u=[],x=Q();x!==null;)u.push(x),x=Q();if(u!==null){for(var x=[],y=q();y!==null;)x.push(y),y=q();if(x!==null)if(y=T(),y!==null){for(var F=
[],G=q();G!==null;)F.push(G),G=q();F!==null?(G=Y(),G!==null?d=[d,w,t,v,z,k,r,i,g,C,n,o,s,u,x,y,F,G]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f;f=d!==null?function(a,c,b,d){for(var f={named:[],"default":[]},h=0;h<c.length;h++){var m=c[h];m.kind==="default"?f["default"].push(m.graph):
f.named.push(m.graph)}f.named.length===0&&f["default"].length===0&&f["default"].push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});c={kind:"construct",token:"executableunit"};c.dataset=f;c.template=a;c.pattern=b;if(d!=null&&d.limit!=null)c.limit=d.limit;if(d!=null&&d.offset!=null)c.offset=d.offset;if(d!=null&&d.order!=null&&d.order!="")c.order=d.order;return c}(d[11],d[13],d[15],d[17]):null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[9] ConstructQuery");
A[b]={nextPos:a,result:f};return f}function O(){var b="DescribeQuery@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a;if(c.substr(a,8)==="DESCRIBE"){var f="DESCRIBE";a+=8}else f=null,m&&h('"DESCRIBE"');if(f!==null){var d=ka();if(d!==null)for(var w=[];d!==null;)w.push(d),d=ka();else w=null;w!==null?d=w:(c.substr(a,1)==="*"?(d="*",a+=1):(d=null,m&&h('"*"')),d=d!==null?d:null);if(d!==null){for(var w=[],t=Q();t!==null;)w.push(t),t=Q();if(w!==null)if(t=T(),t=t!==null?t:"",t!==null){var v=Y();
v!==null?f=[f,d,w,t,v]:(f=null,a=j)}else f=null,a=j;else f=null,a=j}else f=null,a=j}else f=null,a=j;(m=e)&&f===null&&h("[10] DescribeQuery");A[b]={nextPos:a,result:f};return f}function R(){var b="AskQuery@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;for(var j=a,f=a,d=[],w=q();w!==null;)d.push(w),w=q();if(d!==null)if(c.substr(a,1)==="A"?(w="A",a+=1):(w=null,m&&h('"A"')),w===null&&(c.substr(a,1)==="a"?(w="a",a+=1):(w=null,m&&h('"a"')),w=w!==null?w:null),w!==null){if(c.substr(a,1)==="S"){var t=
"S";a+=1}else t=null,m&&h('"S"');t===null&&(c.substr(a,1)==="s"?(t="s",a+=1):(t=null,m&&h('"s"')),t=t!==null?t:null);if(t!==null){if(c.substr(a,1)==="K"){var v="K";a+=1}else v=null,m&&h('"K"');v===null&&(c.substr(a,1)==="k"?(v="k",a+=1):(v=null,m&&h('"k"')),v=v!==null?v:null);if(v!==null){for(var z=[],k=q();k!==null;)z.push(k),k=q();if(z!==null){for(var k=[],r=Q();r!==null;)k.push(r),r=Q();if(k!==null){for(var r=[],i=q();i!==null;)r.push(i),i=q();r!==null?(i=T(),i!==null?d=[d,w,t,v,z,k,r,i]:(d=null,
a=f)):(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f;f=d!==null?function(a,c){for(var b={named:[],"default":[]},d=0;d<a.length;d++){var f=a[d];f.kind==="default"?b["default"].push(f.graph):b.named.push(f.graph)}b.named.length===0&&b["default"].length===0&&b["default"].push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});d={kind:"ask",token:"executableunit"};d.dataset=b;d.pattern=
c;return d}(d[5],d[7]):null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[11] AskQuery");A[b]={nextPos:a,result:f};return f}function Q(){var b="DatasetClause@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a,f=a;if(c.substr(a,1)==="F"){var d="F";a+=1}else d=null,m&&h('"F"');d===null&&(c.substr(a,1)==="f"?(d="f",a+=1):(d=null,m&&h('"f"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="R"){var w="R";a+=1}else w=null,m&&h('"R"');w===null&&(c.substr(a,1)==="r"?(w="r",a+=1):(w=null,m&&h('"r"')),
w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="O"){var t="O";a+=1}else t=null,m&&h('"O"');t===null&&(c.substr(a,1)==="o"?(t="o",a+=1):(t=null,m&&h('"o"')),t=t!==null?t:null);if(t!==null){if(c.substr(a,1)==="M"){var v="M";a+=1}else v=null,m&&h('"M"');v===null&&(c.substr(a,1)==="m"?(v="m",a+=1):(v=null,m&&h('"m"')),v=v!==null?v:null);if(v!==null){for(var z=[],k=q();k!==null;)z.push(k),k=q();if(z!==null)if(k=X(),k===null&&(k=$(),k=k!==null?k:null),k!==null){for(var r=[],i=q();i!==null;)r.push(i),
i=q();r!==null?d=[d,w,t,v,z,k,r]:(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?d[5]:null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[12] DatasetClause");A[b]={nextPos:a,result:f};return f}function X(){var c="DefaultGraphClause@"+a,b=A[c];if(b)return a=b.nextPos,b.result;b=m;m=!1;for(var e=a,f=a,d=[],w=q();w!==null;)d.push(w),w=q();d!==null?(w=V(),w!==null?d=[d,w]:(d=null,a=f)):(d=null,a=f);f=d!==null?{graph:d[1],kind:"default",
token:"graphClause"}:null;f===null&&(f=null,a=e);(m=b)&&f===null&&h("[13] DefaultGraphClause");A[c]={nextPos:a,result:f};return f}function $(){var b="NamedGraphClause@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a,f=a;if(c.substr(a,1)==="N"){var d="N";a+=1}else d=null,m&&h('"N"');d===null&&(c.substr(a,1)==="n"?(d="n",a+=1):(d=null,m&&h('"n"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="A"){var w="A";a+=1}else w=null,m&&h('"A"');w===null&&(c.substr(a,1)==="a"?(w="a",a+=1):(w=
null,m&&h('"a"')),w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="M"){var t="M";a+=1}else t=null,m&&h('"M"');t===null&&(c.substr(a,1)==="m"?(t="m",a+=1):(t=null,m&&h('"m"')),t=t!==null?t:null);if(t!==null){if(c.substr(a,1)==="E"){var v="E";a+=1}else v=null,m&&h('"E"');v===null&&(c.substr(a,1)==="e"?(v="e",a+=1):(v=null,m&&h('"e"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="D"){var z="D";a+=1}else z=null,m&&h('"D"');z===null&&(c.substr(a,1)==="d"?(z="d",a+=1):(z=null,m&&h('"d"')),z=z!==
null?z:null);if(z!==null){for(var k=[],r=q();r!==null;)k.push(r),r=q();k!==null?(r=V(),r!==null?d=[d,w,t,v,z,k,r]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?{graph:d[6],kind:"named",token:"graphCluase"}:null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[14] NamedGraphClause");A[b]={nextPos:a,result:f};return f}function T(){var b="WhereClause@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a,f=a,d=a;if(c.substr(a,1)===
"W"){var w="W";a+=1}else w=null,m&&h('"W"');w===null&&(c.substr(a,1)==="w"?(w="w",a+=1):(w=null,m&&h('"w"')),w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="H"){var t="H";a+=1}else t=null,m&&h('"H"');t===null&&(c.substr(a,1)==="h"?(t="h",a+=1):(t=null,m&&h('"h"')),t=t!==null?t:null);if(t!==null){if(c.substr(a,1)==="E"){var v="E";a+=1}else v=null,m&&h('"E"');v===null&&(c.substr(a,1)==="e"?(v="e",a+=1):(v=null,m&&h('"e"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="R"){var z="R";a+=1}else z=
null,m&&h('"R"');z===null&&(c.substr(a,1)==="r"?(z="r",a+=1):(z=null,m&&h('"r"')),z=z!==null?z:null);if(z!==null){if(c.substr(a,1)==="E"){var k="E";a+=1}else k=null,m&&h('"E"');k===null&&(c.substr(a,1)==="e"?(k="e",a+=1):(k=null,m&&h('"e"')),k=k!==null?k:null);k!==null?w=[w,t,v,z,k]:(w=null,a=d)}else w=null,a=d}else w=null,a=d}else w=null,a=d}else w=null,a=d;d=w!==null?w:"";if(d!==null){w=[];for(t=q();t!==null;)w.push(t),t=q();if(w!==null)if(t=Z(),t!==null){v=[];for(z=q();z!==null;)v.push(z),z=q();
v!==null?d=[d,w,t,v]:(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;f=d!==null?d[2]:null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[16] WhereClause");A[b]={nextPos:a,result:f};return f}function Y(){var c="SolutionModifier@"+a,b=A[c];if(b)return a=b.nextPos,b.result;b=m;m=!1;var e=a,f=a,d=ca(),d=d!==null?d:"";if(d!==null){var w=ea(),w=w!==null?w:"";if(w!==null){var t=na(),t=t!==null?t:"";if(t!==null){var v=xa(),v=v!==null?v:"";v!==null?d=[d,w,t,v]:(d=null,a=f)}else d=null,a=f}else d=
null,a=f}else d=null,a=f;f=d!==null?function(a,c,b){var d={};if(b!=null){if(b.limit!=null)d.limit=b.limit;if(b.offset!=null)d.offset=b.offset}if(a!=null)d.group=a;d.order=c;return d}(d[0],d[2],d[3]):null;f===null&&(f=null,a=e);(m=b)&&f===null&&h("[17] SolutionModifier");A[c]={nextPos:a,result:f};return f}function ca(){var b="GroupClause@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a,f=a;if(c.substr(a,1)==="G"){var d="G";a+=1}else d=null,m&&h('"G"');d===null&&(c.substr(a,1)==="g"?(d=
"g",a+=1):(d=null,m&&h('"g"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="R"){var w="R";a+=1}else w=null,m&&h('"R"');w===null&&(c.substr(a,1)==="r"?(w="r",a+=1):(w=null,m&&h('"r"')),w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="O"){var t="O";a+=1}else t=null,m&&h('"O"');t===null&&(c.substr(a,1)==="o"?(t="o",a+=1):(t=null,m&&h('"o"')),t=t!==null?t:null);if(t!==null){if(c.substr(a,1)==="U"){var v="U";a+=1}else v=null,m&&h('"U"');v===null&&(c.substr(a,1)==="u"?(v="u",a+=1):(v=null,m&&
h('"u"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="P"){var z="P";a+=1}else z=null,m&&h('"P"');z===null&&(c.substr(a,1)==="p"?(z="p",a+=1):(z=null,m&&h('"p"')),z=z!==null?z:null);if(z!==null){for(var k=[],r=q();r!==null;)k.push(r),r=q();if(k!==null)if(c.substr(a,1)==="B"?(r="B",a+=1):(r=null,m&&h('"B"')),r===null&&(c.substr(a,1)==="b"?(r="b",a+=1):(r=null,m&&h('"b"')),r=r!==null?r:null),r!==null){if(c.substr(a,1)==="Y"){var i="Y";a+=1}else i=null,m&&h('"Y"');i===null&&(c.substr(a,1)==="y"?
(i="y",a+=1):(i=null,m&&h('"y"')),i=i!==null?i:null);if(i!==null){for(var g=[],C=q();C!==null;)g.push(C),C=q();if(g!==null){C=S();if(C!==null)for(var n=[];C!==null;)n.push(C),C=S();else n=null;n!==null?d=[d,w,t,v,z,k,r,i,g,n]:(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?d[9]:null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[18] GroupClause");A[b]={nextPos:a,result:f};return f}
function S(){var b="GroupCondition@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;for(var j=a,f=a,d=[],w=q();w!==null;)d.push(w),w=q();if(d!==null)if(w=Ia(),w!==null){for(var t=[],v=q();v!==null;)t.push(v),v=q();t!==null?d=[d,w,t]:(d=null,a=f)}else d=null,a=f;else d=null,a=f;f=d!==null?d[1]:null;f===null&&(f=null,a=j);if(f!==null)j=f;else{f=j=a;d=[];for(w=q();w!==null;)d.push(w),w=q();if(d!==null)if(w=fb(),w!==null){t=[];for(v=q();v!==null;)t.push(v),v=q();t!==null?d=[d,w,t]:(d=null,a=f)}else d=
null,a=f;else d=null,a=f;f=d!==null?d[1]:null;f===null&&(f=null,a=j);if(f!==null)j=f;else{f=j=a;d=[];for(w=q();w!==null;)d.push(w),w=q();if(d!==null)if(c.substr(a,1)==="("?(w="(",a+=1):(w=null,m&&h('"("')),w!==null){t=[];for(v=q();v!==null;)t.push(v),v=q();if(t!==null)if(v=P(),v!==null){for(var z=[],k=q();k!==null;)z.push(k),k=q();if(z!==null){k=a;if(c.substr(a,1)==="A"){var r="A";a+=1}else r=null,m&&h('"A"');r===null&&(c.substr(a,1)==="a"?(r="a",a+=1):(r=null,m&&h('"a"')),r=r!==null?r:null);if(r!==
null){if(c.substr(a,1)==="S"){var i="S";a+=1}else i=null,m&&h('"S"');i===null&&(c.substr(a,1)==="s"?(i="s",a+=1):(i=null,m&&h('"s"')),i=i!==null?i:null);if(i!==null){for(var g=[],C=q();C!==null;)g.push(C),C=q();g!==null?(C=U(),C!==null?r=[r,i,g,C]:(r=null,a=k)):(r=null,a=k)}else r=null,a=k}else r=null,a=k;k=r!==null?r:"";if(k!==null){r=[];for(i=q();i!==null;)r.push(i),i=q();if(r!==null)if(c.substr(a,1)===")"?(i=")",a+=1):(i=null,m&&h('")"')),i!==null){g=[];for(C=q();C!==null;)g.push(C),C=q();g!==
null?d=[d,w,t,v,z,k,r,i,g]:(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f;f=d!==null?d[5].length!=0?{token:"aliased_expression",expression:d[3],alias:d[5][3]}:d[3]:null;f===null&&(f=null,a=j);if(f!==null)j=f;else{f=j=a;d=[];for(w=q();w!==null;)d.push(w),w=q();if(d!==null)if(w=U(),w!==null){t=[];for(v=q();v!==null;)t.push(v),v=q();t!==null?d=[d,w,t]:(d=null,a=f)}else d=null,a=f;else d=null,a=f;f=d!==null?
d[1]:null;f===null&&(f=null,a=j);j=f!==null?f:null}}}(m=e)&&j===null&&h("[19] GroupCondition");A[b]={nextPos:a,result:j};return j}function ea(){var b="HavingClause@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a;if(c.substr(a,6)==="HAVING"){var f="HAVING";a+=6}else f=null,m&&h('"HAVING"');if(f!==null){var d=Ba();if(d!==null)for(var w=[];d!==null;)w.push(d),d=Ba();else w=null;w!==null?f=[f,w]:(f=null,a=j)}else f=null,a=j;(m=e)&&f===null&&h("[20] HavingClause");A[b]={nextPos:a,result:f};
return f}function na(){var b="OrderClause@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a,f=a;if(c.substr(a,1)==="O"){var d="O";a+=1}else d=null,m&&h('"O"');d===null&&(c.substr(a,1)==="o"?(d="o",a+=1):(d=null,m&&h('"o"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="R"){var w="R";a+=1}else w=null,m&&h('"R"');w===null&&(c.substr(a,1)==="r"?(w="r",a+=1):(w=null,m&&h('"r"')),w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="D"){var t="D";a+=1}else t=null,m&&h('"D"');t===null&&(c.substr(a,
1)==="d"?(t="d",a+=1):(t=null,m&&h('"d"')),t=t!==null?t:null);if(t!==null){if(c.substr(a,1)==="E"){var v="E";a+=1}else v=null,m&&h('"E"');v===null&&(c.substr(a,1)==="e"?(v="e",a+=1):(v=null,m&&h('"e"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="R"){var z="R";a+=1}else z=null,m&&h('"R"');z===null&&(c.substr(a,1)==="r"?(z="r",a+=1):(z=null,m&&h('"r"')),z=z!==null?z:null);if(z!==null){for(var k=[],r=q();r!==null;)k.push(r),r=q();if(k!==null)if(c.substr(a,1)==="B"?(r="B",a+=1):(r=null,m&&h('"B"')),
r===null&&(c.substr(a,1)==="b"?(r="b",a+=1):(r=null,m&&h('"b"')),r=r!==null?r:null),r!==null){if(c.substr(a,1)==="Y"){var i="Y";a+=1}else i=null,m&&h('"Y"');i===null&&(c.substr(a,1)==="y"?(i="y",a+=1):(i=null,m&&h('"y"')),i=i!==null?i:null);if(i!==null){for(var g=[],C=q();C!==null;)g.push(C),C=q();if(g!==null){var n=ja();if(n!==null)for(C=[];n!==null;)C.push(n),n=ja();else C=null;if(C!==null){for(var n=[],o=q();o!==null;)n.push(o),o=q();n!==null?d=[d,w,t,v,z,k,r,i,g,C,n]:(d=null,a=f)}else d=null,
a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?d[9]:null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[22] OrderClause");A[b]={nextPos:a,result:f};return f}function ja(){var b="OrderCondition@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a,f=a;if(c.substr(a,3)==="ASC"){var d="ASC";a+=3}else d=null,m&&h('"ASC"');d===null&&(c.substr(a,4)==="DESC"?(d="DESC",a+=4):(d=null,m&&h('"DESC"')),
d=d!==null?d:null);if(d!==null){for(var w=[],t=q();t!==null;)w.push(t),t=q();if(w!==null)if(t=Ja(),t!==null){for(var v=[],z=q();z!==null;)v.push(z),z=q();v!==null?d=[d,w,t,v]:(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;f=d!==null?{direction:d[0],expression:d[2]}:null;f===null&&(f=null,a=j);if(f!==null)j=f;else{f=j=a;d=Ba();d===null&&(d=U(),d=d!==null?d:null);if(d!==null){w=[];for(t=q();t!==null;)w.push(t),t=q();w!==null?d=[d,w]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a){a.token===
"var"&&(a={token:"expression",expressionType:"atomic",primaryexpression:"var",value:a});return{direction:"ASC",expression:a}}(d[0]):null;f===null&&(f=null,a=j);j=f!==null?f:null}(m=e)&&j===null&&h("[23] OrderCondition");A[b]={nextPos:a,result:j};return j}function xa(){var c="LimitOffsetClauses@"+a,b=A[c];if(b)return a=b.nextPos,b.result;b=m;m=!1;var e=a,f=a,d=Za();if(d!==null){var w=$a(),w=w!==null?w:"";w!==null?d=[d,w]:(d=null,a=f)}else d=null,a=f;d!==null?f=d:(f=a,d=$a(),d!==null?(w=Za(),w=w!==
null?w:"",w!==null?d=[d,w]:(d=null,a=f)):(d=null,a=f),f=d!==null?d:null);f=f!==null?function(a){for(var c={},b=0;b<a.length;b++){var d=a[b];if(d.limit!=null)c.limit=d.limit;else if(d.offset!=null)c.offset=d.offset}return c}(f):null;f===null&&(f=null,a=e);(m=b)&&f===null&&h("[24] LimitOffsetClauses");A[c]={nextPos:a,result:f};return f}function Za(){var b="LimitClause@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a,f=a;if(c.substr(a,1)==="L"){var d="L";a+=1}else d=null,m&&h('"L"');d===
null&&(c.substr(a,1)==="l"?(d="l",a+=1):(d=null,m&&h('"l"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="I"){var w="I";a+=1}else w=null,m&&h('"I"');w===null&&(c.substr(a,1)==="i"?(w="i",a+=1):(w=null,m&&h('"i"')),w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="M"){var t="M";a+=1}else t=null,m&&h('"M"');t===null&&(c.substr(a,1)==="m"?(t="m",a+=1):(t=null,m&&h('"m"')),t=t!==null?t:null);if(t!==null){if(c.substr(a,1)==="I"){var v="I";a+=1}else v=null,m&&h('"I"');v===null&&(c.substr(a,1)===
"i"?(v="i",a+=1):(v=null,m&&h('"i"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="T"){var z="T";a+=1}else z=null,m&&h('"T"');z===null&&(c.substr(a,1)==="t"?(z="t",a+=1):(z=null,m&&h('"t"')),z=z!==null?z:null);if(z!==null){for(var k=[],r=q();r!==null;)k.push(r),r=q();if(k!==null)if(r=fa(),r!==null){for(var i=[],g=q();g!==null;)i.push(g),g=q();i!==null?d=[d,w,t,v,z,k,r,i]:(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,
a=f;f=d!==null?{limit:parseInt(d[6].value)}:null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[25] LimitClause");A[b]={nextPos:a,result:f};return f}function $a(){var b="OffsetClause@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a,f=a;if(c.substr(a,1)==="O"){var d="O";a+=1}else d=null,m&&h('"O"');d===null&&(c.substr(a,1)==="o"?(d="o",a+=1):(d=null,m&&h('"o"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="F"){var w="F";a+=1}else w=null,m&&h('"F"');w===null&&(c.substr(a,1)==="f"?(w=
"f",a+=1):(w=null,m&&h('"f"')),w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="F"){var t="F";a+=1}else t=null,m&&h('"F"');t===null&&(c.substr(a,1)==="f"?(t="f",a+=1):(t=null,m&&h('"f"')),t=t!==null?t:null);if(t!==null){if(c.substr(a,1)==="S"){var v="S";a+=1}else v=null,m&&h('"S"');v===null&&(c.substr(a,1)==="s"?(v="s",a+=1):(v=null,m&&h('"s"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="E"){var z="E";a+=1}else z=null,m&&h('"E"');z===null&&(c.substr(a,1)==="e"?(z="e",a+=1):(z=null,m&&
h('"e"')),z=z!==null?z:null);if(z!==null){if(c.substr(a,1)==="T"){var k="T";a+=1}else k=null,m&&h('"T"');k===null&&(c.substr(a,1)==="t"?(k="t",a+=1):(k=null,m&&h('"t"')),k=k!==null?k:null);if(k!==null){for(var r=[],i=q();i!==null;)r.push(i),i=q();if(r!==null)if(i=fa(),i!==null){for(var g=[],C=q();C!==null;)g.push(C),C=q();g!==null?d=[d,w,t,v,z,k,r,i,g]:(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==
null?{offset:parseInt(d[7].value)}:null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[26] OffsetClause");A[b]={nextPos:a,result:f};return f}function za(){var b="BindingsClause@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a;if(c.substr(a,8)==="BINDINGS"){var f="BINDINGS";a+=8}else f=null,m&&h('"BINDINGS"');if(f!==null){for(var d=[],w=U();w!==null;)d.push(w),w=U();if(d!==null)if(c.substr(a,1)==="{"?(w="{",a+=1):(w=null,m&&h('"{"')),w!==null){var t=[],v=a;if(c.substr(a,1)==="("){var z="(";
a+=1}else z=null,m&&h('"("');if(z!==null){var k=ya();if(k!==null)for(var r=[];k!==null;)r.push(k),k=ya();else r=null;r!==null?(c.substr(a,1)===")"?(k=")",a+=1):(k=null,m&&h('")"')),k!==null?z=[z,r,k]:(z=null,a=v)):(z=null,a=v)}else z=null,a=v;z!==null?v=z:(v=la(),v=v!==null?v:null);for(;v!==null;){t.push(v);v=a;c.substr(a,1)==="("?(z="(",a+=1):(z=null,m&&h('"("'));if(z!==null){k=ya();if(k!==null)for(r=[];k!==null;)r.push(k),k=ya();else r=null;r!==null?(c.substr(a,1)===")"?(k=")",a+=1):(k=null,m&&
h('")"')),k!==null?z=[z,r,k]:(z=null,a=v)):(z=null,a=v)}else z=null,a=v;z!==null?v=z:(v=la(),v=v!==null?v:null)}t!==null?(c.substr(a,1)==="}"?(v="}",a+=1):(v=null,m&&h('"}"')),v!==null?f=[f,d,w,t,v]:(f=null,a=j)):(f=null,a=j)}else f=null,a=j;else f=null,a=j}else f=null,a=j;j=f!==null?f:"";(m=e)&&j===null&&h("[27] BindingsClause");A[b]={nextPos:a,result:j};return j}function ya(){var b="BindingValue@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=V();j===null&&(j=Ka(),j===null&&(j=La(),j===
null&&(j=Ma(),j===null&&(c.substr(a,5)==="UNDEF"?(j="UNDEF",a+=5):(j=null,m&&h('"UNDEF"')),j=j!==null?j:null))));(m=e)&&j===null&&h("[28] BindingValue");A[b]={nextPos:a,result:j};return j}function bb(){var b="Update@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a,f=a,d=o();if(d!==null){for(var w=[],t=q();t!==null;)w.push(t),t=q();if(w!==null)if(t=Ab(),t!==null){for(var v=a,z=[],k=q();k!==null;)z.push(k),k=q();if(z!==null)if(c.substr(a,1)===";"?(k=";",a+=1):(k=null,m&&h('";"')),k!==null){for(var r=
[],i=q();i!==null;)r.push(i),i=q();r!==null?(i=bb(),i=i!==null?i:"",i!==null?z=[z,k,r,i]:(z=null,a=v)):(z=null,a=v)}else z=null,a=v;else z=null,a=v;v=z!==null?z:"";v!==null?d=[d,w,t,v]:(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;f=d!==null?function(a,c,b){var d={token:"query",kind:"update"};d.prologue=a;a=[c];b.length!=null&&b[3]!=null&&b[3].units!=null&&(a=a.concat(b[3].units));d.units=a;return d}(d[0],d[2],d[3]):null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[30] Update");A[b]=
{nextPos:a,result:f};return f}function Ab(){var c="Update1@"+a,b=A[c];if(b)return a=b.nextPos,b.result;b=m;m=!1;var e=Bb();e===null&&(e=yb(),e===null&&(e=zb(),e===null&&(e=Cb(),e===null&&(e=Db(),e===null&&(e=Eb(),e===null&&(e=Fb(),e===null&&(e=Ib(),e=e!==null?e:null)))))));(m=b)&&e===null&&h("[31] Update1");A[c]={nextPos:a,result:e};return e}function Bb(){var b="Load@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a,f=a;if(c.substr(a,1)==="L"){var d="L";a+=1}else d=null,m&&h('"L"');d===
null&&(c.substr(a,1)==="l"?(d="l",a+=1):(d=null,m&&h('"l"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="O"){var w="O";a+=1}else w=null,m&&h('"O"');w===null&&(c.substr(a,1)==="o"?(w="o",a+=1):(w=null,m&&h('"o"')),w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="A"){var t="A";a+=1}else t=null,m&&h('"A"');t===null&&(c.substr(a,1)==="a"?(t="a",a+=1):(t=null,m&&h('"a"')),t=t!==null?t:null);if(t!==null){if(c.substr(a,1)==="D"){var v="D";a+=1}else v=null,m&&h('"D"');v===null&&(c.substr(a,1)===
"d"?(v="d",a+=1):(v=null,m&&h('"d"')),v=v!==null?v:null);if(v!==null){for(var z=[],k=q();k!==null;)z.push(k),k=q();if(z!==null)if(k=V(),k!==null){for(var i=[],g=q();g!==null;)i.push(g),g=q();if(i!==null){g=a;if(c.substr(a,1)==="I"){var I="I";a+=1}else I=null,m&&h('"I"');I===null&&(c.substr(a,1)==="i"?(I="i",a+=1):(I=null,m&&h('"i"')),I=I!==null?I:null);if(I!==null){if(c.substr(a,1)==="N"){var C="N";a+=1}else C=null,m&&h('"N"');C===null&&(c.substr(a,1)==="n"?(C="n",a+=1):(C=null,m&&h('"n"')),C=C!==
null?C:null);if(C!==null){if(c.substr(a,1)==="T"){var n="T";a+=1}else n=null,m&&h('"T"');n===null&&(c.substr(a,1)==="t"?(n="t",a+=1):(n=null,m&&h('"t"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="O"){var o="O";a+=1}else o=null,m&&h('"O"');o===null&&(c.substr(a,1)==="o"?(o="o",a+=1):(o=null,m&&h('"o"')),o=o!==null?o:null);if(o!==null){for(var s=[],u=q();u!==null;)s.push(u),u=q();s!==null?(u=Na(),u!==null?I=[I,C,n,o,s,u]:(I=null,a=g)):(I=null,a=g)}else I=null,a=g}else I=null,a=g}else I=null,
a=g}else I=null,a=g;g=I!==null?I:"";g!==null?d=[d,w,t,v,z,k,i,g]:(d=null,a=f)}else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?function(a,c){var b={kind:"load",token:"executableunit"};b.sourceGraph=a;b.destinyGraph=c[5];return b}(d[5],d[7]):null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[32] Load");A[b]={nextPos:a,result:f};return f}function yb(){var b="Clear@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a,f=a;
if(c.substr(a,1)==="C"){var d="C";a+=1}else d=null,m&&h('"C"');d===null&&(c.substr(a,1)==="c"?(d="c",a+=1):(d=null,m&&h('"c"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="L"){var w="L";a+=1}else w=null,m&&h('"L"');w===null&&(c.substr(a,1)==="l"?(w="l",a+=1):(w=null,m&&h('"l"')),w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="E"){var t="E";a+=1}else t=null,m&&h('"E"');t===null&&(c.substr(a,1)==="e"?(t="e",a+=1):(t=null,m&&h('"e"')),t=t!==null?t:null);if(t!==null){if(c.substr(a,1)==="A"){var v=
"A";a+=1}else v=null,m&&h('"A"');v===null&&(c.substr(a,1)==="a"?(v="a",a+=1):(v=null,m&&h('"a"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="R"){var z="R";a+=1}else z=null,m&&h('"R"');z===null&&(c.substr(a,1)==="r"?(z="r",a+=1):(z=null,m&&h('"r"')),z=z!==null?z:null);if(z!==null){for(var k=[],i=q();i!==null;)k.push(i),i=q();if(k!==null){i=a;if(c.substr(a,1)==="S"){var g="S";a+=1}else g=null,m&&h('"S"');g===null&&(c.substr(a,1)==="s"?(g="s",a+=1):(g=null,m&&h('"s"')),g=g!==null?g:null);if(g!==
null){if(c.substr(a,1)==="I"){var I="I";a+=1}else I=null,m&&h('"I"');I===null&&(c.substr(a,1)==="i"?(I="i",a+=1):(I=null,m&&h('"i"')),I=I!==null?I:null);if(I!==null){if(c.substr(a,1)==="L"){var C="L";a+=1}else C=null,m&&h('"L"');C===null&&(c.substr(a,1)==="l"?(C="l",a+=1):(C=null,m&&h('"l"')),C=C!==null?C:null);if(C!==null){if(c.substr(a,1)==="E"){var n="E";a+=1}else n=null,m&&h('"E"');n===null&&(c.substr(a,1)==="e"?(n="e",a+=1):(n=null,m&&h('"e"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)===
"N"){var o="N";a+=1}else o=null,m&&h('"N"');o===null&&(c.substr(a,1)==="n"?(o="n",a+=1):(o=null,m&&h('"n"')),o=o!==null?o:null);if(o!==null){if(c.substr(a,1)==="T"){var s="T";a+=1}else s=null,m&&h('"T"');s===null&&(c.substr(a,1)==="t"?(s="t",a+=1):(s=null,m&&h('"t"')),s=s!==null?s:null);s!==null?g=[g,I,C,n,o,s]:(g=null,a=i)}else g=null,a=i}else g=null,a=i}else g=null,a=i}else g=null,a=i}else g=null,a=i;i=g!==null?g:"";if(i!==null){g=[];for(I=q();I!==null;)g.push(I),I=q();g!==null?(I=gb(),I!==null?
d=[d,w,t,v,z,k,i,g,I]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?function(a){var c={kind:"clear",token:"executableunit"};c.destinyGraph=a;return c}(d[8]):null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[33] Clear");A[b]={nextPos:a,result:f};return f}function zb(){var b="Drop@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a,f=a;if(c.substr(a,1)==="D"){var d="D";a+=1}else d=null,m&&
h('"D"');d===null&&(c.substr(a,1)==="d"?(d="d",a+=1):(d=null,m&&h('"d"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="R"){var w="R";a+=1}else w=null,m&&h('"R"');w===null&&(c.substr(a,1)==="r"?(w="r",a+=1):(w=null,m&&h('"r"')),w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="O"){var t="O";a+=1}else t=null,m&&h('"O"');t===null&&(c.substr(a,1)==="o"?(t="o",a+=1):(t=null,m&&h('"o"')),t=t!==null?t:null);if(t!==null){if(c.substr(a,1)==="P"){var v="P";a+=1}else v=null,m&&h('"P"');v===null&&(c.substr(a,
1)==="p"?(v="p",a+=1):(v=null,m&&h('"p"')),v=v!==null?v:null);if(v!==null){for(var z=[],k=q();k!==null;)z.push(k),k=q();if(z!==null){k=a;if(c.substr(a,1)==="S"){var i="S";a+=1}else i=null,m&&h('"S"');i===null&&(c.substr(a,1)==="s"?(i="s",a+=1):(i=null,m&&h('"s"')),i=i!==null?i:null);if(i!==null){if(c.substr(a,1)==="I"){var g="I";a+=1}else g=null,m&&h('"I"');g===null&&(c.substr(a,1)==="i"?(g="i",a+=1):(g=null,m&&h('"i"')),g=g!==null?g:null);if(g!==null){if(c.substr(a,1)==="L"){var I="L";a+=1}else I=
null,m&&h('"L"');I===null&&(c.substr(a,1)==="l"?(I="l",a+=1):(I=null,m&&h('"l"')),I=I!==null?I:null);if(I!==null){if(c.substr(a,1)==="E"){var n="E";a+=1}else n=null,m&&h('"E"');n===null&&(c.substr(a,1)==="e"?(n="e",a+=1):(n=null,m&&h('"e"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="N"){var o="N";a+=1}else o=null,m&&h('"N"');o===null&&(c.substr(a,1)==="n"?(o="n",a+=1):(o=null,m&&h('"n"')),o=o!==null?o:null);if(o!==null){if(c.substr(a,1)==="T"){var s="T";a+=1}else s=null,m&&h('"T"');s===
null&&(c.substr(a,1)==="t"?(s="t",a+=1):(s=null,m&&h('"t"')),s=s!==null?s:null);s!==null?i=[i,g,I,n,o,s]:(i=null,a=k)}else i=null,a=k}else i=null,a=k}else i=null,a=k}else i=null,a=k}else i=null,a=k;k=i!==null?i:"";if(k!==null){i=[];for(g=q();g!==null;)i.push(g),g=q();i!==null?(g=gb(),g!==null?d=[d,w,t,v,z,k,i,g]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?function(a){var c={kind:"drop",token:"executableunit"};
c.destinyGraph=a;return c}(d[7]):null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[34] Drop");A[b]={nextPos:a,result:f};return f}function Cb(){var b="Create@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a,f=a;if(c.substr(a,1)==="C"){var d="C";a+=1}else d=null,m&&h('"C"');d===null&&(c.substr(a,1)==="c"?(d="c",a+=1):(d=null,m&&h('"c"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="R"){var w="R";a+=1}else w=null,m&&h('"R"');w===null&&(c.substr(a,1)==="r"?(w="r",a+=1):(w=null,m&&h('"r"')),
w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="E"){var t="E";a+=1}else t=null,m&&h('"E"');t===null&&(c.substr(a,1)==="e"?(t="e",a+=1):(t=null,m&&h('"e"')),t=t!==null?t:null);if(t!==null){if(c.substr(a,1)==="A"){var v="A";a+=1}else v=null,m&&h('"A"');v===null&&(c.substr(a,1)==="a"?(v="a",a+=1):(v=null,m&&h('"a"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="T"){var z="T";a+=1}else z=null,m&&h('"T"');z===null&&(c.substr(a,1)==="t"?(z="t",a+=1):(z=null,m&&h('"t"')),z=z!==null?z:null);if(z!==
null){if(c.substr(a,1)==="E"){var k="E";a+=1}else k=null,m&&h('"E"');k===null&&(c.substr(a,1)==="e"?(k="e",a+=1):(k=null,m&&h('"e"')),k=k!==null?k:null);if(k!==null){for(var i=[],g=q();g!==null;)i.push(g),g=q();if(i!==null){g=a;if(c.substr(a,1)==="S"){var I="S";a+=1}else I=null,m&&h('"S"');I===null&&(c.substr(a,1)==="s"?(I="s",a+=1):(I=null,m&&h('"s"')),I=I!==null?I:null);if(I!==null){if(c.substr(a,1)==="I"){var n="I";a+=1}else n=null,m&&h('"I"');n===null&&(c.substr(a,1)==="i"?(n="i",a+=1):(n=null,
m&&h('"i"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="L"){var o="L";a+=1}else o=null,m&&h('"L"');o===null&&(c.substr(a,1)==="l"?(o="l",a+=1):(o=null,m&&h('"l"')),o=o!==null?o:null);if(o!==null){if(c.substr(a,1)==="E"){var s="E";a+=1}else s=null,m&&h('"E"');s===null&&(c.substr(a,1)==="e"?(s="e",a+=1):(s=null,m&&h('"e"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="N"){var B="N";a+=1}else B=null,m&&h('"N"');B===null&&(c.substr(a,1)==="n"?(B="n",a+=1):(B=null,m&&h('"n"')),B=B!==null?
B:null);if(B!==null){if(c.substr(a,1)==="T"){var u="T";a+=1}else u=null,m&&h('"T"');u===null&&(c.substr(a,1)==="t"?(u="t",a+=1):(u=null,m&&h('"t"')),u=u!==null?u:null);u!==null?I=[I,n,o,s,B,u]:(I=null,a=g)}else I=null,a=g}else I=null,a=g}else I=null,a=g}else I=null,a=g}else I=null,a=g;g=I!==null?I:"";if(g!==null){I=[];for(n=q();n!==null;)I.push(n),n=q();I!==null?(n=Na(),n!==null?d=[d,w,t,v,z,k,i,g,I,n]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=
null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?function(a){var c={kind:"create",token:"executableunit"};c.destinyGraph=a;return c}(d[9]):null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[35] Create");A[b]={nextPos:a,result:f};return f}function Db(){var b="InsertData@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a,f=a;if(c.substr(a,1)==="I"){var d="I";a+=1}else d=null,m&&h('"I"');d===null&&(c.substr(a,1)==="i"?(d="i",a+=1):(d=null,m&&h('"i"')),d=d!==null?d:null);if(d!==
null){if(c.substr(a,1)==="N"){var w="N";a+=1}else w=null,m&&h('"N"');w===null&&(c.substr(a,1)==="n"?(w="n",a+=1):(w=null,m&&h('"n"')),w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="S"){var t="S";a+=1}else t=null,m&&h('"S"');t===null&&(c.substr(a,1)==="s"?(t="s",a+=1):(t=null,m&&h('"s"')),t=t!==null?t:null);if(t!==null){if(c.substr(a,1)==="E"){var v="E";a+=1}else v=null,m&&h('"E"');v===null&&(c.substr(a,1)==="e"?(v="e",a+=1):(v=null,m&&h('"e"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)===
"R"){var z="R";a+=1}else z=null,m&&h('"R"');z===null&&(c.substr(a,1)==="r"?(z="r",a+=1):(z=null,m&&h('"r"')),z=z!==null?z:null);if(z!==null){if(c.substr(a,1)==="T"){var k="T";a+=1}else k=null,m&&h('"T"');k===null&&(c.substr(a,1)==="t"?(k="t",a+=1):(k=null,m&&h('"t"')),k=k!==null?k:null);if(k!==null){for(var i=[],g=q();g!==null;)i.push(g),g=q();if(i!==null)if(c.substr(a,1)==="D"?(g="D",a+=1):(g=null,m&&h('"D"')),g===null&&(c.substr(a,1)==="d"?(g="d",a+=1):(g=null,m&&h('"d"')),g=g!==null?g:null),g!==
null){if(c.substr(a,1)==="A"){var I="A";a+=1}else I=null,m&&h('"A"');I===null&&(c.substr(a,1)==="a"?(I="a",a+=1):(I=null,m&&h('"a"')),I=I!==null?I:null);if(I!==null){if(c.substr(a,1)==="T"){var n="T";a+=1}else n=null,m&&h('"T"');n===null&&(c.substr(a,1)==="t"?(n="t",a+=1):(n=null,m&&h('"t"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="A"){var o="A";a+=1}else o=null,m&&h('"A"');o===null&&(c.substr(a,1)==="a"?(o="a",a+=1):(o=null,m&&h('"a"')),o=o!==null?o:null);if(o!==null){for(var s=[],u=
q();u!==null;)s.push(u),u=q();s!==null?(u=hb(),u!==null?d=[d,w,t,v,z,k,i,g,I,n,o,s,u]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?function(a){var c={kind:"insertdata",token:"executableunit"};c.quads=a;return c}(d[12]):null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[36] InsertData");A[b]={nextPos:a,result:f};return f}function Eb(){var b=
"DeleteData@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a,f=a;if(c.substr(a,1)==="D"){var d="D";a+=1}else d=null,m&&h('"D"');d===null&&(c.substr(a,1)==="d"?(d="d",a+=1):(d=null,m&&h('"d"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="E"){var w="E";a+=1}else w=null,m&&h('"E"');w===null&&(c.substr(a,1)==="e"?(w="e",a+=1):(w=null,m&&h('"e"')),w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="L"){var t="L";a+=1}else t=null,m&&h('"L"');t===null&&(c.substr(a,1)==="l"?(t="l",a+=
1):(t=null,m&&h('"l"')),t=t!==null?t:null);if(t!==null){if(c.substr(a,1)==="E"){var v="E";a+=1}else v=null,m&&h('"E"');v===null&&(c.substr(a,1)==="e"?(v="e",a+=1):(v=null,m&&h('"e"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="T"){var z="T";a+=1}else z=null,m&&h('"T"');z===null&&(c.substr(a,1)==="t"?(z="t",a+=1):(z=null,m&&h('"t"')),z=z!==null?z:null);if(z!==null){if(c.substr(a,1)==="E"){var k="E";a+=1}else k=null,m&&h('"E"');k===null&&(c.substr(a,1)==="e"?(k="e",a+=1):(k=null,m&&h('"e"')),
k=k!==null?k:null);if(k!==null){for(var i=[],g=q();g!==null;)i.push(g),g=q();if(i!==null)if(c.substr(a,1)==="D"?(g="D",a+=1):(g=null,m&&h('"D"')),g===null&&(c.substr(a,1)==="d"?(g="d",a+=1):(g=null,m&&h('"d"')),g=g!==null?g:null),g!==null){if(c.substr(a,1)==="A"){var n="A";a+=1}else n=null,m&&h('"A"');n===null&&(c.substr(a,1)==="a"?(n="a",a+=1):(n=null,m&&h('"a"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="T"){var C="T";a+=1}else C=null,m&&h('"T"');C===null&&(c.substr(a,1)==="t"?(C="t",
a+=1):(C=null,m&&h('"t"')),C=C!==null?C:null);if(C!==null){if(c.substr(a,1)==="A"){var o="A";a+=1}else o=null,m&&h('"A"');o===null&&(c.substr(a,1)==="a"?(o="a",a+=1):(o=null,m&&h('"a"')),o=o!==null?o:null);if(o!==null){var s=hb();s!==null?d=[d,w,t,v,z,k,i,g,n,C,o,s]:(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?function(a){var c={kind:"deletedata",
token:"executableunit"};c.quads=a;return c}(d[11]):null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[37] DeleteData");A[b]={nextPos:a,result:f};return f}function Fb(){var b="DeleteWhere@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a,f=a;if(c.substr(a,1)==="D"){var d="D";a+=1}else d=null,m&&h('"D"');d===null&&(c.substr(a,1)==="d"?(d="d",a+=1):(d=null,m&&h('"d"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="E"){var w="E";a+=1}else w=null,m&&h('"E"');w===null&&(c.substr(a,1)==="e"?
(w="e",a+=1):(w=null,m&&h('"e"')),w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="L"){var t="L";a+=1}else t=null,m&&h('"L"');t===null&&(c.substr(a,1)==="l"?(t="l",a+=1):(t=null,m&&h('"l"')),t=t!==null?t:null);if(t!==null){if(c.substr(a,1)==="E"){var v="E";a+=1}else v=null,m&&h('"E"');v===null&&(c.substr(a,1)==="e"?(v="e",a+=1):(v=null,m&&h('"e"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="T"){var z="T";a+=1}else z=null,m&&h('"T"');z===null&&(c.substr(a,1)==="t"?(z="t",a+=1):(z=null,
m&&h('"t"')),z=z!==null?z:null);if(z!==null){if(c.substr(a,1)==="E"){var k="E";a+=1}else k=null,m&&h('"E"');k===null&&(c.substr(a,1)==="e"?(k="e",a+=1):(k=null,m&&h('"e"')),k=k!==null?k:null);if(k!==null){for(var i=[],g=q();g!==null;)i.push(g),g=q();if(i!==null)if(c.substr(a,1)==="W"?(g="W",a+=1):(g=null,m&&h('"W"')),g===null&&(c.substr(a,1)==="w"?(g="w",a+=1):(g=null,m&&h('"w"')),g=g!==null?g:null),g!==null){if(c.substr(a,1)==="H"){var n="H";a+=1}else n=null,m&&h('"H"');n===null&&(c.substr(a,1)===
"h"?(n="h",a+=1):(n=null,m&&h('"h"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="E"){var o="E";a+=1}else o=null,m&&h('"E"');o===null&&(c.substr(a,1)==="e"?(o="e",a+=1):(o=null,m&&h('"e"')),o=o!==null?o:null);if(o!==null){if(c.substr(a,1)==="R"){var s="R";a+=1}else s=null,m&&h('"R"');s===null&&(c.substr(a,1)==="r"?(s="r",a+=1):(s=null,m&&h('"r"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="E"){var u="E";a+=1}else u=null,m&&h('"E"');u===null&&(c.substr(a,1)==="e"?(u="e",a+=1):(u=null,
m&&h('"e"')),u=u!==null?u:null);if(u!==null){for(var B=[],x=q();x!==null;)B.push(x),x=q();B!==null?(x=Z(),x!==null?d=[d,w,t,v,z,k,i,g,n,o,s,u,B,x]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?function(a){var c={kind:"modify"};c.pattern=a;c["with"]=null;c.using=null;for(var b=[],a=a.patterns[0],a=a.triplesContext==null&&
a.patterns!=null?a.patterns[0].triplesContext:a.triplesContext,d=0;d<a.length;d++){var f={},h=a[d];f.subject=h.subject;f.predicate=h.predicate;f.object=h.object;f.graph=h.graph;b.push(f)}c["delete"]=b;return c}(d[13]):null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[38] DeleteWhere");A[b]={nextPos:a,result:f};return f}function Ib(){var b="Modify@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a,f=a,d=a;if(c.substr(a,1)==="W"){var w="W";a+=1}else w=null,m&&h('"W"');w===null&&(c.substr(a,
1)==="w"?(w="w",a+=1):(w=null,m&&h('"w"')),w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="I"){var t="I";a+=1}else t=null,m&&h('"I"');t===null&&(c.substr(a,1)==="i"?(t="i",a+=1):(t=null,m&&h('"i"')),t=t!==null?t:null);if(t!==null){if(c.substr(a,1)==="T"){var v="T";a+=1}else v=null,m&&h('"T"');v===null&&(c.substr(a,1)==="t"?(v="t",a+=1):(v=null,m&&h('"t"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="H"){var z="H";a+=1}else z=null,m&&h('"H"');z===null&&(c.substr(a,1)==="h"?(z="h",a+=1):
(z=null,m&&h('"h"')),z=z!==null?z:null);if(z!==null){for(var k=[],i=q();i!==null;)k.push(i),i=q();k!==null?(i=V(),i!==null?w=[w,t,v,z,k,i]:(w=null,a=d)):(w=null,a=d)}else w=null,a=d}else w=null,a=d}else w=null,a=d}else w=null,a=d;d=w!==null?w:"";if(d!==null){w=[];for(t=q();t!==null;)w.push(t),t=q();if(w!==null){t=a;v=Jb();if(v!==null){z=[];for(k=q();k!==null;)z.push(k),k=q();z!==null?(k=ib(),k=k!==null?k:"",k!==null?v=[v,z,k]:(v=null,a=t)):(v=null,a=t)}else v=null,a=t;v!==null?t=v:(t=ib(),t=t!==null?
t:null);if(t!==null){v=[];for(z=q();z!==null;)v.push(z),z=q();if(v!==null){z=[];for(k=jb();k!==null;)z.push(k),k=jb();if(z!==null){k=[];for(i=q();i!==null;)k.push(i),i=q();if(k!==null)if(c.substr(a,1)==="W"?(i="W",a+=1):(i=null,m&&h('"W"')),i===null&&(c.substr(a,1)==="w"?(i="w",a+=1):(i=null,m&&h('"w"')),i=i!==null?i:null),i!==null){if(c.substr(a,1)==="H"){var g="H";a+=1}else g=null,m&&h('"H"');g===null&&(c.substr(a,1)==="h"?(g="h",a+=1):(g=null,m&&h('"h"')),g=g!==null?g:null);if(g!==null){if(c.substr(a,
1)==="E"){var n="E";a+=1}else n=null,m&&h('"E"');n===null&&(c.substr(a,1)==="e"?(n="e",a+=1):(n=null,m&&h('"e"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="R"){var o="R";a+=1}else o=null,m&&h('"R"');o===null&&(c.substr(a,1)==="r"?(o="r",a+=1):(o=null,m&&h('"r"')),o=o!==null?o:null);if(o!==null){if(c.substr(a,1)==="E"){var s="E";a+=1}else s=null,m&&h('"E"');s===null&&(c.substr(a,1)==="e"?(s="e",a+=1):(s=null,m&&h('"e"')),s=s!==null?s:null);if(s!==null){for(var u=[],B=q();B!==null;)u.push(B),
B=q();if(u!==null)if(B=Z(),B!==null){for(var x=[],y=q();y!==null;)x.push(y),y=q();x!==null?d=[d,w,t,v,z,k,i,g,n,o,s,u,B,x]:(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?function(a,c,b,d){var f={kind:"modify"};f["with"]=a!=""?a[5]:null;c.length===3&&c[2]===""?(f["delete"]=c[0],f.insert=null):c.length===3&&c[0].length!=
null&&c[1].length!=null&&c[2].length!=null?(f["delete"]=c[0],f.insert=c[2]):(f.insert=c,f["delete"]=null);b!=""&&(f.using=b);f.pattern=d;return f}(d[0],d[2],d[4],d[12]):null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[39] Modify");A[b]={nextPos:a,result:f};return f}function Jb(){var b="DeleteClause@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a,f=a;if(c.substr(a,1)==="D"){var d="D";a+=1}else d=null,m&&h('"D"');d===null&&(c.substr(a,1)==="d"?(d="d",a+=1):(d=null,m&&h('"d"')),d=d!==null?
d:null);if(d!==null){if(c.substr(a,1)==="E"){var w="E";a+=1}else w=null,m&&h('"E"');w===null&&(c.substr(a,1)==="e"?(w="e",a+=1):(w=null,m&&h('"e"')),w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="L"){var t="L";a+=1}else t=null,m&&h('"L"');t===null&&(c.substr(a,1)==="l"?(t="l",a+=1):(t=null,m&&h('"l"')),t=t!==null?t:null);if(t!==null){if(c.substr(a,1)==="E"){var v="E";a+=1}else v=null,m&&h('"E"');v===null&&(c.substr(a,1)==="e"?(v="e",a+=1):(v=null,m&&h('"e"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,
1)==="T"){var k="T";a+=1}else k=null,m&&h('"T"');k===null&&(c.substr(a,1)==="t"?(k="t",a+=1):(k=null,m&&h('"t"')),k=k!==null?k:null);if(k!==null){if(c.substr(a,1)==="E"){var i="E";a+=1}else i=null,m&&h('"E"');i===null&&(c.substr(a,1)==="e"?(i="e",a+=1):(i=null,m&&h('"e"')),i=i!==null?i:null);if(i!==null){var g=kb();g!==null?d=[d,w,t,v,k,i,g]:(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?d[6]:null;f===null&&(f=null,a=j);(m=e)&&
f===null&&h("[40] DeleteClause");A[b]={nextPos:a,result:f};return f}function ib(){var b="InsertClause@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a,f=a;if(c.substr(a,1)==="I"){var d="I";a+=1}else d=null,m&&h('"I"');d===null&&(c.substr(a,1)==="i"?(d="i",a+=1):(d=null,m&&h('"i"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="N"){var w="N";a+=1}else w=null,m&&h('"N"');w===null&&(c.substr(a,1)==="n"?(w="n",a+=1):(w=null,m&&h('"n"')),w=w!==null?w:null);if(w!==null){if(c.substr(a,
1)==="S"){var t="S";a+=1}else t=null,m&&h('"S"');t===null&&(c.substr(a,1)==="s"?(t="s",a+=1):(t=null,m&&h('"s"')),t=t!==null?t:null);if(t!==null){if(c.substr(a,1)==="E"){var v="E";a+=1}else v=null,m&&h('"E"');v===null&&(c.substr(a,1)==="e"?(v="e",a+=1):(v=null,m&&h('"e"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="R"){var k="R";a+=1}else k=null,m&&h('"R"');k===null&&(c.substr(a,1)==="r"?(k="r",a+=1):(k=null,m&&h('"r"')),k=k!==null?k:null);if(k!==null){if(c.substr(a,1)==="T"){var i="T";a+=
1}else i=null,m&&h('"T"');i===null&&(c.substr(a,1)==="t"?(i="t",a+=1):(i=null,m&&h('"t"')),i=i!==null?i:null);if(i!==null){var g=kb();g!==null?d=[d,w,t,v,k,i,g]:(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?d[6]:null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[41] InsertClause");A[b]={nextPos:a,result:f};return f}function jb(){var b="UsingClause@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;for(var j=a,f=a,d=[],w=q();w!==
null;)d.push(w),w=q();if(d!==null)if(c.substr(a,1)==="U"?(w="U",a+=1):(w=null,m&&h('"U"')),w===null&&(c.substr(a,1)==="u"?(w="u",a+=1):(w=null,m&&h('"u"')),w=w!==null?w:null),w!==null){if(c.substr(a,1)==="S"){var t="S";a+=1}else t=null,m&&h('"S"');t===null&&(c.substr(a,1)==="s"?(t="s",a+=1):(t=null,m&&h('"s"')),t=t!==null?t:null);if(t!==null){if(c.substr(a,1)==="I"){var v="I";a+=1}else v=null,m&&h('"I"');v===null&&(c.substr(a,1)==="i"?(v="i",a+=1):(v=null,m&&h('"i"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,
1)==="N"){var k="N";a+=1}else k=null,m&&h('"N"');k===null&&(c.substr(a,1)==="n"?(k="n",a+=1):(k=null,m&&h('"n"')),k=k!==null?k:null);if(k!==null){if(c.substr(a,1)==="G"){var i="G";a+=1}else i=null,m&&h('"G"');i===null&&(c.substr(a,1)==="g"?(i="g",a+=1):(i=null,m&&h('"g"')),i=i!==null?i:null);if(i!==null){for(var g=[],n=q();n!==null;)g.push(n),n=q();if(g!==null){n=V();if(n===null){n=a;if(c.substr(a,1)==="N"){var I="N";a+=1}else I=null,m&&h('"N"');I===null&&(c.substr(a,1)==="n"?(I="n",a+=1):(I=null,
m&&h('"n"')),I=I!==null?I:null);if(I!==null){if(c.substr(a,1)==="A"){var o="A";a+=1}else o=null,m&&h('"A"');o===null&&(c.substr(a,1)==="a"?(o="a",a+=1):(o=null,m&&h('"a"')),o=o!==null?o:null);if(o!==null){if(c.substr(a,1)==="M"){var s="M";a+=1}else s=null,m&&h('"M"');s===null&&(c.substr(a,1)==="m"?(s="m",a+=1):(s=null,m&&h('"m"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="E"){var u="E";a+=1}else u=null,m&&h('"E"');u===null&&(c.substr(a,1)==="e"?(u="e",a+=1):(u=null,m&&h('"e"')),u=u!==null?
u:null);if(u!==null){if(c.substr(a,1)==="D"){var B="D";a+=1}else B=null,m&&h('"D"');B===null&&(c.substr(a,1)==="d"?(B="d",a+=1):(B=null,m&&h('"d"')),B=B!==null?B:null);if(B!==null){for(var x=[],y=q();y!==null;)x.push(y),y=q();x!==null?(y=V(),y!==null?I=[I,o,s,u,B,x,y]:(I=null,a=n)):(I=null,a=n)}else I=null,a=n}else I=null,a=n}else I=null,a=n}else I=null,a=n}else I=null,a=n;n=I!==null?I:null}n!==null?d=[d,w,t,v,k,i,g,n]:(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=
null,a=f}else d=null,a=f;else d=null,a=f;f=d!==null?d[7].length!=null?{kind:"named",uri:d[7][6]}:{kind:"default",uri:d[7]}:null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[42] UsingClause");A[b]={nextPos:a,result:f};return f}function Na(){var b="GraphRef@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a,f=a;if(c.substr(a,1)==="G"){var d="G";a+=1}else d=null,m&&h('"G"');d===null&&(c.substr(a,1)==="g"?(d="g",a+=1):(d=null,m&&h('"g"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="R"){var w=
"R";a+=1}else w=null,m&&h('"R"');w===null&&(c.substr(a,1)==="r"?(w="r",a+=1):(w=null,m&&h('"r"')),w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="A"){var t="A";a+=1}else t=null,m&&h('"A"');t===null&&(c.substr(a,1)==="a"?(t="a",a+=1):(t=null,m&&h('"a"')),t=t!==null?t:null);if(t!==null){if(c.substr(a,1)==="P"){var v="P";a+=1}else v=null,m&&h('"P"');v===null&&(c.substr(a,1)==="p"?(v="p",a+=1):(v=null,m&&h('"p"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="H"){var k="H";a+=1}else k=null,
m&&h('"H"');k===null&&(c.substr(a,1)==="h"?(k="h",a+=1):(k=null,m&&h('"h"')),k=k!==null?k:null);if(k!==null){for(var i=[],g=q();g!==null;)i.push(g),g=q();i!==null?(g=V(),g!==null?d=[d,w,t,v,k,i,g]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?d[6]:null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[43] GraphRef");A[b]={nextPos:a,result:f};return f}function gb(){var b="GraphRefAll@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=
!1;var j=a,f=Na(),f=f!==null?f:null;f===null&&(f=null,a=j);if(f!==null)j=f;else{f=j=a;if(c.substr(a,1)==="D"){var d="D";a+=1}else d=null,m&&h('"D"');d===null&&(c.substr(a,1)==="d"?(d="d",a+=1):(d=null,m&&h('"d"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="E"){var w="E";a+=1}else w=null,m&&h('"E"');w===null&&(c.substr(a,1)==="e"?(w="e",a+=1):(w=null,m&&h('"e"')),w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="F"){var t="F";a+=1}else t=null,m&&h('"F"');t===null&&(c.substr(a,1)==="f"?(t=
"f",a+=1):(t=null,m&&h('"f"')),t=t!==null?t:null);if(t!==null){if(c.substr(a,1)==="A"){var v="A";a+=1}else v=null,m&&h('"A"');v===null&&(c.substr(a,1)==="a"?(v="a",a+=1):(v=null,m&&h('"a"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="U"){var k="U";a+=1}else k=null,m&&h('"U"');k===null&&(c.substr(a,1)==="u"?(k="u",a+=1):(k=null,m&&h('"u"')),k=k!==null?k:null);if(k!==null){if(c.substr(a,1)==="L"){var i="L";a+=1}else i=null,m&&h('"L"');i===null&&(c.substr(a,1)==="l"?(i="l",a+=1):(i=null,m&&
h('"l"')),i=i!==null?i:null);if(i!==null){if(c.substr(a,1)==="T"){var g="T";a+=1}else g=null,m&&h('"T"');g===null&&(c.substr(a,1)==="t"?(g="t",a+=1):(g=null,m&&h('"t"')),g=g!==null?g:null);g!==null?d=[d,w,t,v,k,i,g]:(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?"default":null;f===null&&(f=null,a=j);f!==null?j=f:(f=j=a,c.substr(a,1)==="N"?(d="N",a+=1):(d=null,m&&h('"N"')),d===null&&(c.substr(a,1)==="n"?(d="n",a+=1):(d=null,m&&
h('"n"')),d=d!==null?d:null),d!==null?(c.substr(a,1)==="A"?(w="A",a+=1):(w=null,m&&h('"A"')),w===null&&(c.substr(a,1)==="a"?(w="a",a+=1):(w=null,m&&h('"a"')),w=w!==null?w:null),w!==null?(c.substr(a,1)==="M"?(t="M",a+=1):(t=null,m&&h('"M"')),t===null&&(c.substr(a,1)==="m"?(t="m",a+=1):(t=null,m&&h('"m"')),t=t!==null?t:null),t!==null?(c.substr(a,1)==="E"?(v="E",a+=1):(v=null,m&&h('"E"')),v===null&&(c.substr(a,1)==="e"?(v="e",a+=1):(v=null,m&&h('"e"')),v=v!==null?v:null),v!==null?(c.substr(a,1)==="D"?
(k="D",a+=1):(k=null,m&&h('"D"')),k===null&&(c.substr(a,1)==="d"?(k="d",a+=1):(k=null,m&&h('"d"')),k=k!==null?k:null),k!==null?d=[d,w,t,v,k]:(d=null,a=f)):(d=null,a=f)):(d=null,a=f)):(d=null,a=f)):(d=null,a=f),f=d!==null?"named":null,f===null&&(f=null,a=j),f!==null?j=f:(f=j=a,c.substr(a,1)==="A"?(d="A",a+=1):(d=null,m&&h('"A"')),d===null&&(c.substr(a,1)==="a"?(d="a",a+=1):(d=null,m&&h('"a"')),d=d!==null?d:null),d!==null?(c.substr(a,1)==="L"?(w="L",a+=1):(w=null,m&&h('"L"')),w===null&&(c.substr(a,
1)==="l"?(w="l",a+=1):(w=null,m&&h('"l"')),w=w!==null?w:null),w!==null?(c.substr(a,1)==="L"?(t="L",a+=1):(t=null,m&&h('"L"')),t===null&&(c.substr(a,1)==="l"?(t="l",a+=1):(t=null,m&&h('"l"')),t=t!==null?t:null),t!==null?d=[d,w,t]:(d=null,a=f)):(d=null,a=f)):(d=null,a=f),f=d!==null?"all":null,f===null&&(f=null,a=j),j=f!==null?f:null))}(m=e)&&j===null&&h("[44] GraphRefAll");A[b]={nextPos:a,result:j};return j}function kb(){var b="QuadPattern@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;for(var j=
a,f=a,d=[],w=q();w!==null;)d.push(w),w=q();if(d!==null)if(c.substr(a,1)==="{"?(w="{",a+=1):(w=null,m&&h('"{"')),w!==null){for(var t=[],v=q();v!==null;)t.push(v),v=q();if(t!==null)if(v=lb(),v!==null){for(var k=[],i=q();i!==null;)k.push(i),i=q();if(k!==null)if(c.substr(a,1)==="}"?(i="}",a+=1):(i=null,m&&h('"}"')),i!==null){for(var g=[],n=q();n!==null;)g.push(n),n=q();g!==null?d=[d,w,t,v,k,i,g]:(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=
f;f=d!==null?d[3].quadsContext:null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[45] QuadPattern");A[b]={nextPos:a,result:f};return f}function hb(){var b="QuadData@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;for(var j=a,f=a,d=[],w=q();w!==null;)d.push(w),w=q();if(d!==null)if(c.substr(a,1)==="{"?(w="{",a+=1):(w=null,m&&h('"{"')),w!==null){for(var t=[],v=q();v!==null;)t.push(v),v=q();if(t!==null)if(v=lb(),v!==null){for(var k=[],i=q();i!==null;)k.push(i),i=q();if(k!==null)if(c.substr(a,1)===
"}"?(i="}",a+=1):(i=null,m&&h('"}"')),i!==null){for(var g=[],n=q();n!==null;)g.push(n),n=q();g!==null?d=[d,w,t,v,k,i,g]:(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f;f=d!==null?d[3].quadsContext:null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[46] QuadData");A[b]={nextPos:a,result:f};return f}function lb(){var b="Quads@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a,f=a,d=ra(),d=d!==null?d:"";if(d!==null){var w=[],t=a,v=mb();
if(v!==null){if(c.substr(a,1)==="."){var k=".";a+=1}else k=null,m&&h('"."');k=k!==null?k:"";if(k!==null){var i=ra(),i=i!==null?i:"";i!==null?v=[v,k,i]:(v=null,a=t)}else v=null,a=t}else v=null,a=t;for(;v!==null;)w.push(v),t=a,v=mb(),v!==null?(c.substr(a,1)==="."?(k=".",a+=1):(k=null,m&&h('"."')),k=k!==null?k:"",k!==null?(i=ra(),i=i!==null?i:"",i!==null?v=[v,k,i]:(v=null,a=t)):(v=null,a=t)):(v=null,a=t);w!==null?d=[d,w]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a,c){var b=[];if(a.triplesContext!=
null&&a.triplesContext!=null)for(var d=0;d<a.triplesContext.length;d++){var f=a.triplesContext[d];f.graph=null;b.push(f)}if(c&&c.length>0&&c[0].length>0&&(b=b.concat(c[0][0].quadsContext),c[0][2]!=null&&c[0][2].triplesContext!=null))for(d=0;d<c[0][2].triplesContext.length;d++)f=c[0][2].triplesContext[d],f.graph=null,b.push(f);return{token:"quads",quadsContext:b}}(d[0],d[1]):null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[47] Quads");A[b]={nextPos:a,result:f};return f}function mb(){var b="QuadsNotTriples@"+
a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;for(var j=a,f=a,d=[],k=q();k!==null;)d.push(k),k=q();if(d!==null)if(c.substr(a,1)==="G"?(k="G",a+=1):(k=null,m&&h('"G"')),k===null&&(c.substr(a,1)==="g"?(k="g",a+=1):(k=null,m&&h('"g"')),k=k!==null?k:null),k!==null){if(c.substr(a,1)==="R"){var t="R";a+=1}else t=null,m&&h('"R"');t===null&&(c.substr(a,1)==="r"?(t="r",a+=1):(t=null,m&&h('"r"')),t=t!==null?t:null);if(t!==null){if(c.substr(a,1)==="A"){var v="A";a+=1}else v=null,m&&h('"A"');v===null&&(c.substr(a,
1)==="a"?(v="a",a+=1):(v=null,m&&h('"a"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="P"){var i="P";a+=1}else i=null,m&&h('"P"');i===null&&(c.substr(a,1)==="p"?(i="p",a+=1):(i=null,m&&h('"p"')),i=i!==null?i:null);if(i!==null){if(c.substr(a,1)==="H"){var g="H";a+=1}else g=null,m&&h('"H"');g===null&&(c.substr(a,1)==="h"?(g="h",a+=1):(g=null,m&&h('"h"')),g=g!==null?g:null);if(g!==null){for(var r=[],n=q();n!==null;)r.push(n),n=q();if(r!==null)if(n=ka(),n!==null){for(var I=[],o=q();o!==null;)I.push(o),
o=q();if(I!==null)if(c.substr(a,1)==="{"?(o="{",a+=1):(o=null,m&&h('"{"')),o!==null){for(var s=[],u=q();u!==null;)s.push(u),u=q();if(s!==null)if(u=ra(),u=u!==null?u:"",u!==null){for(var B=[],x=q();x!==null;)B.push(x),x=q();if(B!==null)if(c.substr(a,1)==="}"?(x="}",a+=1):(x=null,m&&h('"}"')),x!==null){for(var y=[],F=q();F!==null;)y.push(F),F=q();y!==null?d=[d,k,t,v,i,g,r,n,I,o,s,u,B,x,y]:(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=
null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f;f=d!==null?function(a,c){for(var b=[],d=0;d<c.triplesContext.length;d++){var f=c.triplesContext[d];f.graph=a;b.push(f)}return{token:"quadsnottriples",quadsContext:b}}(d[7],d[11]):null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[48] QuadsNotTriples");A[b]={nextPos:a,result:f};return f}function ra(){var b="TriplesTemplate@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=
a,f=a,d=nb();if(d!==null){for(var k=a,t=[],v=q();v!==null;)t.push(v),v=q();if(t!==null)if(c.substr(a,1)==="."?(v=".",a+=1):(v=null,m&&h('"."')),v!==null){for(var i=[],g=q();g!==null;)i.push(g),g=q();i!==null?(g=ra(),g=g!==null?g:"",g!==null?t=[t,v,i,g]:(t=null,a=k)):(t=null,a=k)}else t=null,a=k;else t=null,a=k;k=t!==null?t:"";k!==null?d=[d,k]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a,c){var b=a.triplesContext;typeof c==="object"&&c.length!=null&&c[3].triplesContext!=null&&(b=b.concat(c[3].triplesContext));
return{token:"triplestemplate",triplesContext:b}}(d[0],d[1]):null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[49] TriplesTemplate");A[b]={nextPos:a,result:f};return f}function Z(){var b="GroupGraphPattern@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var k=a,f=a;if(c.substr(a,1)==="{"){var d="{";a+=1}else d=null,m&&h('"{"');if(d!==null){for(var j=[],t=q();t!==null;)j.push(t),t=q();if(j!==null)if(t=J(),t!==null){for(var v=[],i=q();i!==null;)v.push(i),i=q();v!==null?(c.substr(a,1)==="}"?(i="}",
a+=1):(i=null,m&&h('"}"')),i!==null?d=[d,j,t,v,i]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;f=d!==null?d[2]:null;f===null&&(f=null,a=k);if(f!==null)k=f;else{f=k=a;c.substr(a,1)==="{"?(d="{",a+=1):(d=null,m&&h('"{"'));if(d!==null){j=[];for(t=q();t!==null;)j.push(t),t=q();if(j!==null)if(t=Kb(),t!==null){v=[];for(i=q();i!==null;)v.push(i),i=q();v!==null?(c.substr(a,1)==="}"?(i="}",a+=1):(i=null,m&&h('"}"')),i!==null?d=[d,j,t,v,i]:(d=null,a=f)):(d=null,a=f)}else d=null,
a=f;else d=null,a=f}else d=null,a=f;f=d!==null?d[2]:null;f===null&&(f=null,a=k);k=f!==null?f:null}(m=e)&&k===null&&h("[50] GroupGraphPattern");A[b]={nextPos:a,result:k};return k}function Kb(){var b="GroupGraphPatternSub@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var k=a,f=a,d=qa(),d=d!==null?d:"";if(d!==null){for(var j=[],t=q();t!==null;)j.push(t),t=q();if(j!==null){var t=[],v=a,i=ob();if(i!==null){for(var g=[],r=q();r!==null;)g.push(r),r=q();if(g!==null)if(c.substr(a,1)==="."?(r=".",a+=
1):(r=null,m&&h('"."')),r=r!==null?r:"",r!==null){for(var n=[],o=q();o!==null;)n.push(o),o=q();n!==null?(o=qa(),o=o!==null?o:"",o!==null?i=[i,g,r,n,o]:(i=null,a=v)):(i=null,a=v)}else i=null,a=v;else i=null,a=v}else i=null,a=v;for(;i!==null;)if(t.push(i),v=a,i=ob(),i!==null){g=[];for(r=q();r!==null;)g.push(r),r=q();if(g!==null)if(c.substr(a,1)==="."?(r=".",a+=1):(r=null,m&&h('"."')),r=r!==null?r:"",r!==null){n=[];for(o=q();o!==null;)n.push(o),o=q();n!==null?(o=qa(),o=o!==null?o:"",o!==null?i=[i,g,
r,n,o]:(i=null,a=v)):(i=null,a=v)}else i=null,a=v;else i=null,a=v}else i=null,a=v;t!==null?d=[d,j,t]:(d=null,a=f)}else d=null,a=f}else d=null,a=f;f=d!==null?function(a,c){var b=[];a!=null&&a!=[]&&b.push(a);for(var d=0;d<c.length;d++)for(var f=0;f<c[d].length;f++)c[d][f].token!=null&&b.push(c[d][f]);for(var h=[],e=[],m=[],d=0;d<b.length;d++)if(b[d].token!="triplespattern"&&b[d].token!="filter"){if(e.length!=0||m.length!=0){for(var t=[],f=0;f<e.length;f++)t=t.concat(e[f].triplesContext);t.length>0&&
h.push({token:"basicgraphpattern",triplesContext:t});e=[]}h.push(b[d])}else b[d].token==="triplespattern"?e.push(b[d]):m.push(b[d]);if(e.length!=0||m.length!=0){t=[];for(f=0;f<e.length;f++)t=t.concat(e[f].triplesContext);t.length>0&&h.push({token:"basicgraphpattern",triplesContext:t})}return{token:"groupgraphpattern",patterns:h,filters:m}}(d[0],d[2]):null;f===null&&(f=null,a=k);(m=e)&&f===null&&h("[51] GroupGraphPatternSub");A[b]={nextPos:a,result:f};return f}function qa(){var b="TriplesBlock@"+a,
e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var k=a,f=a,d=Lb();if(d!==null){for(var j=a,t=[],v=q();v!==null;)t.push(v),v=q();if(t!==null)if(c.substr(a,1)==="."?(v=".",a+=1):(v=null,m&&h('"."')),v!==null){var i=qa(),i=i!==null?i:"";i!==null?t=[t,v,i]:(t=null,a=j)}else t=null,a=j;else t=null,a=j;j=t!==null?t:"";j!==null?d=[d,j]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a,c){var b=a.triplesContext;typeof c==="object"&&c.length!=null&&c[2].triplesContext!=null&&(b=b.concat(c[2].triplesContext));
return{token:"triplespattern",triplesContext:b}}(d[0],d[1]):null;f===null&&(f=null,a=k);(m=e)&&f===null&&h("[54] TriplesBlock");A[b]={nextPos:a,result:f};return f}function ob(){var c="GraphPatternNotTriples@"+a,b=A[c];if(b)return a=b.nextPos,b.result;b=m;m=!1;var e=Mb();e===null&&(e=Nb(),e===null&&(e=Ob(),e===null&&(e=Pb(),e===null&&(e=Qb(),e===null&&(e=Rb(),e=e!==null?e:null)))));(m=b)&&e===null&&h("[53] GraphPatternNotTriples");A[c]={nextPos:a,result:e};return e}function Nb(){var b="OptionalGraphPattern@"+
a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;for(var j=a,f=a,d=[],k=q();k!==null;)d.push(k),k=q();if(d!==null)if(c.substr(a,8)==="OPTIONAL"?(k="OPTIONAL",a+=8):(k=null,m&&h('"OPTIONAL"')),k!==null){for(var t=[],v=q();v!==null;)t.push(v),v=q();t!==null?(v=Z(),v!==null?d=[d,k,t,v]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f;f=d!==null?{token:"optionalgraphpattern",value:d[3]}:null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[54] OptionalGraphPattern");A[b]={nextPos:a,result:f};return f}
function Pb(){var b="GraphGraphPattern@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;for(var k=a,f=a,d=[],j=q();j!==null;)d.push(j),j=q();if(d!==null)if(c.substr(a,1)==="G"?(j="G",a+=1):(j=null,m&&h('"G"')),j===null&&(c.substr(a,1)==="g"?(j="g",a+=1):(j=null,m&&h('"g"')),j=j!==null?j:null),j!==null){if(c.substr(a,1)==="R"){var t="R";a+=1}else t=null,m&&h('"R"');t===null&&(c.substr(a,1)==="r"?(t="r",a+=1):(t=null,m&&h('"r"')),t=t!==null?t:null);if(t!==null){if(c.substr(a,1)==="A"){var v="A";
a+=1}else v=null,m&&h('"A"');v===null&&(c.substr(a,1)==="a"?(v="a",a+=1):(v=null,m&&h('"a"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="P"){var i="P";a+=1}else i=null,m&&h('"P"');i===null&&(c.substr(a,1)==="p"?(i="p",a+=1):(i=null,m&&h('"p"')),i=i!==null?i:null);if(i!==null){if(c.substr(a,1)==="H"){var g="H";a+=1}else g=null,m&&h('"H"');g===null&&(c.substr(a,1)==="h"?(g="h",a+=1):(g=null,m&&h('"h"')),g=g!==null?g:null);if(g!==null){for(var r=[],n=q();n!==null;)r.push(n),n=q();if(r!==null)if(n=
ka(),n!==null){for(var o=[],s=q();s!==null;)o.push(s),s=q();o!==null?(s=Z(),s!==null?d=[d,j,t,v,i,g,r,n,o,s]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f;f=d!==null?function(a,c){for(var b=0;b<c.patterns.length;b++)for(var d=c.patterns[b],f=0;f<d.triplesContext.length;f++)d.triplesContext[f].graph=a;c.token="groupgraphpattern";return c}(d[7],d[9]):null;f===null&&(f=null,a=k);(m=e)&&f===null&&
h("[55] GraphGraphPattern");A[b]={nextPos:a,result:f};return f}function Qb(){var b="ServiceGraphPattern@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a,f=a;if(c.substr(a,7)==="SERVICE"){var d="SERVICE";a+=7}else d=null,m&&h('"SERVICE"');if(d!==null){var k=ka();if(k!==null){var t=Z();t!==null?d=[d,k,t]:(d=null,a=f)}else d=null,a=f}else d=null,a=f;f=d!==null?{token:"servicegraphpattern",status:"todo",value:[d[1],d[2]]}:null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[56] ServiceGraphPattern");
A[b]={nextPos:a,result:f};return f}function Ob(){var b="MinusGraphPattern@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a,f=a;if(c.substr(a,5)==="MINUS"){var d="MINUS";a+=5}else d=null,m&&h('"MINUS"');if(d!==null){var k=Z();k!==null?d=[d,k]:(d=null,a=f)}else d=null,a=f;f=d!==null?{token:"minusgraphpattern",status:"todo",value:d[1]}:null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[57] MinusGraphPattern");A[b]={nextPos:a,result:f};return f}function Mb(){var b="GroupOrUnionGraphPattern@"+
a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a,f=a,d=Z();if(d!==null){for(var k=[],t=a,v=[],i=q();i!==null;)v.push(i),i=q();if(v!==null)if(c.substr(a,1)==="U"?(i="U",a+=1):(i=null,m&&h('"U"')),i===null&&(c.substr(a,1)==="u"?(i="u",a+=1):(i=null,m&&h('"u"')),i=i!==null?i:null),i!==null){if(c.substr(a,1)==="N"){var g="N";a+=1}else g=null,m&&h('"N"');g===null&&(c.substr(a,1)==="n"?(g="n",a+=1):(g=null,m&&h('"n"')),g=g!==null?g:null);if(g!==null){if(c.substr(a,1)==="I"){var r="I";a+=1}else r=
null,m&&h('"I"');r===null&&(c.substr(a,1)==="i"?(r="i",a+=1):(r=null,m&&h('"i"')),r=r!==null?r:null);if(r!==null){if(c.substr(a,1)==="O"){var n="O";a+=1}else n=null,m&&h('"O"');n===null&&(c.substr(a,1)==="o"?(n="o",a+=1):(n=null,m&&h('"o"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="N"){var o="N";a+=1}else o=null,m&&h('"N"');o===null&&(c.substr(a,1)==="n"?(o="n",a+=1):(o=null,m&&h('"n"')),o=o!==null?o:null);if(o!==null){for(var s=[],u=q();u!==null;)s.push(u),u=q();s!==null?(u=Z(),u!==null?
v=[v,i,g,r,n,o,s,u]:(v=null,a=t)):(v=null,a=t)}else v=null,a=t}else v=null,a=t}else v=null,a=t}else v=null,a=t}else v=null,a=t;else v=null,a=t;for(;v!==null;){k.push(v);t=a;v=[];for(i=q();i!==null;)v.push(i),i=q();if(v!==null)if(c.substr(a,1)==="U"?(i="U",a+=1):(i=null,m&&h('"U"')),i===null&&(c.substr(a,1)==="u"?(i="u",a+=1):(i=null,m&&h('"u"')),i=i!==null?i:null),i!==null)if(c.substr(a,1)==="N"?(g="N",a+=1):(g=null,m&&h('"N"')),g===null&&(c.substr(a,1)==="n"?(g="n",a+=1):(g=null,m&&h('"n"')),g=g!==
null?g:null),g!==null)if(c.substr(a,1)==="I"?(r="I",a+=1):(r=null,m&&h('"I"')),r===null&&(c.substr(a,1)==="i"?(r="i",a+=1):(r=null,m&&h('"i"')),r=r!==null?r:null),r!==null)if(c.substr(a,1)==="O"?(n="O",a+=1):(n=null,m&&h('"O"')),n===null&&(c.substr(a,1)==="o"?(n="o",a+=1):(n=null,m&&h('"o"')),n=n!==null?n:null),n!==null)if(c.substr(a,1)==="N"?(o="N",a+=1):(o=null,m&&h('"N"')),o===null&&(c.substr(a,1)==="n"?(o="n",a+=1):(o=null,m&&h('"n"')),o=o!==null?o:null),o!==null){s=[];for(u=q();u!==null;)s.push(u),
u=q();s!==null?(u=Z(),u!==null?v=[v,i,g,r,n,o,s,u]:(v=null,a=t)):(v=null,a=t)}else v=null,a=t;else v=null,a=t;else v=null,a=t;else v=null,a=t;else v=null,a=t;else v=null,a=t}k!==null?d=[d,k]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a,c){if(c.length===0)return a;else{for(var b={token:"graphunionpattern",value:[a]},d=0;d<c.length;d++)d==c.length-1?b.value.push(c[d][7]):(b.value.push(c[d][7]),b={token:"graphunionpattern",value:[b]});return b}}(d[0],d[1]):null;f===null&&(f=null,a=j);(m=e)&&f===
null&&h("[58] GroupOrUnionGraphPattern");A[b]={nextPos:a,result:f};return f}function Rb(){var b="Filter@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;for(var j=a,f=a,d=[],k=q();k!==null;)d.push(k),k=q();if(d!==null)if(c.substr(a,1)==="F"?(k="F",a+=1):(k=null,m&&h('"F"')),k===null&&(c.substr(a,1)==="f"?(k="f",a+=1):(k=null,m&&h('"f"')),k=k!==null?k:null),k!==null){if(c.substr(a,1)==="I"){var t="I";a+=1}else t=null,m&&h('"I"');t===null&&(c.substr(a,1)==="i"?(t="i",a+=1):(t=null,m&&h('"i"')),
t=t!==null?t:null);if(t!==null){if(c.substr(a,1)==="L"){var v="L";a+=1}else v=null,m&&h('"L"');v===null&&(c.substr(a,1)==="l"?(v="l",a+=1):(v=null,m&&h('"l"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="T"){var i="T";a+=1}else i=null,m&&h('"T"');i===null&&(c.substr(a,1)==="t"?(i="t",a+=1):(i=null,m&&h('"t"')),i=i!==null?i:null);if(i!==null){if(c.substr(a,1)==="E"){var g="E";a+=1}else g=null,m&&h('"E"');g===null&&(c.substr(a,1)==="e"?(g="e",a+=1):(g=null,m&&h('"e"')),g=g!==null?g:null);if(g!==
null){if(c.substr(a,1)==="R"){var r="R";a+=1}else r=null,m&&h('"R"');r===null&&(c.substr(a,1)==="r"?(r="r",a+=1):(r=null,m&&h('"r"')),r=r!==null?r:null);if(r!==null){for(var n=[],o=q();o!==null;)n.push(o),o=q();n!==null?(o=Ba(),o!==null?d=[d,k,t,v,i,g,r,n,o]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f;f=d!==null?{token:"filter",value:d[8]}:null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[59] Filter");A[b]=
{nextPos:a,result:f};return f}function Ba(){var c="Constraint@"+a,b=A[c];if(b)return a=b.nextPos,b.result;b=m;m=!1;var e=Ja();e===null&&(e=Ia(),e===null&&(e=fb(),e=e!==null?e:null));(m=b)&&e===null&&h("[60] Constraint");A[c]={nextPos:a,result:e};return e}function fb(){var c="FunctionCall@"+a,b=A[c];if(b)return a=b.nextPos,b.result;b=m;m=!1;var e=a,f=a,d=V();if(d!==null){var k=pb();k!==null?d=[d,k]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a,c){var b={token:"expression",expressionType:"irireforfunction"};
b.iriref=a;b.args=c.value;return b}(d[0],d[1]):null;f===null&&(f=null,a=e);(m=b)&&f===null&&h("[61] FunctionCall");A[c]={nextPos:a,result:f};return f}function pb(){var b="ArgList@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var k=a,f=la()!==null?{token:"args",value:[]}:null;f===null&&(f=null,a=k);if(f!==null)k=f;else{f=k=a;if(c.substr(a,1)==="("){var d="(";a+=1}else d=null,m&&h('"("');if(d!==null){if(c.substr(a,8)==="DISTINCT"){var j="DISTINCT";a+=8}else j=null,m&&h('"DISTINCT"');j=j!==null?
j:"";if(j!==null){var t=P();if(t!==null){var v=[],i=a;if(c.substr(a,1)===","){var g=",";a+=1}else g=null,m&&h('","');if(g!==null){var r=P();r!==null?g=[g,r]:(g=null,a=i)}else g=null,a=i;for(;g!==null;)v.push(g),i=a,c.substr(a,1)===","?(g=",",a+=1):(g=null,m&&h('","')),g!==null?(r=P(),r!==null?g=[g,r]:(g=null,a=i)):(g=null,a=i);v!==null?(c.substr(a,1)===")"?(i=")",a+=1):(i=null,m&&h('")"')),i!==null?d=[d,j,t,v,i]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?
function(a,c,b){cleanEx=[];for(var d=0;d<b.length;d++)cleanEx.push(b[d][1]);b={token:"args"};b.value=[c].concat(cleanEx);b.distinct=a==="DISTINCT"?!0:!1;return b}(d[1],d[2],d[3]):null;f===null&&(f=null,a=k);k=f!==null?f:null}(m=e)&&k===null&&h("[62] ArgList");A[b]={nextPos:a,result:k};return k}function Sb(){var b="ExpressionList@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var k=a,f=la()!==null?{token:"args",value:[]}:null;f===null&&(f=null,a=k);if(f!==null)k=f;else{f=k=a;if(c.substr(a,1)===
"("){var d="(";a+=1}else d=null,m&&h('"("');if(d!==null){var j=P();if(j!==null){var t=[],v=a;if(c.substr(a,1)===","){var i=",";a+=1}else i=null,m&&h('","');if(i!==null){var g=P();g!==null?i=[i,g]:(i=null,a=v)}else i=null,a=v;for(;i!==null;)t.push(i),v=a,c.substr(a,1)===","?(i=",",a+=1):(i=null,m&&h('","')),i!==null?(g=P(),g!==null?i=[i,g]:(i=null,a=v)):(i=null,a=v);t!==null?(c.substr(a,1)===")"?(v=")",a+=1):(v=null,m&&h('")"')),v!==null?d=[d,j,t,v]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f}else d=
null,a=f;f=d!==null?function(a,c){cleanEx=[];for(var b=0;b<c.length;b++)cleanEx.push(c[b][1]);b={token:"args"};b.value=[a].concat(cleanEx);return b}(d[1],d[2]):null;f===null&&(f=null,a=k);k=f!==null?f:null}(m=e)&&k===null&&h("[63] ExpressionList");A[b]={nextPos:a,result:k};return k}function Hb(){var b="ConstructTemplate@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var k=a,f=a;if(c.substr(a,1)==="{"){var d="{";a+=1}else d=null,m&&h('"{"');if(d!==null){for(var j=[],t=q();t!==null;)j.push(t),
t=q();if(j!==null)if(t=qb(),t=t!==null?t:"",t!==null){for(var v=[],i=q();i!==null;)v.push(i),i=q();v!==null?(c.substr(a,1)==="}"?(i="}",a+=1):(i=null,m&&h('"}"')),i!==null?d=[d,j,t,v,i]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;f=d!==null?d[2]:null;f===null&&(f=null,a=k);(m=e)&&f===null&&h("[64] ConstructTemplate");A[b]={nextPos:a,result:f};return f}function qb(){var b="ConstructTriples@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var k=a,f=a,d=nb();if(d!==
null){for(var j=a,t=[],v=q();v!==null;)t.push(v),v=q();if(t!==null)if(c.substr(a,1)==="."?(v=".",a+=1):(v=null,m&&h('"."')),v!==null){for(var i=[],g=q();g!==null;)i.push(g),g=q();i!==null?(g=qb(),g=g!==null?g:"",g!==null?t=[t,v,i,g]:(t=null,a=j)):(t=null,a=j)}else t=null,a=j;else t=null,a=j;j=t!==null?t:"";j!==null?d=[d,j]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a,c){var b=a.triplesContext;typeof c==="object"&&c.length!=null&&c[3].triplesContext!=null&&(b=b.concat(c[3].triplesContext));return{token:"triplestemplate",
triplesContext:b}}(d[0],d[1]):null;f===null&&(f=null,a=k);(m=e)&&f===null&&h("[65] ConstructTriples");A[b]={nextPos:a,result:f};return f}function nb(){var c="TriplesSameSubject@"+a,b=A[c];if(b)return a=b.nextPos,b.result;b=m;m=!1;for(var e=a,f=a,d=[],k=q();k!==null;)d.push(k),k=q();if(d!==null)if(k=Oa(),k!==null){for(var t=[],j=q();j!==null;)t.push(j),j=q();t!==null?(j=Ca(),j!==null?d=[d,k,t,j]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f;f=d!==null?function(a,c){var b=c.triplesContext;
if(c.pairs)for(var d=0;d<c.pairs.length;d++){var f=c.pairs[d],h=null;f[1].length!=null&&(f[1]=f[1][0]);a.token&&a.token==="triplesnodecollection"?(h={subject:a.chainSubject[0],predicate:f[0],object:f[1]},b.push(h),b=b.concat(a.triplesContext)):(h={subject:a,predicate:f[0],object:f[1]},b.push(h))}d={token:"triplessamesubject"};d.triplesContext=b;d.chainSubject=a;return d}(d[1],d[3]):null;f===null&&(f=null,a=e);if(f!==null)e=f;else{f=e=a;d=[];for(k=q();k!==null;)d.push(k),k=q();if(d!==null)if(k=Pa(),
k!==null){t=[];for(j=q();j!==null;)t.push(j),j=q();t!==null?(j=Tb(),j!==null?d=[d,k,t,j]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f;f=d!==null?function(a,c){var b=a.triplesContext,d=a.chainSubject;if(c.pairs)for(var f=0;f<c.pairs.length;f++){var h=c.pairs[f];h[1].length!=null&&(h[1]=h[1][0]);if(a.token==="triplesnodecollection")for(var e=0;e<d.length;e++){var m=d[e];if(m.triplesContext!=null){var t={subject:m.chainSubject,predicate:h[0],object:h[1]};b.concat(m.triplesContext)}else t=
{subject:d[e],predicate:h[0],object:h[1]},b.push(t)}else t={subject:d,predicate:h[0],object:h[1]},b.push(t)}f={token:"triplessamesubject"};f.triplesContext=b;f.chainSubject=d;return f}(d[1],d[3]):null;f===null&&(f=null,a=e);e=f!==null?f:null}(m=b)&&e===null&&h("[66] TriplesSameSubject");A[c]={nextPos:a,result:e};return e}function Ca(){var b="PropertyListNotEmpty@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var k=a,f=a,d=Qa();if(d!==null){for(var j=[],t=q();t!==null;)j.push(t),t=q();if(j!==
null)if(t=ma(),t!==null){for(var v=[],i=a,g=[],r=q();r!==null;)g.push(r),r=q();if(g!==null)if(c.substr(a,1)===";"?(r=";",a+=1):(r=null,m&&h('";"')),r!==null){for(var n=[],o=q();o!==null;)n.push(o),o=q();if(n!==null){var o=a,s=Qa();if(s!==null){for(var u=[],x=q();x!==null;)u.push(x),x=q();u!==null?(x=ma(),x!==null?s=[s,u,x]:(s=null,a=o)):(s=null,a=o)}else s=null,a=o;o=s!==null?s:"";o!==null?g=[g,r,n,o]:(g=null,a=i)}else g=null,a=i}else g=null,a=i;else g=null,a=i;for(;g!==null;){v.push(g);i=a;g=[];
for(r=q();r!==null;)g.push(r),r=q();if(g!==null)if(c.substr(a,1)===";"?(r=";",a+=1):(r=null,m&&h('";"')),r!==null){n=[];for(o=q();o!==null;)n.push(o),o=q();if(n!==null){o=a;s=Qa();if(s!==null){u=[];for(x=q();x!==null;)u.push(x),x=q();u!==null?(x=ma(),x!==null?s=[s,u,x]:(s=null,a=o)):(s=null,a=o)}else s=null,a=o;o=s!==null?s:"";o!==null?g=[g,r,n,o]:(g=null,a=i)}else g=null,a=i}else g=null,a=i;else g=null,a=i}v!==null?d=[d,j,t,v]:(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;f=d!==null?
function(a,c,b){token={token:"propertylist"};for(var d=[],f=[],h=0;h<c.length;h++)c[h].triplesContext!=null?(d=d.concat(c[h].triplesContext),c[h].token==="triplesnodecollection"&&c[h].chainSubject.length!=null?f.push([a,c[h].chainSubject[0]]):f.push([a,c[h].chainSubject])):f.push([a,c[h]]);for(h=0;h<b.length;h++)for(var c=b[h][3],a=c[0],c=c[2]||[],e=0;e<c.length;e++)c[e].triplesContext!=null?(d=d.concat(c[e].triplesContext),f.push([a,c[e].chainSubject])):f.push([a,c[e]]);token.pairs=f;token.triplesContext=
d;return token}(d[0],d[2],d[3]):null;f===null&&(f=null,a=k);(m=e)&&f===null&&h("[67] PropertyListNotEmpty");A[b]={nextPos:a,result:f};return f}function Tb(){var c="PropertyList@"+a,b=A[c];if(b)return a=b.nextPos,b.result;b=m;m=!1;var e=Ca(),e=e!==null?e:"";(m=b)&&e===null&&h("[68] PropertyList");A[c]={nextPos:a,result:e};return e}function ma(){var b="ObjectList@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var k=a,f=a,d=sa();if(d!==null){for(var j=[],t=q();t!==null;)j.push(t),t=q();if(j!==
null){var t=[],i=a;if(c.substr(a,1)===","){var g=",";a+=1}else g=null,m&&h('","');if(g!==null){for(var n=[],r=q();r!==null;)n.push(r),r=q();n!==null?(r=sa(),r!==null?g=[g,n,r]:(g=null,a=i)):(g=null,a=i)}else g=null,a=i;for(;g!==null;)if(t.push(g),i=a,c.substr(a,1)===","?(g=",",a+=1):(g=null,m&&h('","')),g!==null){n=[];for(r=q();r!==null;)n.push(r),r=q();n!==null?(r=sa(),r!==null?g=[g,n,r]:(g=null,a=i)):(g=null,a=i)}else g=null,a=i;t!==null?d=[d,j,t]:(d=null,a=f)}else d=null,a=f}else d=null,a=f;f=
d!==null?function(a,c){var b=[];b.push(a);for(var d=0;d<c.length;d++)for(var f=0;f<c[d].length;f++)typeof c[d][f]=="object"&&c[d][f].token!=null&&b.push(c[d][f]);return b}(d[0],d[2]):null;f===null&&(f=null,a=k);(m=e)&&f===null&&h("[69] ObjectList");A[b]={nextPos:a,result:f};return f}function Qa(){var b="Verb@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var k=ka();if(k===null){k=a;if(c.substr(a,1)==="a"){var f="a";a+=1}else f=null,m&&h('"a"');f=f!==null?{token:"uri",prefix:null,suffix:null,
value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}:null;f===null&&(f=null,a=k);k=f!==null?f:null}(m=e)&&k===null&&h("[71] Verb");A[b]={nextPos:a,result:k};return k}function Lb(){var c="TriplesSameSubjectPath@"+a,b=A[c];if(b)return a=b.nextPos,b.result;b=m;m=!1;for(var e=a,f=a,d=[],k=q();k!==null;)d.push(k),k=q();if(d!==null)if(k=Oa(),k!==null){for(var t=[],j=q();j!==null;)t.push(j),j=q();t!==null?(j=Ub(),j!==null?d=[d,k,t,j]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f;f=d!==null?
function(a,c){var b=c.triplesContext;if(c.pairs)for(var d=0;d<c.pairs.length;d++){var f=c.pairs[d],h=null;f[1].length!=null&&(f[1]=f[1][0]);a.token&&a.token==="triplesnodecollection"?(h={subject:a.chainSubject[0],predicate:f[0],object:f[1]},b.push(h),b=b.concat(a.triplesContext)):(h={subject:a,predicate:f[0],object:f[1]},b.push(h))}d={token:"triplessamesubject"};d.triplesContext=b;d.chainSubject=a;return d}(d[1],d[3]):null;f===null&&(f=null,a=e);if(f!==null)e=f;else{f=e=a;d=[];for(k=q();k!==null;)d.push(k),
k=q();if(d!==null)if(k=Pa(),k!==null){t=[];for(j=q();j!==null;)t.push(j),j=q();t!==null?(j=Vb(),j!==null?d=[d,k,t,j]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f;f=d!==null?function(a,c){var b=a.triplesContext,d=a.chainSubject;if(c.pairs)for(var f=0;f<c.pairs.length;f++){var h=c.pairs[f];h[1].length!=null&&(h[1]=h[1][0]);if(a.token==="triplesnodecollection")for(var e=0;e<d.length;e++){var m=d[e];if(m.triplesContext!=null){var t={subject:m.chainSubject,predicate:h[0],object:h[1]};b.concat(m.triplesContext)}else t=
{subject:d[e],predicate:h[0],object:h[1]},b.push(t)}else t={subject:d,predicate:h[0],object:h[1]},b.push(t)}f={token:"triplessamesubject"};f.triplesContext=b;f.chainSubject=d;return f}(d[1],d[3]):null;f===null&&(f=null,a=e);e=f!==null?f:null}(m=b)&&e===null&&h("[72] TriplesSameSubjectPath");A[c]={nextPos:a,result:e};return e}function Ub(){var b="PropertyListNotEmptyPath@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var k=a,f=a,d=Ra();d===null&&(d=U(),d=d!==null?d:null);if(d!==null){for(var j=
[],t=q();t!==null;)j.push(t),t=q();if(j!==null)if(t=ma(),t!==null){for(var i=[],g=a,n=[],r=q();r!==null;)n.push(r),r=q();if(n!==null)if(c.substr(a,1)===";"?(r=";",a+=1):(r=null,m&&h('";"')),r!==null){for(var o=[],s=q();s!==null;)o.push(s),s=q();if(o!==null){var s=a,u=Ra();u===null&&(u=U(),u=u!==null?u:null);if(u!==null){var x=ma();x!==null?u=[u,x]:(u=null,a=s)}else u=null,a=s;s=u!==null?u:"";s!==null?n=[n,r,o,s]:(n=null,a=g)}else n=null,a=g}else n=null,a=g;else n=null,a=g;for(;n!==null;){i.push(n);
g=a;n=[];for(r=q();r!==null;)n.push(r),r=q();if(n!==null)if(c.substr(a,1)===";"?(r=";",a+=1):(r=null,m&&h('";"')),r!==null){o=[];for(s=q();s!==null;)o.push(s),s=q();o!==null?(s=a,u=Ra(),u===null&&(u=U(),u=u!==null?u:null),u!==null?(x=ma(),x!==null?u=[u,x]:(u=null,a=s)):(u=null,a=s),s=u!==null?u:"",s!==null?n=[n,r,o,s]:(n=null,a=g)):(n=null,a=g)}else n=null,a=g;else n=null,a=g}i!==null?d=[d,j,t,i]:(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;f=d!==null?function(a,c,b){token={token:"propertylist"};
for(var d=[],f=[],h=0;h<c.length;h++)c[h].triplesContext!=null?(d=d.concat(c[h].triplesContext),c[h].token==="triplesnodecollection"&&c[h].chainSubject.length!=null?f.push([a,c[h].chainSubject[0]]):f.push([a,c[h].chainSubject])):f.push([a,c[h]]);for(h=0;h<b.length;h++)for(var c=b[h][3],a=c[0],c=c[1]||[],e=0;e<c.length;e++)c[e].triplesContext!=null?(d=d.concat(c[e].triplesContext),f.push([a,c[e].chainSubject])):f.push([a,c[e]]);token.pairs=f;token.triplesContext=d;return token}(d[0],d[2],d[3]):null;
f===null&&(f=null,a=k);(m=e)&&f===null&&h("[73] PropertyListNotEmptyPath");A[b]={nextPos:a,result:f};return f}function Vb(){var c="PropertyListPath@"+a,b=A[c];if(b)return a=b.nextPos,b.result;b=m;m=!1;var e=Ca(),e=e!==null?e:"";(m=b)&&e===null&&h("[74] PropertyListPath");A[c]={nextPos:a,result:e};return e}function Ra(){var c="VerbPath@"+a,b=A[c];if(b)return a=b.nextPos,b.result;b=m;m=!1;var e=a,f=rb(),f=f!==null?f:null;f===null&&(f=null,a=e);(m=b)&&f===null&&h("[75]");A[c]={nextPos:a,result:f};return f}
function rb(){var b="PathAlternative@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var k=a,f=a,d=Sa();if(d!==null){var j=[],t=a;if(c.substr(a,1)==="|"){var i="|";a+=1}else i=null,m&&h('"|"');if(i!==null){var g=Sa();g!==null?i=[i,g]:(i=null,a=t)}else i=null,a=t;for(;i!==null;)j.push(i),t=a,c.substr(a,1)==="|"?(i="|",a+=1):(i=null,m&&h('"|"')),i!==null?(g=Sa(),g!==null?i=[i,g]:(i=null,a=t)):(i=null,a=t);j!==null?d=[d,j]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a,c){if(c==null||c.length===
0)return a;else{for(var b=[],d=0;d<c.length;d++)b.push(c[1]);d={token:"path",kind:"alternative"};d.value=b;return d}}(d[0],d[1]):null;f===null&&(f=null,a=k);(m=e)&&f===null&&h("[78] PathAlternative");A[b]={nextPos:a,result:f};return f}function Sa(){var b="PathSequence@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var k=a,f=a,d=Ta();if(d!==null){var j=[],t=a;if(c.substr(a,1)==="/"){var i="/";a+=1}else i=null,m&&h('"/"');if(i!==null){var g=Ta();g!==null?i=[i,g]:(i=null,a=t)}else i=null,a=t;for(;i!==
null;)j.push(i),t=a,c.substr(a,1)==="/"?(i="/",a+=1):(i=null,m&&h('"/"')),i!==null?(g=Ta(),g!==null?i=[i,g]:(i=null,a=t)):(i=null,a=t);j!==null?d=[d,j]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a,c){if(c==null||c.length===0)return a;else{for(var b=[a],d=0;d<c.length;d++)b.push(c[d][1]);d={token:"path",kind:"sequence"};d.value=b;return d}}(d[0],d[1]):null;f===null&&(f=null,a=k);(m=e)&&f===null&&h("[79] PathSequence");A[b]={nextPos:a,result:f};return f}function sb(){var c="PathElt@"+a,b=A[c];
if(b)return a=b.nextPos,b.result;b=m;m=!1;var e=a,f=a,d=Wb();if(d!==null){var k=Xb(),k=k!==null?k:"";k!==null?d=[d,k]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a,c){if(a.token&&a.token!="path"&&c=="")return a;else if(a.token&&a.token!=b&&c!=""){var b={token:"path",kind:"element"};b.value=a;b.modifier=c;return b}else return a.modifier=c,a}(d[0],d[1]):null;f===null&&(f=null,a=e);(m=b)&&f===null&&h("[88] PathElt");A[c]={nextPos:a,result:f};return f}function Ta(){var b="PathEltOrInverse@"+a,e=
A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var k=sb();if(k===null){var f=k=a;if(c.substr(a,1)==="^"){var d="^";a+=1}else d=null,m&&h('"^"');if(d!==null){var j=sb();j!==null?d=[d,j]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a){var c={token:"path",kind:"inversePath"};c.value=a;return c}(d[1]):null;f===null&&(f=null,a=k);k=f!==null?f:null}(m=e)&&k===null&&h("[81] PathEltOrInverse");A[b]={nextPos:a,result:k};return k}function Xb(){var b="PathMod@"+a,e=A[b];if(e)return a=e.nextPos,e.result;
e=m;m=!1;if(c.substr(a,1)==="*"){var k="*";a+=1}else k=null,m&&h('"*"');if(k===null&&(c.substr(a,1)==="?"?(k="?",a+=1):(k=null,m&&h('"?"')),k===null&&(c.substr(a,1)==="+"?(k="+",a+=1):(k=null,m&&h('"+"')),k===null))){k=a;if(c.substr(a,1)==="{"){var f="{";a+=1}else f=null,m&&h('"{"');if(f!==null){var d=a,j=fa();if(j!==null){var t=a;if(c.substr(a,1)===","){var i=",";a+=1}else i=null,m&&h('","');if(i!==null){if(c.substr(a,1)==="}"){var g="}";a+=1}else g=null,m&&h('"}"');if(g===null){var g=a,q=fa();if(q!==
null){if(c.substr(a,1)==="}"){var r="}";a+=1}else r=null,m&&h('"}"');r!==null?q=[q,r]:(q=null,a=g)}else q=null,a=g;g=q!==null?q:null}g!==null?i=[i,g]:(i=null,a=t)}else i=null,a=t;i!==null?t=i:(c.substr(a,1)==="}"?(t="}",a+=1):(t=null,m&&h('"}"')),t=t!==null?t:null);t!==null?j=[j,t]:(j=null,a=d)}else j=null,a=d;j!==null?d=j:(d=a,c.substr(a,1)===","?(j=",",a+=1):(j=null,m&&h('","')),j!==null?(t=fa(),t!==null?(c.substr(a,1)==="}"?(i="}",a+=1):(i=null,m&&h('"}"')),i!==null?j=[j,t,i]:(j=null,a=d)):(j=
null,a=d)):(j=null,a=d),d=j!==null?j:null);d!==null?f=[f,d]:(f=null,a=k)}else f=null,a=k;k=f!==null?f:null}(m=e)&&k===null&&h("[82] PathMod");A[b]={nextPos:a,result:k};return k}function Wb(){var b="PathPrimary@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var k=V();if(k===null){k=a;if(c.substr(a,1)==="a"){var f="a";a+=1}else f=null,m&&h('"a"');f=f!==null?{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}:null;f===null&&(f=null,a=k);if(f!==null)k=f;
else{k=a;c.substr(a,1)==="!"?(f="!",a+=1):(f=null,m&&h('"!"'));if(f!==null){var d=Yb();d!==null?f=[f,d]:(f=null,a=k)}else f=null,a=k;if(f!==null)k=f;else{f=k=a;c.substr(a,1)==="("?(d="(",a+=1):(d=null,m&&h('"("'));if(d!==null){var j=rb();if(j!==null){if(c.substr(a,1)===")"){var t=")";a+=1}else t=null,m&&h('")"');t!==null?d=[d,j,t]:(d=null,a=f)}else d=null,a=f}else d=null,a=f;f=d!==null?d[1]:null;f===null&&(f=null,a=k);k=f!==null?f:null}}}(m=e)&&k===null&&h("[83] PathPrimary");A[b]={nextPos:a,result:k};
return k}function Yb(){var b="PathNegatedPropertySet@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=Da();if(e===null){e=a;if(c.substr(a,1)==="("){var k="(";a+=1}else k=null,m&&h('"("');if(k!==null){var f=a,d=Da();if(d!==null){var j=[],t=a;if(c.substr(a,1)==="|"){var i="|";a+=1}else i=null,m&&h('"|"');if(i!==null){var g=Da();g!==null?i=[i,g]:(i=null,a=t)}else i=null,a=t;for(;i!==null;)j.push(i),t=a,c.substr(a,1)==="|"?(i="|",a+=1):(i=null,m&&h('"|"')),i!==null?(g=Da(),g!==null?i=[i,g]:(i=null,a=t)):
(i=null,a=t);j!==null?d=[d,j]:(d=null,a=f)}else d=null,a=f;f=d!==null?d:"";f!==null?(c.substr(a,1)===")"?(d=")",a+=1):(d=null,m&&h('")"')),d!==null?k=[k,f,d]:(k=null,a=e)):(k=null,a=e)}else k=null,a=e;e=k!==null?k:null}A[b]={nextPos:a,result:e};return e}function Da(){var b="PathOneInPropertySet@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var k=V();if(k===null&&(c.substr(a,1)==="a"?(k="a",a+=1):(k=null,m&&h('"a"')),k===null)){k=a;if(c.substr(a,1)==="^"){var f="^";a+=1}else f=null,m&&h('"^"');
if(f!==null){var d=V();d===null&&(c.substr(a,1)==="a"?(d="a",a+=1):(d=null,m&&h('"a"')),d=d!==null?d:null);d!==null?f=[f,d]:(f=null,a=k)}else f=null,a=k;k=f!==null?f:null}(m=e)&&k===null&&h("[85] PathOneInPropertySet");A[b]={nextPos:a,result:k};return k}function Pa(){var c="TriplesNode@"+a,b=A[c];if(b)return a=b.nextPos,b.result;b=m;m=!1;var e=a,f=Zb(),f=f!==null?function(a){triplesContext=[];chainSubject=[];for(var c=null,b=0;b<a.length;b++)ga++,c=null,a[b].chainSubject==null&&a[b].triplesContext==
null?c=a[b]:(c=a[b].chainSubject,triplesContext=triplesContext.concat(nextSubject.triplesContext)),c={subject:{token:"blank",value:"_:"+ga},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:c},b==0&&chainSubject.push(c.subject),triplesContext.push(c),c=b===a.length-1?{subject:{token:"blank",value:"_:"+ga},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,
suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+ga},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(ga+1)}},triplesContext.push(c);return{token:"triplesnodecollection",triplesContext:triplesContext,chainSubject:chainSubject}}(f):null;f===null&&(f=null,a=e);f!==null?e=f:(e=$b(),e=e!==null?e:null);(m=b)&&e===null&&h("[87] TriplesNode");A[c]={nextPos:a,result:e};
return e}function $b(){var b="BlankNodePropertyList@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;for(var k=a,f=a,d=[],j=q();j!==null;)d.push(j),j=q();if(d!==null)if(c.substr(a,1)==="["?(j="[",a+=1):(j=null,m&&h('"["')),j!==null){for(var t=[],i=q();i!==null;)t.push(i),i=q();if(t!==null)if(i=Ca(),i!==null){for(var g=[],n=q();n!==null;)g.push(n),n=q();if(g!==null)if(c.substr(a,1)==="]"?(n="]",a+=1):(n=null,m&&h('"]"')),n!==null){for(var r=[],o=q();o!==null;)r.push(o),o=q();r!==null?d=[d,j,t,
i,g,n,r]:(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f;f=d!==null?function(a){ga++;for(var c={token:"blank",value:"_:"+ga},b=[],d=0;d<a.pairs.length;d++){var f=a.pairs[d],h={};h.subject=c;h.predicate=f[0];f[1].length!=null&&(f[1]=f[1][0]);h.object=f[1];b.push(h)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:a.triplesContext.concat(b),chainSubject:c}}(d[3]):null;f===null&&(f=null,a=k);(m=e)&&f===null&&h("[88] BlankNodePropertyList");
A[b]={nextPos:a,result:f};return f}function Zb(){var b="Collection@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;for(var k=a,f=a,d=[],j=q();j!==null;)d.push(j),j=q();if(d!==null)if(c.substr(a,1)==="("?(j="(",a+=1):(j=null,m&&h('"("')),j!==null){for(var t=[],i=q();i!==null;)t.push(i),i=q();if(t!==null){var g=sa();if(g!==null)for(i=[];g!==null;)i.push(g),g=sa();else i=null;if(i!==null){for(var g=[],n=q();n!==null;)g.push(n),n=q();if(g!==null)if(c.substr(a,1)===")"?(n=")",a+=1):(n=null,m&&h('")"')),
n!==null){for(var r=[],o=q();o!==null;)r.push(o),o=q();r!==null?d=[d,j,t,i,g,n,r]:(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f;f=d!==null?d[3]:null;f===null&&(f=null,a=k);(m=e)&&f===null&&h("[89] Collection");A[b]={nextPos:a,result:f};return f}function sa(){var c="GraphNode@"+a,b=A[c];if(b)return a=b.nextPos,b.result;b=m;m=!1;for(var e=a,f=a,d=[],k=q();k!==null;)d.push(k),k=q();if(d!==null)if(k=Oa(),k!==null){for(var j=[],i=q();i!==null;)j.push(i),
i=q();j!==null?d=[d,k,j]:(d=null,a=f)}else d=null,a=f;else d=null,a=f;if(d!==null)f=d;else{f=a;d=[];for(k=q();k!==null;)d.push(k),k=q();if(d!==null)if(k=Pa(),k!==null){j=[];for(i=q();i!==null;)j.push(i),i=q();j!==null?d=[d,k,j]:(d=null,a=f)}else d=null,a=f;else d=null,a=f;f=d!==null?d:null}f=f!==null?f[1]:null;f===null&&(f=null,a=e);(m=b)&&f===null&&h("[90] GraphNode");A[c]={nextPos:a,result:f};return f}function Oa(){var c="VarOrTerm@"+a,b=A[c];if(b)return a=b.nextPos,b.result;b=m;m=!1;var e=U();
e===null&&(e=ac(),e=e!==null?e:null);(m=b)&&e===null&&h("[91] VarOrTerm");A[c]={nextPos:a,result:e};return e}function ka(){var c="VarOrIRIref@"+a,b=A[c];if(b)return a=b.nextPos,b.result;b=m;m=!1;var e=U();e===null&&(e=V(),e=e!==null?e:null);(m=b)&&e===null&&h("[92] VarOrIRIref");A[c]={nextPos:a,result:e};return e}function U(){var c="Var@"+a,b=A[c];if(b)return a=b.nextPos,b.result;b=m;m=!1;var e=a,f=bc();f===null&&(f=cc(),f=f!==null?f:null);f=f!==null?function(a){var c={token:"var"};c.value=a;return c}(f):
null;f===null&&(f=null,a=e);(m=b)&&f===null&&h("[93] Var");A[c]={nextPos:a,result:f};return f}function ac(){var c="GraphTerm@"+a,b=A[c];if(b)return a=b.nextPos,b.result;b=m;m=!1;var e=V();e===null&&(e=Ka(),e===null&&(e=La(),e===null&&(e=Ma(),e===null&&(e=dc(),e===null&&(e=la(),e=e!==null?e:null)))));(m=b)&&e===null&&h("[94] GraphTerm");A[c]={nextPos:a,result:e};return e}function P(){var b="ConditionalOrExpression@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var k=a,f=a,d=Ua();if(d!==null){for(var j=
[],t=a,i=[],g=q();g!==null;)i.push(g),g=q();if(i!==null)if(c.substr(a,2)==="||"?(g="||",a+=2):(g=null,m&&h('"||"')),g!==null){for(var n=[],r=q();r!==null;)n.push(r),r=q();n!==null?(r=Ua(),r!==null?i=[i,g,n,r]:(i=null,a=t)):(i=null,a=t)}else i=null,a=t;else i=null,a=t;for(;i!==null;){j.push(i);t=a;i=[];for(g=q();g!==null;)i.push(g),g=q();if(i!==null)if(c.substr(a,2)==="||"?(g="||",a+=2):(g=null,m&&h('"||"')),g!==null){n=[];for(r=q();r!==null;)n.push(r),r=q();n!==null?(r=Ua(),r!==null?i=[i,g,n,r]:(i=
null,a=t)):(i=null,a=t)}else i=null,a=t;else i=null,a=t}j!==null?d=[d,j]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a,c){if(c.length===0)return a;for(var b={token:"expression",expressionType:"conditionalor"},d=[a],f=0;f<c.length;f++)d.push(c[f][3]);b.operands=d;return b}(d[0],d[1]):null;f===null&&(f=null,a=k);(m=e)&&f===null&&h("[96] ConditionalOrExpression");A[b]={nextPos:a,result:f};return f}function Ua(){var b="ConditionalAndExpression@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;
var k=a,f=a,d=Va();if(d!==null){for(var j=[],t=a,i=[],g=q();g!==null;)i.push(g),g=q();if(i!==null)if(c.substr(a,2)==="&&"?(g="&&",a+=2):(g=null,m&&h('"&&"')),g!==null){for(var n=[],r=q();r!==null;)n.push(r),r=q();n!==null?(r=Va(),r!==null?i=[i,g,n,r]:(i=null,a=t)):(i=null,a=t)}else i=null,a=t;else i=null,a=t;for(;i!==null;){j.push(i);t=a;i=[];for(g=q();g!==null;)i.push(g),g=q();if(i!==null)if(c.substr(a,2)==="&&"?(g="&&",a+=2):(g=null,m&&h('"&&"')),g!==null){n=[];for(r=q();r!==null;)n.push(r),r=q();
n!==null?(r=Va(),r!==null?i=[i,g,n,r]:(i=null,a=t)):(i=null,a=t)}else i=null,a=t;else i=null,a=t}j!==null?d=[d,j]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a,c){if(c.length===0)return a;for(var b={token:"expression",expressionType:"conditionaland"},d=[a],f=0;f<c.length;f++)d.push(c[f][3]);b.operands=d;return b}(d[0],d[1]):null;f===null&&(f=null,a=k);(m=e)&&f===null&&h("[97] ConditionalAndExpression");A[b]={nextPos:a,result:f};return f}function Va(){var b="RelationalExpression@"+a,e=A[b];if(e)return a=
e.nextPos,e.result;e=m;m=!1;var k=a,f=a,d=W();if(d!==null){for(var j=[],i=a,g=[],z=q();z!==null;)g.push(z),z=q();if(g!==null)if(c.substr(a,1)==="="?(z="=",a+=1):(z=null,m&&h('"="')),z!==null){for(var n=[],r=q();r!==null;)n.push(r),r=q();n!==null?(r=W(),r!==null?g=[g,z,n,r]:(g=null,a=i)):(g=null,a=i)}else g=null,a=i;else g=null,a=i;if(g!==null)i=g;else{i=a;g=[];for(z=q();z!==null;)g.push(z),z=q();if(g!==null)if(c.substr(a,2)==="!="?(z="!=",a+=2):(z=null,m&&h('"!="')),z!==null){n=[];for(r=q();r!==null;)n.push(r),
r=q();n!==null?(r=W(),r!==null?g=[g,z,n,r]:(g=null,a=i)):(g=null,a=i)}else g=null,a=i;else g=null,a=i;if(g!==null)i=g;else{i=a;g=[];for(z=q();z!==null;)g.push(z),z=q();if(g!==null)if(c.substr(a,1)==="<"?(z="<",a+=1):(z=null,m&&h('"<"')),z!==null){n=[];for(r=q();r!==null;)n.push(r),r=q();n!==null?(r=W(),r!==null?g=[g,z,n,r]:(g=null,a=i)):(g=null,a=i)}else g=null,a=i;else g=null,a=i;if(g!==null)i=g;else{i=a;g=[];for(z=q();z!==null;)g.push(z),z=q();if(g!==null)if(c.substr(a,1)===">"?(z=">",a+=1):(z=
null,m&&h('">"')),z!==null){n=[];for(r=q();r!==null;)n.push(r),r=q();n!==null?(r=W(),r!==null?g=[g,z,n,r]:(g=null,a=i)):(g=null,a=i)}else g=null,a=i;else g=null,a=i;if(g!==null)i=g;else{i=a;g=[];for(z=q();z!==null;)g.push(z),z=q();if(g!==null)if(c.substr(a,2)==="<="?(z="<=",a+=2):(z=null,m&&h('"<="')),z!==null){n=[];for(r=q();r!==null;)n.push(r),r=q();n!==null?(r=W(),r!==null?g=[g,z,n,r]:(g=null,a=i)):(g=null,a=i)}else g=null,a=i;else g=null,a=i;if(g!==null)i=g;else{i=a;g=[];for(z=q();z!==null;)g.push(z),
z=q();if(g!==null)if(c.substr(a,2)===">="?(z=">=",a+=2):(z=null,m&&h('">="')),z!==null){n=[];for(r=q();r!==null;)n.push(r),r=q();n!==null?(r=W(),r!==null?g=[g,z,n,r]:(g=null,a=i)):(g=null,a=i)}else g=null,a=i;else g=null,a=i;i=g!==null?g:null}}}}}for(;i!==null;){j.push(i);i=a;g=[];for(z=q();z!==null;)g.push(z),z=q();if(g!==null)if(c.substr(a,1)==="="?(z="=",a+=1):(z=null,m&&h('"="')),z!==null){n=[];for(r=q();r!==null;)n.push(r),r=q();n!==null?(r=W(),r!==null?g=[g,z,n,r]:(g=null,a=i)):(g=null,a=i)}else g=
null,a=i;else g=null,a=i;if(g!==null)i=g;else{i=a;g=[];for(z=q();z!==null;)g.push(z),z=q();if(g!==null)if(c.substr(a,2)==="!="?(z="!=",a+=2):(z=null,m&&h('"!="')),z!==null){n=[];for(r=q();r!==null;)n.push(r),r=q();n!==null?(r=W(),r!==null?g=[g,z,n,r]:(g=null,a=i)):(g=null,a=i)}else g=null,a=i;else g=null,a=i;if(g!==null)i=g;else{i=a;g=[];for(z=q();z!==null;)g.push(z),z=q();if(g!==null)if(c.substr(a,1)==="<"?(z="<",a+=1):(z=null,m&&h('"<"')),z!==null){n=[];for(r=q();r!==null;)n.push(r),r=q();n!==null?
(r=W(),r!==null?g=[g,z,n,r]:(g=null,a=i)):(g=null,a=i)}else g=null,a=i;else g=null,a=i;if(g!==null)i=g;else{i=a;g=[];for(z=q();z!==null;)g.push(z),z=q();if(g!==null)if(c.substr(a,1)===">"?(z=">",a+=1):(z=null,m&&h('">"')),z!==null){n=[];for(r=q();r!==null;)n.push(r),r=q();n!==null?(r=W(),r!==null?g=[g,z,n,r]:(g=null,a=i)):(g=null,a=i)}else g=null,a=i;else g=null,a=i;if(g!==null)i=g;else{i=a;g=[];for(z=q();z!==null;)g.push(z),z=q();if(g!==null)if(c.substr(a,2)==="<="?(z="<=",a+=2):(z=null,m&&h('"<="')),
z!==null){n=[];for(r=q();r!==null;)n.push(r),r=q();n!==null?(r=W(),r!==null?g=[g,z,n,r]:(g=null,a=i)):(g=null,a=i)}else g=null,a=i;else g=null,a=i;if(g!==null)i=g;else{i=a;g=[];for(z=q();z!==null;)g.push(z),z=q();if(g!==null)if(c.substr(a,2)===">="?(z=">=",a+=2):(z=null,m&&h('">="')),z!==null){n=[];for(r=q();r!==null;)n.push(r),r=q();n!==null?(r=W(),r!==null?g=[g,z,n,r]:(g=null,a=i)):(g=null,a=i)}else g=null,a=i;else g=null,a=i;i=g!==null?g:null}}}}}}j!==null?d=[d,j]:(d=null,a=f)}else d=null,a=f;
f=d!==null?function(a,c){if(c.length===0)return a;else{var b={expressionType:"relationalexpression"};b.operator=c[0][1];b.op1=a;b.op2=c[0][3];b.token="expression";return b}}(d[0],d[1]):null;f===null&&(f=null,a=k);(m=e)&&f===null&&h("[99] RelationalExpression");A[b]={nextPos:a,result:f};return f}function W(){var b="AdditiveExpression@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var k=a,f=a,d=ua();if(d!==null){for(var i=[],j=a,g=[],n=q();n!==null;)g.push(n),n=q();if(g!==null)if(c.substr(a,1)===
"+"?(n="+",a+=1):(n=null,m&&h('"+"')),n!==null){for(var o=[],r=q();r!==null;)o.push(r),r=q();o!==null?(r=ua(),r!==null?g=[g,n,o,r]:(g=null,a=j)):(g=null,a=j)}else g=null,a=j;else g=null,a=j;if(g!==null)j=g;else{j=a;g=[];for(n=q();n!==null;)g.push(n),n=q();if(g!==null)if(c.substr(a,1)==="-"?(n="-",a+=1):(n=null,m&&h('"-"')),n!==null){o=[];for(r=q();r!==null;)o.push(r),r=q();o!==null?(r=ua(),r!==null?g=[g,n,o,r]:(g=null,a=j)):(g=null,a=j)}else g=null,a=j;else g=null,a=j;if(g!==null)j=g;else{j=a;g=va();
g===null&&(g=va(),g=g!==null?g:null);if(g!==null){n=a;o=[];for(r=q();r!==null;)o.push(r),r=q();if(o!==null)if(c.substr(a,1)==="*"?(r="*",a+=1):(r=null,m&&h('"*"')),r!==null){for(var s=[],u=q();u!==null;)s.push(u),u=q();s!==null?(u=ba(),u!==null?o=[o,r,s,u]:(o=null,a=n)):(o=null,a=n)}else o=null,a=n;else o=null,a=n;if(o!==null)n=o;else{n=a;o=[];for(r=q();r!==null;)o.push(r),r=q();if(o!==null)if(c.substr(a,1)==="/"?(r="/",a+=1):(r=null,m&&h('"/"')),r!==null){s=[];for(u=q();u!==null;)s.push(u),u=q();
s!==null?(u=ba(),u!==null?o=[o,r,s,u]:(o=null,a=n)):(o=null,a=n)}else o=null,a=n;else o=null,a=n;n=o!==null?o:null}n=n!==null?n:"";n!==null?g=[g,n]:(g=null,a=j)}else g=null,a=j;j=g!==null?g:null}}for(;j!==null;){i.push(j);j=a;g=[];for(n=q();n!==null;)g.push(n),n=q();if(g!==null)if(c.substr(a,1)==="+"?(n="+",a+=1):(n=null,m&&h('"+"')),n!==null){o=[];for(r=q();r!==null;)o.push(r),r=q();o!==null?(r=ua(),r!==null?g=[g,n,o,r]:(g=null,a=j)):(g=null,a=j)}else g=null,a=j;else g=null,a=j;if(g!==null)j=g;else{j=
a;g=[];for(n=q();n!==null;)g.push(n),n=q();if(g!==null)if(c.substr(a,1)==="-"?(n="-",a+=1):(n=null,m&&h('"-"')),n!==null){o=[];for(r=q();r!==null;)o.push(r),r=q();o!==null?(r=ua(),r!==null?g=[g,n,o,r]:(g=null,a=j)):(g=null,a=j)}else g=null,a=j;else g=null,a=j;if(g!==null)j=g;else{j=a;g=va();g===null&&(g=va(),g=g!==null?g:null);if(g!==null){n=a;o=[];for(r=q();r!==null;)o.push(r),r=q();if(o!==null)if(c.substr(a,1)==="*"?(r="*",a+=1):(r=null,m&&h('"*"')),r!==null){s=[];for(u=q();u!==null;)s.push(u),
u=q();s!==null?(u=ba(),u!==null?o=[o,r,s,u]:(o=null,a=n)):(o=null,a=n)}else o=null,a=n;else o=null,a=n;if(o!==null)n=o;else{n=a;o=[];for(r=q();r!==null;)o.push(r),r=q();if(o!==null)if(c.substr(a,1)==="/"?(r="/",a+=1):(r=null,m&&h('"/"')),r!==null){s=[];for(u=q();u!==null;)s.push(u),u=q();s!==null?(u=ba(),u!==null?o=[o,r,s,u]:(o=null,a=n)):(o=null,a=n)}else o=null,a=n;else o=null,a=n;n=o!==null?o:null}n=n!==null?n:"";n!==null?g=[g,n]:(g=null,a=j)}else g=null,a=j;j=g!==null?g:null}}}i!==null?d=[d,i]:
(d=null,a=f)}else d=null,a=f;f=d!==null?function(a,c){if(c.length===0)return a;var b={token:"expression",expressionType:"additiveexpression"};b.summand=a;b.summands=[];for(var d=0;d<c.length;d++){var f=c[d],h={};if(f.length==4&&typeof f[1]==="string")h.operator=f[1],h.expression=f[3];else{var f={},e=h[0],m=h[1][1],k=h[1][3],m=null;e.value<0?(h.operator="-",e.value=-e.value):h.operator="+";f.token="expression";f.expressionType="multiplicativeexpression";f.operator=e;f.factors=[{operator:m,expression:k}];
h.expression=f}b.summands.push(h)}return b}(d[0],d[1]):null;f===null&&(f=null,a=k);(m=e)&&f===null&&h("[101] AdditiveExpression");A[b]={nextPos:a,result:f};return f}function ua(){var b="MultiplicativeExpression@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var k=a,f=a,d=ba();if(d!==null){for(var j=[],i=a,g=[],n=q();n!==null;)g.push(n),n=q();if(g!==null)if(c.substr(a,1)==="*"?(n="*",a+=1):(n=null,m&&h('"*"')),n!==null){for(var o=[],r=q();r!==null;)o.push(r),r=q();o!==null?(r=ba(),r!==null?g=
[g,n,o,r]:(g=null,a=i)):(g=null,a=i)}else g=null,a=i;else g=null,a=i;if(g!==null)i=g;else{i=a;g=[];for(n=q();n!==null;)g.push(n),n=q();if(g!==null)if(c.substr(a,1)==="/"?(n="/",a+=1):(n=null,m&&h('"/"')),n!==null){o=[];for(r=q();r!==null;)o.push(r),r=q();o!==null?(r=ba(),r!==null?g=[g,n,o,r]:(g=null,a=i)):(g=null,a=i)}else g=null,a=i;else g=null,a=i;i=g!==null?g:null}for(;i!==null;){j.push(i);i=a;g=[];for(n=q();n!==null;)g.push(n),n=q();if(g!==null)if(c.substr(a,1)==="*"?(n="*",a+=1):(n=null,m&&h('"*"')),
n!==null){o=[];for(r=q();r!==null;)o.push(r),r=q();o!==null?(r=ba(),r!==null?g=[g,n,o,r]:(g=null,a=i)):(g=null,a=i)}else g=null,a=i;else g=null,a=i;if(g!==null)i=g;else{i=a;g=[];for(n=q();n!==null;)g.push(n),n=q();if(g!==null)if(c.substr(a,1)==="/"?(n="/",a+=1):(n=null,m&&h('"/"')),n!==null){o=[];for(r=q();r!==null;)o.push(r),r=q();o!==null?(r=ba(),r!==null?g=[g,n,o,r]:(g=null,a=i)):(g=null,a=i)}else g=null,a=i;else g=null,a=i;i=g!==null?g:null}}j!==null?d=[d,j]:(d=null,a=f)}else d=null,a=f;f=d!==
null?function(a,c){if(c.length===0)return a;var b={token:"expression",expressionType:"multiplicativeexpression"};b.factor=a;b.factors=[];for(var d=0;d<c.length;d++){var f=c[d],h={};h.operator=f[1];h.expression=f[3];b.factors.push(h)}return b}(d[0],d[1]):null;f===null&&(f=null,a=k);(m=e)&&f===null&&h("[102] MultiplicativeExpression");A[b]={nextPos:a,result:f};return f}function ba(){var b="UnaryExpression@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var k=a,f=a;if(c.substr(a,1)==="!"){var d=
"!";a+=1}else d=null,m&&h('"!"');if(d!==null){for(var j=[],i=q();i!==null;)j.push(i),i=q();j!==null?(i=Ea(),i!==null?d=[d,j,i]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;f=d!==null?function(a){var c={token:"expression",expressionType:"unaryexpression",unaryexpression:"!"};c.expression=a;return c}(d[2]):null;f===null&&(f=null,a=k);if(f!==null)k=f;else{f=k=a;c.substr(a,1)==="+"?(d="+",a+=1):(d=null,m&&h('"+"'));if(d!==null){j=[];for(i=q();i!==null;)j.push(i),i=q();j!==null?(i=Ea(),i!==null?d=[d,j,i]:
(d=null,a=f)):(d=null,a=f)}else d=null,a=f;f=d!==null?function(a){var c={token:"expression",expressionType:"unaryexpression",unaryexpression:"+"};c.expression=a;return c}(d[2]):null;f===null&&(f=null,a=k);if(f!==null)k=f;else{f=k=a;c.substr(a,1)==="-"?(d="-",a+=1):(d=null,m&&h('"-"'));if(d!==null){j=[];for(i=q();i!==null;)j.push(i),i=q();j!==null?(i=Ea(),i!==null?d=[d,j,i]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;f=d!==null?function(a){var c={token:"expression",expressionType:"unaryexpression",
unaryexpression:"-"};c.expression=a;return c}(d[2]):null;f===null&&(f=null,a=k);f!==null?k=f:(k=Ea(),k=k!==null?k:null)}}(m=e)&&k===null&&h("[103] UnaryExpression");A[b]={nextPos:a,result:k};return k}function Ea(){var c="PrimaryExpression@"+a,b=A[c];if(b)return a=b.nextPos,b.result;b=m;m=!1;var e=Ja();if(e===null&&(e=Ia(),e===null&&(e=ec(),e===null))){var e=a,f=Ka(),f=f!==null?function(a){var c={token:"expression",expressionType:"atomic",primaryexpression:"rdfliteral"};c.value=a;return c}(f):null;
f===null&&(f=null,a=e);f!==null?e=f:(e=a,f=La(),f=f!==null?function(a){var c={token:"expression",expressionType:"atomic",primaryexpression:"numericliteral"};c.value=a;return c}(f):null,f===null&&(f=null,a=e),f!==null?e=f:(e=a,f=Ma(),f=f!==null?function(a){var c={token:"expression",expressionType:"atomic",primaryexpression:"booleanliteral"};c.value=a;return c}(f):null,f===null&&(f=null,a=e),f!==null?e=f:(e=fc(),e===null&&(e=a,f=U(),f=f!==null?function(a){var c={token:"expression",expressionType:"atomic",
primaryexpression:"var"};c.value=a;return c}(f):null,f===null&&(f=null,a=e),e=f!==null?f:null))))}(m=b)&&e===null&&h("[104] PrimaryExpression");A[c]={nextPos:a,result:e};return e}function Ja(){var b="BrackettedExpression@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var k=a,f=a;if(c.substr(a,1)==="("){var d="(";a+=1}else d=null,m&&h('"("');if(d!==null){for(var i=[],j=q();j!==null;)i.push(j),j=q();if(i!==null)if(j=P(),j!==null){for(var g=[],n=q();n!==null;)g.push(n),n=q();g!==null?(c.substr(a,
1)===")"?(n=")",a+=1):(n=null,m&&h('")"')),n!==null?d=[d,i,j,g,n]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;f=d!==null?d[2]:null;f===null&&(f=null,a=k);(m=e)&&f===null&&h("[105] BrackettedExpression");A[b]={nextPos:a,result:f};return f}function Ia(){var b="BuiltInCall@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var k=a,f=a;if(c.substr(a,1)==="S"){var d="S";a+=1}else d=null,m&&h('"S"');d===null&&(c.substr(a,1)==="s"?(d="s",a+=1):(d=null,m&&h('"s"')),d=d!==
null?d:null);if(d!==null){if(c.substr(a,1)==="T"){var i="T";a+=1}else i=null,m&&h('"T"');i===null&&(c.substr(a,1)==="t"?(i="t",a+=1):(i=null,m&&h('"t"')),i=i!==null?i:null);if(i!==null){if(c.substr(a,1)==="R"){var j="R";a+=1}else j=null,m&&h('"R"');j===null&&(c.substr(a,1)==="r"?(j="r",a+=1):(j=null,m&&h('"r"')),j=j!==null?j:null);if(j!==null){for(var g=[],n=q();n!==null;)g.push(n),n=q();if(g!==null)if(c.substr(a,1)==="("?(n="(",a+=1):(n=null,m&&h('"("')),n!==null){for(var o=[],r=q();r!==null;)o.push(r),
r=q();if(o!==null)if(r=P(),r!==null){for(var s=[],u=q();u!==null;)s.push(u),u=q();s!==null?(c.substr(a,1)===")"?(u=")",a+=1):(u=null,m&&h('")"')),u!==null?d=[d,i,j,g,n,o,r,s,u]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?function(a){var c={token:"expression",expressionType:"builtincall",builtincall:"str"};c.args=[a];return c}(d[6]):null;f===null&&(f=null,a=k);if(f!==null)k=f;else{f=k=a;c.substr(a,
1)==="L"?(d="L",a+=1):(d=null,m&&h('"L"'));d===null&&(c.substr(a,1)==="l"?(d="l",a+=1):(d=null,m&&h('"l"')),d=d!==null?d:null);if(d!==null)if(c.substr(a,1)==="A"?(i="A",a+=1):(i=null,m&&h('"A"')),i===null&&(c.substr(a,1)==="a"?(i="a",a+=1):(i=null,m&&h('"a"')),i=i!==null?i:null),i!==null)if(c.substr(a,1)==="N"?(j="N",a+=1):(j=null,m&&h('"N"')),j===null&&(c.substr(a,1)==="n"?(j="n",a+=1):(j=null,m&&h('"n"')),j=j!==null?j:null),j!==null)if(c.substr(a,1)==="G"?(g="G",a+=1):(g=null,m&&h('"G"')),g===null&&
(c.substr(a,1)==="g"?(g="g",a+=1):(g=null,m&&h('"g"')),g=g!==null?g:null),g!==null){n=[];for(o=q();o!==null;)n.push(o),o=q();if(n!==null)if(c.substr(a,1)==="("?(o="(",a+=1):(o=null,m&&h('"("')),o!==null){r=[];for(s=q();s!==null;)r.push(s),s=q();if(r!==null)if(s=P(),s!==null){for(var u=[],C=q();C!==null;)u.push(C),C=q();u!==null?(c.substr(a,1)===")"?(C=")",a+=1):(C=null,m&&h('")"')),C!==null?d=[d,i,j,g,n,o,r,s,u,C]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,
a=f}else d=null,a=f;else d=null,a=f;else d=null,a=f;else d=null,a=f;f=d!==null?function(a){var c={token:"expression",expressionType:"builtincall",builtincall:"lang"};c.args=[a];return c}(d[7]):null;f===null&&(f=null,a=k);if(f!==null)k=f;else{f=k=a;c.substr(a,11)==="LANGMATCHES"?(d="LANGMATCHES",a+=11):(d=null,m&&h('"LANGMATCHES"'));if(d!==null){i=[];for(j=q();j!==null;)i.push(j),j=q();if(i!==null)if(c.substr(a,1)==="("?(j="(",a+=1):(j=null,m&&h('"("')),j!==null){g=[];for(n=q();n!==null;)g.push(n),
n=q();if(g!==null)if(n=P(),n!==null){o=[];for(r=q();r!==null;)o.push(r),r=q();if(o!==null)if(c.substr(a,1)===","?(r=",",a+=1):(r=null,m&&h('","')),r!==null){s=[];for(u=q();u!==null;)s.push(u),u=q();if(s!==null)if(u=P(),u!==null){for(var C=[],x=q();x!==null;)C.push(x),x=q();C!==null?(c.substr(a,1)===")"?(x=")",a+=1):(x=null,m&&h('")"')),x!==null?d=[d,i,j,g,n,o,r,s,u,C,x]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=
null,a=f;else d=null,a=f}else d=null,a=f;f=d!==null?function(a,c){var b={token:"expression",expressionType:"builtincall",builtincall:"langmatches"};b.args=[a,c];return b}(d[4],d[8]):null;f===null&&(f=null,a=k);if(f!==null)k=f;else{f=k=a;c.substr(a,1)==="D"?(d="D",a+=1):(d=null,m&&h('"D"'));d===null&&(c.substr(a,1)==="d"?(d="d",a+=1):(d=null,m&&h('"d"')),d=d!==null?d:null);if(d!==null)if(c.substr(a,1)==="A"?(i="A",a+=1):(i=null,m&&h('"A"')),i===null&&(c.substr(a,1)==="a"?(i="a",a+=1):(i=null,m&&h('"a"')),
i=i!==null?i:null),i!==null)if(c.substr(a,1)==="T"?(j="T",a+=1):(j=null,m&&h('"T"')),j===null&&(c.substr(a,1)==="t"?(j="t",a+=1):(j=null,m&&h('"t"')),j=j!==null?j:null),j!==null)if(c.substr(a,1)==="A"?(g="A",a+=1):(g=null,m&&h('"A"')),g===null&&(c.substr(a,1)==="a"?(g="a",a+=1):(g=null,m&&h('"a"')),g=g!==null?g:null),g!==null)if(c.substr(a,1)==="T"?(n="T",a+=1):(n=null,m&&h('"T"')),n===null&&(c.substr(a,1)==="t"?(n="t",a+=1):(n=null,m&&h('"t"')),n=n!==null?n:null),n!==null)if(c.substr(a,1)==="Y"?
(o="Y",a+=1):(o=null,m&&h('"Y"')),o===null&&(c.substr(a,1)==="y"?(o="y",a+=1):(o=null,m&&h('"y"')),o=o!==null?o:null),o!==null)if(c.substr(a,1)==="P"?(r="P",a+=1):(r=null,m&&h('"P"')),r===null&&(c.substr(a,1)==="p"?(r="p",a+=1):(r=null,m&&h('"p"')),r=r!==null?r:null),r!==null)if(c.substr(a,1)==="E"?(s="E",a+=1):(s=null,m&&h('"E"')),s===null&&(c.substr(a,1)==="e"?(s="e",a+=1):(s=null,m&&h('"e"')),s=s!==null?s:null),s!==null){u=[];for(C=q();C!==null;)u.push(C),C=q();if(u!==null)if(c.substr(a,1)==="("?
(C="(",a+=1):(C=null,m&&h('"("')),C!==null){for(var x=[],y=q();y!==null;)x.push(y),y=q();if(x!==null)if(y=P(),y!==null){for(var B=[],F=q();F!==null;)B.push(F),F=q();B!==null?(c.substr(a,1)===")"?(F=")",a+=1):(F=null,m&&h('")"')),F!==null?d=[d,i,j,g,n,o,r,s,u,C,x,y,B,F]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f;else d=null,a=f;else d=null,a=f;else d=null,a=f;else d=null,a=f;else d=null,a=f;else d=null,a=f;f=d!==null?function(a){var c=
{token:"expression",expressionType:"builtincall",builtincall:"datatype"};c.args=[a];return c}(d[11]):null;f===null&&(f=null,a=k);if(f!==null)k=f;else{f=k=a;c.substr(a,5)==="BOUND"?(d="BOUND",a+=5):(d=null,m&&h('"BOUND"'));if(d!==null){i=[];for(j=q();j!==null;)i.push(j),j=q();if(i!==null)if(c.substr(a,1)==="("?(j="(",a+=1):(j=null,m&&h('"("')),j!==null){g=[];for(n=q();n!==null;)g.push(n),n=q();if(g!==null)if(n=U(),n!==null){o=[];for(r=q();r!==null;)o.push(r),r=q();o!==null?(c.substr(a,1)===")"?(r=
")",a+=1):(r=null,m&&h('")"')),r!==null?d=[d,i,j,g,n,o,r]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;f=d!==null?function(a){var c={token:"expression",expressionType:"builtincall",builtincall:"bound"};c.args=[a];return c}(d[4]):null;f===null&&(f=null,a=k);if(f!==null)k=f;else{f=k=a;c.substr(a,3)==="IRI"?(d="IRI",a+=3):(d=null,m&&h('"IRI"'));if(d!==null){i=[];for(j=q();j!==null;)i.push(j),j=q();if(i!==null)if(c.substr(a,1)==="("?(j="(",
a+=1):(j=null,m&&h('"("')),j!==null){g=[];for(n=q();n!==null;)g.push(n),n=q();if(g!==null)if(n=P(),n!==null){o=[];for(r=q();r!==null;)o.push(r),r=q();o!==null?(c.substr(a,1)===")"?(r=")",a+=1):(r=null,m&&h('")"')),r!==null?d=[d,i,j,g,n,o,r]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;f=d!==null?function(a){var c={token:"expression",expressionType:"builtincall",builtincall:"iri"};c.args=[a];return c}(d[4]):null;f===null&&(f=null,a=k);if(f!==
null)k=f;else{f=k=a;c.substr(a,3)==="URI"?(d="URI",a+=3):(d=null,m&&h('"URI"'));if(d!==null){i=[];for(j=q();j!==null;)i.push(j),j=q();if(i!==null)if(c.substr(a,1)==="("?(j="(",a+=1):(j=null,m&&h('"("')),j!==null){g=[];for(n=q();n!==null;)g.push(n),n=q();if(g!==null)if(n=P(),n!==null){o=[];for(r=q();r!==null;)o.push(r),r=q();o!==null?(c.substr(a,1)===")"?(r=")",a+=1):(r=null,m&&h('")"')),r!==null?d=[d,i,j,g,n,o,r]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,
a=f}else d=null,a=f;f=d!==null?function(a){var c={token:"expression",expressionType:"builtincall",builtincall:"uri"};c.args=[a];return c}(d[4]):null;f===null&&(f=null,a=k);if(f!==null)k=f;else{f=k=a;c.substr(a,5)==="BNODE"?(d="BNODE",a+=5):(d=null,m&&h('"BNODE"'));if(d!==null){i=[];for(j=q();j!==null;)i.push(j),j=q();if(i!==null){j=a;c.substr(a,1)==="("?(g="(",a+=1):(g=null,m&&h('"("'));if(g!==null){n=[];for(o=q();o!==null;)n.push(o),o=q();if(n!==null)if(o=P(),o!==null){r=[];for(s=q();s!==null;)r.push(s),
s=q();r!==null?(c.substr(a,1)===")"?(s=")",a+=1):(s=null,m&&h('")"')),s!==null?g=[g,n,o,r,s]:(g=null,a=j)):(g=null,a=j)}else g=null,a=j;else g=null,a=j}else g=null,a=j;g!==null?j=g:(j=la(),j=j!==null?j:null);j!==null?d=[d,i,j]:(d=null,a=f)}else d=null,a=f}else d=null,a=f;f=d!==null?function(a){var c={token:"expression",expressionType:"builtincall",builtincall:"bnode"};c.args=a.length===5?[a[2]]:null;return c}(d[2]):null;f===null&&(f=null,a=k);if(f!==null)k=f;else{f=k=a;c.substr(a,8)==="COALESCE"?
(d="COALESCE",a+=8):(d=null,m&&h('"COALESCE"'));if(d!==null){i=[];for(j=q();j!==null;)i.push(j),j=q();i!==null?(j=Sb(),j!==null?d=[d,i,j]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;f=d!==null?function(a){var c={token:"expression",expressionType:"builtincall",builtincall:"coalesce"};c.args=a;return c}(d[2]):null;f===null&&(f=null,a=k);if(f!==null)k=f;else{f=k=a;c.substr(a,2)==="IF"?(d="IF",a+=2):(d=null,m&&h('"IF"'));if(d!==null){i=[];for(j=q();j!==null;)i.push(j),j=q();if(i!==null)if(c.substr(a,1)===
"("?(j="(",a+=1):(j=null,m&&h('"("')),j!==null){g=[];for(n=q();n!==null;)g.push(n),n=q();if(g!==null)if(n=P(),n!==null){o=[];for(r=q();r!==null;)o.push(r),r=q();if(o!==null)if(c.substr(a,1)===","?(r=",",a+=1):(r=null,m&&h('","')),r!==null){s=[];for(u=q();u!==null;)s.push(u),u=q();if(s!==null)if(u=P(),u!==null){C=[];for(x=q();x!==null;)C.push(x),x=q();if(C!==null)if(c.substr(a,1)===","?(x=",",a+=1):(x=null,m&&h('","')),x!==null){y=[];for(B=q();B!==null;)y.push(B),B=q();if(y!==null)if(B=P(),B!==null){for(var F=
[],G=q();G!==null;)F.push(G),G=q();F!==null?(c.substr(a,1)===")"?(G=")",a+=1):(G=null,m&&h('")"')),G!==null?d=[d,i,j,g,n,o,r,s,u,C,x,y,B,F,G]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;f=d!==null?function(a,c,b){var d={token:"expression",expressionType:"builtincall",builtincall:"if"};d.args=[a,c,b];return d}(d[4],
d[8],d[12]):null;f===null&&(f=null,a=k);if(f!==null)k=f;else{f=k=a;c.substr(a,9)==="ISLITERAL"?(d="ISLITERAL",a+=9):(d=null,m&&h('"ISLITERAL"'));if(d!==null){i=[];for(j=q();j!==null;)i.push(j),j=q();if(i!==null)if(c.substr(a,1)==="("?(j="(",a+=1):(j=null,m&&h('"("')),j!==null){g=[];for(n=q();n!==null;)g.push(n),n=q();if(g!==null)if(n=P(),n!==null){o=[];for(r=q();r!==null;)o.push(r),r=q();o!==null?(c.substr(a,1)===")"?(r=")",a+=1):(r=null,m&&h('")"')),r!==null?d=[d,i,j,g,n,o,r]:(d=null,a=f)):(d=null,
a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;f=d!==null?function(a){var c={token:"expression",expressionType:"builtincall",builtincall:"isliteral"};c.args=[a];return c}(d[4]):null;f===null&&(f=null,a=k);if(f!==null)k=f;else{f=k=a;c.substr(a,7)==="ISBLANK"?(d="ISBLANK",a+=7):(d=null,m&&h('"ISBLANK"'));if(d!==null){i=[];for(j=q();j!==null;)i.push(j),j=q();if(i!==null)if(c.substr(a,1)==="("?(j="(",a+=1):(j=null,m&&h('"("')),j!==null){g=[];for(n=q();n!==null;)g.push(n),
n=q();if(g!==null)if(n=P(),n!==null){o=[];for(r=q();r!==null;)o.push(r),r=q();o!==null?(c.substr(a,1)===")"?(r=")",a+=1):(r=null,m&&h('")"')),r!==null?d=[d,i,j,g,n,o,r]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;f=d!==null?function(a){var c={token:"expression",expressionType:"builtincall",builtincall:"isblank"};c.args=[a];return c}(d[4]):null;f===null&&(f=null,a=k);if(f!==null)k=f;else{f=k=a;c.substr(a,8)==="SAMETERM"?(d="SAMETERM",a+=
8):(d=null,m&&h('"SAMETERM"'));if(d!==null){i=[];for(j=q();j!==null;)i.push(j),j=q();if(i!==null)if(c.substr(a,1)==="("?(j="(",a+=1):(j=null,m&&h('"("')),j!==null){g=[];for(n=q();n!==null;)g.push(n),n=q();if(g!==null)if(n=P(),n!==null){o=[];for(r=q();r!==null;)o.push(r),r=q();if(o!==null)if(c.substr(a,1)===","?(r=",",a+=1):(r=null,m&&h('","')),r!==null){s=[];for(u=q();u!==null;)s.push(u),u=q();if(s!==null)if(u=P(),u!==null){C=[];for(x=q();x!==null;)C.push(x),x=q();C!==null?(c.substr(a,1)===")"?(x=
")",a+=1):(x=null,m&&h('")"')),x!==null?d=[d,i,j,g,n,o,r,s,u,C,x]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;f=d!==null?function(a,c){var b={token:"expression",expressionType:"builtincall",builtincall:"sameterm"};b.args=[a,c];return b}(d[4],d[8]):null;f===null&&(f=null,a=k);if(f!==null)k=f;else{f=k=a;c.substr(a,1)==="I"?(d="I",a+=1):(d=null,m&&h('"I"'));d===null&&(c.substr(a,
1)==="i"?(d="i",a+=1):(d=null,m&&h('"i"')),d=d!==null?d:null);if(d!==null)if(c.substr(a,1)==="S"?(i="S",a+=1):(i=null,m&&h('"S"')),i===null&&(c.substr(a,1)==="s"?(i="s",a+=1):(i=null,m&&h('"s"')),i=i!==null?i:null),i!==null)if(c.substr(a,1)==="U"?(j="U",a+=1):(j=null,m&&h('"U"')),j===null&&(c.substr(a,1)==="u"?(j="u",a+=1):(j=null,m&&h('"u"')),j=j!==null?j:null),j!==null)if(c.substr(a,1)==="R"?(g="R",a+=1):(g=null,m&&h('"R"')),g===null&&(c.substr(a,1)==="r"?(g="r",a+=1):(g=null,m&&h('"r"')),g=g!==
null?g:null),g!==null)if(c.substr(a,1)==="I"?(n="I",a+=1):(n=null,m&&h('"I"')),n===null&&(c.substr(a,1)==="i"?(n="i",a+=1):(n=null,m&&h('"i"')),n=n!==null?n:null),n!==null){o=[];for(r=q();r!==null;)o.push(r),r=q();if(o!==null)if(c.substr(a,1)==="("?(r="(",a+=1):(r=null,m&&h('"("')),r!==null){s=[];for(u=q();u!==null;)s.push(u),u=q();if(s!==null)if(u=P(),u!==null){C=[];for(x=q();x!==null;)C.push(x),x=q();C!==null?(c.substr(a,1)===")"?(x=")",a+=1):(x=null,m&&h('")"')),x!==null?d=[d,i,j,g,n,o,r,s,u,C,
x]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f;else d=null,a=f;else d=null,a=f;else d=null,a=f;f=d!==null?function(a){var c={token:"expression",expressionType:"builtincall",builtincall:"isuri"};c.args=[a];return c}(d[8]):null;f===null&&(f=null,a=k);if(f!==null)k=f;else{f=k=a;c.substr(a,1)==="I"?(d="I",a+=1):(d=null,m&&h('"I"'));d===null&&(c.substr(a,1)==="i"?(d="i",a+=1):(d=null,m&&h('"i"')),d=d!==null?d:null);if(d!==null)if(c.substr(a,
1)==="S"?(i="S",a+=1):(i=null,m&&h('"S"')),i===null&&(c.substr(a,1)==="s"?(i="s",a+=1):(i=null,m&&h('"s"')),i=i!==null?i:null),i!==null)if(c.substr(a,1)==="I"?(j="I",a+=1):(j=null,m&&h('"I"')),j===null&&(c.substr(a,1)==="i"?(j="i",a+=1):(j=null,m&&h('"i"')),j=j!==null?j:null),j!==null)if(c.substr(a,1)==="R"?(g="R",a+=1):(g=null,m&&h('"R"')),g===null&&(c.substr(a,1)==="r"?(g="r",a+=1):(g=null,m&&h('"r"')),g=g!==null?g:null),g!==null)if(c.substr(a,1)==="I"?(n="I",a+=1):(n=null,m&&h('"I"')),n===null&&
(c.substr(a,1)==="i"?(n="i",a+=1):(n=null,m&&h('"i"')),n=n!==null?n:null),n!==null){o=[];for(r=q();r!==null;)o.push(r),r=q();if(o!==null)if(c.substr(a,1)==="("?(r="(",a+=1):(r=null,m&&h('"("')),r!==null){s=[];for(u=q();u!==null;)s.push(u),u=q();if(s!==null)if(u=P(),u!==null){C=[];for(x=q();x!==null;)C.push(x),x=q();C!==null?(c.substr(a,1)===")"?(x=")",a+=1):(x=null,m&&h('")"')),x!==null?d=[d,i,j,g,n,o,r,s,u,C,x]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,
a=f}else d=null,a=f;else d=null,a=f;else d=null,a=f;else d=null,a=f;else d=null,a=f;f=d!==null?function(a){var c={token:"expression",expressionType:"builtincall",builtincall:"isuri"};c.args=[a];return c}(d[8]):null;f===null&&(f=null,a=k);f!==null?k=f:(k=gc(),k===null&&(k=hc(),k===null&&(k=ic(),k=k!==null?k:null)))}}}}}}}}}}}}}}(m=e)&&k===null&&h("[106] BuiltInCall");A[b]={nextPos:a,result:k};return k}function gc(){var b="RegexExpression@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a,
f=a;if(c.substr(a,1)==="R"){var d="R";a+=1}else d=null,m&&h('"R"');d===null&&(c.substr(a,1)==="r"?(d="r",a+=1):(d=null,m&&h('"r"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="E"){var i="E";a+=1}else i=null,m&&h('"E"');i===null&&(c.substr(a,1)==="e"?(i="e",a+=1):(i=null,m&&h('"e"')),i=i!==null?i:null);if(i!==null){if(c.substr(a,1)==="G"){var g="G";a+=1}else g=null,m&&h('"G"');g===null&&(c.substr(a,1)==="g"?(g="g",a+=1):(g=null,m&&h('"g"')),g=g!==null?g:null);if(g!==null){if(c.substr(a,1)===
"E"){var k="E";a+=1}else k=null,m&&h('"E"');k===null&&(c.substr(a,1)==="e"?(k="e",a+=1):(k=null,m&&h('"e"')),k=k!==null?k:null);if(k!==null){if(c.substr(a,1)==="X"){var n="X";a+=1}else n=null,m&&h('"X"');n===null&&(c.substr(a,1)==="x"?(n="x",a+=1):(n=null,m&&h('"x"')),n=n!==null?n:null);if(n!==null){for(var o=[],r=q();r!==null;)o.push(r),r=q();if(o!==null)if(c.substr(a,1)==="("?(r="(",a+=1):(r=null,m&&h('"("')),r!==null){for(var s=[],u=q();u!==null;)s.push(u),u=q();if(s!==null)if(u=P(),u!==null){for(var x=
[],y=q();y!==null;)x.push(y),y=q();if(x!==null)if(c.substr(a,1)===","?(y=",",a+=1):(y=null,m&&h('","')),y!==null){for(var D=[],B=q();B!==null;)D.push(B),B=q();if(D!==null)if(B=P(),B!==null){for(var F=[],G=q();G!==null;)F.push(G),G=q();if(F!==null){G=a;if(c.substr(a,1)===","){var L=",";a+=1}else L=null,m&&h('","');if(L!==null){for(var E=[],H=q();H!==null;)E.push(H),H=q();E!==null?(H=P(),H!==null?L=[L,E,H]:(L=null,a=G)):(L=null,a=G)}else L=null,a=G;G=L!==null?L:"";if(G!==null){L=[];for(E=q();E!==null;)L.push(E),
E=q();L!==null?(c.substr(a,1)===")"?(E=")",a+=1):(E=null,m&&h('")"')),E!==null?d=[d,i,g,k,n,o,r,s,u,x,y,D,B,F,G,L,E]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?function(a,c,b){var d={token:"expression",expressionType:"regex"};d.text=a;d.pattern=c;d.flags=b[2];return d}(d[8],
d[12],d[14]):null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[107] RegexExpression");A[b]={nextPos:a,result:f};return f}function hc(){var b="ExistsFunc@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a,f=a;if(c.substr(a,1)==="E"){var d="E";a+=1}else d=null,m&&h('"E"');d===null&&(c.substr(a,1)==="e"?(d="e",a+=1):(d=null,m&&h('"e"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="X"){var i="X";a+=1}else i=null,m&&h('"X"');i===null&&(c.substr(a,1)==="x"?(i="x",a+=1):(i=null,m&&h('"x"')),
i=i!==null?i:null);if(i!==null){if(c.substr(a,1)==="I"){var g="I";a+=1}else g=null,m&&h('"I"');g===null&&(c.substr(a,1)==="i"?(g="i",a+=1):(g=null,m&&h('"i"')),g=g!==null?g:null);if(g!==null){if(c.substr(a,1)==="S"){var k="S";a+=1}else k=null,m&&h('"S"');k===null&&(c.substr(a,1)==="s"?(k="s",a+=1):(k=null,m&&h('"s"')),k=k!==null?k:null);if(k!==null){if(c.substr(a,1)==="T"){var n="T";a+=1}else n=null,m&&h('"T"');n===null&&(c.substr(a,1)==="t"?(n="t",a+=1):(n=null,m&&h('"t"')),n=n!==null?n:null);if(n!==
null){if(c.substr(a,1)==="S"){var o="S";a+=1}else o=null,m&&h('"S"');o===null&&(c.substr(a,1)==="s"?(o="s",a+=1):(o=null,m&&h('"s"')),o=o!==null?o:null);if(o!==null){for(var r=[],s=q();s!==null;)r.push(s),s=q();r!==null?(s=Z(),s!==null?d=[d,i,g,k,n,o,r,s]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?function(a){var c={token:"expression",expressionType:"builtincall",builtincall:"exists"};c.args=[a];return c}(d[7]):
null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[108] ExistsFunc");A[b]={nextPos:a,result:f};return f}function ic(){var b="NotExistsFunc@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a,f=a;if(c.substr(a,1)==="N"){var d="N";a+=1}else d=null,m&&h('"N"');d===null&&(c.substr(a,1)==="n"?(d="n",a+=1):(d=null,m&&h('"n"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="O"){var i="O";a+=1}else i=null,m&&h('"O"');i===null&&(c.substr(a,1)==="o"?(i="o",a+=1):(i=null,m&&h('"o"')),i=i!==null?
i:null);if(i!==null){if(c.substr(a,1)==="T"){var g="T";a+=1}else g=null,m&&h('"T"');g===null&&(c.substr(a,1)==="t"?(g="t",a+=1):(g=null,m&&h('"t"')),g=g!==null?g:null);if(g!==null){for(var k=[],n=q();n!==null;)k.push(n),n=q();if(k!==null)if(c.substr(a,1)==="E"?(n="E",a+=1):(n=null,m&&h('"E"')),n===null&&(c.substr(a,1)==="e"?(n="e",a+=1):(n=null,m&&h('"e"')),n=n!==null?n:null),n!==null){if(c.substr(a,1)==="X"){var o="X";a+=1}else o=null,m&&h('"X"');o===null&&(c.substr(a,1)==="x"?(o="x",a+=1):(o=null,
m&&h('"x"')),o=o!==null?o:null);if(o!==null){if(c.substr(a,1)==="I"){var r="I";a+=1}else r=null,m&&h('"I"');r===null&&(c.substr(a,1)==="i"?(r="i",a+=1):(r=null,m&&h('"i"')),r=r!==null?r:null);if(r!==null){if(c.substr(a,1)==="S"){var s="S";a+=1}else s=null,m&&h('"S"');s===null&&(c.substr(a,1)==="s"?(s="s",a+=1):(s=null,m&&h('"s"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="T"){var u="T";a+=1}else u=null,m&&h('"T"');u===null&&(c.substr(a,1)==="t"?(u="t",a+=1):(u=null,m&&h('"t"')),u=u!==null?
u:null);if(u!==null){if(c.substr(a,1)==="S"){var x="S";a+=1}else x=null,m&&h('"S"');x===null&&(c.substr(a,1)==="s"?(x="s",a+=1):(x=null,m&&h('"s"')),x=x!==null?x:null);if(x!==null){for(var y=[],D=q();D!==null;)y.push(D),D=q();y!==null?(D=Z(),D!==null?d=[d,i,g,k,n,o,r,s,u,x,y,D]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?function(a){var c={token:"expression",
expressionType:"builtincall",builtincall:"notexists"};c.args=[a];return c}(d[11]):null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[109] NotExistsFunc");A[b]={nextPos:a,result:f};return f}function fc(){var b="Aggregate@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a,f=a;if(c.substr(a,1)==="C"){var d="C";a+=1}else d=null,m&&h('"C"');d===null&&(c.substr(a,1)==="c"?(d="c",a+=1):(d=null,m&&h('"c"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="O"){var i="O";a+=1}else i=null,m&&h('"O"');
i===null&&(c.substr(a,1)==="o"?(i="o",a+=1):(i=null,m&&h('"o"')),i=i!==null?i:null);if(i!==null){if(c.substr(a,1)==="U"){var g="U";a+=1}else g=null,m&&h('"U"');g===null&&(c.substr(a,1)==="u"?(g="u",a+=1):(g=null,m&&h('"u"')),g=g!==null?g:null);if(g!==null){if(c.substr(a,1)==="N"){var k="N";a+=1}else k=null,m&&h('"N"');k===null&&(c.substr(a,1)==="n"?(k="n",a+=1):(k=null,m&&h('"n"')),k=k!==null?k:null);if(k!==null){if(c.substr(a,1)==="T"){var n="T";a+=1}else n=null,m&&h('"T"');n===null&&(c.substr(a,
1)==="t"?(n="t",a+=1):(n=null,m&&h('"t"')),n=n!==null?n:null);if(n!==null){for(var o=[],r=q();r!==null;)o.push(r),r=q();if(o!==null)if(c.substr(a,1)==="("?(r="(",a+=1):(r=null,m&&h('"("')),r!==null){for(var s=[],u=q();u!==null;)s.push(u),u=q();if(s!==null){u=a;if(c.substr(a,1)==="D"){var x="D";a+=1}else x=null,m&&h('"D"');x===null&&(c.substr(a,1)==="d"?(x="d",a+=1):(x=null,m&&h('"d"')),x=x!==null?x:null);if(x!==null){if(c.substr(a,1)==="I"){var y="I";a+=1}else y=null,m&&h('"I"');y===null&&(c.substr(a,
1)==="i"?(y="i",a+=1):(y=null,m&&h('"i"')),y=y!==null?y:null);if(y!==null){if(c.substr(a,1)==="S"){var D="S";a+=1}else D=null,m&&h('"S"');D===null&&(c.substr(a,1)==="s"?(D="s",a+=1):(D=null,m&&h('"s"')),D=D!==null?D:null);if(D!==null){if(c.substr(a,1)==="T"){var B="T";a+=1}else B=null,m&&h('"T"');B===null&&(c.substr(a,1)==="t"?(B="t",a+=1):(B=null,m&&h('"t"')),B=B!==null?B:null);if(B!==null){if(c.substr(a,1)==="I"){var F="I";a+=1}else F=null,m&&h('"I"');F===null&&(c.substr(a,1)==="i"?(F="i",a+=1):
(F=null,m&&h('"i"')),F=F!==null?F:null);if(F!==null){if(c.substr(a,1)==="N"){var G="N";a+=1}else G=null,m&&h('"N"');G===null&&(c.substr(a,1)==="n"?(G="n",a+=1):(G=null,m&&h('"n"')),G=G!==null?G:null);if(G!==null){if(c.substr(a,1)==="C"){var L="C";a+=1}else L=null,m&&h('"C"');L===null&&(c.substr(a,1)==="c"?(L="c",a+=1):(L=null,m&&h('"c"')),L=L!==null?L:null);if(L!==null){if(c.substr(a,1)==="T"){var E="T";a+=1}else E=null,m&&h('"T"');E===null&&(c.substr(a,1)==="t"?(E="t",a+=1):(E=null,m&&h('"t"')),
E=E!==null?E:null);E!==null?x=[x,y,D,B,F,G,L,E]:(x=null,a=u)}else x=null,a=u}else x=null,a=u}else x=null,a=u}else x=null,a=u}else x=null,a=u}else x=null,a=u}else x=null,a=u;u=x!==null?x:"";if(u!==null){x=[];for(y=q();y!==null;)x.push(y),y=q();if(x!==null)if(c.substr(a,1)==="*"?(y="*",a+=1):(y=null,m&&h('"*"')),y===null&&(y=P(),y=y!==null?y:null),y!==null){D=[];for(B=q();B!==null;)D.push(B),B=q();if(D!==null)if(c.substr(a,1)===")"?(B=")",a+=1):(B=null,m&&h('")"')),B!==null){F=[];for(G=q();G!==null;)F.push(G),
G=q();F!==null?d=[d,i,g,k,n,o,r,s,u,x,y,D,B,F]:(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f}else d=null,a=f;f=d!==null?function(a,c){exp={token:"expression",expressionType:"aggregate",aggregateType:"count"};exp.distinct=a!=""?"DISTINCT":a;exp.expression=c;return exp}(d[8],d[10]):null;f===null&&(f=null,a=j);if(f!==null)j=f;else{f=j=a;c.substr(a,
1)==="S"?(d="S",a+=1):(d=null,m&&h('"S"'));d===null&&(c.substr(a,1)==="s"?(d="s",a+=1):(d=null,m&&h('"s"')),d=d!==null?d:null);if(d!==null)if(c.substr(a,1)==="U"?(i="U",a+=1):(i=null,m&&h('"U"')),i===null&&(c.substr(a,1)==="u"?(i="u",a+=1):(i=null,m&&h('"u"')),i=i!==null?i:null),i!==null)if(c.substr(a,1)==="M"?(g="M",a+=1):(g=null,m&&h('"M"')),g===null&&(c.substr(a,1)==="m"?(g="m",a+=1):(g=null,m&&h('"m"')),g=g!==null?g:null),g!==null){k=[];for(n=q();n!==null;)k.push(n),n=q();if(k!==null)if(c.substr(a,
1)==="("?(n="(",a+=1):(n=null,m&&h('"("')),n!==null){o=[];for(r=q();r!==null;)o.push(r),r=q();if(o!==null)if(r=a,c.substr(a,1)==="D"?(s="D",a+=1):(s=null,m&&h('"D"')),s===null&&(c.substr(a,1)==="d"?(s="d",a+=1):(s=null,m&&h('"d"')),s=s!==null?s:null),s!==null?(c.substr(a,1)==="I"?(u="I",a+=1):(u=null,m&&h('"I"')),u===null&&(c.substr(a,1)==="i"?(u="i",a+=1):(u=null,m&&h('"i"')),u=u!==null?u:null),u!==null?(c.substr(a,1)==="S"?(x="S",a+=1):(x=null,m&&h('"S"')),x===null&&(c.substr(a,1)==="s"?(x="s",
a+=1):(x=null,m&&h('"s"')),x=x!==null?x:null),x!==null?(c.substr(a,1)==="T"?(y="T",a+=1):(y=null,m&&h('"T"')),y===null&&(c.substr(a,1)==="t"?(y="t",a+=1):(y=null,m&&h('"t"')),y=y!==null?y:null),y!==null?(c.substr(a,1)==="I"?(D="I",a+=1):(D=null,m&&h('"I"')),D===null&&(c.substr(a,1)==="i"?(D="i",a+=1):(D=null,m&&h('"i"')),D=D!==null?D:null),D!==null?(c.substr(a,1)==="N"?(B="N",a+=1):(B=null,m&&h('"N"')),B===null&&(c.substr(a,1)==="n"?(B="n",a+=1):(B=null,m&&h('"n"')),B=B!==null?B:null),B!==null?(c.substr(a,
1)==="C"?(F="C",a+=1):(F=null,m&&h('"C"')),F===null&&(c.substr(a,1)==="c"?(F="c",a+=1):(F=null,m&&h('"c"')),F=F!==null?F:null),F!==null?(c.substr(a,1)==="T"?(G="T",a+=1):(G=null,m&&h('"T"')),G===null&&(c.substr(a,1)==="t"?(G="t",a+=1):(G=null,m&&h('"t"')),G=G!==null?G:null),G!==null?s=[s,u,x,y,D,B,F,G]:(s=null,a=r)):(s=null,a=r)):(s=null,a=r)):(s=null,a=r)):(s=null,a=r)):(s=null,a=r)):(s=null,a=r)):(s=null,a=r),r=s!==null?s:"",r!==null){s=[];for(u=q();u!==null;)s.push(u),u=q();if(s!==null)if(u=P(),
u!==null){x=[];for(y=q();y!==null;)x.push(y),y=q();if(x!==null)if(c.substr(a,1)===")"?(y=")",a+=1):(y=null,m&&h('")"')),y!==null){D=[];for(B=q();B!==null;)D.push(B),B=q();D!==null?d=[d,i,g,k,n,o,r,s,u,x,y,D]:(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f;else d=null,a=f;f=d!==null?function(a,c){exp={token:"expression",expressionType:"aggregate",aggregateType:"sum"};exp.distinct=
a!=""?"DISTINCT":a;exp.expression=c;return exp}(d[6],d[8]):null;f===null&&(f=null,a=j);if(f!==null)j=f;else{f=j=a;c.substr(a,1)==="M"?(d="M",a+=1):(d=null,m&&h('"M"'));d===null&&(c.substr(a,1)==="m"?(d="m",a+=1):(d=null,m&&h('"m"')),d=d!==null?d:null);if(d!==null)if(c.substr(a,1)==="I"?(i="I",a+=1):(i=null,m&&h('"I"')),i===null&&(c.substr(a,1)==="i"?(i="i",a+=1):(i=null,m&&h('"i"')),i=i!==null?i:null),i!==null)if(c.substr(a,1)==="N"?(g="N",a+=1):(g=null,m&&h('"N"')),g===null&&(c.substr(a,1)==="n"?
(g="n",a+=1):(g=null,m&&h('"n"')),g=g!==null?g:null),g!==null){k=[];for(n=q();n!==null;)k.push(n),n=q();if(k!==null)if(c.substr(a,1)==="("?(n="(",a+=1):(n=null,m&&h('"("')),n!==null){o=[];for(r=q();r!==null;)o.push(r),r=q();if(o!==null)if(r=a,c.substr(a,1)==="D"?(s="D",a+=1):(s=null,m&&h('"D"')),s===null&&(c.substr(a,1)==="d"?(s="d",a+=1):(s=null,m&&h('"d"')),s=s!==null?s:null),s!==null?(c.substr(a,1)==="I"?(u="I",a+=1):(u=null,m&&h('"I"')),u===null&&(c.substr(a,1)==="i"?(u="i",a+=1):(u=null,m&&h('"i"')),
u=u!==null?u:null),u!==null?(c.substr(a,1)==="S"?(x="S",a+=1):(x=null,m&&h('"S"')),x===null&&(c.substr(a,1)==="s"?(x="s",a+=1):(x=null,m&&h('"s"')),x=x!==null?x:null),x!==null?(c.substr(a,1)==="T"?(y="T",a+=1):(y=null,m&&h('"T"')),y===null&&(c.substr(a,1)==="t"?(y="t",a+=1):(y=null,m&&h('"t"')),y=y!==null?y:null),y!==null?(c.substr(a,1)==="I"?(D="I",a+=1):(D=null,m&&h('"I"')),D===null&&(c.substr(a,1)==="i"?(D="i",a+=1):(D=null,m&&h('"i"')),D=D!==null?D:null),D!==null?(c.substr(a,1)==="N"?(B="N",a+=
1):(B=null,m&&h('"N"')),B===null&&(c.substr(a,1)==="n"?(B="n",a+=1):(B=null,m&&h('"n"')),B=B!==null?B:null),B!==null?(c.substr(a,1)==="C"?(F="C",a+=1):(F=null,m&&h('"C"')),F===null&&(c.substr(a,1)==="c"?(F="c",a+=1):(F=null,m&&h('"c"')),F=F!==null?F:null),F!==null?(c.substr(a,1)==="T"?(G="T",a+=1):(G=null,m&&h('"T"')),G===null&&(c.substr(a,1)==="t"?(G="t",a+=1):(G=null,m&&h('"t"')),G=G!==null?G:null),G!==null?s=[s,u,x,y,D,B,F,G]:(s=null,a=r)):(s=null,a=r)):(s=null,a=r)):(s=null,a=r)):(s=null,a=r)):
(s=null,a=r)):(s=null,a=r)):(s=null,a=r),r=s!==null?s:"",r!==null){s=[];for(u=q();u!==null;)s.push(u),u=q();if(s!==null)if(u=P(),u!==null){x=[];for(y=q();y!==null;)x.push(y),y=q();if(x!==null)if(c.substr(a,1)===")"?(y=")",a+=1):(y=null,m&&h('")"')),y!==null){D=[];for(B=q();B!==null;)D.push(B),B=q();D!==null?d=[d,i,g,k,n,o,r,s,u,x,y,D]:(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=
null,a=f;else d=null,a=f;f=d!==null?function(a,c){exp={token:"expression",expressionType:"aggregate",aggregateType:"min"};exp.distinct=a!=""?"DISTINCT":a;exp.expression=c;return exp}(d[6],d[8]):null;f===null&&(f=null,a=j);if(f!==null)j=f;else{f=j=a;c.substr(a,1)==="M"?(d="M",a+=1):(d=null,m&&h('"M"'));d===null&&(c.substr(a,1)==="m"?(d="m",a+=1):(d=null,m&&h('"m"')),d=d!==null?d:null);if(d!==null)if(c.substr(a,1)==="A"?(i="A",a+=1):(i=null,m&&h('"A"')),i===null&&(c.substr(a,1)==="a"?(i="a",a+=1):(i=
null,m&&h('"a"')),i=i!==null?i:null),i!==null)if(c.substr(a,1)==="X"?(g="X",a+=1):(g=null,m&&h('"X"')),g===null&&(c.substr(a,1)==="x"?(g="x",a+=1):(g=null,m&&h('"x"')),g=g!==null?g:null),g!==null){k=[];for(n=q();n!==null;)k.push(n),n=q();if(k!==null)if(c.substr(a,1)==="("?(n="(",a+=1):(n=null,m&&h('"("')),n!==null){o=[];for(r=q();r!==null;)o.push(r),r=q();if(o!==null)if(r=a,c.substr(a,1)==="D"?(s="D",a+=1):(s=null,m&&h('"D"')),s===null&&(c.substr(a,1)==="d"?(s="d",a+=1):(s=null,m&&h('"d"')),s=s!==
null?s:null),s!==null?(c.substr(a,1)==="I"?(u="I",a+=1):(u=null,m&&h('"I"')),u===null&&(c.substr(a,1)==="i"?(u="i",a+=1):(u=null,m&&h('"i"')),u=u!==null?u:null),u!==null?(c.substr(a,1)==="S"?(x="S",a+=1):(x=null,m&&h('"S"')),x===null&&(c.substr(a,1)==="s"?(x="s",a+=1):(x=null,m&&h('"s"')),x=x!==null?x:null),x!==null?(c.substr(a,1)==="T"?(y="T",a+=1):(y=null,m&&h('"T"')),y===null&&(c.substr(a,1)==="t"?(y="t",a+=1):(y=null,m&&h('"t"')),y=y!==null?y:null),y!==null?(c.substr(a,1)==="I"?(D="I",a+=1):(D=
null,m&&h('"I"')),D===null&&(c.substr(a,1)==="i"?(D="i",a+=1):(D=null,m&&h('"i"')),D=D!==null?D:null),D!==null?(c.substr(a,1)==="N"?(B="N",a+=1):(B=null,m&&h('"N"')),B===null&&(c.substr(a,1)==="n"?(B="n",a+=1):(B=null,m&&h('"n"')),B=B!==null?B:null),B!==null?(c.substr(a,1)==="C"?(F="C",a+=1):(F=null,m&&h('"C"')),F===null&&(c.substr(a,1)==="c"?(F="c",a+=1):(F=null,m&&h('"c"')),F=F!==null?F:null),F!==null?(c.substr(a,1)==="T"?(G="T",a+=1):(G=null,m&&h('"T"')),G===null&&(c.substr(a,1)==="t"?(G="t",a+=
1):(G=null,m&&h('"t"')),G=G!==null?G:null),G!==null?s=[s,u,x,y,D,B,F,G]:(s=null,a=r)):(s=null,a=r)):(s=null,a=r)):(s=null,a=r)):(s=null,a=r)):(s=null,a=r)):(s=null,a=r)):(s=null,a=r),r=s!==null?s:"",r!==null){s=[];for(u=q();u!==null;)s.push(u),u=q();if(s!==null)if(u=P(),u!==null){x=[];for(y=q();y!==null;)x.push(y),y=q();if(x!==null)if(c.substr(a,1)===")"?(y=")",a+=1):(y=null,m&&h('")"')),y!==null){D=[];for(B=q();B!==null;)D.push(B),B=q();D!==null?d=[d,i,g,k,n,o,r,s,u,x,y,D]:(d=null,a=f)}else d=null,
a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f;else d=null,a=f;f=d!==null?function(a,c){exp={token:"expression",expressionType:"aggregate",aggregateType:"max"};exp.distinct=a!=""?"DISTINCT":a;exp.expression=c;return exp}(d[6],d[8]):null;f===null&&(f=null,a=j);if(f!==null)j=f;else{f=j=a;c.substr(a,1)==="A"?(d="A",a+=1):(d=null,m&&h('"A"'));d===null&&(c.substr(a,1)==="a"?(d="a",a+=1):(d=null,m&&h('"a"')),
d=d!==null?d:null);if(d!==null)if(c.substr(a,1)==="V"?(i="V",a+=1):(i=null,m&&h('"V"')),i===null&&(c.substr(a,1)==="v"?(i="v",a+=1):(i=null,m&&h('"v"')),i=i!==null?i:null),i!==null)if(c.substr(a,1)==="G"?(g="G",a+=1):(g=null,m&&h('"G"')),g===null&&(c.substr(a,1)==="g"?(g="g",a+=1):(g=null,m&&h('"g"')),g=g!==null?g:null),g!==null){k=[];for(n=q();n!==null;)k.push(n),n=q();if(k!==null)if(c.substr(a,1)==="("?(n="(",a+=1):(n=null,m&&h('"("')),n!==null){o=[];for(r=q();r!==null;)o.push(r),r=q();if(o!==null)if(r=
a,c.substr(a,1)==="D"?(s="D",a+=1):(s=null,m&&h('"D"')),s===null&&(c.substr(a,1)==="d"?(s="d",a+=1):(s=null,m&&h('"d"')),s=s!==null?s:null),s!==null?(c.substr(a,1)==="I"?(u="I",a+=1):(u=null,m&&h('"I"')),u===null&&(c.substr(a,1)==="i"?(u="i",a+=1):(u=null,m&&h('"i"')),u=u!==null?u:null),u!==null?(c.substr(a,1)==="S"?(x="S",a+=1):(x=null,m&&h('"S"')),x===null&&(c.substr(a,1)==="s"?(x="s",a+=1):(x=null,m&&h('"s"')),x=x!==null?x:null),x!==null?(c.substr(a,1)==="T"?(y="T",a+=1):(y=null,m&&h('"T"')),y===
null&&(c.substr(a,1)==="t"?(y="t",a+=1):(y=null,m&&h('"t"')),y=y!==null?y:null),y!==null?(c.substr(a,1)==="I"?(D="I",a+=1):(D=null,m&&h('"I"')),D===null&&(c.substr(a,1)==="i"?(D="i",a+=1):(D=null,m&&h('"i"')),D=D!==null?D:null),D!==null?(c.substr(a,1)==="N"?(B="N",a+=1):(B=null,m&&h('"N"')),B===null&&(c.substr(a,1)==="n"?(B="n",a+=1):(B=null,m&&h('"n"')),B=B!==null?B:null),B!==null?(c.substr(a,1)==="C"?(F="C",a+=1):(F=null,m&&h('"C"')),F===null&&(c.substr(a,1)==="c"?(F="c",a+=1):(F=null,m&&h('"c"')),
F=F!==null?F:null),F!==null?(c.substr(a,1)==="T"?(G="T",a+=1):(G=null,m&&h('"T"')),G===null&&(c.substr(a,1)==="t"?(G="t",a+=1):(G=null,m&&h('"t"')),G=G!==null?G:null),G!==null?s=[s,u,x,y,D,B,F,G]:(s=null,a=r)):(s=null,a=r)):(s=null,a=r)):(s=null,a=r)):(s=null,a=r)):(s=null,a=r)):(s=null,a=r)):(s=null,a=r),r=s!==null?s:"",r!==null){s=[];for(u=q();u!==null;)s.push(u),u=q();if(s!==null)if(u=P(),u!==null){x=[];for(y=q();y!==null;)x.push(y),y=q();if(x!==null)if(c.substr(a,1)===")"?(y=")",a+=1):(y=null,
m&&h('")"')),y!==null){D=[];for(B=q();B!==null;)D.push(B),B=q();D!==null?d=[d,i,g,k,n,o,r,s,u,x,y,D]:(d=null,a=f)}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f}else d=null,a=f;else d=null,a=f;else d=null,a=f;f=d!==null?function(a,c){exp={token:"expression",expressionType:"aggregate",aggregateType:"avg"};exp.distinct=a!=""?"DISTINCT":a;exp.expression=c;return exp}(d[6],d[8]):null;f===null&&(f=null,a=j);j=f!==null?f:null}}}}(m=
e)&&j===null&&h("[110] Aggregate");A[b]={nextPos:a,result:j};return j}function ec(){var c="IRIrefOrFunction@"+a,b=A[c];if(b)return a=b.nextPos,b.result;b=m;m=!1;var e=a,f=a,d=V();if(d!==null){var i=pb(),i=i!==null?i:"";i!==null?d=[d,i]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a,c){var b={token:"expression",expressionType:"irireforfunction"};b.iriref=a;b.args=c.value;return b}(d[0],d[1]):null;f===null&&(f=null,a=e);(m=b)&&f===null&&h("[117] IRIrefOrFunction");A[c]={nextPos:a,result:f};return f}
function Ka(){var b="RDFLiteral@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var i=a,f=a,d=jc();if(d!==null){var j=kc();if(j===null){j=a;if(c.substr(a,2)==="^^"){var g="^^";a+=2}else g=null,m&&h('"^^"');if(g!==null){var k=V();k!==null?g=[g,k]:(g=null,a=j)}else g=null,a=j;j=g!==null?g:null}j=j!==null?j:"";j!==null?d=[d,j]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a,c){return typeof c==="string"&&c.length>0?{token:"literal",value:a.value,lang:c.slice(1),type:null}:typeof c==="object"?
(c.shift(),{token:"literal",value:a.value,lang:null,type:c[0]}):{token:"literal",value:a.value,lang:null,type:null}}(d[0],d[1]):null;f===null&&(f=null,a=i);(m=e)&&f===null&&h("[112] RDFLiteral");A[b]={nextPos:a,result:f};return f}function La(){var c="NumericLiteral@"+a,b=A[c];if(b)return a=b.nextPos,b.result;b=m;m=!1;var e=lc();e===null&&(e=mc(),e===null&&(e=va(),e=e!==null?e:null));(m=b)&&e===null&&h("[113] NumericLiteral");A[c]={nextPos:a,result:e};return e}function lc(){var c="NumericLiteralUnsigned@"+
a,b=A[c];if(b)return a=b.nextPos,b.result;b=m;m=!1;var e=Wa();e===null&&(e=Xa(),e===null&&(e=fa(),e=e!==null?e:null));(m=b)&&e===null&&h("[114] NumericLiteralUnsigned");A[c]={nextPos:a,result:e};return e}function mc(){var c="NumericLiteralPositive@"+a,b=A[c];if(b)return a=b.nextPos,b.result;b=m;m=!1;var e=nc();e===null&&(e=oc(),e===null&&(e=pc(),e=e!==null?e:null));(m=b)&&e===null&&h("[115] NumericLiteralPositive");A[c]={nextPos:a,result:e};return e}function va(){var c="NumericLiteralNegative@"+a,
b=A[c];if(b)return a=b.nextPos,b.result;b=m;m=!1;var e=qc();e===null&&(e=rc(),e===null&&(e=sc(),e=e!==null?e:null));(m=b)&&e===null&&h("[116] NumericLiteralNegative");A[c]={nextPos:a,result:e};return e}function Ma(){var b="BooleanLiteral@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var i=a,f=a;if(c.substr(a,1)==="T"){var d="T";a+=1}else d=null,m&&h('"T"');d===null&&(c.substr(a,1)==="t"?(d="t",a+=1):(d=null,m&&h('"t"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="R"){var j="R";a+=1}else j=
null,m&&h('"R"');j===null&&(c.substr(a,1)==="r"?(j="r",a+=1):(j=null,m&&h('"r"')),j=j!==null?j:null);if(j!==null){if(c.substr(a,1)==="U"){var g="U";a+=1}else g=null,m&&h('"U"');g===null&&(c.substr(a,1)==="u"?(g="u",a+=1):(g=null,m&&h('"u"')),g=g!==null?g:null);if(g!==null){if(c.substr(a,1)==="E"){var k="E";a+=1}else k=null,m&&h('"E"');k===null&&(c.substr(a,1)==="e"?(k="e",a+=1):(k=null,m&&h('"e"')),k=k!==null?k:null);k!==null?d=[d,j,g,k]:(d=null,a=f)}else d=null,a=f}else d=null,a=f}else d=null,a=
f;f=d!==null?lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!0}:null;f===null&&(f=null,a=i);if(f!==null)i=f;else{f=i=a;c.substr(a,1)==="F"?(d="F",a+=1):(d=null,m&&h('"F"'));d===null&&(c.substr(a,1)==="f"?(d="f",a+=1):(d=null,m&&h('"f"')),d=d!==null?d:null);if(d!==null)if(c.substr(a,1)==="A"?(j="A",a+=1):(j=null,m&&h('"A"')),j===null&&(c.substr(a,1)==="a"?(j="a",a+=1):(j=null,m&&h('"a"')),j=j!==null?j:null),j!==null)if(c.substr(a,1)==="L"?(g="L",a+=1):(g=null,
m&&h('"L"')),g===null&&(c.substr(a,1)==="l"?(g="l",a+=1):(g=null,m&&h('"l"')),g=g!==null?g:null),g!==null)if(c.substr(a,1)==="S"?(k="S",a+=1):(k=null,m&&h('"S"')),k===null&&(c.substr(a,1)==="s"?(k="s",a+=1):(k=null,m&&h('"s"')),k=k!==null?k:null),k!==null){if(c.substr(a,1)==="E"){var n="E";a+=1}else n=null,m&&h('"E"');n===null&&(c.substr(a,1)==="e"?(n="e",a+=1):(n=null,m&&h('"e"')),n=n!==null?n:null);n!==null?d=[d,j,g,k,n]:(d=null,a=f)}else d=null,a=f;else d=null,a=f;else d=null,a=f;else d=null,a=
f;f=d!==null?lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!1}:null;f===null&&(f=null,a=i);i=f!==null?f:null}(m=e)&&i===null&&h("[117] BooleanLiteral");A[b]={nextPos:a,result:i};return i}function jc(){var c="String@"+a,b=A[c];if(b)return a=b.nextPos,b.result;b=m;m=!1;var e=a,f=tc(),f=f!==null?{token:"string",value:f}:null;f===null&&(f=null,a=e);f!==null?e=f:(e=a,f=uc(),f=f!==null?{token:"string",value:f}:null,f===null&&(f=null,a=e),f!==null?e=f:(e=a,f=vc(),f=
f!==null?{token:"string",value:f}:null,f===null&&(f=null,a=e),f!==null?e=f:(e=a,f=wc(),f=f!==null?{token:"string",value:f}:null,f===null&&(f=null,a=e),e=f!==null?f:null)));(m=b)&&e===null&&h("[118] String");A[c]={nextPos:a,result:e};return e}function V(){var c="IRIref@"+a,b=A[c];if(b)return a=b.nextPos,b.result;b=m;m=!1;var e=a,f=oa(),f=f!==null?{token:"uri",prefix:null,suffix:null,value:f}:null;f===null&&(f=null,a=e);f!==null?e=f:(e=a,f=xc(),f=f!==null?f:null,f===null&&(f=null,a=e),e=f!==null?f:
null);(m=b)&&e===null&&h("[119] IRIref");A[c]={nextPos:a,result:e};return e}function xc(){var c="PrefixedName@"+a,b=A[c];if(b)return a=b.nextPos,b.result;b=m;m=!1;var e=a,f=yc(),f=f!==null?{token:"uri",prefix:f[0],suffix:f[1],value:null}:null;f===null&&(f=null,a=e);f!==null?e=f:(e=a,f=Ha(),f=f!==null?{token:"uri",prefix:f,suffix:"",value:null}:null,f===null&&(f=null,a=e),e=f!==null?f:null);(m=b)&&e===null&&h("[120] PrefixedName");A[c]={nextPos:a,result:e};return e}function dc(){var c="BlankNode@"+
a,b=A[c];if(b)return a=b.nextPos,b.result;b=m;m=!1;var e=a,f=zc(),f=f!==null?{token:"blank",value:f}:null;f===null&&(f=null,a=e);f!==null?e=f:(e=a,Ac()!==null?(ga++,f={token:"blank",value:"_:"+ga}):f=null,f===null&&(f=null,a=e),e=f!==null?f:null);(m=b)&&e===null&&h("[121] BlankNode");A[c]={nextPos:a,result:e};return e}function oa(){var b="IRI_REF@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a,f=a;if(c.substr(a,1)==="<"){var d="<";a+=1}else d=null,m&&h('"<"');if(d!==null){var i=[];if(c.substr(a).match(/^[^<>"{}|^`\\]/)!==
null){var g=c.charAt(a);a++}else g=null,m&&h('[^<>"{}|^`\\\\]');for(;g!==null;)i.push(g),c.substr(a).match(/^[^<>"{}|^`\\]/)!==null?(g=c.charAt(a),a++):(g=null,m&&h('[^<>"{}|^`\\\\]'));i!==null?(c.substr(a,1)===">"?(g=">",a+=1):(g=null,m&&h('">"')),g!==null?d=[d,i,g]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;f=d!==null?d[1].join(""):null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[122] IRI_REF");A[b]={nextPos:a,result:f};return f}function Ha(){var b="PNAME_NS@"+a,e=A[b];if(e)return a=e.nextPos,e.result;
e=m;m=!1;var j=a,f=a,d=eb(),d=d!==null?d:"";if(d!==null){if(c.substr(a,1)===":"){var i=":";a+=1}else i=null,m&&h('":"');i!==null?d=[d,i]:(d=null,a=f)}else d=null,a=f;f=d!==null?d[0]:null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[123] PNAME_NS");A[b]={nextPos:a,result:f};return f}function yc(){var c="PNAME_LN@"+a,b=A[c];if(b)return a=b.nextPos,b.result;b=m;m=!1;var e=a,f=a,d=Ha();if(d!==null){var j=ub();j!==null?d=[d,j]:(d=null,a=f)}else d=null,a=f;f=d!==null?[d[0],d[1]]:null;f===null&&(f=null,a=
e);(m=b)&&f===null&&h("[124] PNAME_LN");A[c]={nextPos:a,result:f};return f}function zc(){var b="BLANK_NODE_LABEL@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a,f=a;if(c.substr(a,2)==="_:"){var d="_:";a+=2}else d=null,m&&h('"_:"');if(d!==null){var i=ub();i!==null?d=[d,i]:(d=null,a=f)}else d=null,a=f;f=d!==null?d[1]:null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[125] BLANK_NODE_LABEL");A[b]={nextPos:a,result:f};return f}function bc(){var b="VAR1@"+a,e=A[b];if(e)return a=e.nextPos,e.result;
e=m;m=!1;var j=a,f=a;if(c.substr(a,1)==="?"){var d="?";a+=1}else d=null,m&&h('"?"');if(d!==null){var i=vb();i!==null?d=[d,i]:(d=null,a=f)}else d=null,a=f;f=d!==null?d[1]:null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[126] VAR1");A[b]={nextPos:a,result:f};return f}function cc(){var b="VAR2@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a,f=a;if(c.substr(a,1)==="$"){var d="$";a+=1}else d=null,m&&h('"$"');if(d!==null){var i=vb();i!==null?d=[d,i]:(d=null,a=f)}else d=null,a=f;f=d!==null?
d[1]:null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[127] VAR2");A[b]={nextPos:a,result:f};return f}function kc(){var b="LANGTAG@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a,f=a;if(c.substr(a,1)==="@"){var d="@";a+=1}else d=null,m&&h('"@"');if(d!==null){if(c.substr(a).match(/^[a-zA-Z]/)!==null){var i=c.charAt(a);a++}else i=null,m&&h("[a-zA-Z]");if(i!==null)for(var g=[];i!==null;)g.push(i),c.substr(a).match(/^[a-zA-Z]/)!==null?(i=c.charAt(a),a++):(i=null,m&&h("[a-zA-Z]"));else g=null;
if(g!==null){var i=[],k=a;if(c.substr(a,1)==="-"){var n="-";a+=1}else n=null,m&&h('"-"');if(n!==null){if(c.substr(a).match(/^[a-zA-Z0-9]/)!==null){var o=c.charAt(a);a++}else o=null,m&&h("[a-zA-Z0-9]");if(o!==null)for(var q=[];o!==null;)q.push(o),c.substr(a).match(/^[a-zA-Z0-9]/)!==null?(o=c.charAt(a),a++):(o=null,m&&h("[a-zA-Z0-9]"));else q=null;q!==null?n=[n,q]:(n=null,a=k)}else n=null,a=k;for(;n!==null;)if(i.push(n),k=a,c.substr(a,1)==="-"?(n="-",a+=1):(n=null,m&&h('"-"')),n!==null){c.substr(a).match(/^[a-zA-Z0-9]/)!==
null?(o=c.charAt(a),a++):(o=null,m&&h("[a-zA-Z0-9]"));if(o!==null)for(q=[];o!==null;)q.push(o),c.substr(a).match(/^[a-zA-Z0-9]/)!==null?(o=c.charAt(a),a++):(o=null,m&&h("[a-zA-Z0-9]"));else q=null;q!==null?n=[n,q]:(n=null,a=k)}else n=null,a=k;i!==null?d=[d,g,i]:(d=null,a=f)}else d=null,a=f}else d=null,a=f;f=d!==null?d[2].length===0?("@"+d[1].join("")).toLowerCase():("@"+d[1].join("")+"-"+d[2][0][1].join("")).toLowerCase():null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[128] LANGTAG");A[b]={nextPos:a,
result:f};return f}function fa(){var b="INTEGER@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var i=a;if(c.substr(a).match(/^[0-9]/)!==null){var f=c.charAt(a);a++}else f=null,m&&h("[0-9]");if(f!==null)for(var d=[];f!==null;)d.push(f),c.substr(a).match(/^[0-9]/)!==null?(f=c.charAt(a),a++):(f=null,m&&h("[0-9]"));else d=null;f=d!==null?function(a){lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#integer"};lit.value=aa(a);return lit}(d):null;f===null&&(f=null,a=i);(m=e)&&f===
null&&h("[129] INTEGER");A[b]={nextPos:a,result:f};return f}function Xa(){var b="DECIMAL@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var i=a,f=a;if(c.substr(a).match(/^[0-9]/)!==null){var d=c.charAt(a);a++}else d=null,m&&h("[0-9]");if(d!==null)for(var j=[];d!==null;)j.push(d),c.substr(a).match(/^[0-9]/)!==null?(d=c.charAt(a),a++):(d=null,m&&h("[0-9]"));else j=null;if(j!==null)if(c.substr(a,1)==="."?(d=".",a+=1):(d=null,m&&h('"."')),d!==null){var g=[];if(c.substr(a).match(/^[0-9]/)!==null){var k=
c.charAt(a);a++}else k=null,m&&h("[0-9]");for(;k!==null;)g.push(k),c.substr(a).match(/^[0-9]/)!==null?(k=c.charAt(a),a++):(k=null,m&&h("[0-9]"));g!==null?j=[j,d,g]:(j=null,a=f)}else j=null,a=f;else j=null,a=f;f=j!==null?function(a,c,b){lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"};lit.value=aa([a,c,b]);return lit}(j[0],j[1],j[2]):null;f===null&&(f=null,a=i);if(f!==null)i=f;else{f=i=a;c.substr(a,1)==="."?(j=".",a+=1):(j=null,m&&h('"."'));if(j!==null){c.substr(a).match(/^[0-9]/)!==
null?(d=c.charAt(a),a++):(d=null,m&&h("[0-9]"));if(d!==null)for(g=[];d!==null;)g.push(d),c.substr(a).match(/^[0-9]/)!==null?(d=c.charAt(a),a++):(d=null,m&&h("[0-9]"));else g=null;g!==null?j=[j,g]:(j=null,a=f)}else j=null,a=f;f=j!==null?function(a,c){lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"};lit.value=aa([a,c]);return lit}(j[0],j[1]):null;f===null&&(f=null,a=i);i=f!==null?f:null}(m=e)&&i===null&&h("[130] DECIMAL");A[b]={nextPos:a,result:i};return i}function Wa(){var b=
"DOUBLE@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a,f=a;if(c.substr(a).match(/^[0-9]/)!==null){var d=c.charAt(a);a++}else d=null,m&&h("[0-9]");if(d!==null)for(var i=[];d!==null;)i.push(d),c.substr(a).match(/^[0-9]/)!==null?(d=c.charAt(a),a++):(d=null,m&&h("[0-9]"));else i=null;if(i!==null)if(c.substr(a,1)==="."?(d=".",a+=1):(d=null,m&&h('"."')),d!==null){var g=[];if(c.substr(a).match(/^[0-9]/)!==null){var k=c.charAt(a);a++}else k=null,m&&h("[0-9]");for(;k!==null;)g.push(k),c.substr(a).match(/^[0-9]/)!==
null?(k=c.charAt(a),a++):(k=null,m&&h("[0-9]"));g!==null?(k=Ya(),k!==null?i=[i,d,g,k]:(i=null,a=f)):(i=null,a=f)}else i=null,a=f;else i=null,a=f;f=i!==null?function(a,c,b,d){lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};lit.value=aa([a,c,b,d]);return lit}(i[0],i[1],i[2],i[3]):null;f===null&&(f=null,a=j);if(f!==null)j=f;else{f=j=a;c.substr(a,1)==="."?(i=".",a+=1):(i=null,m&&h('"."'));if(i!==null){c.substr(a).match(/^[0-9]/)!==null?(g=c.charAt(a),a++):(g=null,m&&h("[0-9]"));
if(g!==null)for(d=[];g!==null;)d.push(g),c.substr(a).match(/^[0-9]/)!==null?(g=c.charAt(a),a++):(g=null,m&&h("[0-9]"));else d=null;d!==null?(g=Ya(),g!==null?i=[i,d,g]:(i=null,a=f)):(i=null,a=f)}else i=null,a=f;f=i!==null?function(a,c,b){lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};lit.value=aa([a,c,b]);return lit}(i[0],i[1],i[2]):null;f===null&&(f=null,a=j);if(f!==null)j=f;else{f=j=a;c.substr(a).match(/^[0-9]/)!==null?(d=c.charAt(a),a++):(d=null,m&&h("[0-9]"));if(d!==
null)for(i=[];d!==null;)i.push(d),c.substr(a).match(/^[0-9]/)!==null?(d=c.charAt(a),a++):(d=null,m&&h("[0-9]"));else i=null;i!==null?(d=Ya(),d!==null?i=[i,d]:(i=null,a=f)):(i=null,a=f);f=i!==null?function(a,c){lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};lit.value=aa([a,c]);return lit}(i[0],i[1]):null;f===null&&(f=null,a=j);j=f!==null?f:null}}(m=e)&&j===null&&h("[131] DOUBLE");A[b]={nextPos:a,result:j};return j}function pc(){var b="INTEGER_POSITIVE@"+a,e=A[b];if(e)return a=
e.nextPos,e.result;e=m;m=!1;var i=a,f=a;if(c.substr(a,1)==="+"){var d="+";a+=1}else d=null,m&&h('"+"');if(d!==null){var j=fa();j!==null?d=[d,j]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a){a.value="+"+a.value;return a}(d[1]):null;f===null&&(f=null,a=i);(m=e)&&f===null&&h("[132] INTEGER_POSITIVE");A[b]={nextPos:a,result:f};return f}function oc(){var b="DECIMAL_POSITIVE@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var i=a,f=a;if(c.substr(a,1)==="+"){var d="+";a+=1}else d=null,m&&h('"+"');
if(d!==null){var j=Xa();j!==null?d=[d,j]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a){a.value="+"+a.value;return a}(d[1]):null;f===null&&(f=null,a=i);(m=e)&&f===null&&h("[133] DECIMAL_POSITIVE");A[b]={nextPos:a,result:f};return f}function nc(){var b="DOUBLE_POSITIVE@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var i=a,f=a;if(c.substr(a,1)==="+"){var d="+";a+=1}else d=null,m&&h('"+"');if(d!==null){var j=Wa();j!==null?d=[d,j]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a){a.value=
"+"+a.value;return a}(d[1]):null;f===null&&(f=null,a=i);(m=e)&&f===null&&h("[134] DOUBLE_POSITIVE");A[b]={nextPos:a,result:f};return f}function sc(){var b="INTEGER_NEGATIVE@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var i=a,f=a;if(c.substr(a,1)==="-"){var d="-";a+=1}else d=null,m&&h('"-"');if(d!==null){var j=fa();j!==null?d=[d,j]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a){a.value="-"+a.value;return a}(d[1]):null;f===null&&(f=null,a=i);(m=e)&&f===null&&h("[135] INTEGER_NEGATIVE");
A[b]={nextPos:a,result:f};return f}function rc(){var b="DECIMAL_NEGATIVE@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var i=a,f=a;if(c.substr(a,1)==="-"){var d="-";a+=1}else d=null,m&&h('"-"');if(d!==null){var j=Xa();j!==null?d=[d,j]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a){a.value="-"+a.value;return a}(d[1]):null;f===null&&(f=null,a=i);(m=e)&&f===null&&h("[136] DECIMAL_NEGATIVE");A[b]={nextPos:a,result:f};return f}function qc(){var b="DOUBLE_NEGATIVE@"+a,e=A[b];if(e)return a=e.nextPos,
e.result;e=m;m=!1;var i=a,f=a;if(c.substr(a,1)==="-"){var d="-";a+=1}else d=null,m&&h('"-"');if(d!==null){var j=Wa();j!==null?d=[d,j]:(d=null,a=f)}else d=null,a=f;f=d!==null?function(a){a.value="-"+a.value;return a}(d[1]):null;f===null&&(f=null,a=i);(m=e)&&f===null&&h("[137] DOUBLE_NEGATIVE");A[b]={nextPos:a,result:f};return f}function Ya(){var b="EXPONENT@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var i=a,f=a;if(c.substr(a).match(/^[eE]/)!==null){var d=c.charAt(a);a++}else d=null,m&&h("[eE]");
if(d!==null){if(c.substr(a).match(/^[+\-]/)!==null){var j=c.charAt(a);a++}else j=null,m&&h("[+\\-]");j=j!==null?j:"";if(j!==null){if(c.substr(a).match(/^[0-9]/)!==null){var g=c.charAt(a);a++}else g=null,m&&h("[0-9]");if(g!==null)for(var k=[];g!==null;)k.push(g),c.substr(a).match(/^[0-9]/)!==null?(g=c.charAt(a),a++):(g=null,m&&h("[0-9]"));else k=null;k!==null?d=[d,j,k]:(d=null,a=f)}else d=null,a=f}else d=null,a=f;f=d!==null?aa([d[0],d[1],d[2]]):null;f===null&&(f=null,a=i);(m=e)&&f===null&&h("[138] EXPONENT");
A[b]={nextPos:a,result:f};return f}function vc(){var b="STRING_LITERAL1@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var i=a,f=a;if(c.substr(a,1)==="'"){var d="'";a+=1}else d=null,m&&h('"\'"');if(d!==null){var j=[];if(c.substr(a).match(/^[^'\\\n\r]/)!==null){var g=c.charAt(a);a++}else g=null,m&&h("[^'\\\\\\n\\r]");g===null&&(g=ha(),g=g!==null?g:null);for(;g!==null;)j.push(g),c.substr(a).match(/^[^'\\\n\r]/)!==null?(g=c.charAt(a),a++):(g=null,m&&h("[^'\\\\\\n\\r]")),g===null&&(g=ha(),g=g!==
null?g:null);j!==null?(c.substr(a,1)==="'"?(g="'",a+=1):(g=null,m&&h('"\'"')),g!==null?d=[d,j,g]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;f=d!==null?aa(d[1]):null;f===null&&(f=null,a=i);(m=e)&&f===null&&h("[139] STRING_LITERAL1");A[b]={nextPos:a,result:f};return f}function wc(){var b="STRING_LITERAL2@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var i=a,f=a;if(c.substr(a,1)==='"'){var d='"';a+=1}else d=null,m&&h('"\\""');if(d!==null){var j=[];if(c.substr(a).match(/^[^"\\\n\r]/)!==null){var g=
c.charAt(a);a++}else g=null,m&&h('[^"\\\\\\n\\r]');g===null&&(g=ha(),g=g!==null?g:null);for(;g!==null;)j.push(g),c.substr(a).match(/^[^"\\\n\r]/)!==null?(g=c.charAt(a),a++):(g=null,m&&h('[^"\\\\\\n\\r]')),g===null&&(g=ha(),g=g!==null?g:null);j!==null?(c.substr(a,1)==='"'?(g='"',a+=1):(g=null,m&&h('"\\""')),g!==null?d=[d,j,g]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;f=d!==null?aa(d[1]):null;f===null&&(f=null,a=i);(m=e)&&f===null&&h("[140] STRING_LITERAL2");A[b]={nextPos:a,result:f};return f}function tc(){var b=
"STRING_LITERAL_LONG1@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var i=a,f=a;if(c.substr(a,3)==="'''"){var d="'''";a+=3}else d=null,m&&h("\"'''\"");if(d!==null){var j=[];if(c.substr(a).match(/^[^'\\]/)!==null){var g=c.charAt(a);a++}else g=null,m&&h("[^'\\\\]");g===null&&(g=ha(),g=g!==null?g:null);for(;g!==null;)j.push(g),c.substr(a).match(/^[^'\\]/)!==null?(g=c.charAt(a),a++):(g=null,m&&h("[^'\\\\]")),g===null&&(g=ha(),g=g!==null?g:null);j!==null?(c.substr(a,3)==="'''"?(g="'''",a+=3):(g=
null,m&&h("\"'''\"")),g!==null?d=[d,j,g]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;f=d!==null?aa(d[1]):null;f===null&&(f=null,a=i);(m=e)&&f===null&&h("[141] STRING_LITERAL_LONG1");A[b]={nextPos:a,result:f};return f}function uc(){var b="STRING_LITERAL_LONG2@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var i=a,f=a;if(c.substr(a,3)==='"""'){var d='"""';a+=3}else d=null,m&&h('"\\"\\"\\""');if(d!==null){var g=[];if(c.substr(a).match(/^[^"\\]/)!==null){var j=c.charAt(a);a++}else j=null,m&&h('[^"\\\\]');
j===null&&(j=ha(),j=j!==null?j:null);for(;j!==null;)g.push(j),c.substr(a).match(/^[^"\\]/)!==null?(j=c.charAt(a),a++):(j=null,m&&h('[^"\\\\]')),j===null&&(j=ha(),j=j!==null?j:null);g!==null?(c.substr(a,3)==='"""'?(j='"""',a+=3):(j=null,m&&h('"\\"\\"\\""')),j!==null?d=[d,g,j]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;f=d!==null?aa(d[1]):null;f===null&&(f=null,a=i);(m=e)&&f===null&&h("[142] STRING_LITERAL_LONG2");A[b]={nextPos:a,result:f};return f}function ha(){var b="ECHAR@"+a,e=A[b];if(e)return a=
e.nextPos,e.result;e=m;m=!1;var j=a;if(c.substr(a,1)==="\\"){var f="\\";a+=1}else f=null,m&&h('"\\\\"');if(f!==null){if(c.substr(a).match(/^[tbnrf"']/)!==null){var d=c.charAt(a);a++}else d=null,m&&h("[tbnrf\"']");d!==null?f=[f,d]:(f=null,a=j)}else f=null,a=j;(m=e)&&f===null&&h("[143] ECHAR");A[b]={nextPos:a,result:f};return f}function la(){var b="NIL@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a,f=a;if(c.substr(a,1)==="("){var d="(";a+=1}else d=null,m&&h('"("');if(d!==null){for(var i=
[],g=q();g!==null;)i.push(g),g=q();i!==null?(c.substr(a,1)===")"?(g=")",a+=1):(g=null,m&&h('")"')),g!==null?d=[d,i,g]:(d=null,a=f)):(d=null,a=f)}else d=null,a=f;f=d!==null?{token:"triplesnodecollection",triplesContext:[],chainSubject:[{token:"uri",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}]}:null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[144] NIL");A[b]={nextPos:a,result:f};return f}function q(){var b="WS@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;if(c.substr(a).match(/^[ ]/)!==
null){var j=c.charAt(a);a++}else j=null,m&&h("[ ]");j===null&&(c.substr(a).match(/^[\t]/)!==null?(j=c.charAt(a),a++):(j=null,m&&h("[\t]")),j===null&&(c.substr(a).match(/^[\r]/)!==null?(j=c.charAt(a),a++):(j=null,m&&h("[\\r]")),j===null&&(c.substr(a).match(/^[\n]/)!==null?(j=c.charAt(a),a++):(j=null,m&&h("[\\n]")),j===null&&(j=Bc(),j=j!==null?j:null))));(m=e)&&j===null&&h("[145] WS");A[b]={nextPos:a,result:j};return j}function Bc(){var b="COMMENT@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;
var j=a;if(c.substr(a,1)==="#"){var f="#";a+=1}else f=null,m&&h('"#"');if(f!==null){var d=[];if(c.substr(a).match(/^[^\n\r]/)!==null){var g=c.charAt(a);a++}else g=null,m&&h("[^\\n\\r]");for(;g!==null;)d.push(g),c.substr(a).match(/^[^\n\r]/)!==null?(g=c.charAt(a),a++):(g=null,m&&h("[^\\n\\r]"));d!==null?f=[f,d]:(f=null,a=j)}else f=null,a=j;(m=e)&&f===null&&h(" COMMENT");A[b]={nextPos:a,result:f};return f}function Ac(){var b="ANON@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a;if(c.substr(a,
1)==="["){var f="[";a+=1}else f=null,m&&h('"["');if(f!==null){for(var d=[],g=q();g!==null;)d.push(g),g=q();d!==null?(c.substr(a,1)==="]"?(g="]",a+=1):(g=null,m&&h('"]"')),g!==null?f=[f,d,g]:(f=null,a=j)):(f=null,a=j)}else f=null,a=j;(m=e)&&f===null&&h("[146] ANON");A[b]={nextPos:a,result:f};return f}function wb(){var b="PN_CHARS_BASE@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;if(c.substr(a).match(/^[A-Z]/)!==null){var j=c.charAt(a);a++}else j=null,m&&h("[A-Z]");j===null&&(c.substr(a).match(/^[a-z]/)!==
null?(j=c.charAt(a),a++):(j=null,m&&h("[a-z]")),j===null&&(c.substr(a).match(/^[\xC0-\xD6]/)!==null?(j=c.charAt(a),a++):(j=null,m&&h("[\\xC0-\\xD6]")),j===null&&(c.substr(a).match(/^[\xD8-\xF6]/)!==null?(j=c.charAt(a),a++):(j=null,m&&h("[\\xD8-\\xF6]")),j===null&&(c.substr(a).match(/^[\xF8-\u02FF]/)!==null?(j=c.charAt(a),a++):(j=null,m&&h("[\\xF8-\\u02FF]")),j===null&&(c.substr(a).match(/^[\u0370-\u037D]/)!==null?(j=c.charAt(a),a++):(j=null,m&&h("[\\u0370-\\u037D]")),j===null&&(c.substr(a).match(/^[\u037F-\u1FFF]/)!==
null?(j=c.charAt(a),a++):(j=null,m&&h("[\\u037F-\\u1FFF]")),j===null&&(c.substr(a).match(/^[\u200C-\u200D]/)!==null?(j=c.charAt(a),a++):(j=null,m&&h("[\\u200C-\\u200D]")),j===null&&(c.substr(a).match(/^[\u2070-\u218F]/)!==null?(j=c.charAt(a),a++):(j=null,m&&h("[\\u2070-\\u218F]")),j===null&&(c.substr(a).match(/^[\u2C00-\u2FEF]/)!==null?(j=c.charAt(a),a++):(j=null,m&&h("[\\u2C00-\\u2FEF]")),j===null&&(c.substr(a).match(/^[\u3001-\uD7FF]/)!==null?(j=c.charAt(a),a++):(j=null,m&&h("[\\u3001-\\uD7FF]")),
j===null&&(c.substr(a).match(/^[\uF900-\uFDCF]/)!==null?(j=c.charAt(a),a++):(j=null,m&&h("[\\uF900-\\uFDCF]")),j===null&&(c.substr(a).match(/^[\uFDF0-\uFFFD]/)!==null?(j=c.charAt(a),a++):(j=null,m&&h("[\\uFDF0-\\uFFFD]")),j===null&&(c.substr(a).match(/^[\u1000-\uEFFF]/)!==null?(j=c.charAt(a),a++):(j=null,m&&h("[\\u1000-\\uEFFF]")),j=j!==null?j:null)))))))))))));(m=e)&&j===null&&h("[147] PN_CHARS_BASE");A[b]={nextPos:a,result:j};return j}function wa(){var b="PN_CHARS_U@"+a,e=A[b];if(e)return a=e.nextPos,
e.result;e=m;m=!1;var j=wb();j===null&&(c.substr(a,1)==="_"?(j="_",a+=1):(j=null,m&&h('"_"')),j=j!==null?j:null);(m=e)&&j===null&&h("[148] PN_CHARS_U");A[b]={nextPos:a,result:j};return j}function vb(){var b="VARNAME@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a,f=a,d=wa();d===null&&(c.substr(a).match(/^[0-9]/)!==null?(d=c.charAt(a),a++):(d=null,m&&h("[0-9]")),d=d!==null?d:null);if(d!==null){var g=[],i=wa();i===null&&(c.substr(a).match(/^[0-9]/)!==null?(i=c.charAt(a),a++):(i=null,m&&
h("[0-9]")),i===null&&(c.substr(a).match(/^[\xB7]/)!==null?(i=c.charAt(a),a++):(i=null,m&&h("[\\xB7]")),i===null&&(c.substr(a).match(/^[\u0300-\u036F]/)!==null?(i=c.charAt(a),a++):(i=null,m&&h("[\\u0300-\\u036F]")),i===null&&(c.substr(a).match(/^[\u203F-\u2040]/)!==null?(i=c.charAt(a),a++):(i=null,m&&h("[\\u203F-\\u2040]")),i=i!==null?i:null))));for(;i!==null;)g.push(i),i=wa(),i===null&&(c.substr(a).match(/^[0-9]/)!==null?(i=c.charAt(a),a++):(i=null,m&&h("[0-9]")),i===null&&(c.substr(a).match(/^[\xB7]/)!==
null?(i=c.charAt(a),a++):(i=null,m&&h("[\\xB7]")),i===null&&(c.substr(a).match(/^[\u0300-\u036F]/)!==null?(i=c.charAt(a),a++):(i=null,m&&h("[\\u0300-\\u036F]")),i===null&&(c.substr(a).match(/^[\u203F-\u2040]/)!==null?(i=c.charAt(a),a++):(i=null,m&&h("[\\u203F-\\u2040]")),i=i!==null?i:null))));g!==null?d=[d,g]:(d=null,a=f)}else d=null,a=f;f=d!==null?d[0]+d[1].join(""):null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[149] VARNAME");A[b]={nextPos:a,result:f};return f}function Fa(){var b="PN_CHARS@"+
a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=wa();j===null&&(c.substr(a,1)==="-"?(j="-",a+=1):(j=null,m&&h('"-"')),j===null&&(c.substr(a).match(/^[0-9]/)!==null?(j=c.charAt(a),a++):(j=null,m&&h("[0-9]")),j===null&&(c.substr(a).match(/^[\xB7]/)!==null?(j=c.charAt(a),a++):(j=null,m&&h("[\\xB7]")),j===null&&(c.substr(a).match(/^[\u0300-\u036F]/)!==null?(j=c.charAt(a),a++):(j=null,m&&h("[\\u0300-\\u036F]")),j===null&&(c.substr(a).match(/^[\u203F-\u2040]/)!==null?(j=c.charAt(a),a++):(j=null,
m&&h("[\\u203F-\\u2040]")),j=j!==null?j:null)))));(m=e)&&j===null&&h("[150] PN_CHARS");A[b]={nextPos:a,result:j};return j}function eb(){var b="PN_PREFIX@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a,f=a,d=wb();if(d!==null){var i=[],g=Fa();g===null&&(c.substr(a,1)==="."?(g=".",a+=1):(g=null,m&&h('"."')),g=g!==null?g:null);for(;g!==null;)i.push(g),g=Fa(),g===null&&(c.substr(a,1)==="."?(g=".",a+=1):(g=null,m&&h('"."')),g=g!==null?g:null);i!==null?d=[d,i]:(d=null,a=f)}else d=null,a=f;f=
d!==null?function(a,c){if(c[c.length-1]==".")throw Error("Wrong PN_PREFIX, cannot finish with '.'");else return a+c.join("")}(d[0],d[1]):null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[151] PN_PREFIX");A[b]={nextPos:a,result:f};return f}function ub(){var b="PN_LOCAL@"+a,e=A[b];if(e)return a=e.nextPos,e.result;e=m;m=!1;var j=a,f=a,d=wa();d===null&&(c.substr(a).match(/^[0-9]/)!==null?(d=c.charAt(a),a++):(d=null,m&&h("[0-9]")),d=d!==null?d:null);if(d!==null){for(var i=[],g=Fa();g!==null;)i.push(g),
g=Fa();i!==null?d=[d,i]:(d=null,a=f)}else d=null,a=f;f=d!==null?d[0]+d[1].join(""):null;f===null&&(f=null,a=j);(m=e)&&f===null&&h("[152] PN_LOCAL");A[b]={nextPos:a,result:f};return f}function xb(){var b=function(a){a.sort();for(var c=null,b=[],e=0;e<a.length;e++)a[e]!==c&&(b.push(a[e]),c=a[e]);switch(b.length){case 0:return"end of input";case 1:return b[0];default:return b.slice(0,b.length-1).join(", ")+" or "+b[b.length-1]}}(cb),e=Math.max(a,Aa),e=e<c.length?k(c.charAt(e)):"end of input";return"Expected "+
b+" but "+e+" found."}function Cc(){for(var a=1,b=1,e=!1,f=0;f<Aa;f++){var d=c.charAt(f);d==="\n"?(e||a++,b=1,e=!1):d==="\r"|d==="\u2028"||d==="\u2029"?(a++,b=1,e=!0):(b++,e=!1)}return{line:a,column:b}}var ia={ANON:Ac,AdditiveExpression:W,Aggregate:fc,ArgList:pb,AskQuery:R,BLANK_NODE_LABEL:zc,BaseDecl:u,BindingValue:ya,BindingsClause:za,BlankNode:dc,BlankNodePropertyList:$b,BooleanLiteral:Ma,BrackettedExpression:Ja,BuiltInCall:Ia,COMMENT:Bc,Clear:yb,Collection:Zb,ConditionalAndExpression:Ua,ConditionalOrExpression:P,
Constraint:Ba,ConstructQuery:N,ConstructTemplate:Hb,ConstructTriples:qb,Create:Cb,DECIMAL:Xa,DECIMAL_NEGATIVE:rc,DECIMAL_POSITIVE:oc,DOCUMENT:function(){var b="DOCUMENT@"+a,c=A[b];if(c)return a=c.nextPos,c.result;c=i();c===null&&(c=x(),c=c!==null?c:null);A[b]={nextPos:a,result:c};return c},DOUBLE:Wa,DOUBLE_NEGATIVE:qc,DOUBLE_POSITIVE:nc,DatasetClause:Q,DefaultGraphClause:X,DeleteClause:Jb,DeleteData:Eb,DeleteWhere:Fb,DescribeQuery:O,Drop:zb,ECHAR:ha,EXPONENT:Ya,ExistsFunc:hc,ExpressionList:Sb,Filter:Rb,
FunctionCall:fb,GraphGraphPattern:Pb,GraphNode:sa,GraphPatternNotTriples:ob,GraphRef:Na,GraphRefAll:gb,GraphTerm:ac,GroupClause:ca,GroupCondition:S,GroupGraphPattern:Z,GroupGraphPatternSub:Kb,GroupOrUnionGraphPattern:Mb,HavingClause:ea,INTEGER:fa,INTEGER_NEGATIVE:sc,INTEGER_POSITIVE:pc,IRI_REF:oa,IRIref:V,IRIrefOrFunction:ec,InsertClause:ib,InsertData:Db,LANGTAG:kc,LimitClause:Za,LimitOffsetClauses:xa,Load:Bb,MinusGraphPattern:Ob,Modify:Ib,MultiplicativeExpression:ua,NIL:la,NamedGraphClause:$,NotExistsFunc:ic,
NumericLiteral:La,NumericLiteralNegative:va,NumericLiteralPositive:mc,NumericLiteralUnsigned:lc,ObjectList:ma,OffsetClause:$a,OptionalGraphPattern:Nb,OrderClause:na,OrderCondition:ja,PNAME_LN:yc,PNAME_NS:Ha,PN_CHARS:Fa,PN_CHARS_BASE:wb,PN_CHARS_U:wa,PN_LOCAL:ub,PN_PREFIX:eb,PathAlternative:rb,PathElt:sb,PathEltOrInverse:Ta,PathMod:Xb,PathNegatedPropertySet:Yb,PathOneInPropertySet:Da,PathPrimary:Wb,PathSequence:Sa,PrefixDecl:s,PrefixedName:xc,PrimaryExpression:Ea,Prologue:o,PropertyList:Tb,PropertyListNotEmpty:Ca,
PropertyListNotEmptyPath:Ub,PropertyListPath:Vb,QuadData:hb,QuadPattern:kb,Quads:lb,QuadsNotTriples:mb,Query:g,RDFLiteral:Ka,RegexExpression:gc,RelationalExpression:Va,SPARQL:i,STRING_LITERAL1:vc,STRING_LITERAL2:wc,STRING_LITERAL_LONG1:tc,STRING_LITERAL_LONG2:uc,SelectClause:M,SelectQuery:K,ServiceGraphPattern:Qb,SolutionModifier:Y,String:jc,SubSelect:J,TURTLE:x,TriplesBlock:qa,TriplesNode:Pa,TriplesSameSubject:nb,TriplesSameSubjectPath:Lb,TriplesTemplate:ra,UnaryExpression:ba,Update:bb,Update1:Ab,
UsingClause:jb,VAR1:bc,VAR2:cc,VARNAME:vb,Var:U,VarOrIRIref:ka,VarOrTerm:Oa,Verb:Qa,VerbPath:Ra,WS:q,WhereClause:T,base:E,directive:L,prefixID:H,statement:y};if(b!==void 0){if(ia[b]===void 0)throw Error("Invalid rule name: "+k(b)+".");}else b="DOCUMENT";var a=0,m=!0,Aa=0,cb=[],A={},aa=function(a){for(var c="",b=0;b<a.length;b++)c+=typeof a[b]==="string"?a[b]:a[b].join("");return c},ga=0,Gb=function(a){for(var c="",b=0;b<a.length;b++)c+=a[b];return c.toUpperCase()},ia=ia[b]();if(ia===null||a!==c.length)throw ia=
Cc(),new this.SyntaxError(xb(),ia.line,ia.column);return ia},toSource:function(){return this._source},SyntaxError:function(c,b,j){this.name="SyntaxError";this.message=c;this.line=b;this.column=j}};b.SyntaxError.prototype=Error.prototype;return b}();var ea={};(new Date).getTime();ea.combined_parser=ja.parser;ea.parser={};ea.parser.parse=function(b,c){for(var e=[],j=ea.combined_parser.parse(b),g={},h={namespaces:g,base:"",blankCounter:0},i=0;i<j.length;i++){var n=j[i];if(n.token==="base")h.base=n.value;
else if(n.token==="prefix")g[n.prefix]=n.local;else if(n.token==="triples"||n.token==="triplespattern")for(var o=0;o<n.triplesContext.length;o++){var u=n.triplesContext[o],u={subject:y.lexicalFormTerm(u.subject,h),predicate:y.lexicalFormTerm(u.predicate,h),object:y.lexicalFormTerm(u.object,h),graph:c};e.push(u)}}return e};var x={defaultContext:{rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",xsd:"http://www.w3.org/2001/XMLSchema#",
dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",cal:"http://www.w3.org/2002/12/cal/ical#",vcard:"http://www.w3.org/2006/vcard/ns# ",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",cc:"http://creativecommons.org/ns#",sioc:"http://rdfs.org/sioc/ns#",doap:"http://usefulinc.com/ns/doap#",com:"http://purl.org/commerce#",ps:"http://purl.org/payswarm#",gr:"http://purl.org/goodrelations/v1#",sig:"http://purl.org/signature#",ccard:"http://purl.org/commerce/creditcard#"},UrisMap:function(){this.defaultNs=
"";this.interfaceProperties=["get","remove","set","setDefault","addAll","resolve","shrink"]}};x.UrisMap.prototype.values=function(){var b={},c;for(c in this)!y.include(this.interfaceProperties,c)&&typeof this[c]!=="function"&&c!=="defaultNs"&&c!=="interfaceProperties"&&(b[c]=this[c]);return b};x.UrisMap.prototype.get=function(b){if(b.indexOf(" ")!=-1)throw"Prefix must not contain any whitespaces";return this[b]};x.UrisMap.prototype.remove=function(b){if(b.indexOf(" ")!=-1)throw"Prefix must not contain any whitespaces";
delete this[b];return null};x.UrisMap.prototype.set=function(b,c){if(b.indexOf(" ")!=-1)throw"Prefix must not contain any whitespaces";this[b]=c};x.UrisMap.prototype.setDefault=function(b){this.defaultNs=b};x.UrisMap.prototype.addAll=function(b,c){for(var e in b)y.include(this.interfaceProperties,e)||(this[e]!=null?c===!0&&(this[e]=b[e]):this[e]=b[e]);return this};x.UrisMap.prototype.resolve=function(b){var c=b.split(":"),b=c[0],c=c[1];return b===""?this.defaultNs==null?null:this.defaultNs+c:this[b]!=
null?this[b]+c:null};x.UrisMap.prototype.shrink=function(b){for(var c in this){var e=this[c];if(b.indexOf(e)===0&&e!==""&&c!="defaultNs")return b=b.split(e)[1],c+":"+b}return b};x.Profile=function(){this.prefixes=new x.UrisMap;this.terms=new x.UrisMap};x.Profile.prototype.importProfile=function(b,c){this.prefixes.addAll(b.prefixes,c);this.terms.addAll(b.terms,c)};x.Profile.prototype.resolve=function(b){return b.indexOf(":")!=-1?this.prefixes.resolve(b):this.terms[b]!=null?this.terms.resolve(b):null};
x.Profile.prototype.setDefaultPrefix=function(b){this.prefixes.setDefault(b)};x.Profile.prototype.setDefaultVocabulary=function(b){this.terms.setDefault(b)};x.Profile.prototype.setPrefix=function(b,c){this.prefixes.set(b,c)};x.Profile.prototype.setTerm=function(b,c){this.terms.set(b,c)};x.RDFEnvironment=function(){this.blankNodeCounter=0;var b=this;this.filters={s:function(c){return function(b){return b.subject.equals(c)}},p:function(c){return function(b){return b.predicate.equals(c)}},o:function(c){return function(b){return b.object.equals(c)}},
sp:function(c,b){return function(g){return g.subject.equals(c)&&g.predicate.equals(b)}},so:function(c,b){return function(g){return g.subject.equals(c)&&g.object.equals(b)}},po:function(c,b){return function(g){return g.predicate.equals(c)&&g.object.equals(b)}},spo:function(c,b,g){return function(h){return h.subject.equals(c)&&h.predicate.equals(b)&&h.object.equals(g)}},describes:function(c){return function(b){return b.subject.equals(c)||b.object.equals(c)}},type:function(c){var j=b.resolve("rdf:type");
return function(b){return b.predicate.equals(j)&&b.object.equals(c)}}};for(var c in x.defaultContext)this.prefixes.set(c,x.defaultContext[c])};y["extends"](x.Profile,x.RDFEnvironment);x.RDFEnvironment.prototype.createBlankNode=function(){var b=new x.BlankNode(this.blankNodeCounter);this.blankNodeCounter++;return b};x.RDFEnvironment.prototype.createNamedNode=function(b){var c=this.resolve(b);return c!=null?new x.NamedNode(c):new x.NamedNode(b)};x.RDFEnvironment.prototype.createLiteral=function(b,c,
e){return e!=null?new x.Literal(b,c,e.toString()):new x.Literal(b,c,e)};x.RDFEnvironment.prototype.createTriple=function(b,c,e){return new x.Triple(b,c,e)};x.RDFEnvironment.prototype.createGraph=function(b){var c=new x.Graph;if(b!=null)for(var e=0;e<b.length;e++)c.add(b[e]);return c};x.RDFEnvironment.prototype.createAction=function(b,c){return function(e){return b(e)?c(e):e}};x.RDFEnvironment.prototype.createProfile=function(b){return b===!0?new x.RDFEnvironment.Profile:(b=new x.RDFEnvironment.Profile,
b.importProfile(this),b)};x.RDFEnvironment.prototype.createTermMap=function(b){if(b===!0)return new x.UrisMap;else{var b=this.terms.values(),c=new x.UrisMap,e;for(e in b)c[e]=b[e];return c}};x.RDFEnvironment.prototype.createPrefixMap=function(b){if(b===!0)return new x.UrisMap;else{var b=this.prefixes.values(),c=new x.UrisMap,e;for(e in b)c[e]=b[e];return c}};x.RDFNode=function(b){this.interfaceName=b;this.attributes=["interfaceName","nominalValue"]};x.RDFNode.prototype.equals=function(b){if(b.interfaceName==
null)return this.valueOf()==b;else{for(var c in this.attributes){var e=this.attributes[c];if(this[e]!=b[e])return!1}return!0}};x.BlankNode=function(b){x.RDFNode.call(this,"BlankNode");this.nominalValue="_:"+b;this.bnodeId=b};y["extends"](x.RDFNode,x.BlankNode);x.BlankNode.prototype.toString=function(){return this.nominalValue};x.BlankNode.prototype.toNT=function(){return this.nominalValue};x.BlankNode.prototype.valueOf=function(){return this.nominalValue};x.Literal=function(b,c,e){x.RDFNode.call(this,
"Literal");this.nominalValue=b;if(c!=null)this.language=c;else if(e!=null)this.datatype=e};y["extends"](x.RDFNode,x.Literal);x.Literal.prototype.toString=function(){var b='"'+this.nominalValue+'"';if(this.language!=null)b=b+"@"+this.language;else if(this.datatype!=null||this.type)b=b+"^^<"+(this.datatype||this.type)+">";return b};x.Literal.prototype.toNT=function(){return this.toString()};x.Literal.prototype.valueOf=function(){return g.effectiveTypeValue({token:"literal",type:this.type,value:this.nominalValue,
language:this.language})};x.NamedNode=function(b){x.RDFNode.call(this,"NamedNode");this.nominalValue=b.value!=null?b.value:b};y["extends"](x.RDFNode,x.NamedNode);x.NamedNode.prototype.toString=function(){return this.nominalValue};x.NamedNode.prototype.toNT=function(){return"<"+this.toString()+">"};x.NamedNode.prototype.valueOf=function(){return this.nominalValue};x.Triple=function(b,c,e){this.subject=b;this.predicate=c;this.object=e};x.Triple.prototype.equals=function(b){return this.subject.equals(b.subject)&&
this.predicate.equals(b.predicate)&&this.object.equals(b.object)};x.Triple.prototype.toString=function(){return this.subject.toNT()+" "+this.predicate.toNT()+" "+this.object.toNT()+" . \r\n"};x.Graph=function(){this.triples=[];this.duplicates={};this.actions=[]};x.Graph.prototype.add=function(b){for(var c=0;c<this.actions.length;c++)b=this.actions[c](b);c=b.subject.toString()+b.predicate.toString()+b.object.toString();this.duplicates[c]||(this.duplicates[c]=!0,this.triples.push(b));return this};x.Graph.prototype.addAction=
function(b,c){this.actions.push(b);if(c==!0)for(var e=0;e<this.triples.length;e++)this.triples[e]=b(this.triples[e]);return this};x.Graph.prototype.addAll=function(b){for(var b=b.toArray(),c=0;c<b.length;c++)this.add(b[c]);return this};x.Graph.prototype.remove=function(b){for(var c=null,e=0;e<this.triples.length;e++)if(this.triples[e].equals(b)){delete this.duplicates[b.subject.toString()+b.predicate.toString()+b.object.toString()];c=e;break}c!=null&&this.triples.splice(c,1);return this};x.Graph.prototype.toArray=
function(){return this.triples};x.Graph.prototype.some=function(b){for(var c=0;c<this.triples.length;c++)if(b(this.triples[c],this)===!0)return!0;return!1};x.Graph.prototype.every=function(b){for(var c=0;c<this.triples.length;c++)if(b(this.triples[c],this)===!1)return!1;return!0};x.Graph.prototype.filter=function(b){for(var c=new x.Graph,e=0;e<this.triples.length;e++)b(this.triples[e],this)===!0&&c.add(this.triples[e]);return c};x.Graph.prototype.forEach=function(b){for(var c=0;c<this.triples.length;c++)b(this.triples[c],
this)};x.Graph.prototype.merge=function(){for(var b=new x.Graph,c=0;c<this.triples;c++){var e=this.triples[c];b.add(e)}for(c=0;c<triples.length;c++)e=triples[c],this.add(e);return b};x.Graph.prototype.match=function(b,c,e,j){for(var g=new x.Graph,h=0,i=0;i<this.triples.length;i++){var n=this.triples[i];if(b==null||n.subject.equals(b))if(c==null||n.predicate.equals(c))if(e==null||n.object.equals(e))if(j==null||h<j)h++,g.add(n);else break}return g};x.Graph.prototype.removeMatches=function(b,c,e){for(var j=
[],g=0;g<this.triples.length;g++){var h=this.triples[g];if(b==null||h.subject.equals(b))if(c==null||h.predicate.equals(c))(e==null||h.object.equals(e))&&j.push(h)}for(g=0;g<j.length;g++)this.remove(j[g]);return this};x.Graph.prototype.toNT=function(){var b="";this.forEach(function(c){b+=c.toString()});return b};x.buildRDFResource=function(b,c,e,j){return b.token==="blank"?x.buildBlankNode(b,c,e,j):b.token==="literal"?x.buildLiteral(b,c,e,j):b.token==="uri"?x.buildNamedNode(b,c,e,j):b.token==="var"?
(b=c[b.value],b!=null?x.buildRDFResource(b,c,e,j):null):null};x.buildBlankNode=function(b){if(b.valuetmp!=null)b.value=b.valuetmp;if(b.value.indexOf("_:")===0)b.value=b.value.split("_:")[1];return new x.BlankNode(b.value)};x.buildLiteral=function(b){return new x.Literal(b.value,b.lang,b.type)};x.buildNamedNode=function(b,c,e,j){if(b.value==null&&b.prefix!=null)c=e.resolveNsInEnvironment(b.prefix,j),b.value=c+b.suffix;return new x.NamedNode(b)};x.rdf=new x.RDFEnvironment;var g={checkFilters:function(b,
c,e,j,k,h){var i=b.filter,n=[];if(i==null||b.length!=null)return c;for(b=0;b<i.length;b++){for(var c=g.run(i[b].value,c,e,j,k,h),o=[],u=0;u<c.length;u++)c[u].__nullify__!=null?n.push(c[u]):o.push(c[u]);c=o}return c.concat(n)}};g.boundVars=function(b){if(b.expressionType!=null){var c=b.expressionType;if(c=="relationalexpression")return c=b.op2,g.boundVars(b.op1)+g.boundVars(c);else if(c=="conditionalor"||c=="conditionaland"){for(var e=[],c=0;c<b.operands;c++)e=e.concat(g.boundVars(b.operands[c]));
return e}else if(c=="builtincall")if(b.args==null)return[];else{e=[];for(c=0;c<b.args.length;c++)e=e.concat(g.boundVars(b.args[c]));return e}else if(c=="multiplicativeexpression"){e=g.boundVars(b.factor);for(c=0;c<b.factors.length;c++)e=e.concat(g.boundVars(b.factors[c].expression));return e}else if(c=="additiveexpression"){e=g.boundVars(b.summand);for(c=0;c<b.summands.length;c++)e=e.concat(g.boundVars(b.summands[c].expression));return e}else if(c=="regex")return e=g.boundVars(b.expression1),e.concat(g.boundVars(b.expression2));
else if(c=="unaryexpression")return g.boundVars(b.expression);else if(c=="atomic")return b.primaryexpression=="var"?[b.value]:[]}else throw console.log("ERROR"),console.log(b),"Cannot find bound expressions in a no expression token";};g.run=function(b,c,e,j,k,h){for(var i=h.copyDenormalizedBindings(c,k.outCache),n=[],o=0;o<c.length;o++){var u=g.runFilter(b,i[o],h,j,k),u=g.ebv(u);g.isEbvError(u)?e&&(u={__nullify__:!0,bindings:c[o]},n.push(u)):u===!0?n.push(c[o]):e&&(u={__nullify__:!0,bindings:c[o]},
n.push(u))}return n};g.collect=function(b,c,e,j,k){for(var h=k.copyDenormalizedBindings(c,j.outCache),i=[],n=0;n<h.length;n++){var o=g.runFilter(b,h[n],k,e,j);i.push({binding:c[n],value:o})}return i};g.runDistinct=function(){};g.runAggregator=function(b,c,e,j,k){if(c==null||c.length===0)return g.ebvError();else if(b.token==="variable"&&b.kind=="var")return c[0][b.value.value];else if(b.token==="variable"&&b.kind==="aliased")if(b.expression.expressionType==="atomic"&&b.expression.primaryexpression===
"var")return c[0][b.expression.value.value];else if(b.expression.expressionType==="aggregate")if(b.expression.aggregateType==="max"){for(var h=null,i=0;i<c.length;i++){var n=c[i],n=g.runFilter(b.expression.expression,n,e,j,k);g.isEbvError(n)||(h===null?h=n:g.runLtFunction(h,n).value===!0&&(h=n))}return h===null?g.ebvError():h}else if(b.expression.aggregateType==="min"){h=null;for(i=0;i<c.length;i++)n=c[i],n=g.runFilter(b.expression.expression,n,e,j,k),g.isEbvError(n)||(h===null?h=n:g.runGtFunction(h,
n).value===!0&&(h=n));return h===null?g.ebvError():h}else if(b.expression.aggregateType==="count"){var h={},o=0;if(b.expression.expression==="*")if(b.expression.distinct!=null&&b.expression.distinct!="")for(i=0;i<c.length;i++){var n=c[i],u=y.hashTerm(n);h[u]==null&&(h[u]=!0,o++)}else o=c.length;else for(i=0;i<c.length;i++)n=c[i],n=g.runFilter(b.expression.expression,n,e,j,k),g.isEbvError(n)||(b.expression.distinct!=null&&b.expression.distinct!=""?(u=y.hashTerm(n),h[u]==null&&(h[u]=!0,o++)):o++);return{token:"literal",
type:"http://www.w3.org/2001/XMLSchema#integer",value:""+o}}else if(b.expression.aggregateType==="avg"){for(var h={},s={token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:"0"},i=o=0;i<c.length;i++)n=c[i],n=g.runFilter(b.expression.expression,n,e,j,k),g.isEbvError(n)||(b.expression.distinct!=null&&b.expression.distinct!=""?(u=y.hashTerm(n),h[u]==null&&(h[u]=!0,g.isNumeric(n)&&(s=g.runSumFunction(s,n),o++))):g.isNumeric(n)&&(s=g.runSumFunction(s,n),o++));b=g.runDivFunction(s,{token:"literal",
type:"http://www.w3.org/2001/XMLSchema#integer",value:""+o});b.value=""+b.value;return b}else if(b.expression.aggregateType==="sum"){h={};s={token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:"0"};for(i=0;i<c.length;i++)n=c[i],n=g.runFilter(b.expression.expression,n,e,j,k),g.isEbvError(n)||(b.expression.distinct!=null&&b.expression.distinct!=""?(u=y.hashTerm(n),h[u]==null&&(h[u]=!0,g.isNumeric(n)&&(s=g.runSumFunction(s,n)))):g.isNumeric(n)&&(s=g.runSumFunction(s,n)));s.value=""+
s.value;return s}else return n=g.runFilter(aggregate.expression,c[0],j,{blanks:{},outCache:{}})};g.runFilter=function(b,c,e,j,k){if(b.expressionType!=null){var h=b.expressionType;if(h=="relationalexpression"){var h=g.runFilter(b.op1,c,e,j,k),i=g.runFilter(b.op2,c,e,j,k);return g.runRelationalFilter(b,h,i,c,e,j,k)}else if(h=="conditionalor")return g.runOrFunction(b,c,e,j,k);else if(h=="conditionaland")return g.runAndFunction(b,c,e,j,k);else if(h=="additiveexpression")return g.runAddition(b.summand,
b.summands,c,e,j,k);else if(h=="builtincall")return g.runBuiltInCall(b.builtincall,b.args,c,e,j,k);else if(h=="multiplicativeexpression")return g.runMultiplication(b.factor,b.factors,c,e,j,k);else if(h=="unaryexpression")return g.runUnaryExpression(b.unaryexpression,b.expression,c,e,j,k);else if(h=="irireforfunction")return g.runIriRefOrFunction(b.iriref,b.args,c,e,j,k);else if(h=="regex")return g.runRegex(b.text,b.pattern,b.flags,c,e,j,k);else if(h=="atomic")if(b.primaryexpression=="var")return c[b.value.value];
else{if(typeof b.value=="object"&&!(b.value.type==null||typeof b.value.type!="object"))b.value.type=y.lexicalFormBaseUri(b.value.type,k);return b.value}else throw"Unknown filter expression type";}else throw"Cannot find bound expressions in a no expression token";};g.isRDFTerm=function(b){return b==null?!1:b.token&&b.token=="literal"||b.token&&b.token=="uri"||b.token&&b.token=="blank"?!0:!1};g.RDFTermEquality=function(b,c,e,j){return b.token==="literal"&&c.token==="literal"?b.lang==c.lang&&b.type==
c.type&&b.value==c.value?!0:b.type!=null&&c.type!=null?g.ebvError():g.isSimpleLiteral(b)&&c.type!=null?g.ebvError():g.isSimpleLiteral(c)&&b.type!=null?g.ebvError():!1:b.token==="uri"&&c.token==="uri"?y.lexicalFormBaseUri(b,j)==y.lexicalFormBaseUri(c,j):b.token==="blank"&&c.token==="blank"?b.value==c.value:!1};g.isInteger=function(b){return b==null?!1:b.token==="literal"?b.type=="http://www.w3.org/2001/XMLSchema#integer"||b.type=="http://www.w3.org/2001/XMLSchema#decimal"||b.type=="http://www.w3.org/2001/XMLSchema#double"||
b.type=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||b.type=="http://www.w3.org/2001/XMLSchema#negativeInteger"||b.type=="http://www.w3.org/2001/XMLSchema#long"||b.type=="http://www.w3.org/2001/XMLSchema#int"||b.type=="http://www.w3.org/2001/XMLSchema#short"||b.type=="http://www.w3.org/2001/XMLSchema#byte"||b.type=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||b.type=="http://www.w3.org/2001/XMLSchema#unsignedLong"||b.type=="http://www.w3.org/2001/XMLSchema#unsignedInt"||b.type==
"http://www.w3.org/2001/XMLSchema#unsignedShort"||b.type=="http://www.w3.org/2001/XMLSchema#unsignedByte"||b.type=="http://www.w3.org/2001/XMLSchema#positiveInteger"?!0:!1:!1};g.isFloat=function(b){return b==null?!1:b.token==="literal"?b.type=="http://www.w3.org/2001/XMLSchema#float"?!0:!1:!1};g.isDecimal=function(b){return b==null?!1:b.token==="literal"?b.type=="http://www.w3.org/2001/XMLSchema#decimal"?!0:!1:!1};g.isDouble=function(b){return b==null?!1:b.token==="literal"?b.type=="http://www.w3.org/2001/XMLSchema#double"?
!0:!1:!1};g.isNumeric=function(b){return b==null?!1:b.token==="literal"?b.type=="http://www.w3.org/2001/XMLSchema#integer"||b.type=="http://www.w3.org/2001/XMLSchema#decimal"||b.type=="http://www.w3.org/2001/XMLSchema#float"||b.type=="http://www.w3.org/2001/XMLSchema#double"||b.type=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||b.type=="http://www.w3.org/2001/XMLSchema#negativeInteger"||b.type=="http://www.w3.org/2001/XMLSchema#long"||b.type=="http://www.w3.org/2001/XMLSchema#int"||b.type==
"http://www.w3.org/2001/XMLSchema#short"||b.type=="http://www.w3.org/2001/XMLSchema#byte"||b.type=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||b.type=="http://www.w3.org/2001/XMLSchema#unsignedLong"||b.type=="http://www.w3.org/2001/XMLSchema#unsignedInt"||b.type=="http://www.w3.org/2001/XMLSchema#unsignedShort"||b.type=="http://www.w3.org/2001/XMLSchema#unsignedByte"||b.type=="http://www.w3.org/2001/XMLSchema#positiveInteger"?!0:!1:!1};g.isSimpleLiteral=function(b){return b&&b.token=="literal"?
b.type==null&&b.lang==null?!0:!1:!1};g.isXsdType=function(b,c){return c&&c.token=="literal"?c.type=="http://www.w3.org/2001/XMLSchema#"+b:!1};g.ebv=function(b){if(b==null||g.isEbvError(b))return g.ebvError();else if(b.token&&b.token==="literal")if(b.type=="http://www.w3.org/2001/XMLSchema#integer"||b.type=="http://www.w3.org/2001/XMLSchema#decimal"||b.type=="http://www.w3.org/2001/XMLSchema#double"||b.type=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||b.type=="http://www.w3.org/2001/XMLSchema#negativeInteger"||
b.type=="http://www.w3.org/2001/XMLSchema#long"||b.type=="http://www.w3.org/2001/XMLSchema#int"||b.type=="http://www.w3.org/2001/XMLSchema#short"||b.type=="http://www.w3.org/2001/XMLSchema#byte"||b.type=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||b.type=="http://www.w3.org/2001/XMLSchema#unsignedLong"||b.type=="http://www.w3.org/2001/XMLSchema#unsignedInt"||b.type=="http://www.w3.org/2001/XMLSchema#unsignedShort"||b.type=="http://www.w3.org/2001/XMLSchema#unsignedByte"||b.type=="http://www.w3.org/2001/XMLSchema#positiveInteger"){var c=
parseFloat(b.value);return isNaN(c)?!1:parseFloat(b.value)!=0}else return b.type==="http://www.w3.org/2001/XMLSchema#boolean"?b.value==="true"||b.value===!0||b.value==="True":b.type==="http://www.w3.org/2001/XMLSchema#string"?b.value!="":b.type==="http://www.w3.org/2001/XMLSchema#dateTime"?new Date(b.value)!=null:g.isEbvError(b)?b:b.type==null?b.value!=""?!0:!1:g.ebvError();else return b.value===!0};g.ebvTrue=function(){return val={token:"literal",type:"http://www.w3.org/2001/XMLSchema#boolean",value:!0}};
g.ebvFalse=function(){return val={token:"literal",type:"http://www.w3.org/2001/XMLSchema#boolean",value:!1}};g.ebvError=function(){return val={token:"literal",type:"https://github.com/antoniogarrote/js-tools/types#error",value:null}};g.isEbvError=function(b){return typeof b=="object"&&b!=null?b.type==="https://github.com/antoniogarrote/js-tools/types#error":!1};g.ebvBoolean=function(b){return g.isEbvError(b)?b:b===!0?g.ebvTrue():g.ebvFalse()};g.runRelationalFilter=function(b,c,e,j,k,h,i){b=b.operator;
if(b==="=")return g.runEqualityFunction(c,e,j,k,h,i);else if(b==="!="){c=g.runEqualityFunction(c,e,j,k,h,i);if(!g.isEbvError(c))c.value=!c.value;return c}else if(b==="<")return g.runLtFunction(c,e,j);else if(b===">")return g.runGtFunction(c,e,j);else if(b==="<=")return g.runLtEqFunction(c,e,j);else if(b===">=")return g.runGtEqFunction(c,e,j);else throw"Error applying relational filter, unknown operator";};g.effectiveTypeValue=function(b){if(b.token=="literal")if(b.type=="http://www.w3.org/2001/XMLSchema#integer")return b=
parseInt(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#decimal")return b=parseFloat(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#float")return b=parseFloat(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#double")return b=parseFloat(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger")return b=parseFloat(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#negativeInteger")return b=parseInt(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#long")return b=
parseInt(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#int")return b=parseInt(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#short")return b=parseInt(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#byte")return b=parseInt(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger")return b=parseInt(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#unsignedLong")return b=parseInt(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#unsignedInt")return b=
parseInt(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#unsignedShort")return b=parseInt(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#unsignedByte")return b=parseInt(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#positiveInteger")return b=parseInt(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#date"||b.type=="http://www.w3.org/2001/XMLSchema#dateTime")try{return y.parseISO8601(b.value)}catch(c){return null}else return b.type=="http://www.w3.org/2001/XMLSchema#boolean"?
b.value===!0||b.value==="true"||b.value==="1"||b.value===1||b.value===!0?!0:b.value===!1||b.value==="false"||b.value==="0"||b.value===0||b.value===!1?!1:void 0:b.type=="http://www.w3.org/2001/XMLSchema#string"?b.value===null||b.value===void 0?void 0:""+b.value:b.value;else throw console.log("not implemented yet"),"value not supported in operations yet";};g.runOrFunction=function(b,c,e,j,k){for(var h=null,i=0;i<b.operands.length;i++){var n=g.runFilter(b.operands[i],c,e,j,k);g.isEbvError(n)==!1&&(n=
g.ebv(n));h==null?h=n:g.isEbvError(n)?h=g.isEbvError(h)?g.ebvError():h===!0?!0:g.ebvError():n===!0?h=!0:g.isEbvError(h)&&(h=g.ebvError())}return g.ebvBoolean(h)};g.runAndFunction=function(b,c,e,j,k){for(var h=null,i=0;i<b.operands.length;i++){var n=g.runFilter(b.operands[i],c,e,j,k);g.isEbvError(n)==!1&&(n=g.ebv(n));h==null?h=n:g.isEbvError(n)?h=g.isEbvError(h)?g.ebvError():h===!0?g.ebvError():!1:n===!0?g.isEbvError(h)&&(h=g.ebvError()):h=!1}return g.ebvBoolean(h)};g.runEqualityFunction=function(b,
c,e,j,k,h){if(g.isEbvError(b)||g.isEbvError(c))return g.ebvError();if(g.isNumeric(b)&&g.isNumeric(c))return e=g.effectiveTypeValue(b),k=g.effectiveTypeValue(c),isNaN(e)||isNaN(k)?g.ebvBoolean(g.RDFTermEquality(b,c,j,h)):g.ebvBoolean(e==k);else if((g.isSimpleLiteral(b)||g.isXsdType("string",b))&&(g.isSimpleLiteral(c)||g.isXsdType("string",c)))return g.ebvBoolean(g.effectiveTypeValue(b)==g.effectiveTypeValue(c));else if(g.isXsdType("boolean",b)&&g.isXsdType("boolean",c))return g.ebvBoolean(g.effectiveTypeValue(b)==
g.effectiveTypeValue(c));else if((g.isXsdType("dateTime",b)||g.isXsdType("date",b))&&(g.isXsdType("dateTime",c)||g.isXsdType("date",c))){if(g.isXsdType("dateTime",b)&&g.isXsdType("date",c))return g.ebvFalse();if(g.isXsdType("date",b)&&g.isXsdType("dateTime",c))return g.ebvFalse();b=y.compareDateComponents(b.value,c.value);return b!=null?b==0?g.ebvTrue():g.ebvFalse():g.ebvError()}else return g.isRDFTerm(b)&&g.isRDFTerm(c)?g.ebvBoolean(g.RDFTermEquality(b,c,j,h)):g.ebvFalse()};g.runGtFunction=function(b,
c){if(g.isEbvError(b)||g.isEbvError(c))return g.ebvError();if(g.isNumeric(b)&&g.isNumeric(c))return g.ebvBoolean(g.effectiveTypeValue(b)>g.effectiveTypeValue(c));else if(g.isSimpleLiteral(b)&&g.isSimpleLiteral(c))return g.ebvBoolean(g.effectiveTypeValue(b)>g.effectiveTypeValue(c));else if(g.isXsdType("string",b)&&g.isXsdType("string",c))return g.ebvBoolean(g.effectiveTypeValue(b)>g.effectiveTypeValue(c));else if(g.isXsdType("boolean",b)&&g.isXsdType("boolean",c))return g.ebvBoolean(g.effectiveTypeValue(b)>
g.effectiveTypeValue(c));else if((g.isXsdType("dateTime",b)||g.isXsdType("date",b))&&(g.isXsdType("dateTime",c)||g.isXsdType("date",c))){if(g.isXsdType("dateTime",b)&&g.isXsdType("date",c))return g.ebvFalse();if(g.isXsdType("date",b)&&g.isXsdType("dateTime",c))return g.ebvFalse();var e=y.compareDateComponents(b.value,c.value);return e!=null?e==1?g.ebvTrue():g.ebvFalse():g.ebvError()}else return g.ebvFalse()};g.runTotalGtFunction=function(b,c){return g.isEbvError(b)||g.isEbvError(c)?g.ebvError():g.isNumeric(b)&&
g.isNumeric(c)||g.isSimpleLiteral(b)&&g.isSimpleLiteral(c)||g.isXsdType("string",b)&&g.isSimpleLiteral("string",c)||g.isXsdType("boolean",b)&&g.isSimpleLiteral("boolean",c)||g.isXsdType("dateTime",b)&&g.isSimpleLiteral("dateTime",c)?g.runGtFunction(b,c,[]):b.token&&b.token==="uri"&&c.token&&c.token==="uri"?g.ebvBoolean(b.value>c.value):b.token&&b.token==="literal"&&c.token&&c.token==="literal"?g.ebvBoolean(""+b.value+b.type+b.lang>""+c.value+c.type+c.lang):b.token&&b.token==="blank"&&c.token&&c.token===
"blank"?g.ebvBoolean(b.value>c.value):b.value&&c.value?g.ebvBoolean(b.value>c.value):g.ebvTrue()};g.runLtFunction=function(b,c){if(g.isEbvError(b)||g.isEbvError(c))return g.ebvError();if(g.isNumeric(b)&&g.isNumeric(c))return g.ebvBoolean(g.effectiveTypeValue(b)<g.effectiveTypeValue(c));else if(g.isSimpleLiteral(b)&&g.isSimpleLiteral(c))return g.ebvBoolean(g.effectiveTypeValue(b)<g.effectiveTypeValue(c));else if(g.isXsdType("string",b)&&g.isXsdType("string",c))return g.ebvBoolean(g.effectiveTypeValue(b)<
g.effectiveTypeValue(c));else if(g.isXsdType("boolean",b)&&g.isXsdType("boolean",c))return g.ebvBoolean(g.effectiveTypeValue(b)<g.effectiveTypeValue(c));else if((g.isXsdType("dateTime",b)||g.isXsdType("date",b))&&(g.isXsdType("dateTime",c)||g.isXsdType("date",c))){if(g.isXsdType("dateTime",b)&&g.isXsdType("date",c))return g.ebvFalse();if(g.isXsdType("date",b)&&g.isXsdType("dateTime",c))return g.ebvFalse();var e=y.compareDateComponents(b.value,c.value);return e!=null?e==-1?g.ebvTrue():g.ebvFalse():
g.ebvError()}else return g.ebvFalse()};g.runGtEqFunction=function(b,c){if(g.isEbvError(b)||g.isEbvError(c))return g.ebvError();if(g.isNumeric(b)&&g.isNumeric(c))return g.ebvBoolean(g.effectiveTypeValue(b)>=g.effectiveTypeValue(c));else if(g.isSimpleLiteral(b)&&g.isSimpleLiteral(c))return g.ebvBoolean(g.effectiveTypeValue(b)>=g.effectiveTypeValue(c));else if(g.isXsdType("string",b)&&g.isXsdType("string",c))return g.ebvBoolean(g.effectiveTypeValue(b)>=g.effectiveTypeValue(c));else if(g.isXsdType("boolean",
b)&&g.isXsdType("boolean",c))return g.ebvBoolean(g.effectiveTypeValue(b)>=g.effectiveTypeValue(c));else if((g.isXsdType("dateTime",b)||g.isXsdType("date",b))&&(g.isXsdType("dateTime",c)||g.isXsdType("date",c))){if(g.isXsdType("dateTime",b)&&g.isXsdType("date",c))return g.ebvFalse();if(g.isXsdType("date",b)&&g.isXsdType("dateTime",c))return g.ebvFalse();var e=y.compareDateComponents(b.value,c.value);return e!=null?e!=-1?g.ebvTrue():g.ebvFalse():g.ebvError()}else return g.ebvFalse()};g.runLtEqFunction=
function(b,c){if(g.isEbvError(b)||g.isEbvError(c))return g.ebvError();if(g.isNumeric(b)&&g.isNumeric(c))return g.ebvBoolean(g.effectiveTypeValue(b)<=g.effectiveTypeValue(c));else if(g.isSimpleLiteral(b)&&g.isSimpleLiteral(c))return g.ebvBoolean(g.effectiveTypeValue(b)<=g.effectiveTypeValue(c));else if(g.isXsdType("string",b)&&g.isXsdType("string",c))return g.ebvBoolean(g.effectiveTypeValue(b)<=g.effectiveTypeValue(c));else if(g.isXsdType("boolean",b)&&g.isXsdType("boolean",c))return g.ebvBoolean(g.effectiveTypeValue(b)<=
g.effectiveTypeValue(c));else if((g.isXsdType("dateTime",b)||g.isXsdType("date",b))&&(g.isXsdType("dateTime",c)||g.isXsdType("date",c))){if(g.isXsdType("dateTime",b)&&g.isXsdType("date",c))return g.ebvFalse();if(g.isXsdType("date",b)&&g.isXsdType("dateTime",c))return g.ebvFalse();var e=y.compareDateComponents(b.value,c.value);return e!=null?e!=1?g.ebvTrue():g.ebvFalse():g.ebvError()}else return g.ebvFalse()};g.runAddition=function(b,c,e,j,k,h){var i=g.runFilter(b,e,j,k,h);if(g.isEbvError(i))return g.ebvError();
b=i;if(g.isNumeric(i)){for(i=0;i<c.length;i++){var n=g.runFilter(c[i].expression,e,j,k,h);if(g.isNumeric(n))c[i].operator==="+"?b=g.runSumFunction(b,n):c[i].operator==="-"&&(b=g.runSubFunction(b,n));else return g.ebvFalse()}return b}else return g.ebvFalse()};g.runSumFunction=function(b,c){if(g.isEbvError(b)||g.isEbvError(c))return g.ebvError();var e=g.effectiveTypeValue(b)+g.effectiveTypeValue(c);return g.isDouble(b)||g.isDouble(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:e}:
g.isFloat(b)||g.isFloat(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",value:e}:g.isDecimal(b)||g.isDecimal(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:e}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:e}};g.runSubFunction=function(b,c){if(g.isEbvError(b)||g.isEbvError(c))return g.ebvError();var e=g.effectiveTypeValue(b)-g.effectiveTypeValue(c);return g.isDouble(b)||g.isDouble(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",
value:e}:g.isFloat(b)||g.isFloat(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",value:e}:g.isDecimal(b)||g.isDecimal(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:e}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:e}};g.runMultiplication=function(b,c,e,j,k,h){b=g.runFilter(b,e,j,k,h);if(g.isEbvError(b))return b;var i=b;if(g.isNumeric(b)){for(var n=0;n<c.length;n++){var o=g.runFilter(c[n].expression,e,j,k,h);if(g.isEbvError(o))return b;
if(g.isNumeric(o))c[n].operator==="*"?i=g.runMulFunction(i,o):c[n].operator==="/"&&(i=g.runDivFunction(i,o));else return g.ebvFalse()}return i}else return g.ebvFalse()};g.runMulFunction=function(b,c){if(g.isEbvError(b)||g.isEbvError(c))return g.ebvError();var e=g.effectiveTypeValue(b)*g.effectiveTypeValue(c);return g.isDouble(b)||g.isDouble(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:e}:g.isFloat(b)||g.isFloat(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",
value:e}:g.isDecimal(b)||g.isDecimal(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:e}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:e}};g.runDivFunction=function(b,c){if(g.isEbvError(b)||g.isEbvError(c))return g.ebvError();var e=g.effectiveTypeValue(b)/g.effectiveTypeValue(c);return g.isDouble(b)||g.isDouble(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:e}:g.isFloat(b)||g.isFloat(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",
value:e}:g.isDecimal(b)||g.isDecimal(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:e}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:e}};g.runBuiltInCall=function(b,c,e,j,k,h){if(b==="notexists"||b==="exists"){var i=JSON.parse(JSON.stringify(c[0])),i=j.abstractQueryTree.parseSelect({pattern:i},e),i=j.abstractQueryTree.bind(i.pattern,e),e=j.executeSelectUnit([{kind:"*"}],k,i,h);return b==="exists"?g.ebvBoolean(e.length!==0):g.ebvBoolean(e.length===
0)}else{for(var i=[],n=0;n<c.length;n++)if(c[n].token==="var")i.push(c[n]);else{var o=g.runFilter(c[n],e,j,k,h);if(g.isEbvError(o))return o;i.push(o)}if(b==="str")return i[0].token==="literal"?{token:"literal",type:null,value:""+i[0].value}:i[0].token==="uri"?{token:"literal",type:null,value:i[0].value}:g.ebvFalse();else if(b==="lang")return i[0].token==="literal"?i[0].lang!=null?{token:"literal",value:""+i[0].lang}:{token:"literal",value:""}:g.ebvError();else if(b==="datatype")return i[0].token===
"literal"?(b=i[0],b.type!=null?typeof b.type==="string"?{token:"uri",value:b.type,prefix:null,suffix:null}:b.type:b.lang==null?{token:"uri",value:"http://www.w3.org/2001/XMLSchema#string",prefix:null,suffix:null}:g.ebvError()):g.ebvError();else if(b==="isliteral")return i[0].token==="literal"?g.ebvTrue():g.ebvFalse();else if(b==="isblank")return i[0].token==="blank"?g.ebvTrue():g.ebvFalse();else if(b==="isuri"||b==="isiri")return i[0].token==="uri"?g.ebvTrue():g.ebvFalse();else if(b==="sameterm")return b=
g.RDFTermEquality(i[0],i[1],j,h),g.isEbvError(b)&&(b=!1),g.ebvBoolean(b);else if(b==="langmatches")return b=i[0],e=i[1],b.token==="literal"&&e.token==="literal"?e.value==="*"&&b.value!=""?g.ebvTrue():g.ebvBoolean(b.value.toLowerCase().indexOf(e.value.toLowerCase())===0):g.ebvError();else if(b==="bound")return b=i[0].value,b==null?g.ebvError():e[b]!=null?g.ebvTrue():g.ebvFalse();else throw"Builtin call "+b+" not implemented yet";}};g.runUnaryExpression=function(b,c,e,j,k,h){c=g.runFilter(c,e,j,k,h);
if(g.isEbvError(c))return c;if(b==="!"){var i=g.ebv(c);return g.isEbvError(i)?g.ebvFalse():g.ebvBoolean(!i)}else if(b==="+")return g.isNumeric(c)?c:g.ebvError();else if(b==="-")if(g.isNumeric(c)){b={};for(i in c)b[i]=c[i];b.value=-b.value;return b}else return g.ebvError()};g.runRegex=function(b,c,e,j,k,h,i){if(b!=null)b=g.runFilter(b,j,k,h,i);else return g.ebvError();if(c!=null)c=g.runFilter(c,j,k,h,i);else return g.ebvError();e!=null&&(e=g.runFilter(e,j,k,h,i));if(c!=null&&c.token==="literal"&&(e==
null||e.token==="literal"))c=c.value,e=e==null?null:e.value;else return g.ebvError();if(b!=null&&b.token=="var")if(j[b.value]!=null)b=j[b.value];else return g.ebvError();else if(b!=null&&b.token==="literal")if(b.type==null||g.isXsdType("string",b))b=b.value;else return g.ebvError();else return g.ebvError();return(e==null?RegExp(c):RegExp(c,e.toLowerCase())).exec(b)?g.ebvTrue():g.ebvFalse()};g.normalizeLiteralDatatype=function(b,c,e){if(!(b.value.type==null||typeof b.value.type!="object"))b.value.type=
y.lexicalFormBaseUri(b.value.type,e);return b};g.runIriRefOrFunction=function(b,c,e,j,k,h){if(c==null)return b;else{for(var i=[],n=0;n<c.length;n++)i.push(g.runFilter(c[n],e,j,k,h));b=y.lexicalFormBaseUri(b,h);if(b=="http://www.w3.org/2001/XMLSchema#integer"||b=="http://www.w3.org/2001/XMLSchema#decimal"||b=="http://www.w3.org/2001/XMLSchema#double"||b=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||b=="http://www.w3.org/2001/XMLSchema#negativeInteger"||b=="http://www.w3.org/2001/XMLSchema#long"||
b=="http://www.w3.org/2001/XMLSchema#int"||b=="http://www.w3.org/2001/XMLSchema#short"||b=="http://www.w3.org/2001/XMLSchema#byte"||b=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||b=="http://www.w3.org/2001/XMLSchema#unsignedLong"||b=="http://www.w3.org/2001/XMLSchema#unsignedInt"||b=="http://www.w3.org/2001/XMLSchema#unsignedShort"||b=="http://www.w3.org/2001/XMLSchema#unsignedByte"||b=="http://www.w3.org/2001/XMLSchema#positiveInteger")if(i=i[0],i.token==="literal")if(i=g.normalizeLiteralDatatype(i,
j,h),i.type=="http://www.w3.org/2001/XMLSchema#integer"||i.type=="http://www.w3.org/2001/XMLSchema#decimal"||i.type=="http://www.w3.org/2001/XMLSchema#double"||i.type=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||i.type=="http://www.w3.org/2001/XMLSchema#negativeInteger"||i.type=="http://www.w3.org/2001/XMLSchema#long"||i.type=="http://www.w3.org/2001/XMLSchema#int"||i.type=="http://www.w3.org/2001/XMLSchema#short"||i.type=="http://www.w3.org/2001/XMLSchema#byte"||i.type=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||
i.type=="http://www.w3.org/2001/XMLSchema#unsignedLong"||i.type=="http://www.w3.org/2001/XMLSchema#unsignedInt"||i.type=="http://www.w3.org/2001/XMLSchema#unsignedShort"||i.type=="http://www.w3.org/2001/XMLSchema#unsignedByte"||i.type=="http://www.w3.org/2001/XMLSchema#positiveInteger")return i.type=b,i;else if(i.type=="http://www.w3.org/2001/XMLSchema#boolean")return g.ebv(i)==!0?(i.type=b,i.value=1):(i.type=b,i.value=0),i;else if(i.type=="http://www.w3.org/2001/XMLSchema#float"||i.type=="http://www.w3.org/2001/XMLSchema#double")return i.type=
b,i.value=parseInt(i.value),i;else if(i.type=="http://www.w3.org/2001/XMLSchema#string"||i.type==null){if(i.value.split(".").length>2)return g.ebvError();else if(i.value.split("-").length>2)return g.ebvError();else if(i.value.split("/").length>2)return g.ebvError();else if(i.value.split("+").length>2)return g.ebvError();if(b=="http://www.w3.org/2001/XMLSchema#decimal"&&(i.value.indexOf("e")!=-1||i.value.indexOf("E")!=-1))return g.ebvError();if(b=="http://www.w3.org/2001/XMLSchema#int"||b=="http://www.w3.org/2001/XMLSchema#integer")if(i.value.indexOf("e")!=
-1||i.value.indexOf("E")!=-1||i.value.indexOf(".")!=-1)return g.ebvError();try{return i.value=parseInt(parseFloat(i.value)),isNaN(i.value)?g.ebvError():(i.type=b,i)}catch(o){return g.ebvError()}}else return g.ebvError();else return g.ebvError();else if(b=="http://www.w3.org/2001/XMLSchema#boolean")return i=i[0],i.token==="literal"&&i.type==null?i.value==="true"||i.value==="1"?g.ebvTrue():i.value==="false"||i.value==="0"?g.ebvFalse():g.ebvError():i.token==="literal"?g.isEbvError(i)?i:g.ebvBoolean(i):
g.ebvError();else if(b=="http://www.w3.org/2001/XMLSchema#string")if(i=i[0],i.token==="literal")if(i=g.normalizeLiteralDatatype(i,j,h),i.type=="http://www.w3.org/2001/XMLSchema#integer"||i.type=="http://www.w3.org/2001/XMLSchema#decimal"||i.type=="http://www.w3.org/2001/XMLSchema#double"||i.type=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||i.type=="http://www.w3.org/2001/XMLSchema#negativeInteger"||i.type=="http://www.w3.org/2001/XMLSchema#long"||i.type=="http://www.w3.org/2001/XMLSchema#int"||
i.type=="http://www.w3.org/2001/XMLSchema#short"||i.type=="http://www.w3.org/2001/XMLSchema#byte"||i.type=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||i.type=="http://www.w3.org/2001/XMLSchema#unsignedLong"||i.type=="http://www.w3.org/2001/XMLSchema#unsignedInt"||i.type=="http://www.w3.org/2001/XMLSchema#unsignedShort"||i.type=="http://www.w3.org/2001/XMLSchema#unsignedByte"||i.type=="http://www.w3.org/2001/XMLSchema#positiveInteger"||i.type=="http://www.w3.org/2001/XMLSchema#float")return i.type=
b,i.value=""+i.value,i;else if(i.type=="http://www.w3.org/2001/XMLSchema#string")return i;else if(i.type=="http://www.w3.org/2001/XMLSchema#boolean")return g.ebv(i)?(i.type=b,i.value="true"):(i.type=b,i.value="false"),i;else if(i.type=="http://www.w3.org/2001/XMLSchema#dateTime"||i.type=="http://www.w3.org/2001/XMLSchema#date"){i.type=b;if(typeof i.value!="string")i.value=y.iso8601(i.value);return i}else return i.type==null?(i.value=""+i.value,i.type=b,i):g.ebvError();else return i.token==="uri"?
{token:"literal",value:y.lexicalFormBaseUri(i,h),type:b,lang:null}:g.ebvError();else if(b=="http://www.w3.org/2001/XMLSchema#dateTime"||b=="http://www.w3.org/2001/XMLSchema#date")if(i=i[0],i.type=="http://www.w3.org/2001/XMLSchema#dateTime"||i.type=="http://www.w3.org/2001/XMLSchema#date")return i;else if(i.type=="http://www.w3.org/2001/XMLSchema#string"||i.type==null)try{return i.value=y.iso8601(y.parseStrictISO8601(i.value)),i.type=b,i}catch(u){return g.ebvError()}else return g.ebvError();else if(b==
"http://www.w3.org/2001/XMLSchema#float")if(i=i[0],i.token==="literal")if(i=g.normalizeLiteralDatatype(i,j,h),i.type=="http://www.w3.org/2001/XMLSchema#decimal"||i.type=="http://www.w3.org/2001/XMLSchema#int")return i.type=b,i.value=parseFloat(i.value),i;else if(i.type=="http://www.w3.org/2001/XMLSchema#boolean")return g.ebv(i)==!0?(i.type=b,i.value=1):(i.type=b,i.value=0),i;else if(i.type=="http://www.w3.org/2001/XMLSchema#float"||i.type=="http://www.w3.org/2001/XMLSchema#double")return i.type=b,
i.value=parseFloat(i.value),i;else if(i.type=="http://www.w3.org/2001/XMLSchema#string")try{return i.value=parseFloat(i.value),isNaN(i.value)?g.ebvError():(i.type=b,i)}catch(s){return g.ebvError()}else if(i.type==null){if(i.value.split(".").length>2)return g.ebvError();else if(i.value.split("-").length>2)return g.ebvError();else if(i.value.split("/").length>2)return g.ebvError();else if(i.value.split("+").length>2)return g.ebvError();try{return i.value=parseFloat(i.value),isNaN(i.value)?g.ebvError():
(i.type=b,i)}catch(x){return g.ebvError()}}else return g.ebvError();else return g.ebvError();else return g.ebvError()}};var K={variablesInBGP:function(b){var c=b.variables;if(c)return c;var e=b.value||b,c=[];for(comp in e)e[comp]&&e[comp].token==="var"?c.push(e[comp].value):e[comp]&&e[comp].token==="blank"&&c.push("blank:"+e[comp].value);return b.variables=c},connected:function(b,c){for(var e="/"+b.vars.join("/")+"/",j=0;j<c.vars.length;j++)if(e.indexOf("/"+c.vars[j]+"/")!=-1)return!0;return!1},variablesIntersectionBGP:function(b,
c){for(var e=K.variablesInBGP(b).sort(),j=K.variablesInBGP(c).sort(),g=0,h=0,i=[];g<e.length&&h<j.length;)e[g]===j[h]?(i.push(e[g]),g++,h++):e[g]<j[h]?g++:h++;return i},executeAndBGPsGroups:function(b){for(var c={},e={},j=0,g=0;g<b.length;g++){var h=b[g],i=[],n;for(n in h)n!="_cost"&&(h[n].token==="var"?i.push(h[n].value):h[n].token==="blank"&&i.push(h[n].value));var o=!1,u;for(u in e){groupVar=e[u];for(var s=0;s<i.length;s++)if(groupVar.indexOf("/"+i[s]+"/")!=-1){c[u].push(h);e[u]=groupVar+i.join("/")+
"/";o=!0;break}if(o)break}o||(c[j]=[h],e[j]="/"+i.join("/")+"/",j++)}b=[];for(j in c)b.push(c[j]);return b},intersectionSize:function(b,c){for(var e=c.i.split("_"),j=0;j<e.length;j++)if(e[j]!=""&&b.i.indexOf("_"+e[j]+"_")!=-1)return 1;return 0},createJoinTree:function(b,c){for(var e="/"+b.vars.join("/")+"/",j=b.vars.concat([]),g=[],h=0;h<c.vars.length;h++)e.indexOf("/"+c.vars[h]+"/")!=-1?c.vars[h].indexOf("_:")==0?g.push("blank:"+c.vars[h]):g.push(c.vars[h]):j.push(c.vars[h]);for(var i=c.i.split("_"),
n=b.i.split("_"),e={},h=0;h<i.length;h++)i[h]!=""&&(e[i[h]]=!0);for(h=0;h<n.length;h++)n[h]!=""&&(e[n[h]]=!0);var h=[],o;for(o in e)h.push(o);return{left:b,right:c,cost:b.cost+c.cost,i:"_"+h.sort().join("_")+"_",vars:j,join:g}}};K.executeBushyTree=function(b,c,e,j){if(b.left==null)return K.executeEmptyJoinBGP(b.right,c,e,j);else if(b.right==null)return K.executeEmptyJoinBGP(b.left,c,e,j);else{var g=K.executeBushyTree(b.left,c,e,j);if(g!=null)return c=K.executeBushyTree(b.right,c,e,j),c!=null?K.joinBindings2(b.join,
g,c):null}};K.executeAndBGPsDPSize=function(b,c,e,j){for(var g=K.executeAndBGPsGroups(b),b=[],h=0;h<g.length;h++){var i=g[h];e.computeCosts(i,j);var n={},o={},u={},s=1,x=null,y={};u["1"]=[];for(var L=0;L<i.length;L++){var s=[],E;for(E in i[L])E!="_cost"&&(i[L][E].token==="var"?s.push(i[L][E].value):i[L][E].token==="blank"&&s.push(i[L][E].value));o["_"+L+"_"]={left:i[L],right:null,cost:i[L]._cost,i:"_"+L+"_",vars:s};s={left:i[L],right:null,cost:i[L]._cost,i:"_"+L+"_",vars:s};n["_"+L+"_"]=s;delete i[L]._cost;
y["_"+L+"_"]=!0;u["1"].push("_"+L+"_");if(x==null||x.cost>s.cost)x=s}for(var H=2;H<=i.length;H++)for(var J=1;J<H;J++)for(var M=u[""+J]||[],N=u[""+(H-J)]||[],L=0;L<M.length;L++)for(var Q=0;Q<N.length;Q++)if(M[L]!==N[Q]){var O=o[M[L]],R=o[N[Q]];if(K.intersectionSize(O,R)==0&&K.connected(O,R)&&(s=H,R=K.createJoinTree(n[O.i],n[R.i]),!y[R.i])){y[R.i]=!0;var T=R.cost+1;if(n[R.i]!=null)T=n[R.i].cost;O=u[H]||[];O.push(R.i);o[R.i]=R;u[H]=O;T>R.cost&&(s===H&&(x=R),n[R.i]=R)}}b.push(x)}O=null;for(h=0;h<b.length;h++)E=
K.executeBushyTree(b[h],c,e,j),O=O==null?E:K.crossProductBindings(O,E);return O};K.executeEmptyJoinBGP=function(b,c,e,j){return K.executeBGPDatasets(b,c,e,j)};K.executeBGPDatasets=function(b,c,e,j){var g={};if(b.graph==null){for(var h=[],i=0;i<c["default"].length;i++)if(g[c["default"][i].oid]==null){g[c["default"][i].oid]=!0;b.graph=c["default"][i];var n=e.rangeQuery(b,j),n=K.buildBindingsFromRange(n,b);h.push(n)}return b=K.unionManyBindings(h)}else if(b.graph.token==="var"){for(var o=b.graph.value,
h=[],i=0;i<c.named.length;i++)if(g[c.named[i].oid]==null)if(g[c.named[i].oid]=!0,b.graph=c.named[i],n=e.rangeQuery(b,j),n!=null){for(var n=K.buildBindingsFromRange(n,b),u=0;u<n.length;u++)n[u][o]=c.named[i].oid;h.push(n)}else return null;return b=K.unionManyBindings(h||[])}else return n=e.rangeQuery(b,j),n!=null?n=K.buildBindingsFromRange(n,b):null};K.buildBindingsFromRange=function(b,c){K.variablesInBGP(c);var e={},j=c.value||c,e={};for(n in j)j[n]&&j[n].token==="var"?e[n]=j[n].value:j[n]&&j[n].token===
"blank"&&(e[n]="blank:"+j[n].value);j=[];if(b!=null)for(var g=0;g<b.length;g++){var h={},i=b[g],n;for(n in e)h[e[n]]=i[n];j.push(h)}return j};K.areCompatibleBindings=function(b,c){for(var e in b)if(c[e]!=null&&c[e]!=b[e])return!1;return!0};K.mergeBindings=function(b,c){var e={},j;for(j in b)e[j]=b[j];for(j in c)e[j]=c[j];return e};K.joinBindings2=function(b,c,e){for(var j={},g,h,i,n,o=[],u=0;u<c.length;u++){g=c[u];n=j;for(var s=0;s<b.length;s++)h=b[s],h=g[h],s==b.length-1?(i=n[h]||[],i.push(g),n[h]=
i):(i=n[h]||{},n=n[h]=i)}for(u=0;u<e.length;u++){g=e[u];n=j;for(s=0;s<b.length;s++)if(h=b[s],h=g[h],n[h]!=null)if(s==b.length-1)for(c=0;c<n[h].length;c++)o.push(K.mergeBindings(n[h][c],g));else n=n[h]}return o};K.joinBindings=function(b,c){for(var e=[],j=0;j<b.length;j++)for(var g=b[j],h=0;h<c.length;h++){var i=c[h];K.areCompatibleBindings(g,i)&&e.push(K.mergeBindings(g,i))}return e};K.augmentMissingBindings=function(b,c){for(var e in c)b[e]==null&&(b[e]=null);return b};K.leftOuterJoinBindings=function(b,
c){for(var e=[],j=0;j<b.length;j++){for(var g=b[j],h=!1,i=0;i<c.length;i++){var n=c[i];K.areCompatibleBindings(g,n)&&(h=!0,e.push(K.mergeBindings(g,n)))}h===!1&&(K.augmentMissingBindings(g,n),e.push(g))}return e};K.crossProductBindings=function(b,c){for(var e=[],g=0;g<b.length;g++)for(var k=b[g],h=0;h<c.length;h++)e.push(K.mergeBindings(k,c[h]));return e};K.unionBindings=function(b,c){return b.concat(c)};K.unionManyBindings=function(b){for(var c=[],e=0;e<b.length;e++)c=K.unionBindings(c,b[e]);return c};
var H={},na=K;H.QueryEngine=function(b){if(arguments.length!=0)this.backend=b.backend,this.lexicon=b.lexicon,this.eventsOnBatchLoad=b.eventsOnBatchLoad||!1,this.defaultPrefixes={},this.abstractQueryTree=new O.AbstractQueryTree,this.rdfLoader=new Y.RDFLoader(b.communication),this.callbacksBackend=new J.CallbacksBackend(this)};H.QueryEngine.prototype.registerNsInEnvironment=function(b,c){var e=[];if(b!=null&&b.prefixes!=null)e=b.prefixes;var g={},k;for(k in this.defaultPrefixes)g[k]=this.defaultPrefixes[k];
for(k=0;k<e.length;k++){var h=e[k];if(h.token==="prefix")g[h.prefix]=h.local}c.namespaces=g;c.base=b!=null&&b.base&&typeof b.base==="object"?b.base.value:null};H.QueryEngine.prototype.applyModifier=function(b,c){if(b=="DISTINCT"){for(var e={},g=[],k=0;k<c.length;k++){var h=c[k],i="",n;for(n in h){var o=h[n];o==null?i=i+n+"null":o.token=="literal"?(o.value!=null&&(i+=o.value),o.lang!=null&&(i+=o.lang),o.type!=null&&(i+=o.type)):i=o.value?i+n+o.value:i+n+o}e[i]==null&&(g.push(h),e[i]=!0)}return g}else return c};
H.QueryEngine.prototype.applyLimitOffset=function(b,c,e){if(c==null&&b==null)return e;b==null&&(b=0);c=c==null?e.length:b+c;return e.slice(b,c)};H.QueryEngine.prototype.applySingleOrderBy=function(b,c,e,j){for(var k=[],h=0;h<b.length;h++){var i=g.collect(b[h].expression,[c],e,j,this);k.push(i[0].value)}return{binding:c,value:k}};H.QueryEngine.prototype.applyOrderBy=function(b,c,e,g){var k=this,h=[];if(b!=null&&b.length>0){for(var i=0;i<c.length;i++){var n=k.applySingleOrderBy(b,c[i],e,g);h.push(n)}h.sort(function(c,
e){return k.compareFilteredBindings(c,e,b,g)});c=[];for(i=0;i<h.length;i++)c.push(h[i].binding)}return c};H.QueryEngine.prototype.compareFilteredBindings=function(b,c,e,j){for(var k=0;;){if(k==b.value.length)return 0;var h=e[k].direction;if(b.value[k]==null&&c.value[k]==null)k++;else{if(b.value[k]==null)b={value:!1};else if(c.value[k]==null)b={value:!0};else if(b.value[k].token==="blank"&&c.value[k].token==="blank"){k++;continue}else if(b.value[k].token==="blank")b={value:!1};else if(c.value[k].token===
"blank")b={value:!0};else if(b.value[k].token==="uri"&&c.value[k].token==="uri")if(g.runEqualityFunction(b.value[k],c.value[k],[],this,j).value==!0){k++;continue}else b=g.runTotalGtFunction(b.value[k],c.value[k],[]);else if(b.value[k].token==="uri")b={value:!1};else if(c.value[k].token==="uri")b={value:!0};else if(b.value[k].token==="literal"&&c.value[k].token==="literal"&&b.value[k].type==null&&c.value[k].type==null)if(g.runEqualityFunction(b.value[k],c.value[k],[],this,j).value==!0){k++;continue}else b=
g.runTotalGtFunction(b.value[k],c.value[k],[]);else if(b.value[k].token==="literal"&&b.value[k].type==null)b={value:!1};else if(c.value[k].token==="literal"&&c.value[k].type==null)b={value:!0};else if(g.runEqualityFunction(b.value[k],c.value[k],[],this,j).value==!0){k++;continue}else b=g.runTotalGtFunction(b.value[k],c.value[k],[]);return b.value==!0?h==="ASC"?1:-1:h==="ASC"?-1:1}}};H.QueryEngine.prototype.removeDefaultGraphBindings=function(b,c){for(var e=[],g={},k=0;k<c.named.length;k++)g[c.named[k].oid]=
!0;for(k=0;k<c["default"].length;k++)g[c["default"][k].oid]==null&&e.push(c["default"][k].oid);e=[];for(k=0;k<b.length;k++){var h=b[k],i=!1,n;for(n in h){for(var o=0;o<g.length;o++)if(h[n]===g[o]){i=!0;break}if(i)break}i||e.push(h)}return e};H.QueryEngine.prototype.aggregateBindings=function(b,c,e,j){for(var c=this.copyDenormalizedBindings(c,j.outCache),k={},h=0;h<b.length;h++){var i=g.runAggregator(b[h],c,this,e,j);b[h].alias?k[b[h].alias.value]=i:k[b[h].value.value]=i}return k};H.QueryEngine.prototype.projectBindings=
function(b,c,e){if(b[0].kind==="*")return c;else{for(var j=[],k=0;k<c.length;k++){for(var h=c[k],i={},n=!0,o=0;o<b.length;o++)if(b[o].token=="variable"&&b[o].kind!="aliased")i[b[o].value.value]=h[b[o].value.value];else if(b[o].token=="variable"&&b[o].kind=="aliased"){var u=g.runFilter(b[o].expression,h,this,e,{blanks:{},outCache:{}});if(g.isEbvError(u)){n=!1;break}else i[b[o].alias.value]=u}n===!0&&j.push(i)}return j}};H.QueryEngine.prototype.resolveNsInEnvironment=function(b,c){return c.namespaces[b]};
H.QueryEngine.prototype.termCost=function(b,c){if(b.token==="uri"){var e=y.lexicalFormBaseUri(b,c);return e==null?0:this.lexicon.resolveUriCost(e)}else return b.token==="literal"?this.lexicon.resolveLiteralCost(y.lexicalFormLiteral(b,c)):b.token==="blank"?this.lexicon.resolveBlankCost(b.value):b.token==="var"?this.lexicon.oidCounter/3:null};H.QueryEngine.prototype.normalizeTerm=function(b,c,e){if(b.token==="uri")return c=y.lexicalFormBaseUri(b,c),c==null?null:e?this.lexicon.registerUri(c):this.lexicon.resolveUri(c);
else if(b.token==="literal")return c=y.lexicalFormLiteral(b,c),b=e?this.lexicon.registerLiteral(c):this.lexicon.resolveLiteral(c);else if(b.token==="blank"){var g=b.value,b=c.blanks[g];b==null&&(b=e?this.lexicon.registerBlank(g):this.lexicon.resolveBlank(g),c.blanks[g]=b);return b}else return b.token==="var"?b.value:null};H.QueryEngine.prototype.normalizeDatasets=function(b,c){for(var e=0;e<b.length;e++){var g=b[e];if(g.value===this.lexicon.defaultGraphUri)g.oid=this.lexicon.defaultGraphOid;else{var k=
this.normalizeTerm(g,c,!1);if(k!=null)g.oid=k;else return null}}return!0};H.QueryEngine.prototype.normalizeQuad=function(b,c,e){var g=null,k=null,h=g=null,i;if(b.graph==null)h=0;else if(i=this.normalizeTerm(b.graph,c,e),i!=null)h=i,e===!0&&b.graph.token!="var"&&this.lexicon.registerGraph(i);else return null;i=this.normalizeTerm(b.subject,c,e);if(i!=null)g=i;else return null;i=this.normalizeTerm(b.predicate,c,e);if(i!=null)k=i;else return null;i=this.normalizeTerm(b.object,c,e);return i==null?null:
{subject:g,predicate:k,object:i,graph:h}};H.QueryEngine.prototype.quadCost=function(b,c){var e=null,g=null,k=null,h=null,h=b.graph==null?this.lexicon.oidCounter/4:this.termCost(b.graph,c),e=this.termCost(b.subject,c),g=this.termCost(b.predicate,c),k=this.termCost(b.object,c);return h+e+g+k};H.QueryEngine.prototype.denormalizeBindingsList=function(b,c){for(var e=[],g=0;g<b.length;g++)result=this.denormalizeBindings(b[g],c),e.push(result);return e};H.QueryEngine.prototype.copyDenormalizedBindings=function(b,
c){for(var e=[],g=0;g<b.length;g++){for(var k={},h=b[g],i=y.keys(h),n=0;n<i.length;n++){var o=h[i[n]];if(o==null)k[i[n]]=null;else if(typeof o==="object")k[i[n]]=o;else{var u=c[o];u==null&&(u=this.lexicon.retrieve(o),c[o]=u);k[i[n]]=u}}e.push(k)}return e};H.QueryEngine.prototype.denormalizeBindings=function(b,c){for(var e=y.keys(b),g=0;g<e.length;g++){var k=b[e[g]];k==null?b[e[g]]=null:c[k]!=null?b[e[g]]=c[k]:(k=this.lexicon.retrieve(k),b[e[g]]=k)}return b};H.QueryEngine.prototype.execute=function(b,
c,e,g){b=y.normalizeUnicodeLiterals(b);b=this.abstractQueryTree.parseQueryString(b);if(b==null)c(!1,"Error parsing query string");else if(b.token==="query"&&b.kind=="update"){this.callbacksBackend.startGraphModification();var k=this;this.executeUpdate(b,function(b,e){k.lexicon.updateAfterWrite&&k.lexicon.updateAfterWrite();b?k.callbacksBackend.endGraphModification(function(){c(b,e)}):(k.callbacksBackend.cancelGraphModification(),c(b,e))})}else b.token==="query"&&b.kind=="query"&&this.executeQuery(b,
c,e,g)};H.QueryEngine.prototype.executeQuery=function(b,c,e,g){var k=b.units,h=this,i={blanks:{},outCache:{}};this.registerNsInEnvironment(b.prologue,i);var n=h.abstractQueryTree.parseExecutableUnit(k[0]);if(n.kind==="select")this.executeSelect(n,i,e,g,function(b,e){b?typeof e==="object"&&e.denorm===!0?c(!0,e.bindings):(e=h.denormalizeBindingsList(e,i.outCache),e!=null?c(!0,e):c(!1,e)):c(!1,e)});else if(n.kind==="ask")n.projection=[{token:"variable",kind:"*"}],this.executeSelect(n,i,e,g,function(b,
e){b?b?e.length>0?c(!0,!0):c(!0,!1):c(!1,e):c(!1,e)});else if(n.kind==="construct")n.projection=[{token:"variable",kind:"*"}],h=this,this.executeSelect(n,i,e,g,function(b,e){if(b)if(b)if(e=h.denormalizeBindingsList(e,i.outCache),e!=null){var g=new x.Graph;if(n.template==null)n.template={triplesContext:n.pattern};for(var j=1,k=[],y=0;y<e.length;y++){for(var E=e[y],H=0;H<k.length;H++)delete k[H].valuetmp;for(H=0;H<n.template.triplesContext.length;H++){for(var K=["subject","predicate","object"],J=n.template.triplesContext[H],
M=0;M<K.length;M++){var N=K[M];if(J[N].token==="blank"&&!(J[N].valuetmp&&J[N].valuetmp!=null)){var O="_:b"+j;j++;J[N].valuetmp=O;k.push(J[N])}}K=x.buildRDFResource(J.subject,E,h,i);M=x.buildRDFResource(J.predicate,E,h,i);J=x.buildRDFResource(J.object,E,h,i);K!=null&&M!=null&&J!=null&&(M=new x.Triple(K,M,J),g.add(M))}}c(!0,g)}else c(!1,e);else c(!1,e);else c(!1,e)})};H.QueryEngine.prototype.executeSelect=function(b,c,e,g,k){if(b.kind==="select"||b.kind==="ask"||b.kind==="construct"||b.kind==="modify"){var h=
b.projection,i=b.dataset,n=b.modifier,o=b.limit,u=b.offset,s=b.order;if(e!=null||g!=null)i["default"]=e||[],i.named=g||[];i["default"]!=null&&i["default"].length===0&&i.named!=null&&i.named.length===0&&i["default"].push(this.lexicon.defaultGraphUriTerm);if(this.normalizeDatasets(i["default"].concat(i.named),c)!=null)if(g=this.executeSelectUnit(h,i,b.pattern,c),g!=null){if(b.group!=null&&b.group===""){for(var x=!1,e=0;e<b.projection.length;e++)if(b.projection[e].expression!=null&&b.projection[e].expression.expressionType===
"aggregate"){x=!0;break}if(x===!0)b.group="singleGroup"}if(b.group&&b.group!="")if(this.checkGroupSemantics(b.group,h)){n=this.groupSolution(g,b.group,i,c);o=[];for(e=0;e<n.length;e++)u=this.aggregateBindings(h,n[e],i,c),o.push(u);k(!0,{bindings:o,denorm:!0})}else k(!1,"Incompatible Group and Projection variables");else c=this.applyOrderBy(s,g,i,c),h=this.projectBindings(h,c,i),modifiedBindings=this.applyModifier(n,h),filteredBindings=this.removeDefaultGraphBindings(this.applyLimitOffset(u,o,modifiedBindings),
i),k(!0,filteredBindings)}else k(!1,g);else k(!1,"Error normalizing datasets")}else k(!1,"Cannot execute "+b.kind+" query as a select query")};H.QueryEngine.prototype.groupSolution=function(b,c,e,j){var k=[],h=[],i=!1;if(c==="singleGroup")return[b];else{for(var n=0;n<b.length;n++){for(var o=b[n],u=!0,s=0;s<c.length;s++){var x=c[s],y=null;if(x.token==="var")y=x.value,i==!1&&k.push(y);else if(x.token==="aliased_expression")if(y=x.alias.value,i==!1&&k.push(y),x.expression.primaryexpression==="var")o[x.alias.value]=
o[x.expression.value.value];else if(y=this.copyDenormalizedBindings([o],j.outCache),y=g.runFilter(x.expression,y[0],this,e,j),g.isEbvError(y))u=!1;else{if(y.value!=null)y.value=""+y.value;o[x.alias.value]=y}else y=this.copyDenormalizedBindings([o],j.outCache),y=g.runFilter(x,y[0],this,j),g.isEbvError(y)?u=!1:(o["groupCondition"+env._i]=y,y="groupCondition"+env._i,i==!1&&k.push(y))}i==!1&&(i=!0);u===!0&&h.push(o)}b={};for(n=0;n<h.length;n++){c=h[n];e="";for(s=0;s<k.length;s++)j=c[k[s]],e+=typeof j===
"object"?j.value:j;b[e]==null?b[e]=[c]:b[e].push(c)}var k=[],E;for(E in b)k.push(b[E]);return k}};H.QueryEngine.prototype.executeSelectUnit=function(b,c,e,j){return e.kind==="BGP"?this.executeAndBGP(b,c,e,j):e.kind==="UNION"?this.executeUNION(b,c,e.value,j):e.kind==="JOIN"?this.executeJOIN(b,c,e,j):e.kind==="LEFT_JOIN"?this.executeLEFT_JOIN(b,c,e,j):e.kind==="FILTER"?(b=this.executeSelectUnit(b,c,e.value,j),b!=null?b=g.checkFilters(e,b,!1,c,j,this):[]):e.kind==="EMPTY_PATTERN"?[]:e.kind==="ZERO_OR_MORE_PATH"||
e.kind==="ONE_OR_MORE_PATH"?this.executeZeroOrMorePath(e,c,j):(console.log("Cannot execute query pattern "+e.kind+". Not implemented yet."),null)};H.QueryEngine.prototype.executeZeroOrMorePath=function(b,c,e){var g=[];b.x.token==="var"&&g.push({token:"variable",kind:"var",value:b.x.value});b.y.token==="var"&&g.push({token:"variable",kind:"var",value:b.y.value});g.length===0&&g.push({token:"variable",kind:"*"});if(b.x.token==="var"&&b.y.token==="var"){var k=this.executeAndBGP(g,c,b.path,e),h={},g=
[],i,n,o,u,s=b.x.value;n=b.x;for(var x=b.path,F=0;F<k.length;F++)if(i=k[F][s],h[i]==null){u=this.lexicon.retrieve(i);b.x=u;b.path=this.abstractQueryTree.replace(x,n,u,e);x=y.clone(b.path);n=this.executeZeroOrMorePath(b,c,e);for(var E=0;E<n.length;E++)o=n[E],o[s]=i,g.push(o);n=u}return g}else if(b.x.token!=="var"&&b.y.token==="var"){h={};i=!0;u=[];for(s=[];i==!0||u.length!==0;){i===!0?(k=this.executeAndBGP(g,c,b.path,e),n=b.x,i=!1):(x=this.lexicon.retrieve(u.pop()),k=b.path,k=this.abstractQueryTree.replace(k,
n,x,e),k=this.executeAndBGP(g,c,k,e),n=x);for(F=0;F<k.length;F++)x=k[F][b.y.value],h[x]!==!0&&(o={},o[b.y.value]=x,s.push(o),h[x]=!0,u.push(x))}return s}else throw"Kind of path not supported!";};H.QueryEngine.prototype.executeUNION=function(b,c,e,j){var k=e[0],h=e[1],i=null,n=null;if(e.length!=2)throw"SPARQL algebra UNION with more than two components";i=this.executeSelectUnit(b,c,k,j);if(i==null)return null;n=this.executeSelectUnit(b,c,h,j);if(n==null)return null;b=na.unionBindings(i,n);return b=
g.checkFilters(e,b,!1,c,j,this)};H.QueryEngine.prototype.executeAndBGP=function(b,c,e,j){b=na.executeAndBGPsDPSize(e.value,c,this,j);return b!=null?g.checkFilters(e,b,!1,c,j,this):null};H.QueryEngine.prototype.executeLEFT_JOIN=function(b,c,e,j){var k=e.rvalue,h=null,i=null,h=this.executeSelectUnit(b,c,e.lvalue,j);if(h==null)return null;i=this.executeSelectUnit(b,c,k,j);if(i==null)return null;b=na.leftOuterJoinBindings(h,i);c=g.checkFilters(e,b,!0,c,j,this);if(h.length>1&&i.length>1){var e=[],j={},
n;for(n in h[0])j[n]=!0;for(n in i[0])j[n]!=!0&&e.push(n);acum=[];duplicates={};for(h=0;h<c.length;h++)if(c[h].__nullify__===!0){for(j=0;j<e.length;j++)c[h].bindings[e[j]]=null;j=[];i=[];for(n in c[h].bindings)c[h].bindings[n]!=null&&(j.push(n+c[h].bindings[n]),j.sort(),i.push(j.join("")));if(duplicates[j.join("")]==null){for(j=0;j<i.length;j++)duplicates[i[j]]=!0;acum.push(c[h].bindings)}}else for(n in acum.push(c[h]),j=[],c[h])j.push(n+c[h][n]),j.sort(),duplicates[j.join("")]=!0;return acum}else return c};
H.QueryEngine.prototype.executeJOIN=function(b,c,e,j){var k=e.rvalue,h=null,i=null,h=this.executeSelectUnit(b,c,e.lvalue,j);if(h==null)return null;i=this.executeSelectUnit(b,c,k,j);if(i==null)return null;b=na.joinBindings(h,i);return b=g.checkFilters(e,b,!1,c,j,this)};H.QueryEngine.prototype.rangeQuery=function(b,c){var e=this.normalizeQuad(b,c,!1);return e!=null?(e=this.backend.range(new $.Pattern(e)),e==null||e.length==0?[]:e):(console.log("ERROR normalizing quad"),null)};H.QueryEngine.prototype.executeUpdate=
function(b,c){var e=b.units,g=this,k={blanks:{},outCache:{}};this.registerNsInEnvironment(b.prologue,k);for(var h=0;h<e.length;h++){var i=g.abstractQueryTree.parseExecutableUnit(e[h]);if(i.kind==="insertdata"){for(var n=0;n<i.quads.length;n++){var o=i.quads[n];if(g._executeQuadInsert(o,k)!==!0)return c(!1,error)}c(!0)}else if(i.kind==="deletedata"){for(n=0;n<i.quads.length;n++)o=i.quads[n],this._executeQuadDelete(o,k);c(!0)}else if(i.kind==="modify")this._executeModifyQuery(i,k,c);else if(i.kind===
"create")c(!0);else if(i.kind==="load")n={uri:y.lexicalFormBaseUri(i.sourceGraph,k)},i.destinyGraph!=null&&(n={uri:y.lexicalFormBaseUri(i.destinyGraph,k)}),g=this,this.rdfLoader.load(i.sourceGraph.value,n,function(b,e){b==!1?(console.log("Error loading graph"),console.log(e),c(!1,"error batch loading quads")):(e=g.batchLoad(e),c(e!=null,e||"error batch loading quads"))});else if(i.kind==="drop")this._executeClearGraph(i.destinyGraph,k,c);else if(i.kind==="clear")this._executeClearGraph(i.destinyGraph,
k,c);else throw Error("not supported execution unit");}};H.QueryEngine.prototype.batchLoad=function(b,c){var e=null,g=null,k=null,h=null,i=0,n=!0,o={},u,s;this.eventsOnBatchLoad&&this.callbacksBackend.startGraphModification();for(var x=0;x<b.length;x++)if(s=b[x],s.subject.uri||s.subject.token==="uri"?u=this.lexicon.registerUri(s.subject.uri||s.subject.value):s.subject.literal||s.subject.token==="literal"?u=this.lexicon.registerLiteral(s.subject.literal||s.subject.value):(u=o[s.subject.blank||s.subject.value],
u==null&&(u=this.lexicon.registerBlank(s.subject.blank||s.subject.value),o[s.subject.blank||s.subject.value]=u)),e=u,s.predicate.uri||s.predicate.token==="uri"?u=this.lexicon.registerUri(s.predicate.uri||s.predicate.value):s.predicate.literal||s.predicate.token==="literal"?u=this.lexicon.registerLiteral(s.predicate.literal||s.predicate.value):(u=o[s.predicate.blank||s.predicate.value],u==null&&(u=this.lexicon.registerBlank(s.predicate.blank||s.predicate.value),o[s.predicate.blank||s.predicate.value]=
u)),g=u,s.object.uri||s.object.token==="uri"?u=this.lexicon.registerUri(s.object.uri||s.object.value):s.object.literal||s.object.token==="literal"?u=this.lexicon.registerLiteral(s.object.literal||s.object.value):(u=o[s.object.blank||s.object.value],u==null&&(u=this.lexicon.registerBlank(s.object.blank||s.object.value),o[s.object.blank||s.object.value]=u)),k=u,s.graph.uri||s.graph.token==="uri"?(u=this.lexicon.registerUri(s.graph.uri||s.graph.value),this.lexicon.registerGraph(u)):s.graph.literal||
s.graph.token==="literal"?u=this.lexicon.registerLiteral(s.graph.literal||s.graph.value):(u=o[s.graph.blank||s.graph.value],u==null&&(u=this.lexicon.registerBlank(s.graph.blank||s.graph.value),o[s.graph.blank||s.graph.value]=u)),h=u,u=s,s={subject:e,predicate:g,object:k,graph:h},e=new $.NodeKey(s),g=this.backend.search(e),!g)if(g=this.backend.index(e),g==!0)this.eventsOnBatchLoad&&this.callbacksBackend.nextGraphModification(J.added,[u,s]),i+=1;else{n=!1;break}this.lexicon.updateAfterWrite!=null&&
this.lexicon.updateAfterWrite();var y=function(){n?c&&c(!0,i):c&&c(!1,null)};this.eventsOnBatchLoad?this.callbacksBackend.endGraphModification(function(){y()}):y();return n?i:null};H.QueryEngine.prototype.computeCosts=function(b,c){for(var e=0;e<b.length;e++)b[e]._cost=this.quadCost(b[e],c);return b};H.QueryEngine.prototype._executeModifyQuery=function(b,c,e){var g=this,k=!0,h=null,i=["subject","predicate","object","graph"];b.insert=b.insert==null?[]:b.insert;b["delete"]=b["delete"]==null?[]:b["delete"];
y.seq(function(e){var i=[],u=[];b["with"]!=null&&i.push(b["with"]);if(b.using!=null)for(var u=[],s=0;s<b.using.length;s++){var x=b.using[s];x.kind==="named"?u.push(x.uri):i.push(x.uri)}b.dataset={};b.projection=[{token:"variable",kind:"*"}];g.executeSelect(b,c,i,u,function(b,i){b?(i=g.denormalizeBindingsList(i,c.outCache),i!=null?h=i:k=!1):k=!1;return e()})},function(e){var o=b["with"];if(k){for(var u=[],s=0;s<b["delete"].length;s++)for(var x=b["delete"][s],y=0;y<h.length;y++){for(var E={},H=h[y],
J=0;J<i.length;J++){var K=i[J];K=="graph"&&x[K]==null?E.graph=o:E[K]=x[K].token==="var"?H[x[K].value]:x[K]}u.push(E)}for(y=0;y<u.length;y++)E=u[y],g._executeQuadDelete(E,c)}e()},function(e){var o=b["with"];if(k){for(var u=[],s=0;s<b.insert.length;s++)for(var x=b.insert[s],y=0;y<h.length;y++){for(var E={},H=h[y],K=0;K<i.length;K++){var J=i[K];J=="graph"&&x[J]==null?E.graph=o:E[J]=x[J].token==="var"?H[x[J].value]:x[J]}u.push(E)}for(s=0;s<u.length;s++)E=u[s],g._executeQuadInsert(E,c)}e()})(function(){e(k)})};
H.QueryEngine.prototype._executeQuadInsert=function(b,c){var e=this.normalizeQuad(b,c,!0);if(e!=null){var g=new $.NodeKey(e),k=this.backend.search(g);return k?k:(k=this.backend.index(g),k==!0?(this.callbacksBackend.nextGraphModification(J.added,[b,e]),!0):(console.log("ERROR inserting quad"),!1))}else return console.log("ERROR normalizing quad"),!1};H.QueryEngine.prototype._executeQuadDelete=function(b,c){var e=this.normalizeQuad(b,c,!1);if(e!=null){var g=new $.NodeKey(e);this.backend["delete"](g);
return this.lexicon.unregister(b,g)==!0?(this.callbacksBackend.nextGraphModification(J.deleted,[b,e]),!0):(console.log("ERROR unregistering quad"),!1)}else return console.log("ERROR normalizing quad"),!1};H.QueryEngine.prototype._executeClearGraph=function(b,c,e){if(b==="default")this.execute("DELETE { ?s ?p ?o } WHERE { ?s ?p ?o }",e);else if(b==="named"){var g=this,k=this.lexicon.registeredGraphs(!0);if(k!=null){var h=!1;y.repeat(0,k.length,function(b,c){var e=k[c._i],u=arguments.callee;h?b(u,c):
g.execute("DELETE { GRAPH <"+e+"> { ?s ?p ?o } } WHERE { GRAPH <"+e+"> { ?s ?p ?o } }",function(e){h=!e;b(u,c)})},function(){e(!h)})}else e(!1,"Error deleting named graphs")}else b==="all"?(g=this,this.execute("CLEAR DEFAULT",function(b,c){b?g.execute("CLEAR NAMED",e):e(!1,c)})):b.token=="uri"?(b=y.lexicalFormBaseUri(b,c),b!=null?this.execute("DELETE { GRAPH <"+b+"> { ?s ?p ?o } } WHERE { GRAPH <"+b+"> { ?s ?p ?o } }",e):e(!1,"wrong graph URI")):e(!1,"wrong graph URI")};H.QueryEngine.prototype.checkGroupSemantics=
function(b,c){if(b==="singleGroup")return!0;for(var e={},g=0;g<b.length;g++){var k=b[g];k.token==="var"?e[k.value]=!0:k.token==="aliased_expression"&&(e[k.alias.value]=!0)}for(g=0;g<c.length;g++)if(k=c[g],k.kind==="var"){if(e[k.value.value]==null)return!1}else if(k.kind==="aliased"&&k.expression&&k.expression.primaryexpression==="var"&&e[k.expression.value.value]==null)return!1;return!0};H.QueryEngine.prototype.registerDefaultNamespace=function(b,c){this.defaultPrefixes[b]=c};var J={ANYTHING:{token:"var",
value:"_"},added:"added",deleted:"deleted",eventsFlushed:"eventsFlushed",CallbacksBackend:function(b){this.aqt=new O.AbstractQueryTree;this.engine=b;this.indexMap={};this.observersMap={};this.queriesIndexMap={};this.emptyNotificationsMap={};this.queriesList=[];this.pendingQueries=[];this.matchedQueries=[];this.updateInProgress=null;this.indices=["SPOG","GP","OGS","POG","GSP","OS"];this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object",
"graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]};this.callbackCounter=0;this.callbacksMap={};this.callbacksInverseMap={};this.queryCounter=0;this.queriesMap={};this.queriesCallbacksMap={};this.queriesInverseMap={};for(b=0;b<this.indices.length;b++){var c=this.indices[b];this.indexMap[c]={};this.queriesIndexMap[c]={}}}};J.CallbacksBackend.prototype.startGraphModification=function(){this.pendingQueries=
[].concat(this.queriesList);this.matchedQueries=[];if(this.updateInProgress==null)this.updateInProgress={added:[],deleted:[]}};J.CallbacksBackend.prototype.nextGraphModification=function(b,c){this.updateInProgress[b].push(c)};J.CallbacksBackend.prototype.endGraphModification=function(b){var c=this;if(this.updateInProgress!=null){var e=c.updateInProgress;c.updateInProgress=null;this.sendNotification(J.deleted,e[J.deleted],function(){c.sendNotification(J.added,e[J.added],function(){c.sendEmptyNotification(J.eventsFlushed,
null,function(){c.dispatchQueries(function(){b(!0)})})})})}else b(!0)};J.CallbacksBackend.prototype.cancelGraphModification=function(){this.updateInProgress=null};J.CallbacksBackend.prototype.sendNotification=function(b,c,e){for(var g={},k=0;k<c.length;k++){var h=c[k],i;for(i in this.indexMap){var n=this.indexMap[i],o=this.componentOrders[i];this._searchCallbacksInIndex(n,o,b,h,g);this.pendingQueries.length!=0&&(n=this.queriesIndexMap[i],this._searchQueriesInIndex(n,o,h))}}this.dispatchNotifications(g);
e!=null&&e(!0)};J.CallbacksBackend.prototype.sendEmptyNotification=function(b,c,e){for(var g=this.emptyNotificationsMap[b]||[],k=0;k<g.length;k++)g[k](b,c);e()};J.CallbacksBackend.prototype.dispatchNotifications=function(b){for(var c in b){var e=this.callbacksMap[c],g=b[c][J.deleted];g!=null&&e(J.deleted,g);for(var k in b[c])k!=J.deleted&&e(k,b[c][k])}};J.CallbacksBackend.prototype._searchCallbacksInIndex=function(b,c,e,g,k){for(var h=g[1],g=g[0],i=0;i<c.length+1;i++){for(var n=b._||[],o=[],u=0;u<
n.length;u++){var s=n[u];this.callbacksMap[s]!=null&&(k[s]=k[s]||{},k[s][e]=k[s][e]||[],k[s][e].push(g),o.push(s))}b._=o;n=c[i];if(b[""+h[n]]!=null)b=b[""+h[n]];else break}};J.CallbacksBackend.prototype.subscribeEmpty=function(b,c){var e=this.emptyNotificationsMap[b]||[];e.push(c);this.emptyNotificationsMap[b]=e};J.CallbacksBackend.prototype.unsubscribeEmpty=function(b,c){var e=this.emptyNotificationsMap[b];e!=null&&(e=y.remove(e,c));this.emptyNotificationsMap[b]=e};J.CallbacksBackend.prototype.subscribe=
function(b,c,e,g,k,h){b=this._tokenizeComponents(b,c,e,g);c={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,c);b=this.engine.normalizeQuad(b,c,!0);e=this._indexForPattern(new $.Pattern(b));c=this.componentOrders[e];e=this.indexMap[e];for(g=0;g<c.length;g++){var i=b[c[g]];if(i==="_"){e._==null&&(e._=[]);this.callbackCounter++;e._.push(this.callbackCounter);this.callbacksMap[this.callbackCounter]=k;this.callbacksInverseMap[k]=this.callbackCounter;break}else g===c.length-1?(e[i]=e[i]||
{_:[]},this.callbackCounter++,e[i]._.push(this.callbackCounter),this.callbacksMap[this.callbackCounter]=k,this.callbacksInverseMap[k]=this.callbackCounter):(e[i]=e[i]||{},e=e[i])}h!=null&&h(!0)};J.CallbacksBackend.prototype.unsubscribe=function(b){var c=this.callbacksInverseMap[b];c!=null&&(delete this.callbacksInverseMap[b],delete this.callbacksMap[c])};J.CallbacksBackend.prototype._tokenizeComponents=function(b,c,e,g){var k={};k.subject=b==null?J.ANYTHING:b.indexOf("_:")==0?{token:"blank",value:b}:
{token:"uri",value:b};k.predicate=c==null?J.ANYTHING:{token:"uri",value:c};k.object=e==null?J.ANYTHING:{token:"uri",value:e};k.graph=g==null?J.ANYTHING:{token:"uri",value:g};return k};J.CallbacksBackend.prototype._indexForPattern=function(b){for(var b=b.indexKey,c=this.indices,e=0;e<c.length;e++)for(var g=c[e],k=this.componentOrders[g],h=0;h<k.length;h++){if(y.include(b,k[h])===!1)break;if(h==b.length-1)return g}return"SPOG"};J.CallbacksBackend.prototype.observeNode=function(){var b,c,e,g;arguments.length===
4?(b=arguments[0],c=arguments[1],e=arguments[2],g=arguments[3]):(b=arguments[0],c=this.engine.lexicon.defaultGraphUri,e=arguments[1],g=arguments[2]);c="CONSTRUCT { <"+b+"> ?p ?o } WHERE { GRAPH <"+c+"> { <"+b+"> ?p ?o } }";var k=this,h={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,h);var i=[];this.engine.execute(c,function(c,o){if(c){var u=!1,s=function(b,c){if(b==="eventsFlushed"&&u)u=!1,e(o);else if(b!=="eventsFlushed"){u=!0;for(var g=0;g<c.length;g++){var j=c[g],n=x.buildRDFResource(j.subject,
i,k.engine,h),s=x.buildRDFResource(j.predicate,i,k.engine,h),j=x.buildRDFResource(j.object,i,k.engine,h);n!=null&&s!=null&&j!=null&&(j=new x.Triple(n,s,j),b===J.added?o.add(j):b===J.deleted&&o.remove(j))}}};k.observersMap[e]=s;k.subscribeEmpty(J.eventsFlushed,s);k.subscribe(b,null,null,null,s,function(){e(o);g&&g(!0)})}else g&&g(!1)})};J.CallbacksBackend.prototype.stopObservingNode=function(b){return(b=this.observersMap[b])?(this.unsubscribe(b),this.unsubscribeEmpty(J.eventsFlushed,b),!0):!1};J.CallbacksBackend.prototype.observeQuery=
function(b,c,e){var g=this.aqt.collectBasicTriples(this.aqt.parseSelect(this.aqt.parseQueryString(b).units[0])),k={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,k);var h,i,n,o=this.queryCounter;this.queryCounter++;this.queriesMap[o]=b;this.queriesInverseMap[b]=o;this.queriesList.push(o);this.queriesCallbacksMap[o]=c;for(var u=0;u<g.length;u++){i=g[u];if(i.graph==null)i.graph=this.engine.lexicon.defaultGraphUriTerm;i=this.engine.normalizeQuad(i,k,!0);h=new $.Pattern(i);n=this._indexForPattern(h);
h=this.componentOrders[n];n=this.queriesIndexMap[n];for(var s=0;s<h.length;s++){var x=i[h[s]];if(typeof x==="string"){n._==null&&(n._=[]);n._.push(o);break}else s===h.length-1?(n[x]=n[x]||{_:[]},n[x]._.push(o)):(n[x]=n[x]||{},n=n[x])}}this.engine.execute(b,function(b,e){b?c(e):console.log("ERROR in query callback "+e)});e!=null&&e()};J.CallbacksBackend.prototype.stopObservingQuery=function(b){var c=this.queriesInverseMap[b];if(c!=null)delete this.queriesInverseMap[b],delete this.queriesMap[c],this.queriesList=
y.remove(this.queriesList,c)};J.CallbacksBackend.prototype._searchQueriesInIndex=function(b,c,e){for(var e=e[1],g=0;g<c.length+1;g++){for(var k=b._||[],h=[],i=0;i<k.length;i++){var n=k[i];y.include(this.pendingQueries,n)&&(y.remove(this.pendingQueries,n),this.matchedQueries.push(n));this.queriesMap[n]!=null&&h.push(n)}b._=h;k=c[g];if(b[""+e[k]]!=null)b=b[""+e[k]];else break}};J.CallbacksBackend.prototype.dispatchQueries=function(b){var c=this,e,g,k,h;y.repeat(0,this.matchedQueries.length,function(b,
n){e=arguments.callee;k=c.matchedQueries[n._i];g=c.queriesMap[k];h=c.queriesCallbacksMap[k];y.recur(function(){c.engine.execute(g,function(c,g){c?h(g):console.log("ERROR executing query callback "+g);b(e,n)})})},function(){b()})};var M={};try{typeof Worker=="undefined"&&(Worker=null)}catch(Ec){Worker=null}if(Worker)M.RDFStoreClient=function(b,c,e){console.log("trying to load "+b);this.connection=Worker.Worker?new Worker.Worker(b):new Worker(b);this.callbacksCounter=1;var g=this;this.rdf=x.rdf;console.log("The worker");
console.log(this.connection);g=this;this.connection.onmessage=function(b){g.receive(b)};this.observingCallbacks={};this.callbacks={0:{cb:function(b,c){b===!0?e(!0,g):e(!1,c)},fn:"create"}};this.connection.postMessage({fn:"create",args:c,callback:"0"})},M.RDFStoreClient.prototype.receive=function(b){event=b.data||b;if(event.fn==="workerRequest:NetworkTransport:load"){var c=this,e=event.callback,b=event.arguments.concat(function(b,g){c.connection.postMessage({fn:"workerRequestResponse",results:[b,g],
callback:e})});X.load.apply(X,b)}else if(b=this.callbacks[event.callback])b.fn==="create"||b.fn==="execute"||b.fn==="insert"||b.fn=="graph"||b.fn==="node"||b.fn==="insert"||b.fn==="delete"||b.fn==="clear"||b.fn==="load"||b.fn==="startObservingQueryEndCb"||b.fn==="registeredGraphs"?(delete this.callbacks[event.callback],b.cb(event.success,event.result)):b.fn==="startObservingQuery"?b.cb(event.result):b.fn==="startObservingNode"?b.cb(event.result):b.fn==="subscribe"&&b.cb(event.event,event.result)},
M.RDFStoreClient.prototype.registerCallback=function(b,c){var e=""+this.callbacksCounter;this.callbacks[e]={fn:b,cb:c};this.callbacksCounter++;return e},M.RDFStoreClient.prototype.execute=function(){if(arguments.length===3)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2]);else if(arguments.length===4)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2],arguments[3]);else{var b,c;arguments.length===1?(b=arguments[0],c=function(){}):arguments.length===2&&(b=arguments[0],
c=arguments[1]);c=this.registerCallback("execute",c);this.connection.postMessage({fn:"execute",args:[b],callback:c})}},M.RDFStoreClient.prototype.insert=function(){var b,c,e;if(arguments.length===1)c=arguments[0],this.connection.postMessage({fn:"insert",args:[c]});else if(arguments.length===2)c=arguments[0],e=arguments[1]||function(){},e=this.registerCallback("insert",e),this.connection.postMessage({fn:"insert",args:[c],callback:e});else if(arguments.length===3)c=arguments[0],b=arguments[1],e=arguments[2]||
function(){},e=this.registerCallback("insert",e),this.connection.postMessage({fn:"insert",args:[c,b],callback:e});else throw"The triples to insert, an optional graph and callback must be provided";},M.RDFStoreClient.prototype.graph=function(){var b=null,c=null;if(arguments.length===1)c=arguments[0]||function(){};else if(arguments.length===2)c=arguments[1]||function(){},b=arguments[0];else throw"An optional graph URI and a callback function must be provided";var e=this,g=this.registerCallback("insert",
function(b,h){if(b){for(var g,j=0;j<h.triples.length;j++)g=h.triples[j],h.triples[j]=new x.Triple(e.adaptJSInterface(g.subject),e.adaptJSInterface(g.predicate),e.adaptJSInterface(g.object));c(b,e.rdf.createGraph(h.triples))}else c(b,h)});b==null?this.connection.postMessage({fn:"graph",args:[],callback:g}):this.connection.postMessage({fn:"graph",args:[b],callback:g})},M.RDFStoreClient.prototype.node=function(){var b=null,c=null,e=null;if(arguments.length===2)e=arguments[0],c=arguments[1]||function(){};
else if(arguments.length===3)e=arguments[0],b=arguments[1],c=arguments[2]||function(){};else throw"An optional graph URI and a callback function must be provided";var g=this,k=this.registerCallback("insert",function(b,e){if(b){for(var k,o=0;o<e.triples.length;o++)k=e.triples[o],e.triples[o]=new x.Triple(g.adaptJSInterface(k.subject),g.adaptJSInterface(k.predicate),g.adaptJSInterface(k.object));c(b,g.rdf.createGraph(e.triples))}else c(b,e)});b==null?this.connection.postMessage({fn:"node",args:[e],
callback:k}):this.connection.postMessage({fn:"node",args:[e,b],callback:k})},M.RDFStoreClient.prototype.setPrefix=function(b,c){this.rdf.setPrefix(b,c);this.connection.postMessage({fn:"rdf/setPrefix",args:[b,c],callback:null})},M.RDFStoreClient.prototype.setDefaultPrefix=function(b){this.rdf.setDefaultPrefix(b);this.connection.postMessage({fn:"rdf/setDefaultPrefix",args:[b],callback:null})},M.RDFStoreClient.prototype["delete"]=function(){var b,c,e;if(arguments.length===1)c=arguments[0],this.connection.postMessage({fn:"delete",
args:[c]});else if(arguments.length===2)c=arguments[0],e=arguments[1]||function(){},e=this.registerCallback("delete",e),this.connection.postMessage({fn:"delete",args:[c],callback:e});else if(arguments.length===3)c=arguments[0],b=arguments[1],e=arguments[2]||function(){},e=this.registerCallback("delete",e),this.connection.postMessage({fn:"delete",args:[c,b],callback:e});else throw"The triples to delete, an optional graph and callback must be provided";},M.RDFStoreClient.prototype.clear=function(){var b,
c;if(arguments.length===1)c=arguments[0]||function(){},c=this.registerCallback("clear",c),this.connection.postMessage({fn:"clear",args:[],callback:c});else if(arguments.length===2)b=arguments[0],c=arguments[1]||function(){},c=this.registerCallback("clear",c),this.connection.postMessage({fn:"clear",args:[b],callback:c});else throw"The optional graph and a callback must be provided";},M.RDFStoreClient.prototype.setBatchLoadEvents=function(b){this.connection.postMessage({fn:"setBatchLoadEvents",args:[b]})},
M.RDFStoreClient.prototype.registerDefaultNamespace=function(b,c){this.connection.postMessage({fn:"registerDefaultNamespace",args:[b,c]})},M.RDFStoreClient.prototype.registerDefaultProfileNamespaces=function(){this.connection.postMessage({fn:"registerDefaultProfileNamespaces",args:[]})},M.RDFStoreClient.prototype.load=function(){var b,c,e,g;if(arguments.length===3)b=arguments[0],c=arguments[1],g=arguments[2]||function(){},g=this.registerCallback("load",g),this.connection.postMessage({fn:"load",args:[b,
c],callback:g});else if(arguments.length===4)b=arguments[0],c=arguments[1],e=arguments[2],g=arguments[3]||function(){},g=this.registerCallback("load",g),this.connection.postMessage({fn:"load",args:[b,c,e],callback:g});else if(arguments.length===2)throw"The mediaType of the parser, the data a callback and an optional graph must be provided";},M.RDFStoreClient.prototype.startObservingQuery=function(b,c,e){e!=null?(c=this.registerCallback("startObservingQuery",c),this.observingCallbacks[b]=c,e=this.registerCallback("startObservingQueryEndCb",
e),this.connection.postMessage({fn:"startObservingQuery",args:[b],callback:[c,e]})):(c=this.registerCallback("startObservingQuery",c),this.observingCallbacks[b]=c,this.connection.postMessage({fn:"startObservingQuery",args:[b],callback:[c]}))},M.RDFStoreClient.prototype.stopObservingQuery=function(b){var c=this.observingCallbacks[b];delete this.observingCallbacks[b];delete this.callbacks[c];this.connection.postMessage({fn:"stopObservingQuery",args:[b],callback:[]})},M.RDFStoreClient.prototype.startObservingNode=
function(){var b,c,e;if(arguments.length===2){b=arguments[0];e=arguments[1];var g=this,k=this.registerCallback("startObservingNode",function(b){for(var c,k=0;k<b.triples.length;k++)c=b.triples[k],b.triples[k]=new x.Triple(g.adaptJSInterface(c.subject),g.adaptJSInterface(c.predicate),g.adaptJSInterface(c.object));e(g.rdf.createGraph(b.triples))});this.observingCallbacks[e]=k;this.connection.postMessage({fn:"startObservingNode",args:[b],callback:k})}else arguments.length===3&&(b=arguments[0],c=arguments[1],
e=arguments[2],g=this,k=this.registerCallback("startObservingNode",function(b){for(var c,k=0;k<b.triples.length;k++)c=b.triples[k],b.triples[k]=new x.Triple(g.adaptJSInterface(c.subject),g.adaptJSInterface(c.predicate),g.adaptJSInterface(c.object));e(g.rdf.createGraph(b.triples))}),this.observingCallbacks[e]=k,this.connection.postMessage({fn:"startObservingNode",args:[b,c],callback:k}))},M.RDFStoreClient.prototype.stopObservingNode=function(b){var c=this.observingCallbacks[b];delete this.observingCallbacks[b];
delete this.callbacks[c];this.connection.postMessage({fn:"stopObservingNode",args:[c],callback:[]})},M.RDFStoreClient.prototype.subscribe=function(b,c,e,g,k){var h=this,i=this.registerCallback("subscribe",function(b,c){for(var e,g=0;g<c.length;g++)e=c[g],c[g]=new x.Triple(h.adaptJSInterface(e.subject),h.adaptJSInterface(e.predicate),h.adaptJSInterface(e.object));k(b,c)});this.observingCallbacks[k]=i;this.connection.postMessage({fn:"subscribe",args:[b,c,e,g],callback:i})},M.RDFStoreClient.prototype.unsubscribe=
function(b){var c=this.observingCallbacks[b];delete this.observingCallbacks[b];delete this.callbacks[c];this.connection.postMessage({fn:"unsubscribe",args:[c],callback:[]})},M.RDFStoreClient.prototype.registeredGraphs=function(b){var c=this;this.connection.postMessage({fn:"registeredGraphs",args:[],callback:this.registerCallback("registeredGraphs",function(e,g){if(e)for(var k=0;k<g.length;k++)graph=g[k],g[k]=c.adaptJSInterface(graph);b(e,g)})})},M.RDFStoreClient.prototype.adaptJSInterface=function(b){if(b.interfaceName===
"BlankNode")return new x.BlankNode(b.bnodeId);else if(b.interfaceName==="Literal")return new x.Literal(b.nominalValue,b.language,b.datatype);else if(b.interfaceName==="NamedNode")return new x.NamedNode(b.nominalValue)},M.RDFStoreClient.prototype.isWebWorkerConnection=!0;var E={},xb={MongodbQueryEngine:function(){throw"MongoDB backend not supported in the browser version";}};E.VERSION="0.5.7";E.connect=function(){var b,c,e;arguments.length==1&&(b=__dirname,c={},e=arguments[0]);arguments.length==2?
(typeof arguments[0]==="string"?(b=arguments[0],c={}):(b=__dirname+"/index.js",c=arguments[0]),e=arguments[1]):(b=arguments[0],c=arguments[1],e=arguments[2]);try{Worker?new M.RDFStoreClient(b,c,function(b,c){e(b,c)}):E.create(c,function(b){e(!1,b)})}catch(g){E.create(c,function(b){e(!1,b)})}};E.create=function(){return arguments.length==1?new E.Store(arguments[0]):arguments.length==2?new E.Store(arguments[0],arguments[1]):new E.Store};E.Store=function(b,c){var e=null,g=null;if(arguments.length==0)g=
{};else if(arguments.length==1)g={},e=b;else if(arguments.length>1)g=b,e=c;else throw"An optional argument map and a callback must be provided";g.treeOrder==null&&(g.treeOrder=15);this.functionMap={};var k=this;g.engine==="mongodb"?(this.isMongodb=!0,this.engine=new xb.MongodbQueryEngine(g),this.engine.readConfiguration(function(){g.overwrite===!0?k.engine.clean(function(){e(k)}):e(k)})):new Q.Lexicon(function(b){g.overwrite===!0&&b.clear();new T.QuadBackend(g,function(c){g.overwrite===!0&&c.clear();
g.backend=c;g.lexicon=b;k.engine=new H.QueryEngine(g);e&&e(k)})},g.name)};E.Store.prototype.rdf=x.rdf;E.Store.prototype.execute=function(){if(arguments.length===3)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2]);else if(arguments.length===4)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2],arguments[3]);else{var b,c;arguments.length===1?(b=arguments[0],c=function(){}):arguments.length===2&&(b=arguments[0],c=arguments[1]);this.engine.execute(b,c)}};E.Store.prototype.executeWithEnvironment=
function(){var b,c,e;if(arguments.length===3){b=arguments[0];var g=function(){};c=arguments[1];e=arguments[2]}else arguments.length===4&&(b=arguments[0],g=arguments[3],c=arguments[1],e=arguments[2]);for(var k=[],h=[],i=0;i<c.length;i++)k.push({token:"uri",value:c[i]});for(i=0;i<e.length;i++)h.push({token:"uri",value:e[i]});this.engine.execute(b,g,k,h)};E.Store.prototype.graph=function(){var b=null,c=null;if(arguments.length===1)c=arguments[0]||function(){},b=this.engine.lexicon.defaultGraphUri;else if(arguments.length===
2)c=arguments[1]||function(){},b=arguments[0];else throw"An optional graph URI and a callback function must be provided";this.rdf.resolve(b)!=null&&(b=this.rdf.resolve(b));this.engine.execute("CONSTRUCT { ?s ?p ?o } WHERE { GRAPH <"+b+"> { ?s ?p ?o } }",c)};E.Store.prototype.node=function(){var b=null,c=null,e=null;if(arguments.length===2)e=arguments[0],c=arguments[1]||function(){},b=this.engine.lexicon.defaultGraphUri;else if(arguments.length===3)e=arguments[0],b=arguments[1],c=arguments[2]||function(){};
else throw"An optional graph URI, node URI and a callback function must be provided";this.rdf.resolve(b)!=null&&(b=this.rdf.resolve(b));this.rdf.resolve(e)!=null&&(e=this.rdf.resolve(e));this.engine.execute("CONSTRUCT { <"+e+"> ?p ?o } WHERE { GRAPH <"+b+"> { <"+e+"> ?p ?o } }",c)};E.Store.prototype.startObservingNode=function(){var b,c,e;arguments.length===2?(b=arguments[0],e=arguments[1],this.engine.callbacksBackend.observeNode(b,e,function(){})):arguments.length===3&&(b=arguments[0],c=arguments[1],
e=arguments[2],this.engine.callbacksBackend.observeNode(b,c,e,function(){}))};E.Store.prototype.stopObservingNode=function(b){this.engine.callbacksBackend.stopObservingNode(b)};E.Store.prototype.startObservingQuery=function(b,c,e){e!=null?this.engine.callbacksBackend.observeQuery(b,c,e):this.engine.callbacksBackend.observeQuery(b,c,function(){})};E.Store.prototype.stopObservingQuery=function(b){this.engine.callbacksBackend.stopObservingQuery(b)};E.Store.prototype.subscribe=function(b,c,e,g,k){var h=
function(b,c){for(var e=[],h={blanks:{},outCache:{}},g=[],j=0;j<c.length;j++){var y=c[j],E=x.buildRDFResource(y.subject,g,this.engine,h),H=x.buildRDFResource(y.predicate,g,this.engine,h),y=x.buildRDFResource(y.object,g,this.engine,h);E!=null&&H!=null&&y!=null&&(y=new x.Triple(E,H,y),e.push(y))}k(b,e)};this.functionMap[k]=h;this.engine.callbacksBackend.subscribe(b,c,e,g,h,function(){})};E.Store.prototype.unsubscribe=function(b){this.engine.callbacksBackend.unsubscribe(this.functionMap[b]);delete this.functionMap[b]};
E.Store.prototype.setPrefix=function(b,c){this.rdf.setPrefix(b,c)};E.Store.prototype.setDefaultPrefix=function(b){this.rdf.setDefaultPrefix(b)};E.Store.prototype.insert=function(){var b,c,e;if(arguments.length===1)c=arguments[0];else if(arguments.length===2)b=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),c=arguments[0],e=arguments[1]||function(){};else if(arguments.length===3)c=arguments[0],b=this.rdf.createNamedNode(arguments[1]),e=arguments[2]||function(){};else throw"The triples to insert, an optional graph and callback must be provided";
var g="",k=this;c.forEach(function(b){g=g+k._nodeToQuery(b.subject)+k._nodeToQuery(b.predicate)+k._nodeToQuery(b.object)+"."});g=b!=null?"INSERT DATA { GRAPH "+this._nodeToQuery(b)+" { "+g+" } }":"INSERT DATA { "+this._nodeToQuery(b)+" { "+g+" }";this.engine.execute(g,e)};E.Store.prototype._nodeToQuery=function(b){if(b.interfaceName==="NamedNode"){var c=this.rdf.resolve(b.valueOf());return c!=null?"<"+c+">":"<"+b.valueOf()+">"}else{if(b.interfaceName!=="")if(b.lang!=null)return'"'+b.valueOf()+'"@'+
b.lang;else if(b.datatype!=null)return'"'+b.valueOf()+'"^^<'+b.datatype+">";return b.toString()}};E.Store.prototype["delete"]=function(){var b,c,e;if(arguments.length===1)c=arguments[0];else if(arguments.length===2)b=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),c=arguments[0],e=arguments[1]||function(){};else if(arguments.length===3)c=arguments[0],b=this.rdf.createNamedNode(arguments[1]),e=arguments[2]||function(){};else throw"The triples to delete, an optional graph and callback must be provided";
var g="",k=this;c.forEach(function(b){g=g+k._nodeToQuery(b.subject)+k._nodeToQuery(b.predicate)+k._nodeToQuery(b.object)+"."});g=b!=null?"DELETE DATA { GRAPH "+this._nodeToQuery(b)+" { "+g+" } }":"DELETE DATA { "+this._nodeToQuery(b)+" { "+g+" }";this.engine.execute(g,e)};E.Store.prototype.clear=function(){var b,c;if(arguments.length===0)b=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),c=function(){};else if(arguments.length===1)b=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),
c=arguments[0]||function(){};else if(arguments.length===2)b=this.rdf.createNamedNode(arguments[0]),c=arguments[1]||function(){};else throw"The optional graph and a callback must be provided";this.engine.execute("CLEAR GRAPH "+this._nodeToQuery(b),c)};E.Store.prototype.setBatchLoadEvents=function(b){this.engine.eventsOnBatchLoad=b};E.Store.prototype.registerDefaultNamespace=function(b,c){this.rdf.prefixes.set(b,c);this.engine.registerDefaultNamespace(b,c)};E.Store.prototype.registerDefaultProfileNamespaces=
function(){var b=this.rdf.prefixes.values(),c;for(c in b)this.registerDefaultNamespace(c,b[c])};E.Store.prototype.load=function(){var b,c,e,g;if(arguments.length===3)e=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),b=arguments[0],c=arguments[1],g=arguments[2]||function(){};else if(arguments.length===4)b=arguments[0],c=arguments[1],e=this.rdf.createNamedNode(arguments[2]),g=arguments[3]||function(){};else if(arguments.length===2)throw"The mediaType of the parser, the data a callback and an optional graph must be provided";
if(b==="remote")c=this.rdf.createNamedNode(c),this.engine.execute("LOAD <"+c.valueOf()+"> INTO GRAPH <"+e.valueOf()+">",g);else if(c&&typeof c==="string"&&c.indexOf("file://")===0){b=this.engine.rdfLoader.parsers[b];var k=this;this.engine.rdfLoader.loadFromFile(b,{token:"uri",value:e.valueOf()},c,function(b,c){b?k.engine.batchLoad(c,g):g(b,c)})}else b=this.engine.rdfLoader.parsers[b],k=this,this.engine.rdfLoader.tryToParse(b,{token:"uri",value:e.valueOf()},c,function(b,c){b?k.engine.batchLoad(c,g):
g(b,c)})};E.Store.prototype.registerParser=function(b,c){this.engine.rdfLoader.registerParser(b,c)};E.Store.prototype.registeredGraphs=function(b){if(this.isMongodb)this.engine.registeredGraphs(!0,function(c){for(var e=[],g=0;g<c.length;g++){var j=new x.NamedNode(c[g]);e.push(j)}return b(!0,e)});else{for(var c=this.engine.lexicon.registeredGraphs(!0),e=[],g=0;g<c.length;g++){var k=new x.NamedNode(c[g]);e.push(k)}return b(!0,e)}};E.Store.prototype._nodeToQuery=function(b){if(b.interfaceName==="NamedNode"){var c=
this.rdf.resolve(b.valueOf());return c!=null?"<"+c+">":"<"+b.valueOf()+">"}else return b.toString()};E.Store.prototype.getNetworkTransport=function(){return X};E.Store.prototype.setNetworkTransport=function(b){X=b};RDFStoreWorker={observingCallbacks:{},workerCallbacksCounter:0,workerCallbacks:{}};RDFStoreWorker.registerCallback=function(b){var c=""+RDFStoreWorker.workerCallbacksCounter;RDFStoreWorker.workerCallbacksCounter++;RDFStoreWorker.workerCallbacks[c]=b;return c};RDFStoreWorker.handleCreate=
function(b,c){typeof X!="undefined"&&X!=null&&(X={load:function(b,c,g){var h=RDFStoreWorker.registerCallback(function(b){g.apply(g,b)});postMessage({fn:"workerRequest:NetworkTransport:load",callback:h,arguments:[b,c]})},loadFromFile:function(){}});args=[b];args.push(function(b){RDFStoreWorker.store=b;postMessage({callback:c,result:"created",success:!0})});E.create.apply(E,args)};RDFStoreWorker.receive=function(b){var c=b.data||b;if(c.fn==="workerRequestResponse"){var e=c.callback,g=RDFStoreWorker.workerCallbacks[e];
g!=null&&(delete RDFStoreWorker.workerCallbacks[e],g(c.results))}else if(c.fn==="create"&&c.args!=null)RDFStoreWorker.handleCreate(c.args,c.callback);else if(c.fn==="setBatchLoadEvents")RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,c.args);else if(c.fn==="registerDefaultNamespace")RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,c.args);else if(c.fn==="registerDefaultProfileNamespaces")RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,c.args);else if((c.fn==="execute"||c.fn==="executeWithEnvironment"||
c.fn==="graph"||c.fn==="node"||c.fn==="clear"||c.fn==="load")&&c.args!=null){c.args.push(function(b,e){c.callback!=null&&postMessage({callback:c.callback,result:e,success:b})});try{RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,c.args)}catch(k){console.log("Error executing method through connection"),console.log(k)}}else if((c.fn==="insert"||c.fn==="delete")&&c.args!=null)try{c.args.push(function(b,e){c.callback!=null&&postMessage({callback:c.callback,result:e,success:b})});g=c.args[0];for(b=
0;b<g.triples.length;b++)e=g.triples[b],g.triples[b]=new x.Triple(RDFStoreWorker.adaptJSInterface(e.subject),RDFStoreWorker.adaptJSInterface(e.predicate),RDFStoreWorker.adaptJSInterface(e.object));c.args[1].interfaceName!=null&&(c.args[1]=RDFStoreWorker.adaptJSInterface(c.args[1]));c.args[0]=RDFStoreWorker.store.rdf.createGraph(g.triples);RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,c.args)}catch(h){console.log("Error executing method through connection"),console.log(h)}else c.fn==="rdf/setPrefix"&&
c.args!=null?RDFStoreWorker.store.rdf.setPrefix(c.args[0],c.args[1]):c.fn==="rdf/setDefaultPrefix"&&c.args!=null?RDFStoreWorker.store.rdf.setDefaultPrefix(c.args[0]):c.fn==="startObservingQuery"&&c.args!=null?(e=function(b,e){postMessage({callback:c.callback[0],result:e,success:b})},RDFStoreWorker.observingCallbacks[c.args[0]]=e,c.args.push(e),c.args.push(function(b,e){c.callback&&c.callback[1]!=null&&postMessage({callback:c.callback[1],result:e,success:b})}),RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,
c.args)):c.fn==="stopObservingQuery"?((e=RDFStoreWorker.observingCallbacks[c.args[0]])&&RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,[e]),delete RDFStoreWorker.observingCallbacks[c.args[0]]):c.fn==="startObservingNode"&&c.args!=null?(e=function(b){postMessage({callback:c.callback,result:b})},RDFStoreWorker.observingCallbacks[c.callback]=e,c.args.push(e),RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,c.args)):c.fn==="stopObservingNode"&&c.args!=null?((e=RDFStoreWorker.observingCallbacks[c.args[0]])&&
RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,[e]),delete RDFStoreWorker.observingCallbacks[c.args[0]]):c.fn==="subscribe"&&c.args!=null?(e=function(b,e){postMessage({callback:c.callback,event:b,result:e})},RDFStoreWorker.observingCallbacks[c.callback]=e,c.args.push(e),RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,c.args)):c.fn==="stopObservingNode"&&c.args!=null?((e=RDFStoreWorker.observingCallbacks[c.args[0]])&&RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,[e]),delete RDFStoreWorker.observingCallbacks[c.args[0]]):
c.fn==="registeredGraphs"&&c.args!=null&&RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,[function(b,e){c.callback!=null&&postMessage({callback:c.callback,result:e,success:b})}])};RDFStoreWorker.adaptJSInterface=function(b){if(b.interfaceName==="BlankNode")return new x.BlankNode(b.bnodeId);else if(b.interfaceName==="Literal")return new x.Literal(b.nominalValue,b.language,b.datatype);else if(b.interfaceName==="NamedNode")return new x.NamedNode(b.nominalValue)};onmessage=RDFStoreWorker.receive;
try{window.rdfstore=E}catch(Fc){}})();
