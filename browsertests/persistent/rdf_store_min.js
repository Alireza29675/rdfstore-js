(function(){try{console=console||{}}catch(wc){console=console||{},console.log=function(){}}var A={"extends":function(b,c){c.prototype=new b},stackCounterLimit:1E3,stackCounter:0};A.recur=function(b){A.stackCounter===A.stackCounterLimit?(A.stackCounter=0,setTimeout(b,0)):(A.stackCounter++,b())};A.shuffle=function(b){for(var c,f,k=b.length;k;c=parseInt(Math.random()*k),f=b[--k],b[k]=b[c],b[c]=f);return b};A.include=function(b,c,f){for(var k=b.length-1;k>=0;k--){var i=!1,i=f==null?b[k]===c:f(b[k],c)===
0;if(i===!0)return!0}return!1};A.remove=function(b,c){for(var f=[],k=0;k<b.length;k++)b[k]!==c&&f.push(b[k]);return f};A.repeat=function(b,c,f,k,i){arguments.length===4&&(i={});b<c?(i._i=b,f(function(h,f){A.recur(function(){A.repeat(b+1,c,h,k,f)})},i)):k(i)};Utilsmeanwhile=function(b,c,f,k){arguments.length===3&&(k={});k._stack_counter==null&&(k._stack_counter=0);b===!0?c(function(c,b,k){k._stack_counter%40==39?(k._stack_counter+=1,setTimeout(function(){Utilsmeanwhile(c,b,f,k)},0)):(k._stack_counter+=
1,Utilsmeanwhile(c,b,f,k))},k):f(k)};A.seq=function(){var b=arguments;return function(c){A.repeat(0,b.length,function(c,k){var i=arguments.callee;b[k._i](function(){c(i,k)})},function(){c()})}};A.partition=function(b,c){for(var f=b.length%c,k=[],i=0;i<f;i++)k.push(null);f=[];for(i=0;i<b.length;i++)k.push(b[i]),k.length%c==0&&(f.push(k),k=[]);return f};A.keys=function(b){var c=[],f;for(f in b)c.push(f);return c};A.iso8601=function(b){function c(c){return c<10?"0"+c:c}return b.getUTCFullYear()+"-"+
c(b.getUTCMonth()+1)+"-"+c(b.getUTCDate())+"T"+c(b.getUTCHours())+":"+c(b.getUTCMinutes())+":"+c(b.getUTCSeconds())+"Z"};A.parseStrictISO8601=function(b){var b=b.match(RegExp("([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?")),c=0,f=new Date(b[1],0,1);if(b[3])f.setMonth(b[3]-1);else throw"missing ISO8061 component";if(b[5])f.setDate(b[5]);else throw"missing ISO8061 component";if(b[7])f.setHours(b[7]);else throw"missing ISO8061 component";
if(b[8])f.setMinutes(b[8]);else throw"missing ISO8061 component";if(b[10])f.setSeconds(b[10]);else throw"missing ISO8061 component";b[12]&&f.setMilliseconds(Number("0."+b[12])*1E3);b[14]&&(c=Number(b[16])*60+Number(b[17]),c*=b[15]=="-"?1:-1);c-=f.getTimezoneOffset();time=Number(f)+c*6E4;b=new Date;b.setTime(Number(time));return b};A.parseISO8601=function(b){var b=b.match(RegExp("([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?")),
c=0,f=new Date(b[1],0,1);b[3]&&f.setMonth(b[3]-1);b[5]&&f.setDate(b[5]);b[7]&&f.setHours(b[7]);b[8]&&f.setMinutes(b[8]);b[10]&&f.setSeconds(b[10]);b[12]&&f.setMilliseconds(Number("0."+b[12])*1E3);b[14]&&(c=Number(b[16])*60+Number(b[17]),c*=b[15]=="-"?1:-1);c-=f.getTimezoneOffset();time=Number(f)+c*6E4;b=new Date;b.setTime(Number(time));return b};A.parseISO8601Components=function(b){var b=b.match(RegExp("([0-9]{4})(-([0-9]{2}))(-([0-9]{2}))(T([0-9]{2}):([0-9]{2})(:([0-9]{2}))?(.([0-9]+))?)?(Z|([-+])([0-9]{2})(:([0-9]{2}))?)?")),
c,f,k,i,h,g,m,w;c=Number(b[1]);f=b[3]-1;k=Number(b[5]);i=Number(b[7]);h=Number(b[8]);g=Number(b[10]);b[12]&&(m=Number("0."+b[12])*1E3);b[13]==="Z"?w=0:b[14]?(w=0,b[17]&&(w=Number(b[17])),w+=Number(b[15])*60,w*=b[14]=="-"?-1:1):b[14]==null&&b[11]&&(w=Number(b[12])*60);return{year:isNaN(c)?null:c,month:isNaN(f)?null:f,date:isNaN(k)?null:k,hours:isNaN(i)?null:i,minutes:isNaN(h)?null:h,seconds:isNaN(g)?null:g,millisecs:isNaN(m)?null:m,timezone:isNaN(w)?null:w}};A.compareDateComponents=function(b,c){var f=
A.parseISO8601Components(b),k=A.parseISO8601Components(c);return f.timezone==null&&k.timezone==null||f.timezone!=null&&k.timezone!=null?(da=A.parseISO8601(b),db=A.parseISO8601(c),da.getTime()==db.getTime()?0:da.getTime()<db.getTime()?-1:1):f.timezone!=null&&k.timezone==null?(da=A.parseISO8601(b),db=A.parseISO8601(c),ta=da.getTime(),tb=db.getTime(),f=50400,ta<tb&&ta<tb+f?-1:ta>tb&&ta>tb-f?1:null):(da=A.parseISO8601(b),db=A.parseISO8601(c),ta=da.getTime(),tb=db.getTime(),f=50400,ta<tb&&ta+f<tb?-1:ta>
tb&&ta+f>tb?1:null)};A.lexicalFormLiteral=function(b,c){var f=b.value,k=b.lang,i=b.type,h=null;f!=null&&i!=null&&typeof i!="string"?(f=i.value,f!=null?h='"'+b.value+'"^^<'+f+">":(f=i.suffix,i=c.namespaces[i.prefix],b.type=i+f,h='"'+b.value+'"^^<'+i+f+">")):h=k==null&&i==null?'"'+f+'"':i==null?'"'+f+'"@'+k:'"'+b.value+'"^^<'+i+">";return h};A.lexicalFormBaseUri=function(b,c){var f=null;if(b.value==null){var k=b.suffix,i=c.namespaces[b.prefix];i!=null&&(f=i+k)}else f=b.value;if(f===null)return null;
else f.indexOf(":")==-1&&(f=(c.base||"")+f);return f};A.lexicalFormTerm=function(b,c){if(b.token==="uri")return{uri:A.lexicalFormBaseUri(b,c)};else if(b.token==="literal")return{literal:A.lexicalFormLiteral(b,c)};else if(b.token==="blank")return{blank:"_:"+b.label};else callback(!1,"Token of kind "+b.token+" cannot transformed into its lexical form")};A.normalizeUnicodeLiterals=function(b){for(var c=b.match(/\\u[0-9abcdefABCDEF]{4,4}/g)||[],f={},k=0;k<c.length;k++)f[c[k]]==null&&(f[c[k]]=!0,b=b.replace(RegExp("\\"+
c[k],"g"),eval("'"+c[k]+"'")));return b};A.hashTerm=function(b){try{if(b==null)return"";if(b.token==="uri")return"u"+b.value;else if(b.token==="blank")return"b"+b.value;else if(b.token==="literal")return l="l"+b.value,l+=b.type||"",l+=b.lang||"",l}catch(c){if(typeof b==="object"){var f="";for(p in b)f=f+p+b[p];return f}return b}};var ua={PriorityQueue:function(b){var c=[],f={},k=!1,i,h=b.maxSize||10;i=function(c,b){return f[b].priority-f[c].priority};var g=function(){c.sort(i);k=!0};return{debugContents:c,
debugStore:f,debugSort:g,push:function(b,i){c.length===h?(k||g(),f[b]==null?(delete f[c[0]],c[0]=b,priority=f[c[c.length-1]].priority-1,f[b]={object:i,priority:priority}):(priority=f[c[c.length-1]].priority-1,f[b].priority=priority),k=!1):c.length===0?(c.push(b),f[b]={object:i,priority:1E3}):(priority=f[c[c.length-1]].priority-1,f[b]==null?(f[b]={object:i,priority:priority},c.push(b)):(f[b].priority=priority,k=!1))},remove:function(b){if(f[b]!=null){delete f[b];for(var h=null,k=0;k<c.length;k++)if(c[k]===
b){h=k;break}h!=null&&c.splice(h,1)}},fetch:function(b){var h=f[b];return f[b]!=null?(k||g(),priority=f[c[c.length-1]].priority-1,f[b].priority=priority,k=!1,h.object):null}}}},I={};I.Tree=function(b,c,f,k){if(arguments.length!=0){var i=null;if(f===!0)try{if(i=window.localStorage,i==null)throw"not found";}catch(h){throw"Local storage is not present, cannot create persistent storage";}i==null&&(i=function(){var c={};return{setItem:function(b,h){c[b]=h},getItem:function(b){return c[b]||null},removeItem:function(b){delete c[b]},
get:function(b){var h=0,f;for(f in c){if(b===h)return f;h++}return""},length:c.length}}());this.storage=i;this.order=b;this.name=c;this.diskManager=new I.LocalStorageManager(c,i,k);this.root=this.diskManager._readRootNode();this.root==null?(this.root=this._allocateNode(),this.root.isLeaf=!0,this.root.level=0,this._diskWrite(this.root),this._updateRootNode(this.root),this.root=this.root.pointer):this.root=this.diskManager._diskRead(this.root).pointer;this.comparator=function(c,b){return c<b?-1:c>b?
1:0};this.merger=null}};I.Tree.prototype._allocateNode=function(){return new I.Node};I.Tree.prototype._diskWrite=function(b){this.diskManager._diskWrite(b)};I.Tree.prototype._diskRead=function(b){return this.diskManager._diskRead(b)};I.Tree.prototype._diskDelete=function(b){this.diskManager._diskDelete(b)};I.Tree.prototype._updateRootNode=function(b){this.diskManager._updateRootNode(b);return b};I.Tree.prototype.search=function(b,c){for(var f=!0,k=this._diskRead(this.root);f;){for(var i=0;i<k.numberActives&&
this.comparator(b,k.keys[i].key)===1;)i++;if(i<k.numberActives&&this.comparator(k.keys[i].key,b)===0)return c!=null&&c==!0?!0:k.keys[i].data;else k.isLeaf===!0?f=!1:k=this._diskRead(k.children[i])}return null};I.Tree.prototype.walk=function(b){this._walk(b,this._diskRead(this.root))};I.Tree.prototype._walk=function(b,c){if(c.isLeaf)for(var f=0;f<c.numberActives;f++)b(c.keys[f]);else{for(f=0;f<c.numberActives;f++)this._walk(b,this._diskRead(c.children[f])),b(c.keys[f]);this._walk(b,this._diskRead(c.children[c.numberActives]))}};
I.Tree.prototype.walkNodes=function(b){this._walkNodes(b,this._diskRead(this.root))};I.Tree.prototype._walkNodes=function(b,c){if(c.isLeaf)b(c);else{b(c);for(var f=0;f<c.numberActives;f++)this._walkNodes(b,this._diskRead(c.children[f]));this._walkNodes(b,this._diskRead(c.children[c.numberActives]))}};I.Tree.prototype._splitChild=function(b,c,f){var k=this._allocateNode();k.isLeaf=f.isLeaf;k.level=f.level;k.numberActives=this.order-1;var i=f.keys[this.order-1];f.keys[this.order-1]=null;for(var h=0;h<
this.order-1;h++)k.keys[h]=f.keys[h+this.order],f.keys[h+this.order]=null,f.isLeaf||(k.children[h]=f.children[h+this.order],f.children[h+this.order]=null);f.isLeaf||(k.children[h]=f.children[h+this.order],f.children[h+this.order]=null);f.numberActives=this.order-1;for(h=b.numberActives+1;h>c+1;h--)b.children[h]=b.children[h-1];this._diskWrite(k);b.children[c+1]=k.pointer;for(h=b.numberActives;h>c;h--)b.keys[h]=b.keys[h-1];b.keys[c]=i;b.numberActives++;this._diskWrite(b);this._diskWrite(f)};I.Tree.prototype.insert=
function(b,c){var f=this._diskRead(this.root);if(f.numberActives===2*this.order-1){var k=this._allocateNode();k.isLeaf=!1;k.level=f.level+1;k.numberActives=0;k.children[0]=f.pointer;this._diskWrite(k);this._splitChild(k,0,f);this.root=k.pointer;this._updateRootNode(k);this._insertNonFull(k,b,c)}else this._insertNonFull(f,b,c)};I.Tree.prototype._insertNonFull=function(b,c,f){for(var k=b.numberActives-1;!b.isLeaf;){for(;k>=0&&this.comparator(c,b.keys[k].key)===-1;)k--;k++;var i=this._diskRead(b.children[k]);
i.numberActives===2*this.order-1&&(this._splitChild(b,k,i),this.comparator(c,b.keys[k].key)===1&&k++);b=this._diskRead(b.children[k]);k=b.numberActives-1}for(;k>=0&&this.comparator(c,b.keys[k].key)===-1;)b.keys[k+1]=b.keys[k],k--;b.keys[k+1]={key:c,data:f};b.numberActives++;this._diskWrite(b)};I.Tree.prototype["delete"]=function(b){for(var c=this._diskRead(this.root),f=null,k=!0,i=null,h=null,g=null,m=!0;m===!0;){for(m=!1;k===!0;){u=0;if(c.numberActives===0)return!1;for(;u<c.numberActives&&this.comparator(b,
c.keys[u].key)===1;)u++;i=u;u<c.numberActives&&this.comparator(b,c.keys[u].key)===0&&(k=!1);if(k===!0){if(c.isLeaf===!0)return!1;f=c;c=this._diskRead(c.children[u]);if(c===null)return!1;i===f.numberActives?(h=this._diskRead(f.children[i-1]),g=null):i===0?(h=null,g=this._diskRead(f.children[1])):(h=this._diskRead(f.children[i-1]),g=this._diskRead(f.children[i+1]));c.numberActives===this.order-1&&f!=null&&(g!=null&&g.numberActives>this.order-1?(this._moveKey(f,u,-1),c=this._diskRead(c.pointer)):h!=
null&&h.numberActives>this.order-1?(this._moveKey(f,u,1),c=this._diskRead(c.pointer)):h!=null&&h.numberActives===this.order-1?c=this._mergeSiblings(f,u,-1):g!=null&&g.numberActives===this.order-1&&(c=this._mergeSiblings(f,u,1)))}}if(c.isLeaf&&c.numberActives>this.order-1)return this._deleteKeyFromNode(c,i),!0;if(c.isLeaf&&c.pointer===this.root)return this._deleteKeyFromNode(c,i),!0;try{if(c.isLeaf===!1)if(h=f=null,(f=this._diskRead(c.children[i])).numberActives>this.order-1){var w=this._getMaxKeyPos(f),
b=w.node.keys[w.index];c.keys[i]=b;this._diskWrite(c);c=f;b=b.key;k=m=!0}else if((f=this._diskRead(c.children[i+1])).numberActives>this.order-1)w=this._getMinKeyPos(f),b=w.node.keys[w.index],c.keys[i]=b,this._diskWrite(c),c=f,b=b.key,k=m=!0;else if((f=this._diskRead(c.children[i])).numberActives===this.order-1&&(h=this._diskRead(c.children[i+1])).numberActives===this.order-1){var C=this._mergeNodes(f,c.keys[i],h);c.children[i]=C.pointer;i++;for(var u=i;u<c.numberActives;u++)c.children[u]=c.children[u+
1],c.keys[u-1]=c.keys[u];c.children[u]=null;c.keys[u-1]=null;c.numberActives--;if(c.numberActives===0&&this.root===c.pointer)this.root=C.pointer,this._updateRootNode(C);this._diskWrite(c);c=C;k=m=!0}}catch(x){console.log("!!!"),console.log(x)}c.isLeaf&&c.numberActives>this.order-1&&k===!1&&this._deleteKeyFromNode(c,i);if(m===!1)return!0}};I.Tree.prototype._moveKey=function(b,c,f){f===1&&c--;var k=this._diskRead(b.children[c]),i=this._diskRead(b.children[c+1]);if(f==-1){k.keys[k.numberActives]=b.keys[c];
k.children[k.numberActives+1]=i.children[0];i.children[0]=null;k.numberActives++;b.keys[c]=i.keys[0];for(f=1;f<i.numberActives;f++)i.keys[f-1]=i.keys[f],i.children[f-1]=i.children[f];i.children[i.numberActives-1]=i.children[i.numberActives];i.numberActives--}else{i.children[i.numberActives+1]=i.children[i.numberActives];for(f=i.numberActives;f>0;f--)i.children[f]=i.children[f-1],i.keys[f]=i.keys[f-1];i.keys[0]=null;i.children[0]=null;i.children[0]=k.children[k.numberActives];i.keys[0]=b.keys[c];i.numberActives++;
k.children[k.numberActives]=null;b.keys[c]=k.keys[k.numberActives-1];k.keys[k.numberActives-1]=null;k.numberActives--}this._diskWrite(k);this._diskWrite(i);this._diskWrite(b)};I.Tree.prototype._mergeSiblings=function(b,c){var f,k,i;c===b.numberActives?(c--,k=this._diskRead(b.children[b.numberActives-1]),i=this._diskRead(b.children[b.numberActives])):(k=this._diskRead(b.children[c]),i=this._diskRead(b.children[c+1]));var h=this._allocateNode();h.isLeaf=k.isLeaf;h.level=k.level;for(f=0;f<this.order-
1;f++)h.keys[f]=k.keys[f],h.children[f]=k.children[f];h.keys[this.order-1]=b.keys[c];h.children[this.order-1]=k.children[this.order-1];for(f=0;f<this.order-1;f++)h.keys[f+this.order]=i.keys[f],h.children[f+this.order]=i.children[f];h.children[2*this.order-1]=i.children[this.order-1];this._diskWrite(h);b.children[c]=h.pointer;for(f=c;f<b.numberActives;f++)b.keys[f]=b.keys[f+1],b.children[f+1]=b.children[f+2];h.numberActives=k.numberActives+i.numberActives+1;b.numberActives--;for(f=b.numberActives;f<
2*this.order-1;f++)b.keys[f]=null;if(b.numberActives===0&&this.root===b.pointer)this.root=h.pointer,h.isLeaf=h.level?!1:!0;this._diskWrite(h);this.root===h.pointer&&this._updateRootNode(h);this._diskWrite(b);this._diskDelete(k);this._diskDelete(i);return h};I.Tree.prototype._deleteKeyFromNode=function(b,c){var f=2*this.order-1;if(b.numberActives<f)f=b.numberActives;var k;if(b.isLeaf===!1)return!1;for(k=c;k<f-1;k++)b.keys[k]=b.keys[k+1];b.keys.splice(f-1,b.keys.length-(f-1));b.numberActives--;this._diskWrite(b);
return!0};I.Tree.prototype._mergeNodes=function(b,c,f){var k,i;k=this._allocateNode();k.isLeaf=!0;for(i=0;i<b.numberActives;i++)k.keys[i]=b.keys[i],k.children[i]=b.children[i];k.children[b.numberActives]=b.children[b.numberActives];k.keys[b.numberActives]=c;for(i=0;i<f.numberActives;i++)k.keys[i+b.numberActives+1]=f.keys[i],k.children[i+b.numberActives+1]=f.children[i];k.children[2*this.order-1]=f.children[f.numberActives];k.numberActives=b.numberActives+f.numberActives+1;k.isLeaf=b.isLeaf;k.level=
b.level;this._diskWrite(k);this._diskDelete(b);this._diskDelete(f);return k};I.Tree.prototype.audit=function(b){var c=[],f=[],k=this,i=function(h){for(var i=0;i<f.length;i++)if(k.comparator(f[i],h)===0){var g=" !!! duplicated key "+h;b===!0&&console.log(g);c.push(g)}},h=null,k=this;this.walkNodes(function(g){b===!0&&(console.log("--- Node at "+g.level+" level"),console.log(" - pointer: "+g.pointer),console.log(" - leaf? "+g.isLeaf),console.log(" - num actives? "+g.numberActives),console.log(" - keys: "));
for(var m=g.numberActives;m<g.keys.length;m++)g.keys[m]!=null&&b===!0&&(console.log(" * warning : redundant key data"),c.push(" * warning : redundant key data"));for(m=g.numberActives+1;m<g.children.length;m++)g.children[m]!=null&&b===!0&&(console.log(" * warning : redundant children data"),c.push(" * warning : redundant key data"));if(g.isLeaf===!1)for(m=0;m<g.numberActives;m++){var w=k._diskRead(g.children[m]).keys[k._diskRead(g.children[m]).numberActives-1].key,C=k._diskRead(g.children[m+1]).keys[0].key;
b===!0&&console.log("   "+g.keys[m].key+"("+w+","+C+")");if(k.comparator(g.keys[m].key,w)===-1){var u=" !!! value max left "+w+" > key "+g.keys[m].key;b===!0&&console.log(u);c.push(u)}k.comparator(g.keys[m].key,C)===1&&(u=" !!! value min right "+C+" < key "+g.keys[m].key,b===!0&&console.log(u),c.push(u));i(g.keys[m].key);f.push(g.keys[m].key)}else{h===null?h=g.level:h!=g.level&&(u=" !!! Leaf node with wrong level value",b===!0&&console.log(u),c.push(u));for(m=0;m<g.numberActives;m++)b===!0&&console.log(" "+
g.keys[m].key),i(g.keys[m].key),f.push(g.keys[m].key)}g.pointer!=k.root&&(g.numberActives>2*k.order-1&&(b===!0&&(u=" !!!! MAX num keys restriction violated "),console.log(u),c.push(u)),g.numberActives<k.order-1&&(b===!0&&(u=" !!!! MIN num keys restriction violated "),console.log(u),c.push(u)))});return c};I.Tree.prototype.clear=function(){this.diskManager.clear();this.root=this._allocateNode();this.root.isLeaf=!0;this.root.level=0;this._diskWrite(this.root);this._updateRootNode(this.root);this.root=
this.root.pointer};I.Tree.prototype._getMaxKeyPos=function(b){for(var c={};;){if(b===null)break;if(b.isLeaf===!0){c.node=b;c.index=b.numberActives-1;break}else c.node=b,c.index=b.numberActives-1,b=this._diskRead(b.children[b.numberActives])}return c};I.Tree.prototype._getMinKeyPos=function(b){for(var c={};;){if(b===null)break;if(b.isLeaf===!0){c.node=b;c.index=0;break}else c.node=b,c.index=0,b=this._diskRead(b.children[0])}return c};I.Node=function(){this.numberActives=0;this.isLeaf=null;this.keys=
[];this.children=[];this.level=0};I.LocalStorageManager=function(b,c,f){this.name=b;this.storage=c;this.maxSize=f;this.bufferCache=new ua.PriorityQueue({maxSize:f});this.counter=this.storage.getItem("__"+this.name+"__ID_COUNTER__")||0};I.LocalStorageManager.prototype.clear=function(){for(var b=this.storage.length,c=[],f=0;f<b;f++){var k=this.storage.key(f);(k.indexOf(this.name)==0||k.indexOf("__"+this.name)==0)&&c.push(k)}for(f=0;f<c.length;f++)this.storage.removeItem(c[f]);this.bufferCache=new ua.PriorityQueue({maxSize:this.maxSize})};
I.LocalStorageManager.prototype._genIndex=function(){var b=this.name+this.counter;this.counter++;this.storage.setItem("__"+this.name+"__ID_COUNTER__",this.counter);return b};I.LocalStorageManager.prototype._diskRead=function(b){if(typeof b==="object")b=b.pointer;var c=this.bufferCache.fetch(b);if(c==null&&(c=this.storage.getItem(b),c!=null))c=this._decode(c),c.pointer=b,this.bufferCache.push(b,c);return c};I.LocalStorageManager.prototype._diskWrite=function(b){if(b.pointer==null)b.pointer=this._genIndex();
var c=b.children,f=[];if(b.isLeaf===!1)for(var k=0;k<c.length;k++)c[k]==null?f.push(null):typeof c[k]==="object"?f.push(c[k].pointer):f.push(c[k]);b.children=f;this.storage.setItem(b.pointer,this._encode(b));b.children=c;this.bufferCache.push(b.pointer,b)};I.LocalStorageManager.prototype._diskDelete=function(b){this.storage.removeItem(b.pointer);this.bufferCache.remove(b.pointer)};I.LocalStorageManager.prototype._updateRootNode=function(b){if(b.pointer)this.storage.setItem("__"+this.name+"__ROOT_NODE__",
b.pointer);else throw"Cannot set as root of the b-tree a node without pointer";};I.LocalStorageManager.prototype._readRootNode=function(){var b=this.storage.getItem("__"+this.name+"__ROOT_NODE__");return b==null?null:this._diskRead(b)};I.LocalStorageManager.prototype._encode=function(b){encoded=""+b.numberActives;encoded=encoded+":"+b.pointer;encoded=encoded+":"+b.level;encoded=encoded+":"+(b.isLeaf?1:0);for(var c=0,f="",k=0;k<b.keys.length;k++)b.keys[k]!=null&&(f=typeof b.keys[k].key==="number"?
f+":"+b.keys[k].key:f+":"+("_"+(b.keys[k].key.subject||"")+"_"+(b.keys[k].key.predicate||"")+"_"+(b.keys[k].key.object||"")+"_"+(b.keys[k].key.graph||"")),b.keys[k].data==null?f+=":n:":f=typeof b.keys[k].data=="string"?f+":s:"+b.keys[k].data:typeof b.keys[k].data=="number"?b.keys[k]%1==0?f+":i:"+b.keys[k].data:f+":f:"+b.keys[k].data:f+":o:"+JSON.stringify(b.keys[k].data).replace(":","&colon;"),c++);encoded=encoded+":"+c+f;if(b.isLeaf===!1){c="";for(k=f=0;k<b.children.length;k++)b.children[k]!=null&&
(c=c+":"+b.children[k],f++);encoded=encoded+":"+f+c}return encoded};I.LocalStorageManager.prototype._decode=function(b){var c=new I.Node,b=b.split(":");c.numberActives=parseInt(b[0]);c.pointer=b[1];c.level=parseInt(b[2]);c.isLeaf=b[3]==="1"?!0:!1;for(var f=parseInt(b[4]),k=5,i,h,g,m=0;m<f;m++)i=b[k],i[0]=="_"?(i=i.split("_"),i={subject:parseInt(i[1])||null,predicate:parseInt(i[2])||null,object:parseInt(i[3])||null,graph:parseInt(i[4]||null)}):i=parseInt(b[k]),h=b[k+1],g=b[k+2],h==="n"?g=void 0:h===
"i"?g=parseInt(g):h==="f"?g=parseFloat(g):h==="o"&&(g=JSON.parse(g.replace("&colon;",":"))),c.keys.push({key:i,data:g}),k+=3;if(c.isLeaf===!1){f=parseInt(b[k]);k++;for(m=0;m<f;m++)c.children[m]=b[k],k++}return c};var W={NodeKey:function(b,c){this.subject=b.subject;this.predicate=b.predicate;this.object=b.object;this.graph=b.graph;this.order=c}};W.NodeKey.prototype.comparator=function(b){for(var c=0;c<this.order.length;c++){var f=this.order[c];if(b[f]==null)break;else if(this[f]<b[f])return-1;else if(this[f]>
b[f])return 1}return 0};W.Pattern=function(b){this.subject=b.subject;this.predicate=b.predicate;this.object=b.object;this.graph=b.graph;this.indexKey=[];this.keyComponents={};for(var c=[],f=[],b=["subject","predicate","object","graph"],k=0;k<b.length;k++)typeof this[b[k]]==="string"?(f.push(b[k]),this.keyComponents[b[k]]=null):(c.push(b[k]),this.keyComponents[b[k]]=this[b[k]],this.indexKey.push(b[k]));this.order=c.concat(f);this.key=new W.NodeKey(this.keyComponents,this.order)};var U={Tree:function(b,
c){if(arguments!=0)this.componentOrder=b.componentOrder,I.Tree.call(this,b.order,b.name,b.persistent,b.cacheMaxSize),this.comparator=function(c,b){for(var i=0;i<this.componentOrder.length;i++){var h=this.componentOrder[i],g=c[h],h=b[h];if(g<h)return-1;else if(g>h)return 1}return 0},this.rangeComparator=function(c,b){for(var i=0;i<this.componentOrder.length;i++){var h=this.componentOrder[i];if(b[h]==null||c[h]==null)break;else if(c[h]<b[h])return-1;else if(c[h]>b[h])return 1}return 0},c!=null&&c(this)}};
A["extends"](I.Tree,U.Tree);U.Tree.prototype.insert=function(b,c){I.Tree.prototype.insert.call(this,b,null);c&&c(!0);return!0};U.Tree.prototype.search=function(b,c){var f=I.Tree.prototype.search.call(this,b,!0);c&&c(f);return f};U.Tree.prototype.range=function(b,c){var f=null,f=typeof this.root==="string"?this._rangeTraverse(this,this._diskRead(this.root),b):this._rangeTraverse(this,this.root,b);c&&c(f);return f};U.Tree.prototype._rangeTraverse=function(b,c,f){for(var f=f.key,k=[],i=[c],h;i.length>
0;){c=i.shift();for(h=0;h<c.numberActives&&b.rangeComparator(c.keys[h].key,f)===-1;)h++;if(c.isLeaf===!0)for(;h<c.numberActives&&b.rangeComparator(c.keys[h].key,f)===0;)k.push(c.keys[h].key),h++;else{var g=b._diskRead(c.children[h]);for(i.push(g);;)if(h<c.numberActives&&b.rangeComparator(c.keys[h].key,f)===0)k.push(c.keys[h].key),h++,g=b._diskRead(c.children[h]),i.push(g);else break}}return k};var $={QuadBackend:function(b,c){if(arguments!=0){this.indexMap={};this.treeOrder=b.treeOrder;this.indices=
["SPOG","GP","OGS","POG","GSP","OS"];this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]};for(var f=0;f<this.indices.length;f++){var k=this.indices[f],i=new U.Tree({order:this.treeOrder,componentOrder:this.componentOrders[k],persistent:b.persistent,name:(b.name||
"")+k,cacheMaxSize:b.cacheMaxSize});this.indexMap[k]=i}c&&c(this)}}};$.QuadBackend.prototype.clear=function(){for(var b=0;b<this.indices.length;b++)this.indexMap[this.indices[b]].clear()};$.QuadBackend.prototype._indexForPattern=function(b){for(var b=b.indexKey,c=this.indices,f=0;f<c.length;f++)for(var k=c[f],i=this.componentOrders[k],h=0;h<i.length;h++){if(A.include(b,i[h])===!1)break;if(h==b.length-1)return k}return"SPOG"};$.QuadBackend.prototype.index=function(b,c){for(var f=0;f<this.indices.length;f++)this.indexMap[this.indices[f]].insert(b);
c&&c(!0);return!0};$.QuadBackend.prototype.range=function(b,c){var f=this.indexMap[this._indexForPattern(b)].range(b);c&&c(f);return f};$.QuadBackend.prototype.search=function(b,c){var f=this.indexMap[this.indices[0]].search(b);c&&c(f!=null);return f!=null};$.QuadBackend.prototype["delete"]=function(b,c){for(var f,k=0;k<this.indices.length;k++)f=this.indices[k],f=this.indexMap[f],f["delete"](b);c&&c(!0);return!0};var P={Lexicon:function(b,c){this.name=c||"";this.storage=null;try{this.storage=window.localStorage}catch(f){}if(this.storage==
null)this.storage={setItem:function(){},getItem:function(){return null},removeItem:function(){},key:function(){return""},length:0};this.uriToOID={};this.OIDToUri={};this.literalToOID={};this.OIDToLiteral={};this.blankToOID={};this.OIDToBlank={};this.defaultGraphOid=(this.defaultGraphOid=this.storage.getItem(this.pointer("oidCounter")))==null?0:parseInt(this.defaultGraphOid);this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph";this.defaultGraphUriTerm={token:"uri",prefix:null,
suffix:null,value:this.defaultGraphUri,oid:this.defaultGraphOid};this.oidCounter=1;this.storage.getItem(this.pointer("knownGraphs"))==null?(this.knownGraphs={},this.storage.setItem(this.pointer("knownGraphs"),JSON.stringify(this.knownGraphs))):this.knownGraphs=JSON.parse(this.storage.getItem(this.pointer("knownGraphs")));b!=null&&b(this)}};P.Lexicon.prototype.pointer=function(b,c){b=="uriToOID"?b="uo":b=="OIDToUri"?b="ou":b=="literalToOID"?b="lo":b=="OIDToLiteral"?b="ok":b=="blankToOID"?b="bo":b==
"OIDToBlank"&&(b="ob");return c==null?this.name+"_l_"+b:this.name+"_l_"+b+"_"+c};P.Lexicon.prototype.clear=function(){this.uriToOID={};this.OIDToUri={};this.literalToOID={};this.OIDToLiteral={};this.blankToOID={};this.OIDToBlank={};for(var b=this.storage.length,c=this.name+"_l_",f=[],k=0;k<b;k++){var i=this.storage.key(k);i.indexOf(c)==0&&f.push(i)}for(k=0;k<f.length;k++)this.storage.removeItem(f[k])};P.Lexicon.prototype.registerGraph=function(b){b!=this.defaultGraphOid&&(this.knownGraphs[b]=!0,this.storage.setItem(this.pointer("knownGraphs"),
JSON.stringify(this.knownGraphs)));return!0};P.Lexicon.prototype.registeredGraphs=function(b){var c=[],f;for(f in this.knownGraphs)b===!0?c.push(this.retrieve(f)):c.push(f);return c};P.Lexicon.prototype.registerUri=function(b){if(b===this.defaultGraphUri)return this.defaultGraphOid;else{if(this.uriToOID[b]==null){var c=this.storage.getItem(this.pointer("uriToOID",b));if(c==null){var c=this.oidCounter,f="u"+c;this.oidCounter++;this.uriToOID[b]=[c,0];this.OIDToUri[f]=b;this.storage.setItem(this.pointer("uriToOID",
b),c+":0");this.storage.setItem(this.pointer("OIDToUri",f),b)}else{var k=c.split(":"),c=parseInt(k[0]),f="u"+c,k=parseInt(k[1])+1;this.uriToOID[b]=[c,k];this.OIDToUri[f]=b;this.storage.setItem(this.pointer("uriToOID",b),c+":0")}}else f=this.uriToOID[b],c=f[0],k=f[1]+1,this.uriToOID[b]=[c,k],this.storage.setItem(this.pointer("uriToOID",b),c+":"+k);return c}};P.Lexicon.prototype.resolveUri=function(b){if(b===this.defaultGraphUri)return this.defaultGraphOid;else{var c=this.uriToOID[b];if(c!=null)return c[0];
else if(c=this.storage.getItem(this.pointer("uriToOID",b)),c==null)return-1;else{var f=c.split(":"),c=parseInt(f[0]),k="u"+c,f=parseInt(f[1]);this.uriToOID[b]=[c,f];this.OIDToUri[k]=b;return c}}};P.Lexicon.prototype.registerBlank=function(){var b=this.oidCounter;this.oidCounter++;b=""+b;this.storage.setItem(this.pointer("OIDToBlank",b),!0);this.OIDToBlank[b]=!0;return b};P.Lexicon.prototype.resolveBlank=function(){var b=this.oidCounter;this.oidCounter++;return""+b};P.Lexicon.prototype.registerLiteral=
function(b){if(this.literalToOID[b]==null){var c=this.storage.getItem(this.pointer("literalToOID",b));if(c==null){var c=this.oidCounter,f="l"+c;this.oidCounter++;this.literalToOID[b]=[c,0];this.OIDToLiteral[f]=b;this.storage.setItem(this.pointer("literalToOID",b),c+":0");this.storage.setItem(this.pointer("OIDToLiteral",f),b)}else f=c.split(":"),c=parseInt(f[0]),f=parseInt(f[1])+1,this.literalToOID[b]=[c,f],this.storage.setItem(this.pointer("literalToOID",b),c+":"+f)}else f=this.literalToOID[b],c=
f[0],f=f[1]+1,this.storage.setItem(this.pointer("literalToOID",b),c+":"+f),this.literalToOID[b]=[c,f];return c};P.Lexicon.prototype.resolveLiteral=function(b){var c=this.literalToOID[b];if(c!=null)return c[0];else if(fromStorage=this.storage.getItem(this.pointer("literalToOID",b)),fromStorage!=null){var c=fromStorage.split(":"),f=parseInt(c[0]),c=parseInt(c[1]);this.literalToOID[b]=[f,c];this.OIDToLiteral["l"+f]=b;return f}else return-1};P.Lexicon.prototype.parseLiteral=function(b){var c=b.lastIndexOf("@");
if(c!=-1&&b[c-1]==='"'){var f=b.substring(1,c-1),b=b.substring(c+1,b.length);return{token:"literal",value:f,lang:b}}c=b.lastIndexOf("^^");if(c!=-1&&b[c-1]==='"'&&b[c+2]==="<"&&b[b.length-1]===">")return f=b.substring(1,c-1),b=b.substring(c+3,b.length-1),{token:"literal",value:f,type:b};f=b.substring(1,b.length-1);return{token:"literal",value:f}};P.Lexicon.prototype.parseUri=function(b){return{token:"uri",value:b}};P.Lexicon.prototype.retrieve=function(b){var c;try{if(b===this.defaultGraphOid)return{token:"uri",
value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0};else{var f=this.OIDToUri["u"+b];if(f)return this.parseUri(f);else{var k=this.OIDToLiteral["l"+b];if(k)return this.parseLiteral(k);else{var i=this.OIDToBlank[""+b];if(i)return{token:"blank",value:"_:"+b};else if(f=this.storage.getItem(this.pointer("OIDToUri","u"+b)),f!=null){this.OIDToUri["u"+b]=f;c=this.storage.getItem(this.pointer("uriToOID",f));var h=c.split(":"),g=parseInt(h[1]);this.uriToOID[f]=[b,g];return this.parseUri(f)}else if(k=
this.storage.getItem(this.pointer("OIDToLiteral","l"+b)),k!=null){this.OIDToLiteral["l"+b]=k;c=this.storage.getItem(this.pointer("literalToOID",k));var m=c.split(":"),b=parseInt(m[0]),g=parseInt(m[1]);this.literalToOID[k]=[b,g];return this.parseLiteral(k)}else if(i=this.storage.getItem(this.pointer("OIDToBlank",""+b)),i!=null)return this.OIDToBlank[""+b]=!0,{token:"blank",value:"_:"+b};else throw"Null value for OID";}}}}catch(w){throw console.log("error in lexicon retrieving OID:"),console.log(b),
w.message&&console.log(w.message),w.stack&&console.log(w.stack),Error("Unknown retrieving OID in lexicon:"+b);}};P.Lexicon.prototype.unregister=function(b,c){try{return this.unregisterTerm(b.subject.token,c.subject),this.unregisterTerm(b.predicate.token,c.predicate),this.unregisterTerm(b.object.token,c.object),b.graph!=null&&this.unregisterTerm(b.graph.token,c.graph),!0}catch(f){return console.log("Error unregistering quad"),console.log(f.message),!1}};P.Lexicon.prototype.unregisterTerm=function(b,
c){if(b==="uri"){if(c!=this.defaultGraphOid){var f="u"+c,k=this.OIDToUri[f],i=this.uriToOID[k],h=i[1];if(""+i[0]===""+c)h===0?(delete this.OIDToUri[f],delete this.uriToOID[k],delete this.knownGraphs[c]):this.uriToOID[k]=[c,h-1];else throw"Not matching OID : "+c+" vs "+i[0];}}else if(b==="literal")if(this.oidCounter++,f="l"+c,k=this.OIDToLiteral[f],i=this.literalToOID[k],h=i[1],""+i[0]===""+c)h===0?(delete this.OIDToLiteral[f],delete this.literalToOID[k]):this.literalToOID[k]=[c,h-1];else throw"Not matching OID : "+
c+" vs "+i[0];else b==="blank"&&delete this.OIDToBlank[""+c]};var ga={};ga.load=function(b,c,f){jQuery.ajax({url:b,headers:{Accepts:c},success:function(c,b,h){if((""+h.status)[0]=="2"){for(var b=h.getAllResponseHeaders().split("\n"),h={},g=0;g<b.length;g++){var m=b[g].split(":");h[m[0]]=m[1]}f(!0,{headers:h,data:c})}},error:function(b){(""+b.status)[0]=="3"?redirection==0?f(!1,500):(b=b.getAllResponseHeaders().Location||b.getAllResponseHeaders().location,b!=null?ga.load(b,c,f,redirection-1):f(!1,
500)):f(!1,b.statusCode())}})};var K={parser:{}};K.parser.parse=function(b,c){var f={defaultContext:{rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",xsd:"http://www.w3.org/2001/XMLSchema#",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",cal:"http://www.w3.org/2002/12/cal/ical#",vcard:"http://www.w3.org/2006/vcard/ns# ",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",cc:"http://creativecommons.org/ns#",
sioc:"http://rdfs.org/sioc/ns#",doap:"http://usefulinc.com/ns/doap#",com:"http://purl.org/commerce#",ps:"http://purl.org/payswarm#",gr:"http://purl.org/goodrelations/v1#",sig:"http://purl.org/signature#",ccard:"http://purl.org/commerce/creditcard#","@coerce":{"http://www.w3.org/2001/XMLSchema#anyURI":["http://xmlns.com/foaf/0.1/homepage","http://xmlns.com/foaf/0.1/member"],"http://www.w3.org/2001/XMLSchema#integer":"http://xmlns.com/foaf/0.1/age"}},defaultGraph:null,activeSubject:null,inheritedSubject:null,
activePredicate:null,inheritedPredicate:null,activeObject:null,activeContext:[],localContext:{},listOfIncompleteTriples:[],listOfUnprocessedItems:[]},k=[];f.activeContext=f.defaultContext;K.parser.isArray(b)?K.parser.parseListOfNodes(b,f,null,null,k,0):K.parser.parseListOfNodes([b],f,null,null,k,0);for(var f=[],i=0;i<k.length;i++){var h=k[i];h.graph=c;f.push(h)}return f};K.parser.parseListOfNodes=function(b,c,f,k,i,h){for(var g,m,w=0;w<b.length;w++)if(g=b[w],processorState={activeSubject:null,inheritedSubject:f,
activePredicate:null,inheritedPredicate:k,activeObject:null,localContext:{},listOfIncompleteTriples:[],listOfUnprocessedItems:[]},processorState.activeContext=K.parser.copyContext(c.activeContext),K.parser.isAssociatveArray(g)){g["@context"]!=null&&(processorState.activeContext=K.parser.mergeContexts(processorState.activeContext,g["@context"]));g["@"]!=null?(m=g["@"],processorState.activeSubject=K.parser.parseIri(m,processorState.activeContext)):(m="_:"+h,processorState.activeSubject={token:"blank",
value:m},h++);processorState.inheritedPredicate!=null&&processorState.inheritedSubject!=null&&i.push({subject:processorState.inheritedSubject,predicate:processorState.inheritedPredicate,object:processorState.activeSubject});for(var C in g)if(m=g[C],C!=="@context"&&C!=="@")processorState.activePredicate=C==="a"?{token:"uri",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}:K.parser.parseIri(C,processorState.activeContext),typeof m!="object"?(processorState.activeObject=K.parser.coerceLiteral(m,
processorState.activePredicate,processorState.activeContext),i.push({subject:processorState.activeSubject,predicate:processorState.activePredicate,object:processorState.activeObject})):m.length!=null?K.parser.parseListOfNodes(m,processorState,processorState.activeSubject,processorState.activePredicate,i,h):m["@iri"]!=null?i.push({subject:processorState.activeSubject,predicate:processorState.activePredicate,object:K.parser.parseIri(m)}):m["@literal"]!=null?(m["@language"]?obj={token:"literal",value:m["@literal"],
lang:m["@language"]}:(obj=K.parser.coerceLiteral(m["@literal"]),obj.type=null.type||m["@datatype"]),i.push({subject:processorState.activeSubject,predicate:processorState.activePredicate,object:obj})):K.parser.parseListOfNodes([m],processorState,null,null,i)}else typeof g==="string"&&processorState.inheritedPredicate!=null&&processorState.inheritedSubject!=null&&i.push({subject:processorState.inheritedSubject,predicate:processorState.inheritedPredicate,object:K.parser.coerceLiteral(g,processorState.inheritedPredicate,
processorState.activeContext)})};K.parser.coerceLiteral=function(b,c,f){for(var k in f||{}){var i=f[k];if(b.indexOf(k)===0)return{token:"uri",value:i+(b.split(k+":")[1]||"")};else if(i===b)return{token:"uri",value:i}}for(var h in f["@coerce"]||{})for(k in i=f["@coerce"][h],typeof i==="string"&&(i=[i]),f)for(var g=0;g<i.length;g++){var m=i[g];m.indexOf(k)===0&&(m=m.split(k+":")[1]||"",m=f[k]+m);if(m===c.value)return h==="http://www.w3.org/2001/XMLSchema#anyURI"||h==="xsd:anyURI"?{token:"uri",value:b}:
{token:"literal",value:b,type:h}}return{token:"literal",value:b}};K.parser.isAssociatveArray=function(b){return typeof b==="object"&&b.length==null};K.parser.isArray=function(b){return typeof b==="object"&&b.length!=null};K.parser.copyContext=function(b){var c={},f;for(f in b)if(f==="@coerce"){var k=b[f],i={},h;for(h in k)i[h]=k[h];c[f]=i}else c[f]=b[f];return c};K.parser.mergeContexts=function(b,c){for(var f in c)f!=="@coerce"&&(b[f]=c[f]);if(c["@coerce"]!=null){f=c["@coerce"];var k=b["@coerce"]||
{},i;for(i in f)if(typeof f[i]==="string")k[K.parser.parseIri(i,b).value]=K.parser.parseIri(f[i],b).value;else for(var h=[],g=0;g<f[i].length;g++)h.push(K.parser.parseIri(f[i][g],b).value);b["@coerce"]=k}return b};K.parser.copyContextStack=function(b){for(var c=[],f=0;f<b.length;f++){var k=b[f],i={},h;for(h in k)if(h==="@coerce"){var g=k[h],m={},w;for(w in g)if(typeof g[w]==="object"){for(var C=[],u=0;u<g[w].length;u++)C.push(g[w][u]);m[w]=C}else m[w]=g[w];i[h]=m}else i[h]=k[h];c.push(i)}return c};
K.parser.parseIri=function(b,c){if(typeof b==="object")if(b["@iri"]!=null)b=b["@iri"];else throw"Error processing iri";for(var f in c)if(f=="@base"&&b.indexOf(":")===0)return{token:"uri",value:c[f]+(b.split(":")[1]||"")};else if(b.indexOf(f)===0)return{token:"uri",value:c[f]+(b.split(f+":")[1]||"")};if(b.indexOf(":")===-1&&c["@vocab"]!=null)return{token:"uri",value:c["@vocab"]+b};else if(b.indexOf(":")!=-1)return{token:"uri",value:b};else throw"Cannot resolve URI: "+b;};K.parser.parseObject=function(b,
c){if(typeof b==="object")if(b["@iri"]!=null)return{token:"uri",value:b["@iri"]};else throw"Error processing iri";else{for(var f in c)if(b.indexOf(f)===0)return{token:"uri",value:c[f]+(b.split(f+":")[1]||"")};return{token:"uri",value:b}}};var aa={RDFLoader:function(b){this.precedences=["text/turtle","text/n3","application/json"];this.parsers={"text/turtle":X.parser,"text/n3":X.parser,"application/json":K.parser};if(b!=null)for(var c in b.parsers)this.parsers[c]=b.parsers[c];if(b&&b.precedences!=null)for(c in this.precedences=
b.precedences,b.parsers)A.include(this.precedences,c)||this.precedences.push(c);this.acceptHeaderValue="";for(b=0;b<this.precedences.length;b++)b!=0?this.acceptHeaderValue=this.acceptHeaderValue+","+this.precedences[b]:this.acceptHeaderValue+=this.precedences[b]}};aa.RDFLoader.prototype.registerParser=function(b,c){this.parsers[b]=c;this.precedences.push(b)};aa.RDFLoader.prototype.unregisterParser=function(b){delete this.parsers[b];for(var c=[],f=0;f<this.precedences.length;f++)this.precedences[f]!=
b&&c.push(this.precedences[f]);this.precedences=c};aa.RDFLoader.prototype.setAcceptHeaderPrecedence=function(b){this.precedences=b};aa.RDFLoader.prototype.load=function(b,c,f){var k=this;ga.load(b,this.acceptHeaderValue,function(i,h){if(i==!0){var g=h.headers["Content-Type"]||h.headers["content-type"],m=h.data;if(g!=null){var g=g.split(";")[0],w;for(w in k.parsers)if(w.indexOf("/")!=-1){var C=w.split("/");if(C[1]==="*"){if(g.indexOf(C[0])!=-1)return k.tryToParse(k.parsers[w],c,m,f)}else if(g.indexOf(w)!=
-1)return k.tryToParse(k.parsers[w],c,m,f);else if(g.indexOf(C[1])!=-1)return k.tryToParse(k.parsers[w],c,m,f)}else if(g.indexOf(w)!=-1)return k.tryToParse(k.parsers[w],b,c,f);f(!1,"Unknown media type : "+g)}else console.log("Unknown media type"),console.log(h.headers),f(!1,"Uknown media type")}else f(!1,"Network error: "+h)})};aa.RDFLoader.prototype.loadFromFile=function(b,c,f,k){try{var i=this;fs=require("fs");fs.readFile(f.split("file:/")[1],function(h,f){if(h)throw h;f=f.toString("utf8");i.tryToParse(b,
c,f,k)})}catch(h){k(!1,h)}};aa.RDFLoader.prototype.tryToParse=function(b,c,f,k){try{typeof f==="string"&&(f=A.normalizeUnicodeLiterals(f));var i=b.parse(f,c);i!=null?k(!0,i):k(!1,"parsing error")}catch(h){k(!1,"parsing error with mime type : "+h)}};var Q={AbstractQueryTree:function(){}};Q.AbstractQueryTree.prototype.parseQueryString=function(b){return ia.parser.parse(b)};Q.AbstractQueryTree.prototype.parseExecutableUnit=function(b){if(b.kind==="select")return this.parseSelect(b);else if(b.kind===
"ask")return this.parseSelect(b);else if(b.kind==="modify")return this.parseSelect(b);else if(b.kind==="construct")return this.parseSelect(b);else if(b.kind==="insertdata")return this.parseInsertData(b);else if(b.kind==="deletedata")return this.parseInsertData(b);else if(b.kind==="load")return b;else if(b.kind==="clear")return b;else if(b.kind==="drop")return b;else if(b.kind==="create")return b;else throw Error("unknown executable unit: "+b.kind);};Q.AbstractQueryTree.prototype.parseSelect=function(b){return b==
null?(console.log("error parsing query"),null):(b.pattern=this.build(b.pattern,{}),b)};Q.AbstractQueryTree.prototype.parseInsertData=function(b){return b==null?(console.log("error parsing query"),null):b};Q.AbstractQueryTree.prototype.build=function(b,c){if(b.token==="groupgraphpattern")return this._buildGroupGraphPattern(b,c);else if(b.token==="basicgraphpattern")return{kind:"BGP",value:b.triplesContext};else if(b.token==="graphunionpattern"){var f=this.build(b.value[0],c),k=this.build(b.value[1],
c);return{kind:"UNION",value:[f,k]}}else if(b.token==="graphgraphpattern")return{kind:"GRAPH",value:this.build(b.value,c),graph:b.graph};else throw Error("not supported token in query:"+b.token);};Q.AbstractQueryTree.prototype._buildGroupGraphPattern=function(b,c){for(var f=b.filters||[],k={kind:"EMPTY_PATTERN"},i=0;i<b.patterns.length;i++){var h=b.patterns[i];h.token==="optionalgraphpattern"?(h=this.build(h.value,c),k=h.kind==="FILTER"?{kind:"LEFT_JOIN",lvalue:k,rvalue:h.value,filter:h.filter}:{kind:"LEFT_JOIN",
lvalue:k,rvalue:h,filter:!0}):(h=this.build(h,c),k=k.kind=="EMPTY_PATTERN"?h:{kind:"JOIN",lvalue:k,rvalue:h})}if(f.length!=0)if(k.kind==="EMPTY_PATTERN")return{kind:"FILTER",filter:f,value:k};else if(k.kind==="LEFT_JOIN"&&k.filter===!0)return{kind:"FILTER",filter:f,value:k};else if(k.kind==="LEFT_JOIN")return{kind:"FILTER",filter:f,value:k};else if(k.kind==="JOIN")return{kind:"FILTER",filter:f,value:k};else if(k.kind==="UNION")return{kind:"FILTER",filter:f,value:k};else if(k.kind==="GRAPH")return{kind:"FILTER",
filter:f,value:k};else if(k.kind==="BGP")return{kind:"FILTER",filter:f,value:k};else throw Error("Unknow kind of algebra expression: "+k.kind);else return k};Q.AbstractQueryTree.prototype.collectBasicTriples=function(b,c){c==null&&(c=[]);if(b.kind==="select")c=this.collectBasicTriples(b.pattern,c);else if(b.kind==="BGP")c=c.concat(b.value);else if(b.kind==="UNION")c=this.collectBasicTriples(b.value[0],c),c=this.collectBasicTriples(b.value[1],c);else if(b.kind==="GRAPH")c=this.collectBasicTriples(b.value,
c);else if(b.kind==="LEFT_JOIN"||b.kind==="JOIN")c=this.collectBasicTriples(b.lvalue,c),c=this.collectBasicTriples(b.rvalue,c);else if(b.kind==="FILTER")c=this.collectBasicTriples(b.value,c);else if(b.kind!=="EMPTY_PATTERN")throw"Unknown pattern: "+b.kind;return c};var ia={};ia.parser=function(){var b={parse:function(c,b){function k(a){var c=a.charCodeAt(0);if(c<=255)var a="x",b=2;else a="u",b=4;var a="\\"+a,e=c.toString(16).toUpperCase(),c=e;b-=e.length;for(e=0;e<b;e++)c="0"+c;return a+c}function i(a){return'"'+
a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/[\x80-\uFFFF]/g,k)+'"'}function h(c){a<va||(a>va&&(va=a,Ta=[]),Ta.push(c))}function g(){var c="SPARQL@"+a,b=z[c];if(b)return a=b.nextPos,b.result;b=m();b===null&&(b=Ua(),b=b!==null?b:null);z[c]={nextPos:a,result:b};return b}function m(){var c="Query@"+a,b=z[c];if(b)return a=b.nextPos,b.result;b=j;j=!1;var f=a,e=a,d=w();if(d!==null){var s=J();s===null&&(s=O(),s===null&&(s=P(),s===null&&(s=W(),s=s!==null?
s:null)));s!==null?d=[d,s]:(d=null,a=e)}else d=null,a=e;e=d!==null?{token:"query",kind:"query",prologue:d[0],units:[d[1]]}:null;e===null&&(e=null,a=f);(j=b)&&e===null&&h("[2] Query");z[c]={nextPos:a,result:e};return e}function w(){var c="Prologue@"+a,b=z[c];if(b)return a=b.nextPos,b.result;b=j;j=!1;var f=a,e=a,d=C(),d=d!==null?d:"";if(d!==null){for(var s=[],n=r();n!==null;)s.push(n),n=r();if(s!==null){for(var n=[],o=u();o!==null;)n.push(o),o=u();n!==null?d=[d,s,n]:(d=null,a=e)}else d=null,a=e}else d=
null,a=e;e=d!==null?{token:"prologue",base:d[0],prefixes:d[2]}:null;e===null&&(e=null,a=f);(j=b)&&e===null&&h("[3] Prologue");z[c]={nextPos:a,result:e};return e}function C(){var b="BaseDecl@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;for(var H=a,e=a,d=[],s=r();s!==null;)d.push(s),s=r();if(d!==null)if(c.substr(a,1)==="B"?(s="B",a+=1):(s=null,j&&h('"B"')),s===null&&(c.substr(a,1)==="b"?(s="b",a+=1):(s=null,j&&h('"b"')),s=s!==null?s:null),s!==null){if(c.substr(a,1)==="A"){var n="A";a+=1}else n=
null,j&&h('"A"');n===null&&(c.substr(a,1)==="a"?(n="a",a+=1):(n=null,j&&h('"a"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="S"){var o="S";a+=1}else o=null,j&&h('"S"');o===null&&(c.substr(a,1)==="s"?(o="s",a+=1):(o=null,j&&h('"s"')),o=o!==null?o:null);if(o!==null){if(c.substr(a,1)==="E"){var v="E";a+=1}else v=null,j&&h('"E"');v===null&&(c.substr(a,1)==="e"?(v="e",a+=1):(v=null,j&&h('"e"')),v=v!==null?v:null);if(v!==null){for(var k=[],t=r();t!==null;)k.push(t),t=r();k!==null?(t=ma(),t!==null?
d=[d,s,n,o,v,k,t]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e;else d=null,a=e;e=d!==null?function(a){base={token:"base"};base.value=a;return base}(d[6]):null;e===null&&(e=null,a=H);(j=f)&&e===null&&h("[4] BaseDecl");z[b]={nextPos:a,result:e};return e}function u(){var b="PrefixDecl@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;for(var H=a,e=a,d=[],s=r();s!==null;)d.push(s),s=r();if(d!==null)if(c.substr(a,1)==="P"?(s="P",a+=1):(s=null,j&&h('"P"')),
s===null&&(c.substr(a,1)==="p"?(s="p",a+=1):(s=null,j&&h('"p"')),s=s!==null?s:null),s!==null){if(c.substr(a,1)==="R"){var n="R";a+=1}else n=null,j&&h('"R"');n===null&&(c.substr(a,1)==="r"?(n="r",a+=1):(n=null,j&&h('"r"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="E"){var o="E";a+=1}else o=null,j&&h('"E"');o===null&&(c.substr(a,1)==="e"?(o="e",a+=1):(o=null,j&&h('"e"')),o=o!==null?o:null);if(o!==null){if(c.substr(a,1)==="F"){var v="F";a+=1}else v=null,j&&h('"F"');v===null&&(c.substr(a,1)===
"f"?(v="f",a+=1):(v=null,j&&h('"f"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="I"){var k="I";a+=1}else k=null,j&&h('"I"');k===null&&(c.substr(a,1)==="i"?(k="i",a+=1):(k=null,j&&h('"i"')),k=k!==null?k:null);if(k!==null){if(c.substr(a,1)==="X"){var t="X";a+=1}else t=null,j&&h('"X"');t===null&&(c.substr(a,1)==="x"?(t="x",a+=1):(t=null,j&&h('"x"')),t=t!==null?t:null);if(t!==null){for(var i=[],g=r();g!==null;)i.push(g),g=r();if(i!==null)if(g=Ca(),g!==null){for(var B=[],y=r();y!==null;)B.push(y),
y=r();B!==null?(y=ma(),y!==null?d=[d,s,n,o,v,k,t,i,g,B,y]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e;else d=null,a=e;e=d!==null?function(a,c){prefix={token:"prefix"};prefix.prefix=a;prefix.local=c;return prefix}(d[8],d[10]):null;e===null&&(e=null,a=H);(j=f)&&e===null&&h("[5] PrefixDecl");z[b]={nextPos:a,result:e};return e}function x(){var c="TURTLE@"+a,b=z[c];if(b)return a=b.nextPos,b.result;
for(var b=a,h=[],e=A();e!==null;)h.push(e),e=A();h=h!==null?h:null;h===null&&(h=null,a=b);z[c]={nextPos:a,result:h};return h}function A(){var b="statement@"+a,f=z[b];if(f)return a=f.nextPos,f.result;for(var H=f=a,e=[],d=r();d!==null;)e.push(d),d=r();if(e!==null)if(d=E(),d!==null){for(var s=[],n=r();n!==null;)s.push(n),n=r();if(s!==null)if(c.substr(a,1)==="."?(n=".",a+=1):(n=null,j&&h('"."')),n!==null){for(var o=[],v=r();v!==null;)o.push(v),v=r();o!==null?e=[e,d,s,n,o]:(e=null,a=H)}else e=null,a=H;
else e=null,a=H}else e=null,a=H;else e=null,a=H;H=e!==null?e[1]:null;H===null&&(H=null,a=f);if(H!==null)f=H;else{H=f=a;e=[];for(d=r();d!==null;)e.push(d),d=r();if(e!==null)if(d=na(),d!==null){s=[];for(n=r();n!==null;)s.push(n),n=r();s!==null?e=[e,d,s]:(e=null,a=H)}else e=null,a=H;else e=null,a=H;H=e!==null?e[1]:null;H===null&&(H=null,a=f);if(H!==null)f=H;else{f=r();if(f!==null)for(H=[];f!==null;)H.push(f),f=r();else H=null;f=H!==null?H:null}}z[b]={nextPos:a,result:f};return f}function E(){var c="directive@"+
a,b=z[c];if(b)return a=b.nextPos,b.result;b=F();b===null&&(b=I(),b=b!==null?b:null);z[c]={nextPos:a,result:b};return b}function I(){var b="base@"+a,f=z[b];if(f)return a=f.nextPos,f.result;for(var H=f=a,e=[],d=r();d!==null;)e.push(d),d=r();if(e!==null)if(c.substr(a,5)==="@base"?(d="@base",a+=5):(d=null,j&&h('"@base"')),d!==null){var s=r();if(s!==null)for(var n=[];s!==null;)n.push(s),s=r();else n=null;n!==null?(s=ma(),s!==null?e=[e,d,n,s]:(e=null,a=H)):(e=null,a=H)}else e=null,a=H;else e=null,a=H;H=
e!==null?function(a){base={token:"base"};base.value=a;return base}(e[3]):null;H===null&&(H=null,a=f);z[b]={nextPos:a,result:H};return H}function F(){var b="prefixID@"+a,f=z[b];if(f)return a=f.nextPos,f.result;for(var H=f=a,e=[],d=r();d!==null;)e.push(d),d=r();if(e!==null)if(c.substr(a,7)==="@prefix"?(d="@prefix",a+=7):(d=null,j&&h('"@prefix"')),d!==null){var s=r();if(s!==null)for(var n=[];s!==null;)n.push(s),s=r();else n=null;if(n!==null)if(s=Va(),s=s!==null?s:"",s!==null){if(c.substr(a,1)===":"){var o=
":";a+=1}else o=null,j&&h('":"');if(o!==null){for(var v=[],k=r();k!==null;)v.push(k),k=r();v!==null?(k=ma(),k!==null?e=[e,d,n,s,o,v,k]:(e=null,a=H)):(e=null,a=H)}else e=null,a=H}else e=null,a=H;else e=null,a=H}else e=null,a=H;else e=null,a=H;H=e!==null?function(a,c){prefix={token:"prefix"};prefix.prefix=a;prefix.local=c;return prefix}(e[3],e[6]):null;H===null&&(H=null,a=f);z[b]={nextPos:a,result:H};return H}function J(){var c="SelectQuery@"+a,b=z[c];if(b)return a=b.nextPos,b.result;b=j;j=!1;var f=
a,e=a,d=K();if(d!==null){for(var s=[],n=r();n!==null;)s.push(n),n=r();if(s!==null){for(var n=[],o=Q();o!==null;)n.push(o),o=Q();if(n!==null){for(var o=[],v=r();v!==null;)o.push(v),v=r();if(o!==null)if(v=U(),v!==null){for(var k=[],t=r();t!==null;)k.push(t),t=r();if(k!==null)if(t=X(),t!==null){for(var i=[],g=r();g!==null;)i.push(g),g=r();i!==null?(g=rb(),g!==null?d=[d,s,n,o,v,k,t,i,g]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e}else d=null,
a=e}else d=null,a=e;e=d!==null?function(a,c,b,d){for(var e={named:[],"default":[]},h=0;h<c.length;h++){var j=c[h];j.kind==="default"?e["default"].push(j.graph):e.named.push(j.graph)}e.named.length===0&&e["default"].length===0&&e["default"].push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});c={kind:"select",token:"executableunit"};c.dataset=e;c.projection=a.vars;c.modifier=a.modifier;c.pattern=b;if(d!=null&&d.limit!=null)c.limit=d.limit;
if(d!=null&&d.offset!=null)c.offset=d.offset;if(d!=null&&d.order!=null&&d.order!="")c.order=d.order;if(d!=null&&d.group!=null)c.group=d.group;return c}(d[0],d[2],d[4],d[6]):null;e===null&&(e=null,a=f);(j=b)&&e===null&&h("[6] SelectQuery");z[c]={nextPos:a,result:e};return e}function G(){var c="SubSelect@"+a,b=z[c];if(b)return a=b.nextPos,b.result;b=j;j=!1;var f=a,e=K();if(e!==null){var d=U();if(d!==null){var s=X();s!==null?e=[e,d,s]:(e=null,a=f)}else e=null,a=f}else e=null,a=f;(j=b)&&e===null&&h("[7] SubSelect");
z[c]={nextPos:a,result:e};return e}function K(){var b="SelectClause@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;for(var H=a,e=a,d=[],s=r();s!==null;)d.push(s),s=r();if(d!==null)if(c.substr(a,1)==="S"?(s="S",a+=1):(s=null,j&&h('"S"')),s===null&&(c.substr(a,1)==="s"?(s="s",a+=1):(s=null,j&&h('"s"')),s=s!==null?s:null),s!==null){if(c.substr(a,1)==="E"){var n="E";a+=1}else n=null,j&&h('"E"');n===null&&(c.substr(a,1)==="e"?(n="e",a+=1):(n=null,j&&h('"e"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,
1)==="L"){var o="L";a+=1}else o=null,j&&h('"L"');o===null&&(c.substr(a,1)==="l"?(o="l",a+=1):(o=null,j&&h('"l"')),o=o!==null?o:null);if(o!==null){if(c.substr(a,1)==="E"){var v="E";a+=1}else v=null,j&&h('"E"');v===null&&(c.substr(a,1)==="e"?(v="e",a+=1):(v=null,j&&h('"e"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="C"){var k="C";a+=1}else k=null,j&&h('"C"');k===null&&(c.substr(a,1)==="c"?(k="c",a+=1):(k=null,j&&h('"c"')),k=k!==null?k:null);if(k!==null){if(c.substr(a,1)==="T"){var t="T";a+=
1}else t=null,j&&h('"T"');t===null&&(c.substr(a,1)==="t"?(t="t",a+=1):(t=null,j&&h('"t"')),t=t!==null?t:null);if(t!==null){for(var i=[],g=r();g!==null;)i.push(g),g=r();if(i!==null){g=a;if(c.substr(a,1)==="D"){var B="D";a+=1}else B=null,j&&h('"D"');B===null&&(c.substr(a,1)==="d"?(B="d",a+=1):(B=null,j&&h('"d"')),B=B!==null?B:null);if(B!==null){if(c.substr(a,1)==="I"){var y="I";a+=1}else y=null,j&&h('"I"');y===null&&(c.substr(a,1)==="i"?(y="i",a+=1):(y=null,j&&h('"i"')),y=y!==null?y:null);if(y!==null){if(c.substr(a,
1)==="S"){var q="S";a+=1}else q=null,j&&h('"S"');q===null&&(c.substr(a,1)==="s"?(q="s",a+=1):(q=null,j&&h('"s"')),q=q!==null?q:null);if(q!==null){if(c.substr(a,1)==="T"){var m="T";a+=1}else m=null,j&&h('"T"');m===null&&(c.substr(a,1)==="t"?(m="t",a+=1):(m=null,j&&h('"t"')),m=m!==null?m:null);if(m!==null){if(c.substr(a,1)==="I"){var D="I";a+=1}else D=null,j&&h('"I"');D===null&&(c.substr(a,1)==="i"?(D="i",a+=1):(D=null,j&&h('"i"')),D=D!==null?D:null);if(D!==null){if(c.substr(a,1)==="N"){var w="N";a+=
1}else w=null,j&&h('"N"');w===null&&(c.substr(a,1)==="n"?(w="n",a+=1):(w=null,j&&h('"n"')),w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="C"){var u="C";a+=1}else u=null,j&&h('"C"');u===null&&(c.substr(a,1)==="c"?(u="c",a+=1):(u=null,j&&h('"c"')),u=u!==null?u:null);if(u!==null){if(c.substr(a,1)==="T"){var C="T";a+=1}else C=null,j&&h('"T"');C===null&&(c.substr(a,1)==="t"?(C="t",a+=1):(C=null,j&&h('"t"')),C=C!==null?C:null);C!==null?B=[B,y,q,m,D,w,u,C]:(B=null,a=g)}else B=null,a=g}else B=null,a=
g}else B=null,a=g}else B=null,a=g}else B=null,a=g}else B=null,a=g}else B=null,a=g;B!==null?g=B:(g=a,c.substr(a,1)==="R"?(B="R",a+=1):(B=null,j&&h('"R"')),B===null&&(c.substr(a,1)==="r"?(B="r",a+=1):(B=null,j&&h('"r"')),B=B!==null?B:null),B!==null?(c.substr(a,1)==="E"?(y="E",a+=1):(y=null,j&&h('"E"')),y===null&&(c.substr(a,1)==="e"?(y="e",a+=1):(y=null,j&&h('"e"')),y=y!==null?y:null),y!==null?(c.substr(a,1)==="D"?(q="D",a+=1):(q=null,j&&h('"D"')),q===null&&(c.substr(a,1)==="d"?(q="d",a+=1):(q=null,
j&&h('"d"')),q=q!==null?q:null),q!==null?(c.substr(a,1)==="U"?(m="U",a+=1):(m=null,j&&h('"U"')),m===null&&(c.substr(a,1)==="u"?(m="u",a+=1):(m=null,j&&h('"u"')),m=m!==null?m:null),m!==null?(c.substr(a,1)==="C"?(D="C",a+=1):(D=null,j&&h('"C"')),D===null&&(c.substr(a,1)==="c"?(D="c",a+=1):(D=null,j&&h('"c"')),D=D!==null?D:null),D!==null?(c.substr(a,1)==="E"?(w="E",a+=1):(w=null,j&&h('"E"')),w===null&&(c.substr(a,1)==="e"?(w="e",a+=1):(w=null,j&&h('"e"')),w=w!==null?w:null),w!==null?(c.substr(a,1)===
"D"?(u="D",a+=1):(u=null,j&&h('"D"')),u===null&&(c.substr(a,1)==="d"?(u="d",a+=1):(u=null,j&&h('"d"')),u=u!==null?u:null),u!==null?B=[B,y,q,m,D,w,u]:(B=null,a=g)):(B=null,a=g)):(B=null,a=g)):(B=null,a=g)):(B=null,a=g)):(B=null,a=g)):(B=null,a=g),g=B!==null?B:null);g=g!==null?g:"";if(g!==null){B=[];for(y=r();y!==null;)B.push(y),y=r();if(B!==null){q=a;m=[];for(D=r();D!==null;)m.push(D),D=r();if(m!==null)if(D=R(),D!==null){w=[];for(u=r();u!==null;)w.push(u),u=r();w!==null?m=[m,D,w]:(m=null,a=q)}else m=
null,a=q;else m=null,a=q;if(m!==null)q=m;else{q=a;m=[];for(D=r();D!==null;)m.push(D),D=r();if(m!==null)if(c.substr(a,1)==="("?(D="(",a+=1):(D=null,j&&h('"("')),D!==null){w=[];for(u=r();u!==null;)w.push(u),u=r();if(w!==null)if(u=L(),u!==null){for(var C=[],x=r();x!==null;)C.push(x),x=r();if(C!==null)if(c.substr(a,1)==="A"?(x="A",a+=1):(x=null,j&&h('"A"')),x===null&&(c.substr(a,1)==="a"?(x="a",a+=1):(x=null,j&&h('"a"')),x=x!==null?x:null),x!==null){if(c.substr(a,1)==="S"){var A="S";a+=1}else A=null,
j&&h('"S"');A===null&&(c.substr(a,1)==="s"?(A="s",a+=1):(A=null,j&&h('"s"')),A=A!==null?A:null);if(A!==null){for(var E=[],M=r();M!==null;)E.push(M),M=r();if(E!==null)if(M=R(),M!==null){for(var I=[],F=r();F!==null;)I.push(F),F=r();if(I!==null)if(c.substr(a,1)===")"?(F=")",a+=1):(F=null,j&&h('")"')),F!==null){for(var J=[],G=r();G!==null;)J.push(G),G=r();J!==null?m=[m,D,w,u,C,x,A,E,M,I,F,J]:(m=null,a=q)}else m=null,a=q;else m=null,a=q}else m=null,a=q;else m=null,a=q}else m=null,a=q}else m=null,a=q;else m=
null,a=q}else m=null,a=q;else m=null,a=q}else m=null,a=q;else m=null,a=q;q=m!==null?m:null}if(q!==null)for(y=[];q!==null;){y.push(q);q=a;m=[];for(D=r();D!==null;)m.push(D),D=r();if(m!==null)if(D=R(),D!==null){w=[];for(u=r();u!==null;)w.push(u),u=r();w!==null?m=[m,D,w]:(m=null,a=q)}else m=null,a=q;else m=null,a=q;if(m!==null)q=m;else{q=a;m=[];for(D=r();D!==null;)m.push(D),D=r();if(m!==null)if(c.substr(a,1)==="("?(D="(",a+=1):(D=null,j&&h('"("')),D!==null){w=[];for(u=r();u!==null;)w.push(u),u=r();if(w!==
null)if(u=L(),u!==null){C=[];for(x=r();x!==null;)C.push(x),x=r();if(C!==null)if(c.substr(a,1)==="A"?(x="A",a+=1):(x=null,j&&h('"A"')),x===null&&(c.substr(a,1)==="a"?(x="a",a+=1):(x=null,j&&h('"a"')),x=x!==null?x:null),x!==null)if(c.substr(a,1)==="S"?(A="S",a+=1):(A=null,j&&h('"S"')),A===null&&(c.substr(a,1)==="s"?(A="s",a+=1):(A=null,j&&h('"s"')),A=A!==null?A:null),A!==null){E=[];for(M=r();M!==null;)E.push(M),M=r();if(E!==null)if(M=R(),M!==null){I=[];for(F=r();F!==null;)I.push(F),F=r();if(I!==null)if(c.substr(a,
1)===")"?(F=")",a+=1):(F=null,j&&h('")"')),F!==null){J=[];for(G=r();G!==null;)J.push(G),G=r();J!==null?m=[m,D,w,u,C,x,A,E,M,I,F,J]:(m=null,a=q)}else m=null,a=q;else m=null,a=q}else m=null,a=q;else m=null,a=q}else m=null,a=q;else m=null,a=q;else m=null,a=q}else m=null,a=q;else m=null,a=q}else m=null,a=q;else m=null,a=q;q=m!==null?m:null}}else y=null;if(y===null){y=a;q=[];for(m=r();m!==null;)q.push(m),m=r();if(q!==null)if(c.substr(a,1)==="*"?(m="*",a+=1):(m=null,j&&h('"*"')),m!==null){D=[];for(w=r();w!==
null;)D.push(w),w=r();D!==null?q=[q,m,D]:(q=null,a=y)}else q=null,a=y;else q=null,a=y;y=q!==null?q:null}y!==null?d=[d,s,n,o,v,k,t,i,g,B,y]:(d=null,a=e)}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e;else d=null,a=e;e=d!==null?function(a,c){var b=[];if(c.length===3&&c[1]==="*")return{vars:[{token:"variable",kind:"*"}],modifier:sb(a)};for(var d=0;d<c.length;d++){var e=c[d];e.length===3?b.push({token:"variable",
kind:"var",value:e[1]}):b.push({token:"variable",kind:"aliased",expression:e[3],alias:e[8]})}return{vars:b,modifier:sb(a)}}(d[8],d[10]):null;e===null&&(e=null,a=H);(j=f)&&e===null&&h("[8] SelectClause");z[b]={nextPos:a,result:e};return e}function O(){var b="ConstructQuery@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;for(var H=a,e=a,d=[],s=r();s!==null;)d.push(s),s=r();if(d!==null)if(c.substr(a,1)==="C"?(s="C",a+=1):(s=null,j&&h('"C"')),s===null&&(c.substr(a,1)==="c"?(s="c",a+=1):(s=null,j&&
h('"c"')),s=s!==null?s:null),s!==null){if(c.substr(a,1)==="O"){var n="O";a+=1}else n=null,j&&h('"O"');n===null&&(c.substr(a,1)==="o"?(n="o",a+=1):(n=null,j&&h('"o"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="N"){var o="N";a+=1}else o=null,j&&h('"N"');o===null&&(c.substr(a,1)==="n"?(o="n",a+=1):(o=null,j&&h('"n"')),o=o!==null?o:null);if(o!==null){if(c.substr(a,1)==="S"){var v="S";a+=1}else v=null,j&&h('"S"');v===null&&(c.substr(a,1)==="s"?(v="s",a+=1):(v=null,j&&h('"s"')),v=v!==null?v:null);
if(v!==null){if(c.substr(a,1)==="T"){var k="T";a+=1}else k=null,j&&h('"T"');k===null&&(c.substr(a,1)==="t"?(k="t",a+=1):(k=null,j&&h('"t"')),k=k!==null?k:null);if(k!==null){if(c.substr(a,1)==="R"){var t="R";a+=1}else t=null,j&&h('"R"');t===null&&(c.substr(a,1)==="r"?(t="r",a+=1):(t=null,j&&h('"r"')),t=t!==null?t:null);if(t!==null){if(c.substr(a,1)==="U"){var i="U";a+=1}else i=null,j&&h('"U"');i===null&&(c.substr(a,1)==="u"?(i="u",a+=1):(i=null,j&&h('"u"')),i=i!==null?i:null);if(i!==null){if(c.substr(a,
1)==="C"){var g="C";a+=1}else g=null,j&&h('"C"');g===null&&(c.substr(a,1)==="c"?(g="c",a+=1):(g=null,j&&h('"c"')),g=g!==null?g:null);if(g!==null){if(c.substr(a,1)==="T"){var m="T";a+=1}else m=null,j&&h('"T"');m===null&&(c.substr(a,1)==="t"?(m="t",a+=1):(m=null,j&&h('"t"')),m=m!==null?m:null);if(m!==null){for(var q=[],N=r();N!==null;)q.push(N),N=r();if(q!==null)if(N=ub(),N!==null){for(var w=[],D=r();D!==null;)w.push(D),D=r();if(w!==null){for(var D=[],u=Q();u!==null;)D.push(u),u=Q();if(D!==null){for(var u=
[],C=r();C!==null;)u.push(C),C=r();if(u!==null)if(C=U(),C!==null){for(var x=[],A=r();A!==null;)x.push(A),A=r();x!==null?(A=X(),A!==null?d=[d,s,n,o,v,k,t,i,g,m,q,N,w,D,u,C,x,A]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e;else d=null,a=e;e=d!==null?function(a,c,b,d){for(var e={named:[],
"default":[]},h=0;h<c.length;h++){var j=c[h];j.kind==="default"?e["default"].push(j.graph):e.named.push(j.graph)}e.named.length===0&&e["default"].length===0&&e["default"].push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});c={kind:"construct",token:"executableunit"};c.dataset=e;c.template=a;c.pattern=b;if(d!=null&&d.limit!=null)c.limit=d.limit;if(d!=null&&d.offset!=null)c.offset=d.offset;if(d!=null&&d.order!=null&&d.order!="")c.order=d.order;
return c}(d[11],d[13],d[15],d[17]):null;e===null&&(e=null,a=H);(j=f)&&e===null&&h("[9] ConstructQuery");z[b]={nextPos:a,result:e};return e}function P(){var b="DescribeQuery@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var H=a;if(c.substr(a,8)==="DESCRIBE"){var e="DESCRIBE";a+=8}else e=null,j&&h('"DESCRIBE"');if(e!==null){var d=ja();if(d!==null)for(var s=[];d!==null;)s.push(d),d=ja();else s=null;s!==null?d=s:(c.substr(a,1)==="*"?(d="*",a+=1):(d=null,j&&h('"*"')),d=d!==null?d:null);if(d!==null){for(var s=
[],n=Q();n!==null;)s.push(n),n=Q();if(s!==null)if(n=U(),n=n!==null?n:"",n!==null){var o=X();o!==null?e=[e,d,s,n,o]:(e=null,a=H)}else e=null,a=H;else e=null,a=H}else e=null,a=H}else e=null,a=H;(j=f)&&e===null&&h("[10] DescribeQuery");z[b]={nextPos:a,result:e};return e}function W(){var b="AskQuery@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;for(var H=a,e=a,d=[],s=r();s!==null;)d.push(s),s=r();if(d!==null)if(c.substr(a,1)==="A"?(s="A",a+=1):(s=null,j&&h('"A"')),s===null&&(c.substr(a,1)==="a"?
(s="a",a+=1):(s=null,j&&h('"a"')),s=s!==null?s:null),s!==null){if(c.substr(a,1)==="S"){var n="S";a+=1}else n=null,j&&h('"S"');n===null&&(c.substr(a,1)==="s"?(n="s",a+=1):(n=null,j&&h('"s"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="K"){var o="K";a+=1}else o=null,j&&h('"K"');o===null&&(c.substr(a,1)==="k"?(o="k",a+=1):(o=null,j&&h('"k"')),o=o!==null?o:null);if(o!==null){for(var v=[],k=r();k!==null;)v.push(k),k=r();if(v!==null){for(var k=[],t=Q();t!==null;)k.push(t),t=Q();if(k!==null){for(var t=
[],i=r();i!==null;)t.push(i),i=r();t!==null?(i=U(),i!==null?d=[d,s,n,o,v,k,t,i]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e;else d=null,a=e;e=d!==null?function(a,c){for(var b={named:[],"default":[]},d=0;d<a.length;d++){var e=a[d];e.kind==="default"?b["default"].push(e.graph):b.named.push(e.graph)}b.named.length===0&&b["default"].length===0&&b["default"].push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});
d={kind:"ask",token:"executableunit"};d.dataset=b;d.pattern=c;return d}(d[5],d[7]):null;e===null&&(e=null,a=H);(j=f)&&e===null&&h("[11] AskQuery");z[b]={nextPos:a,result:e};return e}function Q(){var b="DatasetClause@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var H=a,e=a;if(c.substr(a,1)==="F"){var d="F";a+=1}else d=null,j&&h('"F"');d===null&&(c.substr(a,1)==="f"?(d="f",a+=1):(d=null,j&&h('"f"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="R"){var s="R";a+=1}else s=null,j&&h('"R"');
s===null&&(c.substr(a,1)==="r"?(s="r",a+=1):(s=null,j&&h('"r"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="O"){var n="O";a+=1}else n=null,j&&h('"O"');n===null&&(c.substr(a,1)==="o"?(n="o",a+=1):(n=null,j&&h('"o"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="M"){var o="M";a+=1}else o=null,j&&h('"M"');o===null&&(c.substr(a,1)==="m"?(o="m",a+=1):(o=null,j&&h('"m"')),o=o!==null?o:null);if(o!==null){for(var v=[],k=r();k!==null;)v.push(k),k=r();if(v!==null)if(k=$(),k===null&&(k=aa(),
k=k!==null?k:null),k!==null){for(var t=[],i=r();i!==null;)t.push(i),i=r();t!==null?d=[d,s,n,o,v,k,t]:(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e;e=d!==null?d[5]:null;e===null&&(e=null,a=H);(j=f)&&e===null&&h("[12] DatasetClause");z[b]={nextPos:a,result:e};return e}function $(){var c="DefaultGraphClause@"+a,b=z[c];if(b)return a=b.nextPos,b.result;b=j;j=!1;for(var f=a,e=a,d=[],s=r();s!==null;)d.push(s),s=r();d!==null?(s=S(),s!==null?d=
[d,s]:(d=null,a=e)):(d=null,a=e);e=d!==null?{graph:d[1],kind:"default",token:"graphClause"}:null;e===null&&(e=null,a=f);(j=b)&&e===null&&h("[13] DefaultGraphClause");z[c]={nextPos:a,result:e};return e}function aa(){var b="NamedGraphClause@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a;if(c.substr(a,1)==="N"){var d="N";a+=1}else d=null,j&&h('"N"');d===null&&(c.substr(a,1)==="n"?(d="n",a+=1):(d=null,j&&h('"n"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="A"){var s="A";a+=
1}else s=null,j&&h('"A"');s===null&&(c.substr(a,1)==="a"?(s="a",a+=1):(s=null,j&&h('"a"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="M"){var n="M";a+=1}else n=null,j&&h('"M"');n===null&&(c.substr(a,1)==="m"?(n="m",a+=1):(n=null,j&&h('"m"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="E"){var o="E";a+=1}else o=null,j&&h('"E"');o===null&&(c.substr(a,1)==="e"?(o="e",a+=1):(o=null,j&&h('"e"')),o=o!==null?o:null);if(o!==null){if(c.substr(a,1)==="D"){var v="D";a+=1}else v=null,j&&h('"D"');
v===null&&(c.substr(a,1)==="d"?(v="d",a+=1):(v=null,j&&h('"d"')),v=v!==null?v:null);if(v!==null){for(var i=[],t=r();t!==null;)i.push(t),t=r();i!==null?(t=S(),t!==null?d=[d,s,n,o,v,i,t]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e;e=d!==null?{graph:d[6],kind:"named",token:"graphCluase"}:null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[14] NamedGraphClause");z[b]={nextPos:a,result:e};return e}function U(){var b="WhereClause@"+a,f=z[b];if(f)return a=
f.nextPos,f.result;f=j;j=!1;var k=a,e=a,d=a;if(c.substr(a,1)==="W"){var s="W";a+=1}else s=null,j&&h('"W"');s===null&&(c.substr(a,1)==="w"?(s="w",a+=1):(s=null,j&&h('"w"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="H"){var n="H";a+=1}else n=null,j&&h('"H"');n===null&&(c.substr(a,1)==="h"?(n="h",a+=1):(n=null,j&&h('"h"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="E"){var o="E";a+=1}else o=null,j&&h('"E"');o===null&&(c.substr(a,1)==="e"?(o="e",a+=1):(o=null,j&&h('"e"')),o=o!==null?
o:null);if(o!==null){if(c.substr(a,1)==="R"){var v="R";a+=1}else v=null,j&&h('"R"');v===null&&(c.substr(a,1)==="r"?(v="r",a+=1):(v=null,j&&h('"r"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="E"){var i="E";a+=1}else i=null,j&&h('"E"');i===null&&(c.substr(a,1)==="e"?(i="e",a+=1):(i=null,j&&h('"e"')),i=i!==null?i:null);i!==null?s=[s,n,o,v,i]:(s=null,a=d)}else s=null,a=d}else s=null,a=d}else s=null,a=d}else s=null,a=d;d=s!==null?s:"";if(d!==null){s=[];for(n=r();n!==null;)s.push(n),n=r();if(s!==
null)if(n=V(),n!==null){o=[];for(v=r();v!==null;)o.push(v),v=r();o!==null?d=[d,s,n,o]:(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=null,a=e;e=d!==null?d[2]:null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[16] WhereClause");z[b]={nextPos:a,result:e};return e}function X(){var c="SolutionModifier@"+a,b=z[c];if(b)return a=b.nextPos,b.result;b=j;j=!1;var f=a,e=a,d=ga(),d=d!==null?d:"";if(d!==null){var s=ua(),s=s!==null?s:"";if(s!==null){var n=vb(),n=n!==null?n:"";if(n!==null){var o=wb(),o=o!==null?
o:"";o!==null?d=[d,s,n,o]:(d=null,a=e)}else d=null,a=e}else d=null,a=e}else d=null,a=e;e=d!==null?function(a,c,b){var d={};if(b!=null){if(b.limit!=null)d.limit=b.limit;if(b.offset!=null)d.offset=b.offset}if(a!=null)d.group=a;d.order=c;return d}(d[0],d[2],d[3]):null;e===null&&(e=null,a=f);(j=b)&&e===null&&h("[17] SolutionModifier");z[c]={nextPos:a,result:e};return e}function ga(){var b="GroupClause@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a;if(c.substr(a,1)==="G"){var d="G";a+=
1}else d=null,j&&h('"G"');d===null&&(c.substr(a,1)==="g"?(d="g",a+=1):(d=null,j&&h('"g"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="R"){var s="R";a+=1}else s=null,j&&h('"R"');s===null&&(c.substr(a,1)==="r"?(s="r",a+=1):(s=null,j&&h('"r"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="O"){var n="O";a+=1}else n=null,j&&h('"O"');n===null&&(c.substr(a,1)==="o"?(n="o",a+=1):(n=null,j&&h('"o"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="U"){var o="U";a+=1}else o=null,j&&h('"U"');
o===null&&(c.substr(a,1)==="u"?(o="u",a+=1):(o=null,j&&h('"u"')),o=o!==null?o:null);if(o!==null){if(c.substr(a,1)==="P"){var v="P";a+=1}else v=null,j&&h('"P"');v===null&&(c.substr(a,1)==="p"?(v="p",a+=1):(v=null,j&&h('"p"')),v=v!==null?v:null);if(v!==null){for(var i=[],t=r();t!==null;)i.push(t),t=r();if(i!==null)if(c.substr(a,1)==="B"?(t="B",a+=1):(t=null,j&&h('"B"')),t===null&&(c.substr(a,1)==="b"?(t="b",a+=1):(t=null,j&&h('"b"')),t=t!==null?t:null),t!==null){if(c.substr(a,1)==="Y"){var g="Y";a+=
1}else g=null,j&&h('"Y"');g===null&&(c.substr(a,1)==="y"?(g="y",a+=1):(g=null,j&&h('"y"')),g=g!==null?g:null);if(g!==null){for(var Y=[],m=r();m!==null;)Y.push(m),m=r();if(Y!==null){m=ia();if(m!==null)for(var q=[];m!==null;)q.push(m),m=ia();else q=null;q!==null?d=[d,s,n,o,v,i,t,g,Y,q]:(d=null,a=e)}else d=null,a=e}else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e;e=d!==null?d[9]:null;e===null&&(e=null,a=k);(j=f)&&e===null&&
h("[18] GroupClause");z[b]={nextPos:a,result:e};return e}function ia(){var b="GroupCondition@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;for(var k=a,e=a,d=[],s=r();s!==null;)d.push(s),s=r();if(d!==null)if(s=Da(),s!==null){for(var n=[],o=r();o!==null;)n.push(o),o=r();n!==null?d=[d,s,n]:(d=null,a=e)}else d=null,a=e;else d=null,a=e;e=d!==null?d[1]:null;e===null&&(e=null,a=k);if(e!==null)k=e;else{e=k=a;d=[];for(s=r();s!==null;)d.push(s),s=r();if(d!==null)if(s=Wa(),s!==null){n=[];for(o=r();o!==
null;)n.push(o),o=r();n!==null?d=[d,s,n]:(d=null,a=e)}else d=null,a=e;else d=null,a=e;e=d!==null?d[1]:null;e===null&&(e=null,a=k);if(e!==null)k=e;else{e=k=a;d=[];for(s=r();s!==null;)d.push(s),s=r();if(d!==null)if(c.substr(a,1)==="("?(s="(",a+=1):(s=null,j&&h('"("')),s!==null){n=[];for(o=r();o!==null;)n.push(o),o=r();if(n!==null)if(o=L(),o!==null){for(var v=[],i=r();i!==null;)v.push(i),i=r();if(v!==null){i=a;if(c.substr(a,1)==="A"){var t="A";a+=1}else t=null,j&&h('"A"');t===null&&(c.substr(a,1)===
"a"?(t="a",a+=1):(t=null,j&&h('"a"')),t=t!==null?t:null);if(t!==null){if(c.substr(a,1)==="S"){var g="S";a+=1}else g=null,j&&h('"S"');g===null&&(c.substr(a,1)==="s"?(g="s",a+=1):(g=null,j&&h('"s"')),g=g!==null?g:null);if(g!==null){for(var Y=[],m=r();m!==null;)Y.push(m),m=r();Y!==null?(m=R(),m!==null?t=[t,g,Y,m]:(t=null,a=i)):(t=null,a=i)}else t=null,a=i}else t=null,a=i;i=t!==null?t:"";if(i!==null){t=[];for(g=r();g!==null;)t.push(g),g=r();if(t!==null)if(c.substr(a,1)===")"?(g=")",a+=1):(g=null,j&&h('")"')),
g!==null){Y=[];for(m=r();m!==null;)Y.push(m),m=r();Y!==null?d=[d,s,n,o,v,i,t,g,Y]:(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e;e=d!==null?d[5].length!=0?{token:"aliased_expression",expression:d[3],alias:d[5][3]}:d[3]:null;e===null&&(e=null,a=k);if(e!==null)k=e;else{e=k=a;d=[];for(s=r();s!==null;)d.push(s),s=r();if(d!==null)if(s=R(),s!==null){n=[];for(o=r();o!==null;)n.push(o),o=r();n!==null?d=[d,s,n]:(d=
null,a=e)}else d=null,a=e;else d=null,a=e;e=d!==null?d[1]:null;e===null&&(e=null,a=k);k=e!==null?e:null}}}(j=f)&&k===null&&h("[19] GroupCondition");z[b]={nextPos:a,result:k};return k}function ua(){var b="HavingClause@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a;if(c.substr(a,6)==="HAVING"){var e="HAVING";a+=6}else e=null,j&&h('"HAVING"');if(e!==null){var d=wa();if(d!==null)for(var s=[];d!==null;)s.push(d),d=wa();else s=null;s!==null?e=[e,s]:(e=null,a=k)}else e=null,a=k;(j=f)&&e===
null&&h("[20] HavingClause");z[b]={nextPos:a,result:e};return e}function vb(){var b="OrderClause@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a;if(c.substr(a,1)==="O"){var d="O";a+=1}else d=null,j&&h('"O"');d===null&&(c.substr(a,1)==="o"?(d="o",a+=1):(d=null,j&&h('"o"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="R"){var s="R";a+=1}else s=null,j&&h('"R"');s===null&&(c.substr(a,1)==="r"?(s="r",a+=1):(s=null,j&&h('"r"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)===
"D"){var n="D";a+=1}else n=null,j&&h('"D"');n===null&&(c.substr(a,1)==="d"?(n="d",a+=1):(n=null,j&&h('"d"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="E"){var o="E";a+=1}else o=null,j&&h('"E"');o===null&&(c.substr(a,1)==="e"?(o="e",a+=1):(o=null,j&&h('"e"')),o=o!==null?o:null);if(o!==null){if(c.substr(a,1)==="R"){var v="R";a+=1}else v=null,j&&h('"R"');v===null&&(c.substr(a,1)==="r"?(v="r",a+=1):(v=null,j&&h('"r"')),v=v!==null?v:null);if(v!==null){for(var i=[],t=r();t!==null;)i.push(t),t=
r();if(i!==null)if(c.substr(a,1)==="B"?(t="B",a+=1):(t=null,j&&h('"B"')),t===null&&(c.substr(a,1)==="b"?(t="b",a+=1):(t=null,j&&h('"b"')),t=t!==null?t:null),t!==null){if(c.substr(a,1)==="Y"){var g="Y";a+=1}else g=null,j&&h('"Y"');g===null&&(c.substr(a,1)==="y"?(g="y",a+=1):(g=null,j&&h('"y"')),g=g!==null?g:null);if(g!==null){for(var m=[],q=r();q!==null;)m.push(q),q=r();if(m!==null){var y=Xa();if(y!==null)for(q=[];y!==null;)q.push(y),y=Xa();else q=null;if(q!==null){for(var y=[],N=r();N!==null;)y.push(N),
N=r();y!==null?d=[d,s,n,o,v,i,t,g,m,q,y]:(d=null,a=e)}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e;e=d!==null?d[9]:null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[22] OrderClause");z[b]={nextPos:a,result:e};return e}function Xa(){var b="OrderCondition@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a;if(c.substr(a,3)==="ASC"){var d="ASC";a+=3}else d=null,j&&h('"ASC"');
d===null&&(c.substr(a,4)==="DESC"?(d="DESC",a+=4):(d=null,j&&h('"DESC"')),d=d!==null?d:null);if(d!==null){for(var s=[],n=r();n!==null;)s.push(n),n=r();if(s!==null)if(n=Ea(),n!==null){for(var o=[],v=r();v!==null;)o.push(v),v=r();o!==null?d=[d,s,n,o]:(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=null,a=e;e=d!==null?{direction:d[0],expression:d[2]}:null;e===null&&(e=null,a=k);if(e!==null)k=e;else{e=k=a;d=wa();d===null&&(d=R(),d=d!==null?d:null);if(d!==null){s=[];for(n=r();n!==null;)s.push(n),n=
r();s!==null?d=[d,s]:(d=null,a=e)}else d=null,a=e;e=d!==null?function(a){a.token==="var"&&(a={token:"expression",expressionType:"atomic",primaryexpression:"var",value:a});return{direction:"ASC",expression:a}}(d[0]):null;e===null&&(e=null,a=k);k=e!==null?e:null}(j=f)&&k===null&&h("[23] OrderCondition");z[b]={nextPos:a,result:k};return k}function wb(){var c="LimitOffsetClauses@"+a,b=z[c];if(b)return a=b.nextPos,b.result;b=j;j=!1;var f=a,e=a,d=Ya();if(d!==null){var s=Za(),s=s!==null?s:"";s!==null?d=
[d,s]:(d=null,a=e)}else d=null,a=e;d!==null?e=d:(e=a,d=Za(),d!==null?(s=Ya(),s=s!==null?s:"",s!==null?d=[d,s]:(d=null,a=e)):(d=null,a=e),e=d!==null?d:null);e=e!==null?function(a){for(var c={},b=0;b<a.length;b++){var d=a[b];if(d.limit!=null)c.limit=d.limit;else if(d.offset!=null)c.offset=d.offset}return c}(e):null;e===null&&(e=null,a=f);(j=b)&&e===null&&h("[24] LimitOffsetClauses");z[c]={nextPos:a,result:e};return e}function Ya(){var b="LimitClause@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=
!1;var k=a,e=a;if(c.substr(a,1)==="L"){var d="L";a+=1}else d=null,j&&h('"L"');d===null&&(c.substr(a,1)==="l"?(d="l",a+=1):(d=null,j&&h('"l"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="I"){var s="I";a+=1}else s=null,j&&h('"I"');s===null&&(c.substr(a,1)==="i"?(s="i",a+=1):(s=null,j&&h('"i"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="M"){var n="M";a+=1}else n=null,j&&h('"M"');n===null&&(c.substr(a,1)==="m"?(n="m",a+=1):(n=null,j&&h('"m"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,
1)==="I"){var o="I";a+=1}else o=null,j&&h('"I"');o===null&&(c.substr(a,1)==="i"?(o="i",a+=1):(o=null,j&&h('"i"')),o=o!==null?o:null);if(o!==null){if(c.substr(a,1)==="T"){var v="T";a+=1}else v=null,j&&h('"T"');v===null&&(c.substr(a,1)==="t"?(v="t",a+=1):(v=null,j&&h('"t"')),v=v!==null?v:null);if(v!==null){for(var i=[],t=r();t!==null;)i.push(t),t=r();if(i!==null)if(t=ca(),t!==null){for(var g=[],m=r();m!==null;)g.push(m),m=r();g!==null?d=[d,s,n,o,v,i,t,g]:(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=
null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e;e=d!==null?{limit:parseInt(d[6].value)}:null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[25] LimitClause");z[b]={nextPos:a,result:e};return e}function Za(){var b="OffsetClause@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a;if(c.substr(a,1)==="O"){var d="O";a+=1}else d=null,j&&h('"O"');d===null&&(c.substr(a,1)==="o"?(d="o",a+=1):(d=null,j&&h('"o"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="F"){var s=
"F";a+=1}else s=null,j&&h('"F"');s===null&&(c.substr(a,1)==="f"?(s="f",a+=1):(s=null,j&&h('"f"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="F"){var n="F";a+=1}else n=null,j&&h('"F"');n===null&&(c.substr(a,1)==="f"?(n="f",a+=1):(n=null,j&&h('"f"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="S"){var o="S";a+=1}else o=null,j&&h('"S"');o===null&&(c.substr(a,1)==="s"?(o="s",a+=1):(o=null,j&&h('"s"')),o=o!==null?o:null);if(o!==null){if(c.substr(a,1)==="E"){var v="E";a+=1}else v=null,
j&&h('"E"');v===null&&(c.substr(a,1)==="e"?(v="e",a+=1):(v=null,j&&h('"e"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="T"){var i="T";a+=1}else i=null,j&&h('"T"');i===null&&(c.substr(a,1)==="t"?(i="t",a+=1):(i=null,j&&h('"t"')),i=i!==null?i:null);if(i!==null){for(var t=[],g=r();g!==null;)t.push(g),g=r();if(t!==null)if(g=ca(),g!==null){for(var m=[],q=r();q!==null;)m.push(q),q=r();m!==null?d=[d,s,n,o,v,i,t,g,m]:(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=
null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e;e=d!==null?{offset:parseInt(d[7].value)}:null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[26] OffsetClause");z[b]={nextPos:a,result:e};return e}function rb(){var b="BindingsClause@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a;if(c.substr(a,8)==="BINDINGS"){var e="BINDINGS";a+=8}else e=null,j&&h('"BINDINGS"');if(e!==null){for(var d=[],s=R();s!==null;)d.push(s),s=R();if(d!==null)if(c.substr(a,1)==="{"?(s="{",a+=1):(s=null,j&&h('"{"')),
s!==null){var n=[],o=a;if(c.substr(a,1)==="("){var v="(";a+=1}else v=null,j&&h('"("');if(v!==null){var i=xa();if(i!==null)for(var t=[];i!==null;)t.push(i),i=xa();else t=null;t!==null?(c.substr(a,1)===")"?(i=")",a+=1):(i=null,j&&h('")"')),i!==null?v=[v,t,i]:(v=null,a=o)):(v=null,a=o)}else v=null,a=o;v!==null?o=v:(o=ka(),o=o!==null?o:null);for(;o!==null;){n.push(o);o=a;c.substr(a,1)==="("?(v="(",a+=1):(v=null,j&&h('"("'));if(v!==null){i=xa();if(i!==null)for(t=[];i!==null;)t.push(i),i=xa();else t=null;
t!==null?(c.substr(a,1)===")"?(i=")",a+=1):(i=null,j&&h('")"')),i!==null?v=[v,t,i]:(v=null,a=o)):(v=null,a=o)}else v=null,a=o;v!==null?o=v:(o=ka(),o=o!==null?o:null)}n!==null?(c.substr(a,1)==="}"?(o="}",a+=1):(o=null,j&&h('"}"')),o!==null?e=[e,d,s,n,o]:(e=null,a=k)):(e=null,a=k)}else e=null,a=k;else e=null,a=k}else e=null,a=k;k=e!==null?e:"";(j=f)&&k===null&&h("[27] BindingsClause");z[b]={nextPos:a,result:k};return k}function xa(){var b="BindingValue@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=
j;j=!1;var k=S();k===null&&(k=Fa(),k===null&&(k=Ga(),k===null&&(k=Ha(),k===null&&(c.substr(a,5)==="UNDEF"?(k="UNDEF",a+=5):(k=null,j&&h('"UNDEF"')),k=k!==null?k:null))));(j=f)&&k===null&&h("[28] BindingValue");z[b]={nextPos:a,result:k};return k}function Ua(){var b="Update@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a,d=w();if(d!==null){for(var s=[],n=r();n!==null;)s.push(n),n=r();if(s!==null)if(n=xb(),n!==null){for(var o=a,v=[],i=r();i!==null;)v.push(i),i=r();if(v!==null)if(c.substr(a,
1)===";"?(i=";",a+=1):(i=null,j&&h('";"')),i!==null){for(var t=[],g=r();g!==null;)t.push(g),g=r();t!==null?(g=Ua(),g=g!==null?g:"",g!==null?v=[v,i,t,g]:(v=null,a=o)):(v=null,a=o)}else v=null,a=o;else v=null,a=o;o=v!==null?v:"";o!==null?d=[d,s,n,o]:(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=null,a=e;e=d!==null?function(a,c,b){var d={token:"query",kind:"update"};d.prologue=a;a=[c];b.length!=null&&b[3]!=null&&b[3].units!=null&&(a=a.concat(b[3].units));d.units=a;return d}(d[0],d[2],d[3]):null;
e===null&&(e=null,a=k);(j=f)&&e===null&&h("[30] Update");z[b]={nextPos:a,result:e};return e}function xb(){var c="Update1@"+a,b=z[c];if(b)return a=b.nextPos,b.result;b=j;j=!1;var f=yb();f===null&&(f=zb(),f===null&&(f=Ab(),f===null&&(f=Bb(),f===null&&(f=Cb(),f===null&&(f=Db(),f===null&&(f=Eb(),f===null&&(f=Fb(),f=f!==null?f:null)))))));(j=b)&&f===null&&h("[31] Update1");z[c]={nextPos:a,result:f};return f}function yb(){var b="Load@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a;if(c.substr(a,
1)==="L"){var d="L";a+=1}else d=null,j&&h('"L"');d===null&&(c.substr(a,1)==="l"?(d="l",a+=1):(d=null,j&&h('"l"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="O"){var s="O";a+=1}else s=null,j&&h('"O"');s===null&&(c.substr(a,1)==="o"?(s="o",a+=1):(s=null,j&&h('"o"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="A"){var n="A";a+=1}else n=null,j&&h('"A"');n===null&&(c.substr(a,1)==="a"?(n="a",a+=1):(n=null,j&&h('"a"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="D"){var o="D";a+=
1}else o=null,j&&h('"D"');o===null&&(c.substr(a,1)==="d"?(o="d",a+=1):(o=null,j&&h('"d"')),o=o!==null?o:null);if(o!==null){for(var v=[],i=r();i!==null;)v.push(i),i=r();if(v!==null)if(i=S(),i!==null){for(var t=[],g=r();g!==null;)t.push(g),g=r();if(t!==null){g=a;if(c.substr(a,1)==="I"){var m="I";a+=1}else m=null,j&&h('"I"');m===null&&(c.substr(a,1)==="i"?(m="i",a+=1):(m=null,j&&h('"i"')),m=m!==null?m:null);if(m!==null){if(c.substr(a,1)==="N"){var q="N";a+=1}else q=null,j&&h('"N"');q===null&&(c.substr(a,
1)==="n"?(q="n",a+=1):(q=null,j&&h('"n"')),q=q!==null?q:null);if(q!==null){if(c.substr(a,1)==="T"){var y="T";a+=1}else y=null,j&&h('"T"');y===null&&(c.substr(a,1)==="t"?(y="t",a+=1):(y=null,j&&h('"t"')),y=y!==null?y:null);if(y!==null){if(c.substr(a,1)==="O"){var N="O";a+=1}else N=null,j&&h('"O"');N===null&&(c.substr(a,1)==="o"?(N="o",a+=1):(N=null,j&&h('"o"')),N=N!==null?N:null);if(N!==null){for(var w=[],D=r();D!==null;)w.push(D),D=r();w!==null?(D=Ia(),D!==null?m=[m,q,y,N,w,D]:(m=null,a=g)):(m=null,
a=g)}else m=null,a=g}else m=null,a=g}else m=null,a=g}else m=null,a=g;g=m!==null?m:"";g!==null?d=[d,s,n,o,v,i,t,g]:(d=null,a=e)}else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e;e=d!==null?function(a,c){var b={kind:"load",token:"executableunit"};b.sourceGraph=a;b.destinyGraph=c[5];return b}(d[5],d[7]):null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[32] Load");z[b]={nextPos:a,result:e};return e}function zb(){var b="Clear@"+a,f=z[b];if(f)return a=
f.nextPos,f.result;f=j;j=!1;var k=a,e=a;if(c.substr(a,1)==="C"){var d="C";a+=1}else d=null,j&&h('"C"');d===null&&(c.substr(a,1)==="c"?(d="c",a+=1):(d=null,j&&h('"c"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="L"){var s="L";a+=1}else s=null,j&&h('"L"');s===null&&(c.substr(a,1)==="l"?(s="l",a+=1):(s=null,j&&h('"l"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="E"){var n="E";a+=1}else n=null,j&&h('"E"');n===null&&(c.substr(a,1)==="e"?(n="e",a+=1):(n=null,j&&h('"e"')),n=n!==null?n:
null);if(n!==null){if(c.substr(a,1)==="A"){var o="A";a+=1}else o=null,j&&h('"A"');o===null&&(c.substr(a,1)==="a"?(o="a",a+=1):(o=null,j&&h('"a"')),o=o!==null?o:null);if(o!==null){if(c.substr(a,1)==="R"){var v="R";a+=1}else v=null,j&&h('"R"');v===null&&(c.substr(a,1)==="r"?(v="r",a+=1):(v=null,j&&h('"r"')),v=v!==null?v:null);if(v!==null){for(var i=[],t=r();t!==null;)i.push(t),t=r();if(i!==null){t=a;if(c.substr(a,1)==="S"){var g="S";a+=1}else g=null,j&&h('"S"');g===null&&(c.substr(a,1)==="s"?(g="s",
a+=1):(g=null,j&&h('"s"')),g=g!==null?g:null);if(g!==null){if(c.substr(a,1)==="I"){var m="I";a+=1}else m=null,j&&h('"I"');m===null&&(c.substr(a,1)==="i"?(m="i",a+=1):(m=null,j&&h('"i"')),m=m!==null?m:null);if(m!==null){if(c.substr(a,1)==="L"){var q="L";a+=1}else q=null,j&&h('"L"');q===null&&(c.substr(a,1)==="l"?(q="l",a+=1):(q=null,j&&h('"l"')),q=q!==null?q:null);if(q!==null){if(c.substr(a,1)==="E"){var y="E";a+=1}else y=null,j&&h('"E"');y===null&&(c.substr(a,1)==="e"?(y="e",a+=1):(y=null,j&&h('"e"')),
y=y!==null?y:null);if(y!==null){if(c.substr(a,1)==="N"){var N="N";a+=1}else N=null,j&&h('"N"');N===null&&(c.substr(a,1)==="n"?(N="n",a+=1):(N=null,j&&h('"n"')),N=N!==null?N:null);if(N!==null){if(c.substr(a,1)==="T"){var w="T";a+=1}else w=null,j&&h('"T"');w===null&&(c.substr(a,1)==="t"?(w="t",a+=1):(w=null,j&&h('"t"')),w=w!==null?w:null);w!==null?g=[g,m,q,y,N,w]:(g=null,a=t)}else g=null,a=t}else g=null,a=t}else g=null,a=t}else g=null,a=t}else g=null,a=t;t=g!==null?g:"";if(t!==null){g=[];for(m=r();m!==
null;)g.push(m),m=r();g!==null?(m=$a(),m!==null?d=[d,s,n,o,v,i,t,g,m]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e;e=d!==null?function(a){var c={kind:"clear",token:"executableunit"};c.destinyGraph=a;return c}(d[8]):null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[33] Clear");z[b]={nextPos:a,result:e};return e}function Ab(){var b="Drop@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a;if(c.substr(a,
1)==="D"){var d="D";a+=1}else d=null,j&&h('"D"');d===null&&(c.substr(a,1)==="d"?(d="d",a+=1):(d=null,j&&h('"d"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="R"){var s="R";a+=1}else s=null,j&&h('"R"');s===null&&(c.substr(a,1)==="r"?(s="r",a+=1):(s=null,j&&h('"r"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="O"){var n="O";a+=1}else n=null,j&&h('"O"');n===null&&(c.substr(a,1)==="o"?(n="o",a+=1):(n=null,j&&h('"o"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="P"){var o="P";a+=
1}else o=null,j&&h('"P"');o===null&&(c.substr(a,1)==="p"?(o="p",a+=1):(o=null,j&&h('"p"')),o=o!==null?o:null);if(o!==null){for(var v=[],i=r();i!==null;)v.push(i),i=r();if(v!==null){i=a;if(c.substr(a,1)==="S"){var t="S";a+=1}else t=null,j&&h('"S"');t===null&&(c.substr(a,1)==="s"?(t="s",a+=1):(t=null,j&&h('"s"')),t=t!==null?t:null);if(t!==null){if(c.substr(a,1)==="I"){var g="I";a+=1}else g=null,j&&h('"I"');g===null&&(c.substr(a,1)==="i"?(g="i",a+=1):(g=null,j&&h('"i"')),g=g!==null?g:null);if(g!==null){if(c.substr(a,
1)==="L"){var m="L";a+=1}else m=null,j&&h('"L"');m===null&&(c.substr(a,1)==="l"?(m="l",a+=1):(m=null,j&&h('"l"')),m=m!==null?m:null);if(m!==null){if(c.substr(a,1)==="E"){var q="E";a+=1}else q=null,j&&h('"E"');q===null&&(c.substr(a,1)==="e"?(q="e",a+=1):(q=null,j&&h('"e"')),q=q!==null?q:null);if(q!==null){if(c.substr(a,1)==="N"){var y="N";a+=1}else y=null,j&&h('"N"');y===null&&(c.substr(a,1)==="n"?(y="n",a+=1):(y=null,j&&h('"n"')),y=y!==null?y:null);if(y!==null){if(c.substr(a,1)==="T"){var w="T";a+=
1}else w=null,j&&h('"T"');w===null&&(c.substr(a,1)==="t"?(w="t",a+=1):(w=null,j&&h('"t"')),w=w!==null?w:null);w!==null?t=[t,g,m,q,y,w]:(t=null,a=i)}else t=null,a=i}else t=null,a=i}else t=null,a=i}else t=null,a=i}else t=null,a=i;i=t!==null?t:"";if(i!==null){t=[];for(g=r();g!==null;)t.push(g),g=r();t!==null?(g=$a(),g!==null?d=[d,s,n,o,v,i,t,g]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e;e=d!==null?function(a){var c={kind:"drop",
token:"executableunit"};c.destinyGraph=a;return c}(d[7]):null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[34] Drop");z[b]={nextPos:a,result:e};return e}function Bb(){var b="Create@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a;if(c.substr(a,1)==="C"){var d="C";a+=1}else d=null,j&&h('"C"');d===null&&(c.substr(a,1)==="c"?(d="c",a+=1):(d=null,j&&h('"c"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="R"){var s="R";a+=1}else s=null,j&&h('"R"');s===null&&(c.substr(a,1)==="r"?(s=
"r",a+=1):(s=null,j&&h('"r"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="E"){var n="E";a+=1}else n=null,j&&h('"E"');n===null&&(c.substr(a,1)==="e"?(n="e",a+=1):(n=null,j&&h('"e"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="A"){var o="A";a+=1}else o=null,j&&h('"A"');o===null&&(c.substr(a,1)==="a"?(o="a",a+=1):(o=null,j&&h('"a"')),o=o!==null?o:null);if(o!==null){if(c.substr(a,1)==="T"){var v="T";a+=1}else v=null,j&&h('"T"');v===null&&(c.substr(a,1)==="t"?(v="t",a+=1):(v=null,j&&
h('"t"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="E"){var i="E";a+=1}else i=null,j&&h('"E"');i===null&&(c.substr(a,1)==="e"?(i="e",a+=1):(i=null,j&&h('"e"')),i=i!==null?i:null);if(i!==null){for(var t=[],g=r();g!==null;)t.push(g),g=r();if(t!==null){g=a;if(c.substr(a,1)==="S"){var m="S";a+=1}else m=null,j&&h('"S"');m===null&&(c.substr(a,1)==="s"?(m="s",a+=1):(m=null,j&&h('"s"')),m=m!==null?m:null);if(m!==null){if(c.substr(a,1)==="I"){var q="I";a+=1}else q=null,j&&h('"I"');q===null&&(c.substr(a,
1)==="i"?(q="i",a+=1):(q=null,j&&h('"i"')),q=q!==null?q:null);if(q!==null){if(c.substr(a,1)==="L"){var y="L";a+=1}else y=null,j&&h('"L"');y===null&&(c.substr(a,1)==="l"?(y="l",a+=1):(y=null,j&&h('"l"')),y=y!==null?y:null);if(y!==null){if(c.substr(a,1)==="E"){var w="E";a+=1}else w=null,j&&h('"E"');w===null&&(c.substr(a,1)==="e"?(w="e",a+=1):(w=null,j&&h('"e"')),w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="N"){var u="N";a+=1}else u=null,j&&h('"N"');u===null&&(c.substr(a,1)==="n"?(u="n",a+=1):
(u=null,j&&h('"n"')),u=u!==null?u:null);if(u!==null){if(c.substr(a,1)==="T"){var D="T";a+=1}else D=null,j&&h('"T"');D===null&&(c.substr(a,1)==="t"?(D="t",a+=1):(D=null,j&&h('"t"')),D=D!==null?D:null);D!==null?m=[m,q,y,w,u,D]:(m=null,a=g)}else m=null,a=g}else m=null,a=g}else m=null,a=g}else m=null,a=g}else m=null,a=g;g=m!==null?m:"";if(g!==null){m=[];for(q=r();q!==null;)m.push(q),q=r();m!==null?(q=Ia(),q!==null?d=[d,s,n,o,v,i,t,g,m,q]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e}else d=null,a=e}else d=
null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e;e=d!==null?function(a){var c={kind:"create",token:"executableunit"};c.destinyGraph=a;return c}(d[9]):null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[35] Create");z[b]={nextPos:a,result:e};return e}function Cb(){var b="InsertData@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a;if(c.substr(a,1)==="I"){var d="I";a+=1}else d=null,j&&h('"I"');d===null&&(c.substr(a,1)==="i"?(d="i",a+=1):(d=null,j&&
h('"i"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="N"){var s="N";a+=1}else s=null,j&&h('"N"');s===null&&(c.substr(a,1)==="n"?(s="n",a+=1):(s=null,j&&h('"n"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="S"){var n="S";a+=1}else n=null,j&&h('"S"');n===null&&(c.substr(a,1)==="s"?(n="s",a+=1):(n=null,j&&h('"s"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="E"){var o="E";a+=1}else o=null,j&&h('"E"');o===null&&(c.substr(a,1)==="e"?(o="e",a+=1):(o=null,j&&h('"e"')),o=o!==null?
o:null);if(o!==null){if(c.substr(a,1)==="R"){var v="R";a+=1}else v=null,j&&h('"R"');v===null&&(c.substr(a,1)==="r"?(v="r",a+=1):(v=null,j&&h('"r"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="T"){var i="T";a+=1}else i=null,j&&h('"T"');i===null&&(c.substr(a,1)==="t"?(i="t",a+=1):(i=null,j&&h('"t"')),i=i!==null?i:null);if(i!==null){for(var g=[],m=r();m!==null;)g.push(m),m=r();if(g!==null)if(c.substr(a,1)==="D"?(m="D",a+=1):(m=null,j&&h('"D"')),m===null&&(c.substr(a,1)==="d"?(m="d",a+=1):(m=
null,j&&h('"d"')),m=m!==null?m:null),m!==null){if(c.substr(a,1)==="A"){var q="A";a+=1}else q=null,j&&h('"A"');q===null&&(c.substr(a,1)==="a"?(q="a",a+=1):(q=null,j&&h('"a"')),q=q!==null?q:null);if(q!==null){if(c.substr(a,1)==="T"){var B="T";a+=1}else B=null,j&&h('"T"');B===null&&(c.substr(a,1)==="t"?(B="t",a+=1):(B=null,j&&h('"t"')),B=B!==null?B:null);if(B!==null){if(c.substr(a,1)==="A"){var y="A";a+=1}else y=null,j&&h('"A"');y===null&&(c.substr(a,1)==="a"?(y="a",a+=1):(y=null,j&&h('"a"')),y=y!==
null?y:null);if(y!==null){for(var w=[],u=r();u!==null;)w.push(u),u=r();w!==null?(u=ab(),u!==null?d=[d,s,n,o,v,i,g,m,q,B,y,w,u]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e;e=d!==null?function(a){var c={kind:"insertdata",token:"executableunit"};c.quads=a;return c}(d[12]):null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[36] InsertData");z[b]={nextPos:a,
result:e};return e}function Db(){var b="DeleteData@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a;if(c.substr(a,1)==="D"){var d="D";a+=1}else d=null,j&&h('"D"');d===null&&(c.substr(a,1)==="d"?(d="d",a+=1):(d=null,j&&h('"d"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="E"){var s="E";a+=1}else s=null,j&&h('"E"');s===null&&(c.substr(a,1)==="e"?(s="e",a+=1):(s=null,j&&h('"e"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="L"){var n="L";a+=1}else n=null,j&&h('"L"');n===
null&&(c.substr(a,1)==="l"?(n="l",a+=1):(n=null,j&&h('"l"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="E"){var o="E";a+=1}else o=null,j&&h('"E"');o===null&&(c.substr(a,1)==="e"?(o="e",a+=1):(o=null,j&&h('"e"')),o=o!==null?o:null);if(o!==null){if(c.substr(a,1)==="T"){var v="T";a+=1}else v=null,j&&h('"T"');v===null&&(c.substr(a,1)==="t"?(v="t",a+=1):(v=null,j&&h('"t"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="E"){var i="E";a+=1}else i=null,j&&h('"E"');i===null&&(c.substr(a,1)===
"e"?(i="e",a+=1):(i=null,j&&h('"e"')),i=i!==null?i:null);if(i!==null){for(var g=[],m=r();m!==null;)g.push(m),m=r();if(g!==null)if(c.substr(a,1)==="D"?(m="D",a+=1):(m=null,j&&h('"D"')),m===null&&(c.substr(a,1)==="d"?(m="d",a+=1):(m=null,j&&h('"d"')),m=m!==null?m:null),m!==null){if(c.substr(a,1)==="A"){var q="A";a+=1}else q=null,j&&h('"A"');q===null&&(c.substr(a,1)==="a"?(q="a",a+=1):(q=null,j&&h('"a"')),q=q!==null?q:null);if(q!==null){if(c.substr(a,1)==="T"){var B="T";a+=1}else B=null,j&&h('"T"');
B===null&&(c.substr(a,1)==="t"?(B="t",a+=1):(B=null,j&&h('"t"')),B=B!==null?B:null);if(B!==null){if(c.substr(a,1)==="A"){var y="A";a+=1}else y=null,j&&h('"A"');y===null&&(c.substr(a,1)==="a"?(y="a",a+=1):(y=null,j&&h('"a"')),y=y!==null?y:null);if(y!==null){var w=ab();w!==null?d=[d,s,n,o,v,i,g,m,q,B,y,w]:(d=null,a=e)}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e;e=d!==null?
function(a){var c={kind:"deletedata",token:"executableunit"};c.quads=a;return c}(d[11]):null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[37] DeleteData");z[b]={nextPos:a,result:e};return e}function Eb(){var b="DeleteWhere@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a;if(c.substr(a,1)==="D"){var d="D";a+=1}else d=null,j&&h('"D"');d===null&&(c.substr(a,1)==="d"?(d="d",a+=1):(d=null,j&&h('"d"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="E"){var s="E";a+=1}else s=null,j&&
h('"E"');s===null&&(c.substr(a,1)==="e"?(s="e",a+=1):(s=null,j&&h('"e"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="L"){var n="L";a+=1}else n=null,j&&h('"L"');n===null&&(c.substr(a,1)==="l"?(n="l",a+=1):(n=null,j&&h('"l"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="E"){var o="E";a+=1}else o=null,j&&h('"E"');o===null&&(c.substr(a,1)==="e"?(o="e",a+=1):(o=null,j&&h('"e"')),o=o!==null?o:null);if(o!==null){if(c.substr(a,1)==="T"){var v="T";a+=1}else v=null,j&&h('"T"');v===null&&(c.substr(a,
1)==="t"?(v="t",a+=1):(v=null,j&&h('"t"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="E"){var i="E";a+=1}else i=null,j&&h('"E"');i===null&&(c.substr(a,1)==="e"?(i="e",a+=1):(i=null,j&&h('"e"')),i=i!==null?i:null);if(i!==null){for(var g=[],m=r();m!==null;)g.push(m),m=r();if(g!==null)if(c.substr(a,1)==="W"?(m="W",a+=1):(m=null,j&&h('"W"')),m===null&&(c.substr(a,1)==="w"?(m="w",a+=1):(m=null,j&&h('"w"')),m=m!==null?m:null),m!==null){if(c.substr(a,1)==="H"){var q="H";a+=1}else q=null,j&&h('"H"');
q===null&&(c.substr(a,1)==="h"?(q="h",a+=1):(q=null,j&&h('"h"')),q=q!==null?q:null);if(q!==null){if(c.substr(a,1)==="E"){var B="E";a+=1}else B=null,j&&h('"E"');B===null&&(c.substr(a,1)==="e"?(B="e",a+=1):(B=null,j&&h('"e"')),B=B!==null?B:null);if(B!==null){if(c.substr(a,1)==="R"){var y="R";a+=1}else y=null,j&&h('"R"');y===null&&(c.substr(a,1)==="r"?(y="r",a+=1):(y=null,j&&h('"r"')),y=y!==null?y:null);if(y!==null){if(c.substr(a,1)==="E"){var w="E";a+=1}else w=null,j&&h('"E"');w===null&&(c.substr(a,
1)==="e"?(w="e",a+=1):(w=null,j&&h('"e"')),w=w!==null?w:null);if(w!==null){for(var u=[],D=r();D!==null;)u.push(D),D=r();u!==null?(D=V(),D!==null?d=[d,s,n,o,v,i,g,m,q,B,y,w,u,D]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e;e=d!==null?function(a){var c={kind:"modify"};c.pattern=a;c["with"]=null;c.using=null;for(var b=[],a=a.patterns[0],
a=a.triplesContext==null&&a.patterns!=null?a.patterns[0].triplesContext:a.triplesContext,d=0;d<a.length;d++){var e={},h=a[d];e.subject=h.subject;e.predicate=h.predicate;e.object=h.object;e.graph=h.graph;b.push(e)}c["delete"]=b;return c}(d[13]):null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[38] DeleteWhere");z[b]={nextPos:a,result:e};return e}function Fb(){var b="Modify@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a,d=a;if(c.substr(a,1)==="W"){var s="W";a+=1}else s=null,j&&h('"W"');
s===null&&(c.substr(a,1)==="w"?(s="w",a+=1):(s=null,j&&h('"w"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="I"){var n="I";a+=1}else n=null,j&&h('"I"');n===null&&(c.substr(a,1)==="i"?(n="i",a+=1):(n=null,j&&h('"i"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="T"){var o="T";a+=1}else o=null,j&&h('"T"');o===null&&(c.substr(a,1)==="t"?(o="t",a+=1):(o=null,j&&h('"t"')),o=o!==null?o:null);if(o!==null){if(c.substr(a,1)==="H"){var v="H";a+=1}else v=null,j&&h('"H"');v===null&&(c.substr(a,
1)==="h"?(v="h",a+=1):(v=null,j&&h('"h"')),v=v!==null?v:null);if(v!==null){for(var i=[],g=r();g!==null;)i.push(g),g=r();i!==null?(g=S(),g!==null?s=[s,n,o,v,i,g]:(s=null,a=d)):(s=null,a=d)}else s=null,a=d}else s=null,a=d}else s=null,a=d}else s=null,a=d;d=s!==null?s:"";if(d!==null){s=[];for(n=r();n!==null;)s.push(n),n=r();if(s!==null){n=a;o=Gb();if(o!==null){v=[];for(i=r();i!==null;)v.push(i),i=r();v!==null?(i=bb(),i=i!==null?i:"",i!==null?o=[o,v,i]:(o=null,a=n)):(o=null,a=n)}else o=null,a=n;o!==null?
n=o:(n=bb(),n=n!==null?n:null);if(n!==null){o=[];for(v=r();v!==null;)o.push(v),v=r();if(o!==null){v=[];for(i=cb();i!==null;)v.push(i),i=cb();if(v!==null){i=[];for(g=r();g!==null;)i.push(g),g=r();if(i!==null)if(c.substr(a,1)==="W"?(g="W",a+=1):(g=null,j&&h('"W"')),g===null&&(c.substr(a,1)==="w"?(g="w",a+=1):(g=null,j&&h('"w"')),g=g!==null?g:null),g!==null){if(c.substr(a,1)==="H"){var m="H";a+=1}else m=null,j&&h('"H"');m===null&&(c.substr(a,1)==="h"?(m="h",a+=1):(m=null,j&&h('"h"')),m=m!==null?m:null);
if(m!==null){if(c.substr(a,1)==="E"){var q="E";a+=1}else q=null,j&&h('"E"');q===null&&(c.substr(a,1)==="e"?(q="e",a+=1):(q=null,j&&h('"e"')),q=q!==null?q:null);if(q!==null){if(c.substr(a,1)==="R"){var B="R";a+=1}else B=null,j&&h('"R"');B===null&&(c.substr(a,1)==="r"?(B="r",a+=1):(B=null,j&&h('"r"')),B=B!==null?B:null);if(B!==null){if(c.substr(a,1)==="E"){var y="E";a+=1}else y=null,j&&h('"E"');y===null&&(c.substr(a,1)==="e"?(y="e",a+=1):(y=null,j&&h('"e"')),y=y!==null?y:null);if(y!==null){for(var w=
[],u=r();u!==null;)w.push(u),u=r();if(w!==null)if(u=V(),u!==null){for(var D=[],C=r();C!==null;)D.push(C),C=r();D!==null?d=[d,s,n,o,v,i,g,m,q,B,y,w,u,D]:(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e;e=d!==null?function(a,c,b,d){var e={kind:"modify"};e["with"]=a!=""?a[5]:null;c.length===3&&c[2]===""?(e["delete"]=c[0],e.insert=
null):c.length===3&&c[0].length!=null&&c[1].length!=null&&c[2].length!=null?(e["delete"]=c[0],e.insert=c[2]):(e.insert=c,e["delete"]=null);b!=""&&(e.using=b);e.pattern=d;return e}(d[0],d[2],d[4],d[12]):null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[39] Modify");z[b]={nextPos:a,result:e};return e}function Gb(){var b="DeleteClause@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a;if(c.substr(a,1)==="D"){var d="D";a+=1}else d=null,j&&h('"D"');d===null&&(c.substr(a,1)==="d"?(d="d",a+=
1):(d=null,j&&h('"d"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="E"){var s="E";a+=1}else s=null,j&&h('"E"');s===null&&(c.substr(a,1)==="e"?(s="e",a+=1):(s=null,j&&h('"e"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="L"){var n="L";a+=1}else n=null,j&&h('"L"');n===null&&(c.substr(a,1)==="l"?(n="l",a+=1):(n=null,j&&h('"l"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="E"){var o="E";a+=1}else o=null,j&&h('"E"');o===null&&(c.substr(a,1)==="e"?(o="e",a+=1):(o=null,j&&h('"e"')),
o=o!==null?o:null);if(o!==null){if(c.substr(a,1)==="T"){var v="T";a+=1}else v=null,j&&h('"T"');v===null&&(c.substr(a,1)==="t"?(v="t",a+=1):(v=null,j&&h('"t"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="E"){var i="E";a+=1}else i=null,j&&h('"E"');i===null&&(c.substr(a,1)==="e"?(i="e",a+=1):(i=null,j&&h('"e"')),i=i!==null?i:null);if(i!==null){var g=eb();g!==null?d=[d,s,n,o,v,i,g]:(d=null,a=e)}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e;e=
d!==null?d[6]:null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[40] DeleteClause");z[b]={nextPos:a,result:e};return e}function bb(){var b="InsertClause@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a;if(c.substr(a,1)==="I"){var d="I";a+=1}else d=null,j&&h('"I"');d===null&&(c.substr(a,1)==="i"?(d="i",a+=1):(d=null,j&&h('"i"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="N"){var s="N";a+=1}else s=null,j&&h('"N"');s===null&&(c.substr(a,1)==="n"?(s="n",a+=1):(s=null,j&&h('"n"')),
s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="S"){var n="S";a+=1}else n=null,j&&h('"S"');n===null&&(c.substr(a,1)==="s"?(n="s",a+=1):(n=null,j&&h('"s"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="E"){var o="E";a+=1}else o=null,j&&h('"E"');o===null&&(c.substr(a,1)==="e"?(o="e",a+=1):(o=null,j&&h('"e"')),o=o!==null?o:null);if(o!==null){if(c.substr(a,1)==="R"){var v="R";a+=1}else v=null,j&&h('"R"');v===null&&(c.substr(a,1)==="r"?(v="r",a+=1):(v=null,j&&h('"r"')),v=v!==null?v:null);if(v!==
null){if(c.substr(a,1)==="T"){var i="T";a+=1}else i=null,j&&h('"T"');i===null&&(c.substr(a,1)==="t"?(i="t",a+=1):(i=null,j&&h('"t"')),i=i!==null?i:null);if(i!==null){var g=eb();g!==null?d=[d,s,n,o,v,i,g]:(d=null,a=e)}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e;e=d!==null?d[6]:null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[41] InsertClause");z[b]={nextPos:a,result:e};return e}function cb(){var b="UsingClause@"+a,f=z[b];if(f)return a=f.nextPos,f.result;
f=j;j=!1;for(var k=a,e=a,d=[],s=r();s!==null;)d.push(s),s=r();if(d!==null)if(c.substr(a,1)==="U"?(s="U",a+=1):(s=null,j&&h('"U"')),s===null&&(c.substr(a,1)==="u"?(s="u",a+=1):(s=null,j&&h('"u"')),s=s!==null?s:null),s!==null){if(c.substr(a,1)==="S"){var n="S";a+=1}else n=null,j&&h('"S"');n===null&&(c.substr(a,1)==="s"?(n="s",a+=1):(n=null,j&&h('"s"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="I"){var o="I";a+=1}else o=null,j&&h('"I"');o===null&&(c.substr(a,1)==="i"?(o="i",a+=1):(o=null,j&&
h('"i"')),o=o!==null?o:null);if(o!==null){if(c.substr(a,1)==="N"){var v="N";a+=1}else v=null,j&&h('"N"');v===null&&(c.substr(a,1)==="n"?(v="n",a+=1):(v=null,j&&h('"n"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="G"){var i="G";a+=1}else i=null,j&&h('"G"');i===null&&(c.substr(a,1)==="g"?(i="g",a+=1):(i=null,j&&h('"g"')),i=i!==null?i:null);if(i!==null){for(var g=[],m=r();m!==null;)g.push(m),m=r();if(g!==null){m=S();if(m===null){m=a;if(c.substr(a,1)==="N"){var q="N";a+=1}else q=null,j&&h('"N"');
q===null&&(c.substr(a,1)==="n"?(q="n",a+=1):(q=null,j&&h('"n"')),q=q!==null?q:null);if(q!==null){if(c.substr(a,1)==="A"){var B="A";a+=1}else B=null,j&&h('"A"');B===null&&(c.substr(a,1)==="a"?(B="a",a+=1):(B=null,j&&h('"a"')),B=B!==null?B:null);if(B!==null){if(c.substr(a,1)==="M"){var y="M";a+=1}else y=null,j&&h('"M"');y===null&&(c.substr(a,1)==="m"?(y="m",a+=1):(y=null,j&&h('"m"')),y=y!==null?y:null);if(y!==null){if(c.substr(a,1)==="E"){var w="E";a+=1}else w=null,j&&h('"E"');w===null&&(c.substr(a,
1)==="e"?(w="e",a+=1):(w=null,j&&h('"e"')),w=w!==null?w:null);if(w!==null){if(c.substr(a,1)==="D"){var u="D";a+=1}else u=null,j&&h('"D"');u===null&&(c.substr(a,1)==="d"?(u="d",a+=1):(u=null,j&&h('"d"')),u=u!==null?u:null);if(u!==null){for(var D=[],C=r();C!==null;)D.push(C),C=r();D!==null?(C=S(),C!==null?q=[q,B,y,w,u,D,C]:(q=null,a=m)):(q=null,a=m)}else q=null,a=m}else q=null,a=m}else q=null,a=m}else q=null,a=m}else q=null,a=m;m=q!==null?q:null}m!==null?d=[d,s,n,o,v,i,g,m]:(d=null,a=e)}else d=null,
a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e;else d=null,a=e;e=d!==null?d[7].length!=null?{kind:"named",uri:d[7][6]}:{kind:"default",uri:d[7]}:null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[42] UsingClause");z[b]={nextPos:a,result:e};return e}function Ia(){var b="GraphRef@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a;if(c.substr(a,1)==="G"){var d="G";a+=1}else d=null,j&&h('"G"');d===null&&(c.substr(a,1)==="g"?(d="g",a+=1):(d=null,j&&h('"g"')),
d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="R"){var s="R";a+=1}else s=null,j&&h('"R"');s===null&&(c.substr(a,1)==="r"?(s="r",a+=1):(s=null,j&&h('"r"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="A"){var n="A";a+=1}else n=null,j&&h('"A"');n===null&&(c.substr(a,1)==="a"?(n="a",a+=1):(n=null,j&&h('"a"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="P"){var o="P";a+=1}else o=null,j&&h('"P"');o===null&&(c.substr(a,1)==="p"?(o="p",a+=1):(o=null,j&&h('"p"')),o=o!==null?o:null);if(o!==
null){if(c.substr(a,1)==="H"){var v="H";a+=1}else v=null,j&&h('"H"');v===null&&(c.substr(a,1)==="h"?(v="h",a+=1):(v=null,j&&h('"h"')),v=v!==null?v:null);if(v!==null){for(var i=[],g=r();g!==null;)i.push(g),g=r();i!==null?(g=S(),g!==null?d=[d,s,n,o,v,i,g]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e;e=d!==null?d[6]:null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[43] GraphRef");z[b]={nextPos:a,result:e};return e}function $a(){var b="GraphRefAll@"+
a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=Ia(),e=e!==null?e:null;e===null&&(e=null,a=k);if(e!==null)k=e;else{e=k=a;if(c.substr(a,1)==="D"){var d="D";a+=1}else d=null,j&&h('"D"');d===null&&(c.substr(a,1)==="d"?(d="d",a+=1):(d=null,j&&h('"d"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="E"){var s="E";a+=1}else s=null,j&&h('"E"');s===null&&(c.substr(a,1)==="e"?(s="e",a+=1):(s=null,j&&h('"e"')),s=s!==null?s:null);if(s!==null){if(c.substr(a,1)==="F"){var n="F";a+=1}else n=null,
j&&h('"F"');n===null&&(c.substr(a,1)==="f"?(n="f",a+=1):(n=null,j&&h('"f"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="A"){var o="A";a+=1}else o=null,j&&h('"A"');o===null&&(c.substr(a,1)==="a"?(o="a",a+=1):(o=null,j&&h('"a"')),o=o!==null?o:null);if(o!==null){if(c.substr(a,1)==="U"){var v="U";a+=1}else v=null,j&&h('"U"');v===null&&(c.substr(a,1)==="u"?(v="u",a+=1):(v=null,j&&h('"u"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="L"){var i="L";a+=1}else i=null,j&&h('"L"');i===null&&
(c.substr(a,1)==="l"?(i="l",a+=1):(i=null,j&&h('"l"')),i=i!==null?i:null);if(i!==null){if(c.substr(a,1)==="T"){var g="T";a+=1}else g=null,j&&h('"T"');g===null&&(c.substr(a,1)==="t"?(g="t",a+=1):(g=null,j&&h('"t"')),g=g!==null?g:null);g!==null?d=[d,s,n,o,v,i,g]:(d=null,a=e)}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e;e=d!==null?"default":null;e===null&&(e=null,a=k);e!==null?k=e:(e=k=a,c.substr(a,1)==="N"?(d="N",a+=1):(d=null,j&&h('"N"')),d===null&&
(c.substr(a,1)==="n"?(d="n",a+=1):(d=null,j&&h('"n"')),d=d!==null?d:null),d!==null?(c.substr(a,1)==="A"?(s="A",a+=1):(s=null,j&&h('"A"')),s===null&&(c.substr(a,1)==="a"?(s="a",a+=1):(s=null,j&&h('"a"')),s=s!==null?s:null),s!==null?(c.substr(a,1)==="M"?(n="M",a+=1):(n=null,j&&h('"M"')),n===null&&(c.substr(a,1)==="m"?(n="m",a+=1):(n=null,j&&h('"m"')),n=n!==null?n:null),n!==null?(c.substr(a,1)==="E"?(o="E",a+=1):(o=null,j&&h('"E"')),o===null&&(c.substr(a,1)==="e"?(o="e",a+=1):(o=null,j&&h('"e"')),o=
o!==null?o:null),o!==null?(c.substr(a,1)==="D"?(v="D",a+=1):(v=null,j&&h('"D"')),v===null&&(c.substr(a,1)==="d"?(v="d",a+=1):(v=null,j&&h('"d"')),v=v!==null?v:null),v!==null?d=[d,s,n,o,v]:(d=null,a=e)):(d=null,a=e)):(d=null,a=e)):(d=null,a=e)):(d=null,a=e),e=d!==null?"named":null,e===null&&(e=null,a=k),e!==null?k=e:(e=k=a,c.substr(a,1)==="A"?(d="A",a+=1):(d=null,j&&h('"A"')),d===null&&(c.substr(a,1)==="a"?(d="a",a+=1):(d=null,j&&h('"a"')),d=d!==null?d:null),d!==null?(c.substr(a,1)==="L"?(s="L",a+=
1):(s=null,j&&h('"L"')),s===null&&(c.substr(a,1)==="l"?(s="l",a+=1):(s=null,j&&h('"l"')),s=s!==null?s:null),s!==null?(c.substr(a,1)==="L"?(n="L",a+=1):(n=null,j&&h('"L"')),n===null&&(c.substr(a,1)==="l"?(n="l",a+=1):(n=null,j&&h('"l"')),n=n!==null?n:null),n!==null?d=[d,s,n]:(d=null,a=e)):(d=null,a=e)):(d=null,a=e),e=d!==null?"all":null,e===null&&(e=null,a=k),k=e!==null?e:null))}(j=f)&&k===null&&h("[44] GraphRefAll");z[b]={nextPos:a,result:k};return k}function eb(){var b="QuadPattern@"+a,f=z[b];if(f)return a=
f.nextPos,f.result;f=j;j=!1;for(var k=a,e=a,d=[],s=r();s!==null;)d.push(s),s=r();if(d!==null)if(c.substr(a,1)==="{"?(s="{",a+=1):(s=null,j&&h('"{"')),s!==null){for(var n=[],o=r();o!==null;)n.push(o),o=r();if(n!==null)if(o=fb(),o!==null){for(var v=[],i=r();i!==null;)v.push(i),i=r();if(v!==null)if(c.substr(a,1)==="}"?(i="}",a+=1):(i=null,j&&h('"}"')),i!==null){for(var g=[],m=r();m!==null;)g.push(m),m=r();g!==null?d=[d,s,n,o,v,i,g]:(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=
null,a=e}else d=null,a=e;else d=null,a=e;e=d!==null?d[3].quadsContext:null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[45] QuadPattern");z[b]={nextPos:a,result:e};return e}function ab(){var b="QuadData@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;for(var k=a,e=a,d=[],s=r();s!==null;)d.push(s),s=r();if(d!==null)if(c.substr(a,1)==="{"?(s="{",a+=1):(s=null,j&&h('"{"')),s!==null){for(var n=[],o=r();o!==null;)n.push(o),o=r();if(n!==null)if(o=fb(),o!==null){for(var v=[],i=r();i!==null;)v.push(i),
i=r();if(v!==null)if(c.substr(a,1)==="}"?(i="}",a+=1):(i=null,j&&h('"}"')),i!==null){for(var g=[],m=r();m!==null;)g.push(m),m=r();g!==null?d=[d,s,n,o,v,i,g]:(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e;e=d!==null?d[3].quadsContext:null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[46] QuadData");z[b]={nextPos:a,result:e};return e}function fb(){var b="Quads@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a,d=oa(),d=d!==null?
d:"";if(d!==null){var s=[],n=a,o=gb();if(o!==null){if(c.substr(a,1)==="."){var v=".";a+=1}else v=null,j&&h('"."');v=v!==null?v:"";if(v!==null){var i=oa(),i=i!==null?i:"";i!==null?o=[o,v,i]:(o=null,a=n)}else o=null,a=n}else o=null,a=n;for(;o!==null;)s.push(o),n=a,o=gb(),o!==null?(c.substr(a,1)==="."?(v=".",a+=1):(v=null,j&&h('"."')),v=v!==null?v:"",v!==null?(i=oa(),i=i!==null?i:"",i!==null?o=[o,v,i]:(o=null,a=n)):(o=null,a=n)):(o=null,a=n);s!==null?d=[d,s]:(d=null,a=e)}else d=null,a=e;e=d!==null?function(a,
c){var b=[];if(a.triplesContext!=null&&a.triplesContext!=null)for(var d=0;d<a.triplesContext.length;d++){var e=a.triplesContext[d];e.graph=null;b.push(e)}if(c&&c.length>0&&c[0].length>0&&(b=b.concat(c[0][0].quadsContext),c[0][2]!=null&&c[0][2].triplesContext!=null))for(d=0;d<c[0][2].triplesContext.length;d++)e=c[0][2].triplesContext[d],e.graph=null,b.push(e);return{token:"quads",quadsContext:b}}(d[0],d[1]):null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[47] Quads");z[b]={nextPos:a,result:e};return e}
function gb(){var b="QuadsNotTriples@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;for(var k=a,e=a,d=[],s=r();s!==null;)d.push(s),s=r();if(d!==null)if(c.substr(a,1)==="G"?(s="G",a+=1):(s=null,j&&h('"G"')),s===null&&(c.substr(a,1)==="g"?(s="g",a+=1):(s=null,j&&h('"g"')),s=s!==null?s:null),s!==null){if(c.substr(a,1)==="R"){var n="R";a+=1}else n=null,j&&h('"R"');n===null&&(c.substr(a,1)==="r"?(n="r",a+=1):(n=null,j&&h('"r"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="A"){var o="A";a+=
1}else o=null,j&&h('"A"');o===null&&(c.substr(a,1)==="a"?(o="a",a+=1):(o=null,j&&h('"a"')),o=o!==null?o:null);if(o!==null){if(c.substr(a,1)==="P"){var v="P";a+=1}else v=null,j&&h('"P"');v===null&&(c.substr(a,1)==="p"?(v="p",a+=1):(v=null,j&&h('"p"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="H"){var i="H";a+=1}else i=null,j&&h('"H"');i===null&&(c.substr(a,1)==="h"?(i="h",a+=1):(i=null,j&&h('"h"')),i=i!==null?i:null);if(i!==null){for(var g=[],m=r();m!==null;)g.push(m),m=r();if(g!==null)if(m=
ja(),m!==null){for(var q=[],B=r();B!==null;)q.push(B),B=r();if(q!==null)if(c.substr(a,1)==="{"?(B="{",a+=1):(B=null,j&&h('"{"')),B!==null){for(var y=[],w=r();w!==null;)y.push(w),w=r();if(y!==null)if(w=oa(),w=w!==null?w:"",w!==null){for(var u=[],D=r();D!==null;)u.push(D),D=r();if(u!==null)if(c.substr(a,1)==="}"?(D="}",a+=1):(D=null,j&&h('"}"')),D!==null){for(var C=[],x=r();x!==null;)C.push(x),x=r();C!==null?d=[d,s,n,o,v,i,g,m,q,B,y,w,u,D,C]:(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=null,
a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e;else d=null,a=e;e=d!==null?function(a,c){for(var b=[],d=0;d<c.triplesContext.length;d++){var e=c.triplesContext[d];e.graph=a;b.push(e)}return{token:"quadsnottriples",quadsContext:b}}(d[7],d[11]):null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[48] QuadsNotTriples");z[b]={nextPos:a,result:e};return e}function oa(){var b="TriplesTemplate@"+
a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a,d=Ja();if(d!==null){for(var s=a,n=[],o=r();o!==null;)n.push(o),o=r();if(n!==null)if(c.substr(a,1)==="."?(o=".",a+=1):(o=null,j&&h('"."')),o!==null){for(var v=[],i=r();i!==null;)v.push(i),i=r();v!==null?(i=oa(),i=i!==null?i:"",i!==null?n=[n,o,v,i]:(n=null,a=s)):(n=null,a=s)}else n=null,a=s;else n=null,a=s;s=n!==null?n:"";s!==null?d=[d,s]:(d=null,a=e)}else d=null,a=e;e=d!==null?function(a,c){var b=a.triplesContext;typeof c==="object"&&c.length!=
null&&c[3].triplesContext!=null&&(b=b.concat(c[3].triplesContext));return{token:"triplestemplate",triplesContext:b}}(d[0],d[1]):null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[49] TriplesTemplate");z[b]={nextPos:a,result:e};return e}function V(){var b="GroupGraphPattern@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a;if(c.substr(a,1)==="{"){var d="{";a+=1}else d=null,j&&h('"{"');if(d!==null){for(var s=[],n=r();n!==null;)s.push(n),n=r();if(s!==null)if(n=G(),n!==null){for(var o=[],
v=r();v!==null;)o.push(v),v=r();o!==null?(c.substr(a,1)==="}"?(v="}",a+=1):(v=null,j&&h('"}"')),v!==null?d=[d,s,n,o,v]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=null,a=e;e=d!==null?d[2]:null;e===null&&(e=null,a=k);if(e!==null)k=e;else{e=k=a;c.substr(a,1)==="{"?(d="{",a+=1):(d=null,j&&h('"{"'));if(d!==null){s=[];for(n=r();n!==null;)s.push(n),n=r();if(s!==null)if(n=Hb(),n!==null){o=[];for(v=r();v!==null;)o.push(v),v=r();o!==null?(c.substr(a,1)==="}"?(v="}",a+=1):(v=null,j&&h('"}"')),
v!==null?d=[d,s,n,o,v]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=null,a=e;e=d!==null?d[2]:null;e===null&&(e=null,a=k);k=e!==null?e:null}(j=f)&&k===null&&h("[50] GroupGraphPattern");z[b]={nextPos:a,result:k};return k}function Hb(){var b="GroupGraphPatternSub@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a,d=na(),d=d!==null?d:"";if(d!==null){for(var s=[],n=r();n!==null;)s.push(n),n=r();if(s!==null){var n=[],o=a,v=hb();if(v!==null){for(var i=[],g=r();g!==null;)i.push(g),
g=r();if(i!==null)if(c.substr(a,1)==="."?(g=".",a+=1):(g=null,j&&h('"."')),g=g!==null?g:"",g!==null){for(var m=[],q=r();q!==null;)m.push(q),q=r();m!==null?(q=na(),q=q!==null?q:"",q!==null?v=[v,i,g,m,q]:(v=null,a=o)):(v=null,a=o)}else v=null,a=o;else v=null,a=o}else v=null,a=o;for(;v!==null;)if(n.push(v),o=a,v=hb(),v!==null){i=[];for(g=r();g!==null;)i.push(g),g=r();if(i!==null)if(c.substr(a,1)==="."?(g=".",a+=1):(g=null,j&&h('"."')),g=g!==null?g:"",g!==null){m=[];for(q=r();q!==null;)m.push(q),q=r();
m!==null?(q=na(),q=q!==null?q:"",q!==null?v=[v,i,g,m,q]:(v=null,a=o)):(v=null,a=o)}else v=null,a=o;else v=null,a=o}else v=null,a=o;n!==null?d=[d,s,n]:(d=null,a=e)}else d=null,a=e}else d=null,a=e;e=d!==null?function(a,c){var b=[];a!=null&&a!=[]&&b.push(a);for(var d=0;d<c.length;d++)for(var e=0;e<c[d].length;e++)c[d][e].token!=null&&b.push(c[d][e]);for(var h=[],f=[],j=[],d=0;d<b.length;d++)if(b[d].token!="triplespattern"&&b[d].token!="filter"){if(f.length!=0||j.length!=0){for(var n=[],e=0;e<f.length;e++)n=
n.concat(f[e].triplesContext);n.length>0&&h.push({token:"basicgraphpattern",triplesContext:n});f=[]}h.push(b[d])}else b[d].token==="triplespattern"?f.push(b[d]):j.push(b[d]);if(f.length!=0||j.length!=0){n=[];for(e=0;e<f.length;e++)n=n.concat(f[e].triplesContext);n.length>0&&h.push({token:"basicgraphpattern",triplesContext:n})}return{token:"groupgraphpattern",patterns:h,filters:j}}(d[0],d[2]):null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[51] GroupGraphPatternSub");z[b]={nextPos:a,result:e};return e}
function na(){var b="TriplesBlock@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a,d=Ja();if(d!==null){for(var s=a,n=[],o=r();o!==null;)n.push(o),o=r();if(n!==null)if(c.substr(a,1)==="."?(o=".",a+=1):(o=null,j&&h('"."')),o!==null){var v=na(),v=v!==null?v:"";v!==null?n=[n,o,v]:(n=null,a=s)}else n=null,a=s;else n=null,a=s;s=n!==null?n:"";s!==null?d=[d,s]:(d=null,a=e)}else d=null,a=e;e=d!==null?function(a,c){var b=a.triplesContext;typeof c==="object"&&c.length!=null&&c[2].triplesContext!=
null&&(b=b.concat(c[2].triplesContext));return{token:"triplespattern",triplesContext:b}}(d[0],d[1]):null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[54] TriplesBlock");z[b]={nextPos:a,result:e};return e}function hb(){var c="GraphPatternNotTriples@"+a,b=z[c];if(b)return a=b.nextPos,b.result;b=j;j=!1;var f=Ib();f===null&&(f=Jb(),f===null&&(f=Kb(),f===null&&(f=Lb(),f===null&&(f=Mb(),f===null&&(f=Nb(),f=f!==null?f:null)))));(j=b)&&f===null&&h("[53] GraphPatternNotTriples");z[c]={nextPos:a,result:f};return f}
function Jb(){var b="OptionalGraphPattern@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;for(var k=a,e=a,d=[],s=r();s!==null;)d.push(s),s=r();if(d!==null)if(c.substr(a,8)==="OPTIONAL"?(s="OPTIONAL",a+=8):(s=null,j&&h('"OPTIONAL"')),s!==null){for(var n=[],o=r();o!==null;)n.push(o),o=r();n!==null?(o=V(),o!==null?d=[d,s,n,o]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e;else d=null,a=e;e=d!==null?{token:"optionalgraphpattern",value:d[3]}:null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[54] OptionalGraphPattern");
z[b]={nextPos:a,result:e};return e}function Lb(){var b="GraphGraphPattern@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;for(var k=a,e=a,d=[],s=r();s!==null;)d.push(s),s=r();if(d!==null)if(c.substr(a,1)==="G"?(s="G",a+=1):(s=null,j&&h('"G"')),s===null&&(c.substr(a,1)==="g"?(s="g",a+=1):(s=null,j&&h('"g"')),s=s!==null?s:null),s!==null){if(c.substr(a,1)==="R"){var n="R";a+=1}else n=null,j&&h('"R"');n===null&&(c.substr(a,1)==="r"?(n="r",a+=1):(n=null,j&&h('"r"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,
1)==="A"){var o="A";a+=1}else o=null,j&&h('"A"');o===null&&(c.substr(a,1)==="a"?(o="a",a+=1):(o=null,j&&h('"a"')),o=o!==null?o:null);if(o!==null){if(c.substr(a,1)==="P"){var v="P";a+=1}else v=null,j&&h('"P"');v===null&&(c.substr(a,1)==="p"?(v="p",a+=1):(v=null,j&&h('"p"')),v=v!==null?v:null);if(v!==null){if(c.substr(a,1)==="H"){var i="H";a+=1}else i=null,j&&h('"H"');i===null&&(c.substr(a,1)==="h"?(i="h",a+=1):(i=null,j&&h('"h"')),i=i!==null?i:null);if(i!==null){for(var g=[],m=r();m!==null;)g.push(m),
m=r();if(g!==null)if(m=ja(),m!==null){for(var q=[],B=r();B!==null;)q.push(B),B=r();q!==null?(B=V(),B!==null?d=[d,s,n,o,v,i,g,m,q,B]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e;else d=null,a=e;e=d!==null?function(a,c){for(var b=0;b<c.patterns.length;b++)for(var d=c.patterns[b],e=0;e<d.triplesContext.length;e++)d.triplesContext[e].graph=a;c.token="groupgraphpattern";return c}(d[7],d[9]):null;e===null&&(e=
null,a=k);(j=f)&&e===null&&h("[55] GraphGraphPattern");z[b]={nextPos:a,result:e};return e}function Mb(){var b="ServiceGraphPattern@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a;if(c.substr(a,7)==="SERVICE"){var d="SERVICE";a+=7}else d=null,j&&h('"SERVICE"');if(d!==null){var s=ja();if(s!==null){var n=V();n!==null?d=[d,s,n]:(d=null,a=e)}else d=null,a=e}else d=null,a=e;e=d!==null?{token:"servicegraphpattern",status:"todo",value:[d[1],d[2]]}:null;e===null&&(e=null,a=k);(j=f)&&e===null&&
h("[56] ServiceGraphPattern");z[b]={nextPos:a,result:e};return e}function Kb(){var b="MinusGraphPattern@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a;if(c.substr(a,5)==="MINUS"){var d="MINUS";a+=5}else d=null,j&&h('"MINUS"');if(d!==null){var s=V();s!==null?d=[d,s]:(d=null,a=e)}else d=null,a=e;e=d!==null?{token:"minusgraphpattern",status:"todo",value:d[1]}:null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[57] MinusGraphPattern");z[b]={nextPos:a,result:e};return e}function Ib(){var b=
"GroupOrUnionGraphPattern@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a,d=V();if(d!==null){for(var s=[],n=a,o=[],v=r();v!==null;)o.push(v),v=r();if(o!==null)if(c.substr(a,5)==="UNION"?(v="UNION",a+=5):(v=null,j&&h('"UNION"')),v!==null){for(var i=[],g=r();g!==null;)i.push(g),g=r();i!==null?(g=V(),g!==null?o=[o,v,i,g]:(o=null,a=n)):(o=null,a=n)}else o=null,a=n;else o=null,a=n;for(;o!==null;){s.push(o);n=a;o=[];for(v=r();v!==null;)o.push(v),v=r();if(o!==null)if(c.substr(a,5)==="UNION"?
(v="UNION",a+=5):(v=null,j&&h('"UNION"')),v!==null){i=[];for(g=r();g!==null;)i.push(g),g=r();i!==null?(g=V(),g!==null?o=[o,v,i,g]:(o=null,a=n)):(o=null,a=n)}else o=null,a=n;else o=null,a=n}s!==null?d=[d,s]:(d=null,a=e)}else d=null,a=e;e=d!==null?function(a,c){if(c.length===0)return a;else{for(var b={token:"graphunionpattern",value:[a]},d=0;d<c.length;d++)d==c.length-1?b.value.push(c[d][3]):(b.value.push(c[d][3]),b={token:"graphunionpattern",value:[b]});return b}}(d[0],d[1]):null;e===null&&(e=null,
a=k);(j=f)&&e===null&&h("[58] GroupOrUnionGraphPattern");z[b]={nextPos:a,result:e};return e}function Nb(){var b="Filter@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;for(var k=a,e=a,d=[],s=r();s!==null;)d.push(s),s=r();if(d!==null)if(c.substr(a,1)==="F"?(s="F",a+=1):(s=null,j&&h('"F"')),s===null&&(c.substr(a,1)==="f"?(s="f",a+=1):(s=null,j&&h('"f"')),s=s!==null?s:null),s!==null){if(c.substr(a,1)==="I"){var n="I";a+=1}else n=null,j&&h('"I"');n===null&&(c.substr(a,1)==="i"?(n="i",a+=1):(n=null,
j&&h('"i"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="L"){var o="L";a+=1}else o=null,j&&h('"L"');o===null&&(c.substr(a,1)==="l"?(o="l",a+=1):(o=null,j&&h('"l"')),o=o!==null?o:null);if(o!==null){if(c.substr(a,1)==="T"){var i="T";a+=1}else i=null,j&&h('"T"');i===null&&(c.substr(a,1)==="t"?(i="t",a+=1):(i=null,j&&h('"t"')),i=i!==null?i:null);if(i!==null){if(c.substr(a,1)==="E"){var g="E";a+=1}else g=null,j&&h('"E"');g===null&&(c.substr(a,1)==="e"?(g="e",a+=1):(g=null,j&&h('"e"')),g=g!==null?
g:null);if(g!==null){if(c.substr(a,1)==="R"){var t="R";a+=1}else t=null,j&&h('"R"');t===null&&(c.substr(a,1)==="r"?(t="r",a+=1):(t=null,j&&h('"r"')),t=t!==null?t:null);if(t!==null){for(var m=[],q=r();q!==null;)m.push(q),q=r();m!==null?(q=wa(),q!==null?d=[d,s,n,o,i,g,t,m,q]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e;else d=null,a=e;e=d!==null?{token:"filter",value:d[8]}:null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[59] Filter");
z[b]={nextPos:a,result:e};return e}function wa(){var c="Constraint@"+a,b=z[c];if(b)return a=b.nextPos,b.result;b=j;j=!1;var f=Ea();f===null&&(f=Da(),f===null&&(f=Wa(),f=f!==null?f:null));(j=b)&&f===null&&h("[60] Constraint");z[c]={nextPos:a,result:f};return f}function Wa(){var c="FunctionCall@"+a,b=z[c];if(b)return a=b.nextPos,b.result;b=j;j=!1;var f=a,e=a,d=S();if(d!==null){var s=ib();s!==null?d=[d,s]:(d=null,a=e)}else d=null,a=e;e=d!==null?function(a,c){var b={token:"expression",expressionType:"irireforfunction"};
b.iriref=a;b.args=c.value;return b}(d[0],d[1]):null;e===null&&(e=null,a=f);(j=b)&&e===null&&h("[61] FunctionCall");z[c]={nextPos:a,result:e};return e}function ib(){var b="ArgList@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=ka()!==null?{token:"args",value:[]}:null;e===null&&(e=null,a=k);if(e!==null)k=e;else{e=k=a;if(c.substr(a,1)==="("){var d="(";a+=1}else d=null,j&&h('"("');if(d!==null){if(c.substr(a,8)==="DISTINCT"){var s="DISTINCT";a+=8}else s=null,j&&h('"DISTINCT"');s=s!==null?
s:"";if(s!==null){var n=L();if(n!==null){var o=[],i=a;if(c.substr(a,1)===","){var g=",";a+=1}else g=null,j&&h('","');if(g!==null){var t=L();t!==null?g=[g,t]:(g=null,a=i)}else g=null,a=i;for(;g!==null;)o.push(g),i=a,c.substr(a,1)===","?(g=",",a+=1):(g=null,j&&h('","')),g!==null?(t=L(),t!==null?g=[g,t]:(g=null,a=i)):(g=null,a=i);o!==null?(c.substr(a,1)===")"?(i=")",a+=1):(i=null,j&&h('")"')),i!==null?d=[d,s,n,o,i]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e}else d=null,a=e}else d=null,a=e;e=d!==null?
function(a,c,b){cleanEx=[];for(var d=0;d<b.length;d++)cleanEx.push(b[d][1]);b={token:"args"};b.value=[c].concat(cleanEx);b.distinct=a==="DISTINCT"?!0:!1;return b}(d[1],d[2],d[3]):null;e===null&&(e=null,a=k);k=e!==null?e:null}(j=f)&&k===null&&h("[62] ArgList");z[b]={nextPos:a,result:k};return k}function Ob(){var b="ExpressionList@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=ka()!==null?{token:"args",value:[]}:null;e===null&&(e=null,a=k);if(e!==null)k=e;else{e=k=a;if(c.substr(a,1)===
"("){var d="(";a+=1}else d=null,j&&h('"("');if(d!==null){var s=L();if(s!==null){var n=[],o=a;if(c.substr(a,1)===","){var i=",";a+=1}else i=null,j&&h('","');if(i!==null){var g=L();g!==null?i=[i,g]:(i=null,a=o)}else i=null,a=o;for(;i!==null;)n.push(i),o=a,c.substr(a,1)===","?(i=",",a+=1):(i=null,j&&h('","')),i!==null?(g=L(),g!==null?i=[i,g]:(i=null,a=o)):(i=null,a=o);n!==null?(c.substr(a,1)===")"?(o=")",a+=1):(o=null,j&&h('")"')),o!==null?d=[d,s,n,o]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e}else d=
null,a=e;e=d!==null?function(a,c){cleanEx=[];for(var b=0;b<c.length;b++)cleanEx.push(c[b][1]);b={token:"args"};b.value=[a].concat(cleanEx);return b}(d[1],d[2]):null;e===null&&(e=null,a=k);k=e!==null?e:null}(j=f)&&k===null&&h("[63] ExpressionList");z[b]={nextPos:a,result:k};return k}function ub(){var b="ConstructTemplate@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a;if(c.substr(a,1)==="{"){var d="{";a+=1}else d=null,j&&h('"{"');if(d!==null){for(var s=[],n=r();n!==null;)s.push(n),
n=r();if(s!==null)if(n=jb(),n=n!==null?n:"",n!==null){for(var o=[],i=r();i!==null;)o.push(i),i=r();o!==null?(c.substr(a,1)==="}"?(i="}",a+=1):(i=null,j&&h('"}"')),i!==null?d=[d,s,n,o,i]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=null,a=e;e=d!==null?d[2]:null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[64] ConstructTemplate");z[b]={nextPos:a,result:e};return e}function jb(){var b="ConstructTriples@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a,d=Ja();if(d!==
null){for(var s=a,n=[],o=r();o!==null;)n.push(o),o=r();if(n!==null)if(c.substr(a,1)==="."?(o=".",a+=1):(o=null,j&&h('"."')),o!==null){for(var i=[],g=r();g!==null;)i.push(g),g=r();i!==null?(g=jb(),g=g!==null?g:"",g!==null?n=[n,o,i,g]:(n=null,a=s)):(n=null,a=s)}else n=null,a=s;else n=null,a=s;s=n!==null?n:"";s!==null?d=[d,s]:(d=null,a=e)}else d=null,a=e;e=d!==null?function(a,c){var b=a.triplesContext;typeof c==="object"&&c.length!=null&&c[3].triplesContext!=null&&(b=b.concat(c[3].triplesContext));return{token:"triplestemplate",
triplesContext:b}}(d[0],d[1]):null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[65] ConstructTriples");z[b]={nextPos:a,result:e};return e}function Ja(){var c="TriplesSameSubject@"+a,b=z[c];if(b)return a=b.nextPos,b.result;b=j;j=!1;for(var f=a,e=a,d=[],s=r();s!==null;)d.push(s),s=r();if(d!==null)if(s=kb(),s!==null){for(var n=[],o=r();o!==null;)n.push(o),o=r();n!==null?(o=ya(),o!==null?d=[d,s,n,o]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e;else d=null,a=e;e=d!==null?function(a,c){var b=c.triplesContext;
if(c.pairs)for(var d=0;d<c.pairs.length;d++){var e=c.pairs[d],h=null;a.token&&a.token==="triplesnodecollection"?(h={subject:a.chainSubject[0],predicate:e[0],object:e[1]},b.push(h),b=b.concat(a.triplesContext)):(h={subject:a,predicate:e[0],object:e[1]},b.push(h))}d={token:"triplessamesubject"};d.triplesContext=b;d.chainSubject=a;return d}(d[1],d[3]):null;e===null&&(e=null,a=f);if(e!==null)f=e;else{e=f=a;d=[];for(s=r();s!==null;)d.push(s),s=r();if(d!==null)if(s=lb(),s!==null){n=[];for(o=r();o!==null;)n.push(o),
o=r();n!==null?(o=Pb(),o!==null?d=[d,s,n,o]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e;else d=null,a=e;e=d!==null?function(a,c){var b=a.triplesContext,d=a.chainSubject;if(c.pairs)for(var e=0;e<c.pairs.length;e++){var h=c.pairs[e];if(a.token==="triplesnodecollection")for(var f=0;f<d.length;f++){var j=d[f];if(j.triplesContext!=null){var n={subject:j.chainSubject,predicate:h[0],object:h[1]};b.concat(j.triplesContext)}else n={subject:d[f],predicate:h[0],object:h[1]},b.push(n)}else n={subject:d,predicate:h[0],
object:h[1]},b.push(n)}e={token:"triplessamesubject"};e.triplesContext=b;e.chainSubject=d;return e}(d[1],d[3]):null;e===null&&(e=null,a=f);f=e!==null?e:null}(j=b)&&f===null&&h("[66] TriplesSameSubject");z[c]={nextPos:a,result:f};return f}function ya(){var b="PropertyListNotEmpty@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a,d=Ka();if(d!==null){for(var s=[],n=r();n!==null;)s.push(n),n=r();if(s!==null)if(n=la(),n!==null){for(var o=[],i=a,g=[],t=r();t!==null;)g.push(t),t=r();if(g!==
null)if(c.substr(a,1)===";"?(t=";",a+=1):(t=null,j&&h('";"')),t!==null){for(var m=[],q=r();q!==null;)m.push(q),q=r();if(m!==null){var q=a,w=Ka();if(w!==null){for(var y=[],u=r();u!==null;)y.push(u),u=r();y!==null?(u=la(),u!==null?w=[w,y,u]:(w=null,a=q)):(w=null,a=q)}else w=null,a=q;q=w!==null?w:"";q!==null?g=[g,t,m,q]:(g=null,a=i)}else g=null,a=i}else g=null,a=i;else g=null,a=i;for(;g!==null;){o.push(g);i=a;g=[];for(t=r();t!==null;)g.push(t),t=r();if(g!==null)if(c.substr(a,1)===";"?(t=";",a+=1):(t=
null,j&&h('";"')),t!==null){m=[];for(q=r();q!==null;)m.push(q),q=r();if(m!==null){q=a;w=Ka();if(w!==null){y=[];for(u=r();u!==null;)y.push(u),u=r();y!==null?(u=la(),u!==null?w=[w,y,u]:(w=null,a=q)):(w=null,a=q)}else w=null,a=q;q=w!==null?w:"";q!==null?g=[g,t,m,q]:(g=null,a=i)}else g=null,a=i}else g=null,a=i;else g=null,a=i}o!==null?d=[d,s,n,o]:(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=null,a=e;e=d!==null?function(a,c,b){token={token:"propertylist"};for(var d=[],e=[],h=0;h<c.length;h++)c[h].triplesContext!=
null?(d=d.concat(c[h].triplesContext),c[h].token==="triplesnodecollection"&&c[h].chainSubject.length!=null?e.push([a,c[h].chainSubject[0]]):e.push([a,c[h].chainSubject])):e.push([a,c[h]]);for(h=0;h<b.length;h++)for(var c=b[h][3],a=c[0],c=c[2]||[],f=0;f<c.length;f++)c[f].triplesContext!=null?(d=d.concat(c[f].triplesContext),e.push([a,c[f].chainSubject])):e.push([a,c[f]]);token.pairs=e;token.triplesContext=d;return token}(d[0],d[2],d[3]):null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[67] PropertyListNotEmpty");
z[b]={nextPos:a,result:e};return e}function Pb(){var c="PropertyList@"+a,b=z[c];if(b)return a=b.nextPos,b.result;b=j;j=!1;var f=ya(),f=f!==null?f:"";(j=b)&&f===null&&h("[68] PropertyList");z[c]={nextPos:a,result:f};return f}function la(){var b="ObjectList@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a,d=pa();if(d!==null){for(var s=[],n=r();n!==null;)s.push(n),n=r();if(s!==null){var n=[],o=a;if(c.substr(a,1)===","){var i=",";a+=1}else i=null,j&&h('","');if(i!==null){for(var g=[],
m=r();m!==null;)g.push(m),m=r();g!==null?(m=pa(),m!==null?i=[i,g,m]:(i=null,a=o)):(i=null,a=o)}else i=null,a=o;for(;i!==null;)if(n.push(i),o=a,c.substr(a,1)===","?(i=",",a+=1):(i=null,j&&h('","')),i!==null){g=[];for(m=r();m!==null;)g.push(m),m=r();g!==null?(m=pa(),m!==null?i=[i,g,m]:(i=null,a=o)):(i=null,a=o)}else i=null,a=o;n!==null?d=[d,s,n]:(d=null,a=e)}else d=null,a=e}else d=null,a=e;e=d!==null?function(a,c){var b=[];b.push(a);for(var d=0;d<c.length;d++)for(var e=0;e<c[d].length;e++)typeof c[d][e]==
"object"&&c[d][e].token!=null&&b.push(c[d][e]);return b}(d[0],d[2]):null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[69] ObjectList");z[b]={nextPos:a,result:e};return e}function Ka(){var b="Verb@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var i=ja();if(i===null){i=a;if(c.substr(a,1)==="a"){var e="a";a+=1}else e=null,j&&h('"a"');e=e!==null?{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}:null;e===null&&(e=null,a=i);i=e!==null?e:null}(j=f)&&i===
null&&h("[71] Verb");z[b]={nextPos:a,result:i};return i}function La(){var c="VerbPath@"+a,b=z[c];if(b)return a=b.nextPos,b.result;b=j;j=!1;var f=a,e=mb(),e=e!==null?e:null;e===null&&(e=null,a=f);(j=b)&&e===null&&h("[75]");z[c]={nextPos:a,result:e};return e}function mb(){var b="PathAlternative@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var i=a,e=Ma();if(e!==null){var d=[],s=a;if(c.substr(a,1)==="|"){var n="|";a+=1}else n=null,j&&h('"|"');if(n!==null){var o=Ma();o!==null?n=[n,o]:(n=null,a=
s)}else n=null,a=s;for(;n!==null;)d.push(n),s=a,c.substr(a,1)==="|"?(n="|",a+=1):(n=null,j&&h('"|"')),n!==null?(o=Ma(),o!==null?n=[n,o]:(n=null,a=s)):(n=null,a=s);d!==null?e=[e,d]:(e=null,a=i)}else e=null,a=i;(j=f)&&e===null&&h("[78] PathAlternative");z[b]={nextPos:a,result:e};return e}function Ma(){var b="PathSequence@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var i=a,e=Na();if(e!==null){var d=[],s=a;if(c.substr(a,1)==="/"){var n="/";a+=1}else n=null,j&&h('"/"');if(n!==null){var o=Na();
o!==null?n=[n,o]:(n=null,a=s)}else n=null,a=s;for(;n!==null;)d.push(n),s=a,c.substr(a,1)==="/"?(n="/",a+=1):(n=null,j&&h('"/"')),n!==null?(o=Na(),o!==null?n=[n,o]:(n=null,a=s)):(n=null,a=s);d!==null?e=[e,d]:(e=null,a=i)}else e=null,a=i;(j=f)&&e===null&&h("[79] PathSequence");z[b]={nextPos:a,result:e};return e}function nb(){var c="PathElt@"+a,b=z[c];if(b)return a=b.nextPos,b.result;b=j;j=!1;var f=a,e=Qb();if(e!==null){var d=Rb(),d=d!==null?d:"";d!==null?e=[e,d]:(e=null,a=f)}else e=null,a=f;(j=b)&&
e===null&&h("[88] PathElt");z[c]={nextPos:a,result:e};return e}function Na(){var b="PathEltOrInverse@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var i=nb();if(i===null){i=a;if(c.substr(a,1)==="^"){var e="^";a+=1}else e=null,j&&h('"^"');if(e!==null){var d=nb();d!==null?e=[e,d]:(e=null,a=i)}else e=null,a=i;i=e!==null?e:null}(j=f)&&i===null&&h("[81] PathEltOrInverse");z[b]={nextPos:a,result:i};return i}function Rb(){var b="PathMod@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;if(c.substr(a,
1)==="*"){var i="*";a+=1}else i=null,j&&h('"*"');if(i===null&&(c.substr(a,1)==="?"?(i="?",a+=1):(i=null,j&&h('"?"')),i===null&&(c.substr(a,1)==="+"?(i="+",a+=1):(i=null,j&&h('"+"')),i===null))){i=a;if(c.substr(a,1)==="{"){var e="{";a+=1}else e=null,j&&h('"{"');if(e!==null){var d=a,s=ca();if(s!==null){var n=a;if(c.substr(a,1)===","){var o=",";a+=1}else o=null,j&&h('","');if(o!==null){if(c.substr(a,1)==="}"){var k="}";a+=1}else k=null,j&&h('"}"');if(k===null){var k=a,g=ca();if(g!==null){if(c.substr(a,
1)==="}"){var m="}";a+=1}else m=null,j&&h('"}"');m!==null?g=[g,m]:(g=null,a=k)}else g=null,a=k;k=g!==null?g:null}k!==null?o=[o,k]:(o=null,a=n)}else o=null,a=n;o!==null?n=o:(c.substr(a,1)==="}"?(n="}",a+=1):(n=null,j&&h('"}"')),n=n!==null?n:null);n!==null?s=[s,n]:(s=null,a=d)}else s=null,a=d;s!==null?d=s:(d=a,c.substr(a,1)===","?(s=",",a+=1):(s=null,j&&h('","')),s!==null?(n=ca(),n!==null?(c.substr(a,1)==="}"?(o="}",a+=1):(o=null,j&&h('"}"')),o!==null?s=[s,n,o]:(s=null,a=d)):(s=null,a=d)):(s=null,a=
d),d=s!==null?s:null);d!==null?e=[e,d]:(e=null,a=i)}else e=null,a=i;i=e!==null?e:null}(j=f)&&i===null&&h("[82] PathMod");z[b]={nextPos:a,result:i};return i}function Qb(){var b="PathPrimary@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var i=S();if(i===null&&(c.substr(a,1)==="a"?(i="a",a+=1):(i=null,j&&h('"a"')),i===null)){i=a;if(c.substr(a,1)==="!"){var e="!";a+=1}else e=null,j&&h('"!"');if(e!==null){var d=Sb();d!==null?e=[e,d]:(e=null,a=i)}else e=null,a=i;if(e!==null)i=e;else{i=a;c.substr(a,
1)==="("?(e="(",a+=1):(e=null,j&&h('"("'));if(e!==null)if(d=mb(),d!==null){if(c.substr(a,1)===")"){var s=")";a+=1}else s=null,j&&h('")"');s!==null?e=[e,d,s]:(e=null,a=i)}else e=null,a=i;else e=null,a=i;i=e!==null?e:null}}(j=f)&&i===null&&h("[83] PathPrimary");z[b]={nextPos:a,result:i};return i}function Sb(){var b="PathNegatedPropertySet@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=za();if(f===null){f=a;if(c.substr(a,1)==="("){var i="(";a+=1}else i=null,j&&h('"("');if(i!==null){var e=a,d=za();if(d!==
null){var s=[],n=a;if(c.substr(a,1)==="|"){var o="|";a+=1}else o=null,j&&h('"|"');if(o!==null){var k=za();k!==null?o=[o,k]:(o=null,a=n)}else o=null,a=n;for(;o!==null;)s.push(o),n=a,c.substr(a,1)==="|"?(o="|",a+=1):(o=null,j&&h('"|"')),o!==null?(k=za(),k!==null?o=[o,k]:(o=null,a=n)):(o=null,a=n);s!==null?d=[d,s]:(d=null,a=e)}else d=null,a=e;e=d!==null?d:"";e!==null?(c.substr(a,1)===")"?(d=")",a+=1):(d=null,j&&h('")"')),d!==null?i=[i,e,d]:(i=null,a=f)):(i=null,a=f)}else i=null,a=f;f=i!==null?i:null}z[b]=
{nextPos:a,result:f};return f}function za(){var b="PathOneInPropertySet@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var i=S();if(i===null&&(c.substr(a,1)==="a"?(i="a",a+=1):(i=null,j&&h('"a"')),i===null)){i=a;if(c.substr(a,1)==="^"){var e="^";a+=1}else e=null,j&&h('"^"');if(e!==null){var d=S();d===null&&(c.substr(a,1)==="a"?(d="a",a+=1):(d=null,j&&h('"a"')),d=d!==null?d:null);d!==null?e=[e,d]:(e=null,a=i)}else e=null,a=i;i=e!==null?e:null}(j=f)&&i===null&&h("[85] PathOneInPropertySet");z[b]=
{nextPos:a,result:i};return i}function lb(){var c="TriplesNode@"+a,b=z[c];if(b)return a=b.nextPos,b.result;b=j;j=!1;var f=a,e=Tb(),e=e!==null?function(a){triplesContext=[];chainSubject=[];for(var c=null,b=0;b<a.length;b++)ea++,c=null,a[b].chainSubject==null&&a[b].triplesContext==null?c=a[b]:(c=a[b].chainSubject,triplesContext=triplesContext.concat(nextSubject.triplesContext)),c={subject:{token:"blank",label:"_:"+ea},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},
object:c},b==0&&chainSubject.push(c.subject),triplesContext.push(c),c=b===a.length-1?{subject:{token:"blank",label:"_:"+ea},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",label:"_:"+ea},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",label:"_:"+
(ea+1)}},triplesContext.push(c);return{token:"triplesnodecollection",triplesContext:triplesContext,chainSubject:chainSubject}}(e):null;e===null&&(e=null,a=f);e!==null?f=e:(f=Ub(),f=f!==null?f:null);(j=b)&&f===null&&h("[87] TriplesNode");z[c]={nextPos:a,result:f};return f}function Ub(){var b="BlankNodePropertyList@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;for(var i=a,e=a,d=[],s=r();s!==null;)d.push(s),s=r();if(d!==null)if(c.substr(a,1)==="["?(s="[",a+=1):(s=null,j&&h('"["')),s!==null){for(var n=
[],o=r();o!==null;)n.push(o),o=r();if(n!==null)if(o=ya(),o!==null){for(var k=[],g=r();g!==null;)k.push(g),g=r();if(k!==null)if(c.substr(a,1)==="]"?(g="]",a+=1):(g=null,j&&h('"]"')),g!==null){for(var m=[],q=r();q!==null;)m.push(q),q=r();m!==null?d=[d,s,n,o,k,g,m]:(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e;e=d!==null?function(a){ea++;for(var c={token:"blank",label:""+ea},b=[],d=0;d<a.pairs.length;d++){var e=a.pairs[d],h={};h.subject=
c;h.predicate=e[0];h.object=e[1];b.push(h)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:a.triplesContext.concat(b),chainSubject:c}}(d[3]):null;e===null&&(e=null,a=i);(j=f)&&e===null&&h("[88] BlankNodePropertyList");z[b]={nextPos:a,result:e};return e}function Tb(){var b="Collection@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;for(var i=a,e=a,d=[],s=r();s!==null;)d.push(s),s=r();if(d!==null)if(c.substr(a,1)==="("?(s="(",a+=1):(s=null,j&&h('"("')),s!==null){for(var n=
[],o=r();o!==null;)n.push(o),o=r();if(n!==null){var k=pa();if(k!==null)for(o=[];k!==null;)o.push(k),k=pa();else o=null;if(o!==null){for(var k=[],g=r();g!==null;)k.push(g),g=r();if(k!==null)if(c.substr(a,1)===")"?(g=")",a+=1):(g=null,j&&h('")"')),g!==null){for(var m=[],q=r();q!==null;)m.push(q),q=r();m!==null?d=[d,s,n,o,k,g,m]:(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e;else d=null,a=e;e=d!==null?d[3]:null;e===null&&(e=null,a=i);(j=f)&&e===null&&h("[89] Collection");
z[b]={nextPos:a,result:e};return e}function pa(){var c="GraphNode@"+a,b=z[c];if(b)return a=b.nextPos,b.result;b=j;j=!1;for(var f=a,e=a,d=[],i=r();i!==null;)d.push(i),i=r();if(d!==null)if(i=kb(),i!==null){for(var n=[],o=r();o!==null;)n.push(o),o=r();n!==null?d=[d,i,n]:(d=null,a=e)}else d=null,a=e;else d=null,a=e;if(d!==null)e=d;else{e=a;d=[];for(i=r();i!==null;)d.push(i),i=r();if(d!==null)if(i=lb(),i!==null){n=[];for(o=r();o!==null;)n.push(o),o=r();n!==null?d=[d,i,n]:(d=null,a=e)}else d=null,a=e;else d=
null,a=e;e=d!==null?d:null}e=e!==null?e[1]:null;e===null&&(e=null,a=f);(j=b)&&e===null&&h("[90] GraphNode");z[c]={nextPos:a,result:e};return e}function kb(){var c="VarOrTerm@"+a,b=z[c];if(b)return a=b.nextPos,b.result;b=j;j=!1;var f=R();f===null&&(f=Vb(),f=f!==null?f:null);(j=b)&&f===null&&h("[91] VarOrTerm");z[c]={nextPos:a,result:f};return f}function ja(){var c="VarOrIRIref@"+a,b=z[c];if(b)return a=b.nextPos,b.result;b=j;j=!1;var f=R();f===null&&(f=S(),f=f!==null?f:null);(j=b)&&f===null&&h("[92] VarOrIRIref");
z[c]={nextPos:a,result:f};return f}function R(){var c="Var@"+a,b=z[c];if(b)return a=b.nextPos,b.result;b=j;j=!1;var f=a,e=Wb();e===null&&(e=Xb(),e=e!==null?e:null);e=e!==null?function(a){var c={token:"var"};c.value=a;return c}(e):null;e===null&&(e=null,a=f);(j=b)&&e===null&&h("[93] Var");z[c]={nextPos:a,result:e};return e}function Vb(){var c="GraphTerm@"+a,b=z[c];if(b)return a=b.nextPos,b.result;b=j;j=!1;var f=S();f===null&&(f=Fa(),f===null&&(f=Ga(),f===null&&(f=Ha(),f===null&&(f=Yb(),f===null&&(f=
ka(),f=f!==null?f:null)))));(j=b)&&f===null&&h("[94] GraphTerm");z[c]={nextPos:a,result:f};return f}function L(){var b="ConditionalOrExpression@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var i=a,e=a,d=Oa();if(d!==null){for(var k=[],n=a,o=[],g=r();g!==null;)o.push(g),g=r();if(o!==null)if(c.substr(a,2)==="||"?(g="||",a+=2):(g=null,j&&h('"||"')),g!==null){for(var m=[],t=r();t!==null;)m.push(t),t=r();m!==null?(t=Oa(),t!==null?o=[o,g,m,t]:(o=null,a=n)):(o=null,a=n)}else o=null,a=n;else o=null,
a=n;for(;o!==null;){k.push(o);n=a;o=[];for(g=r();g!==null;)o.push(g),g=r();if(o!==null)if(c.substr(a,2)==="||"?(g="||",a+=2):(g=null,j&&h('"||"')),g!==null){m=[];for(t=r();t!==null;)m.push(t),t=r();m!==null?(t=Oa(),t!==null?o=[o,g,m,t]:(o=null,a=n)):(o=null,a=n)}else o=null,a=n;else o=null,a=n}k!==null?d=[d,k]:(d=null,a=e)}else d=null,a=e;e=d!==null?function(a,c){if(c.length===0)return a;for(var b={token:"expression",expressionType:"conditionalor"},d=[a],e=0;e<c.length;e++)d.push(c[e][3]);b.operands=
d;return b}(d[0],d[1]):null;e===null&&(e=null,a=i);(j=f)&&e===null&&h("[96] ConditionalOrExpression");z[b]={nextPos:a,result:e};return e}function Oa(){var b="ConditionalAndExpression@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var i=a,e=a,d=Pa();if(d!==null){for(var k=[],n=a,o=[],g=r();g!==null;)o.push(g),g=r();if(o!==null)if(c.substr(a,2)==="&&"?(g="&&",a+=2):(g=null,j&&h('"&&"')),g!==null){for(var m=[],t=r();t!==null;)m.push(t),t=r();m!==null?(t=Pa(),t!==null?o=[o,g,m,t]:(o=null,a=n)):
(o=null,a=n)}else o=null,a=n;else o=null,a=n;for(;o!==null;){k.push(o);n=a;o=[];for(g=r();g!==null;)o.push(g),g=r();if(o!==null)if(c.substr(a,2)==="&&"?(g="&&",a+=2):(g=null,j&&h('"&&"')),g!==null){m=[];for(t=r();t!==null;)m.push(t),t=r();m!==null?(t=Pa(),t!==null?o=[o,g,m,t]:(o=null,a=n)):(o=null,a=n)}else o=null,a=n;else o=null,a=n}k!==null?d=[d,k]:(d=null,a=e)}else d=null,a=e;e=d!==null?function(a,c){if(c.length===0)return a;for(var b={token:"expression",expressionType:"conditionaland"},d=[a],
e=0;e<c.length;e++)d.push(c[e][3]);b.operands=d;return b}(d[0],d[1]):null;e===null&&(e=null,a=i);(j=f)&&e===null&&h("[97] ConditionalAndExpression");z[b]={nextPos:a,result:e};return e}function Pa(){var b="RelationalExpression@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var i=a,e=a,d=T();if(d!==null){for(var k=[],n=a,o=[],g=r();g!==null;)o.push(g),g=r();if(o!==null)if(c.substr(a,1)==="="?(g="=",a+=1):(g=null,j&&h('"="')),g!==null){for(var m=[],t=r();t!==null;)m.push(t),t=r();m!==null?(t=T(),
t!==null?o=[o,g,m,t]:(o=null,a=n)):(o=null,a=n)}else o=null,a=n;else o=null,a=n;if(o!==null)n=o;else{n=a;o=[];for(g=r();g!==null;)o.push(g),g=r();if(o!==null)if(c.substr(a,2)==="!="?(g="!=",a+=2):(g=null,j&&h('"!="')),g!==null){m=[];for(t=r();t!==null;)m.push(t),t=r();m!==null?(t=T(),t!==null?o=[o,g,m,t]:(o=null,a=n)):(o=null,a=n)}else o=null,a=n;else o=null,a=n;if(o!==null)n=o;else{n=a;o=[];for(g=r();g!==null;)o.push(g),g=r();if(o!==null)if(c.substr(a,1)==="<"?(g="<",a+=1):(g=null,j&&h('"<"')),g!==
null){m=[];for(t=r();t!==null;)m.push(t),t=r();m!==null?(t=T(),t!==null?o=[o,g,m,t]:(o=null,a=n)):(o=null,a=n)}else o=null,a=n;else o=null,a=n;if(o!==null)n=o;else{n=a;o=[];for(g=r();g!==null;)o.push(g),g=r();if(o!==null)if(c.substr(a,1)===">"?(g=">",a+=1):(g=null,j&&h('">"')),g!==null){m=[];for(t=r();t!==null;)m.push(t),t=r();m!==null?(t=T(),t!==null?o=[o,g,m,t]:(o=null,a=n)):(o=null,a=n)}else o=null,a=n;else o=null,a=n;if(o!==null)n=o;else{n=a;o=[];for(g=r();g!==null;)o.push(g),g=r();if(o!==null)if(c.substr(a,
2)==="<="?(g="<=",a+=2):(g=null,j&&h('"<="')),g!==null){m=[];for(t=r();t!==null;)m.push(t),t=r();m!==null?(t=T(),t!==null?o=[o,g,m,t]:(o=null,a=n)):(o=null,a=n)}else o=null,a=n;else o=null,a=n;if(o!==null)n=o;else{n=a;o=[];for(g=r();g!==null;)o.push(g),g=r();if(o!==null)if(c.substr(a,2)===">="?(g=">=",a+=2):(g=null,j&&h('">="')),g!==null){m=[];for(t=r();t!==null;)m.push(t),t=r();m!==null?(t=T(),t!==null?o=[o,g,m,t]:(o=null,a=n)):(o=null,a=n)}else o=null,a=n;else o=null,a=n;n=o!==null?o:null}}}}}for(;n!==
null;){k.push(n);n=a;o=[];for(g=r();g!==null;)o.push(g),g=r();if(o!==null)if(c.substr(a,1)==="="?(g="=",a+=1):(g=null,j&&h('"="')),g!==null){m=[];for(t=r();t!==null;)m.push(t),t=r();m!==null?(t=T(),t!==null?o=[o,g,m,t]:(o=null,a=n)):(o=null,a=n)}else o=null,a=n;else o=null,a=n;if(o!==null)n=o;else{n=a;o=[];for(g=r();g!==null;)o.push(g),g=r();if(o!==null)if(c.substr(a,2)==="!="?(g="!=",a+=2):(g=null,j&&h('"!="')),g!==null){m=[];for(t=r();t!==null;)m.push(t),t=r();m!==null?(t=T(),t!==null?o=[o,g,m,
t]:(o=null,a=n)):(o=null,a=n)}else o=null,a=n;else o=null,a=n;if(o!==null)n=o;else{n=a;o=[];for(g=r();g!==null;)o.push(g),g=r();if(o!==null)if(c.substr(a,1)==="<"?(g="<",a+=1):(g=null,j&&h('"<"')),g!==null){m=[];for(t=r();t!==null;)m.push(t),t=r();m!==null?(t=T(),t!==null?o=[o,g,m,t]:(o=null,a=n)):(o=null,a=n)}else o=null,a=n;else o=null,a=n;if(o!==null)n=o;else{n=a;o=[];for(g=r();g!==null;)o.push(g),g=r();if(o!==null)if(c.substr(a,1)===">"?(g=">",a+=1):(g=null,j&&h('">"')),g!==null){m=[];for(t=r();t!==
null;)m.push(t),t=r();m!==null?(t=T(),t!==null?o=[o,g,m,t]:(o=null,a=n)):(o=null,a=n)}else o=null,a=n;else o=null,a=n;if(o!==null)n=o;else{n=a;o=[];for(g=r();g!==null;)o.push(g),g=r();if(o!==null)if(c.substr(a,2)==="<="?(g="<=",a+=2):(g=null,j&&h('"<="')),g!==null){m=[];for(t=r();t!==null;)m.push(t),t=r();m!==null?(t=T(),t!==null?o=[o,g,m,t]:(o=null,a=n)):(o=null,a=n)}else o=null,a=n;else o=null,a=n;if(o!==null)n=o;else{n=a;o=[];for(g=r();g!==null;)o.push(g),g=r();if(o!==null)if(c.substr(a,2)===">="?
(g=">=",a+=2):(g=null,j&&h('">="')),g!==null){m=[];for(t=r();t!==null;)m.push(t),t=r();m!==null?(t=T(),t!==null?o=[o,g,m,t]:(o=null,a=n)):(o=null,a=n)}else o=null,a=n;else o=null,a=n;n=o!==null?o:null}}}}}}k!==null?d=[d,k]:(d=null,a=e)}else d=null,a=e;e=d!==null?function(a,c){if(c.length===0)return a;else{var b={expressionType:"relationalexpression"};b.operator=c[0][1];b.op1=a;b.op2=c[0][3];b.token="expression";return b}}(d[0],d[1]):null;e===null&&(e=null,a=i);(j=f)&&e===null&&h("[99] RelationalExpression");
z[b]={nextPos:a,result:e};return e}function T(){var b="AdditiveExpression@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var i=a,e=a,d=qa();if(d!==null){for(var g=[],n=a,o=[],k=r();k!==null;)o.push(k),k=r();if(o!==null)if(c.substr(a,1)==="+"?(k="+",a+=1):(k=null,j&&h('"+"')),k!==null){for(var m=[],t=r();t!==null;)m.push(t),t=r();m!==null?(t=qa(),t!==null?o=[o,k,m,t]:(o=null,a=n)):(o=null,a=n)}else o=null,a=n;else o=null,a=n;if(o!==null)n=o;else{n=a;o=[];for(k=r();k!==null;)o.push(k),k=r();if(o!==
null)if(c.substr(a,1)==="-"?(k="-",a+=1):(k=null,j&&h('"-"')),k!==null){m=[];for(t=r();t!==null;)m.push(t),t=r();m!==null?(t=qa(),t!==null?o=[o,k,m,t]:(o=null,a=n)):(o=null,a=n)}else o=null,a=n;else o=null,a=n;if(o!==null)n=o;else{n=a;o=ra();o===null&&(o=ra(),o=o!==null?o:null);if(o!==null){k=a;m=[];for(t=r();t!==null;)m.push(t),t=r();if(m!==null)if(c.substr(a,1)==="*"?(t="*",a+=1):(t=null,j&&h('"*"')),t!==null){for(var q=[],w=r();w!==null;)q.push(w),w=r();q!==null?(w=ba(),w!==null?m=[m,t,q,w]:(m=
null,a=k)):(m=null,a=k)}else m=null,a=k;else m=null,a=k;if(m!==null)k=m;else{k=a;m=[];for(t=r();t!==null;)m.push(t),t=r();if(m!==null)if(c.substr(a,1)==="/"?(t="/",a+=1):(t=null,j&&h('"/"')),t!==null){q=[];for(w=r();w!==null;)q.push(w),w=r();q!==null?(w=ba(),w!==null?m=[m,t,q,w]:(m=null,a=k)):(m=null,a=k)}else m=null,a=k;else m=null,a=k;k=m!==null?m:null}k=k!==null?k:"";k!==null?o=[o,k]:(o=null,a=n)}else o=null,a=n;n=o!==null?o:null}}for(;n!==null;){g.push(n);n=a;o=[];for(k=r();k!==null;)o.push(k),
k=r();if(o!==null)if(c.substr(a,1)==="+"?(k="+",a+=1):(k=null,j&&h('"+"')),k!==null){m=[];for(t=r();t!==null;)m.push(t),t=r();m!==null?(t=qa(),t!==null?o=[o,k,m,t]:(o=null,a=n)):(o=null,a=n)}else o=null,a=n;else o=null,a=n;if(o!==null)n=o;else{n=a;o=[];for(k=r();k!==null;)o.push(k),k=r();if(o!==null)if(c.substr(a,1)==="-"?(k="-",a+=1):(k=null,j&&h('"-"')),k!==null){m=[];for(t=r();t!==null;)m.push(t),t=r();m!==null?(t=qa(),t!==null?o=[o,k,m,t]:(o=null,a=n)):(o=null,a=n)}else o=null,a=n;else o=null,
a=n;if(o!==null)n=o;else{n=a;o=ra();o===null&&(o=ra(),o=o!==null?o:null);if(o!==null){k=a;m=[];for(t=r();t!==null;)m.push(t),t=r();if(m!==null)if(c.substr(a,1)==="*"?(t="*",a+=1):(t=null,j&&h('"*"')),t!==null){q=[];for(w=r();w!==null;)q.push(w),w=r();q!==null?(w=ba(),w!==null?m=[m,t,q,w]:(m=null,a=k)):(m=null,a=k)}else m=null,a=k;else m=null,a=k;if(m!==null)k=m;else{k=a;m=[];for(t=r();t!==null;)m.push(t),t=r();if(m!==null)if(c.substr(a,1)==="/"?(t="/",a+=1):(t=null,j&&h('"/"')),t!==null){q=[];for(w=
r();w!==null;)q.push(w),w=r();q!==null?(w=ba(),w!==null?m=[m,t,q,w]:(m=null,a=k)):(m=null,a=k)}else m=null,a=k;else m=null,a=k;k=m!==null?m:null}k=k!==null?k:"";k!==null?o=[o,k]:(o=null,a=n)}else o=null,a=n;n=o!==null?o:null}}}g!==null?d=[d,g]:(d=null,a=e)}else d=null,a=e;e=d!==null?function(a,c){if(c.length===0)return a;var b={token:"expression",expressionType:"additiveexpression"};b.summand=a;b.summands=[];for(var d=0;d<c.length;d++){var e=c[d],h={};if(e.length==4&&typeof e[1]==="string")h.operator=
e[1],h.expression=e[3];else{var e={},f=h[0],j=h[1][1],n=h[1][3],j=null;f.value<0?(h.operator="-",f.value=-f.value):h.operator="+";e.token="expression";e.expressionType="multiplicativeexpression";e.operator=f;e.factors=[{operator:j,expression:n}];h.expression=e}b.summands.push(h)}return b}(d[0],d[1]):null;e===null&&(e=null,a=i);(j=f)&&e===null&&h("[101] AdditiveExpression");z[b]={nextPos:a,result:e};return e}function qa(){var b="MultiplicativeExpression@"+a,f=z[b];if(f)return a=f.nextPos,f.result;
f=j;j=!1;var i=a,e=a,d=ba();if(d!==null){for(var k=[],n=a,g=[],m=r();m!==null;)g.push(m),m=r();if(g!==null)if(c.substr(a,1)==="*"?(m="*",a+=1):(m=null,j&&h('"*"')),m!==null){for(var q=[],t=r();t!==null;)q.push(t),t=r();q!==null?(t=ba(),t!==null?g=[g,m,q,t]:(g=null,a=n)):(g=null,a=n)}else g=null,a=n;else g=null,a=n;if(g!==null)n=g;else{n=a;g=[];for(m=r();m!==null;)g.push(m),m=r();if(g!==null)if(c.substr(a,1)==="/"?(m="/",a+=1):(m=null,j&&h('"/"')),m!==null){q=[];for(t=r();t!==null;)q.push(t),t=r();
q!==null?(t=ba(),t!==null?g=[g,m,q,t]:(g=null,a=n)):(g=null,a=n)}else g=null,a=n;else g=null,a=n;n=g!==null?g:null}for(;n!==null;){k.push(n);n=a;g=[];for(m=r();m!==null;)g.push(m),m=r();if(g!==null)if(c.substr(a,1)==="*"?(m="*",a+=1):(m=null,j&&h('"*"')),m!==null){q=[];for(t=r();t!==null;)q.push(t),t=r();q!==null?(t=ba(),t!==null?g=[g,m,q,t]:(g=null,a=n)):(g=null,a=n)}else g=null,a=n;else g=null,a=n;if(g!==null)n=g;else{n=a;g=[];for(m=r();m!==null;)g.push(m),m=r();if(g!==null)if(c.substr(a,1)==="/"?
(m="/",a+=1):(m=null,j&&h('"/"')),m!==null){q=[];for(t=r();t!==null;)q.push(t),t=r();q!==null?(t=ba(),t!==null?g=[g,m,q,t]:(g=null,a=n)):(g=null,a=n)}else g=null,a=n;else g=null,a=n;n=g!==null?g:null}}k!==null?d=[d,k]:(d=null,a=e)}else d=null,a=e;e=d!==null?function(a,c){if(c.length===0)return a;var b={token:"expression",expressionType:"multiplicativeexpression"};b.factor=a;b.factors=[];for(var d=0;d<c.length;d++){var e=c[d],h={};h.operator=e[1];h.expression=e[3];b.factors.push(h)}return b}(d[0],
d[1]):null;e===null&&(e=null,a=i);(j=f)&&e===null&&h("[102] MultiplicativeExpression");z[b]={nextPos:a,result:e};return e}function ba(){var b="UnaryExpression@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var g=a,e=a;if(c.substr(a,1)==="!"){var d="!";a+=1}else d=null,j&&h('"!"');if(d!==null){for(var i=[],n=r();n!==null;)i.push(n),n=r();i!==null?(n=Aa(),n!==null?d=[d,i,n]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e;e=d!==null?function(a){var c={token:"expression",expressionType:"unaryexpression",
unaryexpression:"!"};c.expression=a;return c}(d[2]):null;e===null&&(e=null,a=g);if(e!==null)g=e;else{e=g=a;c.substr(a,1)==="+"?(d="+",a+=1):(d=null,j&&h('"+"'));if(d!==null){i=[];for(n=r();n!==null;)i.push(n),n=r();i!==null?(n=Aa(),n!==null?d=[d,i,n]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e;e=d!==null?function(a){var c={token:"expression",expressionType:"unaryexpression",unaryexpression:"+"};c.expression=a;return c}(d[2]):null;e===null&&(e=null,a=g);if(e!==null)g=e;else{e=g=a;c.substr(a,1)==="-"?
(d="-",a+=1):(d=null,j&&h('"-"'));if(d!==null){i=[];for(n=r();n!==null;)i.push(n),n=r();i!==null?(n=Aa(),n!==null?d=[d,i,n]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e;e=d!==null?function(a){var c={token:"expression",expressionType:"unaryexpression",unaryexpression:"-"};c.expression=a;return c}(d[2]):null;e===null&&(e=null,a=g);e!==null?g=e:(g=Aa(),g=g!==null?g:null)}}(j=f)&&g===null&&h("[103] UnaryExpression");z[b]={nextPos:a,result:g};return g}function Aa(){var c="PrimaryExpression@"+a,b=z[c];if(b)return a=
b.nextPos,b.result;b=j;j=!1;var f=Ea();if(f===null&&(f=Da(),f===null&&(f=Zb(),f===null))){var f=a,e=Fa(),e=e!==null?function(a){var c={token:"expression",expressionType:"atomic",primaryexpression:"rdfliteral"};c.value=a;return c}(e):null;e===null&&(e=null,a=f);e!==null?f=e:(f=a,e=Ga(),e=e!==null?function(a){var c={token:"expression",expressionType:"atomic",primaryexpression:"numericliteral"};c.value=a;return c}(e):null,e===null&&(e=null,a=f),e!==null?f=e:(f=a,e=Ha(),e=e!==null?function(a){var c={token:"expression",
expressionType:"atomic",primaryexpression:"booleanliteral"};c.value=a;return c}(e):null,e===null&&(e=null,a=f),e!==null?f=e:(f=$b(),f===null&&(f=a,e=R(),e=e!==null?function(a){var c={token:"expression",expressionType:"atomic",primaryexpression:"var"};c.value=a;return c}(e):null,e===null&&(e=null,a=f),f=e!==null?e:null))))}(j=b)&&f===null&&h("[104] PrimaryExpression");z[c]={nextPos:a,result:f};return f}function Ea(){var b="BrackettedExpression@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var g=
a,e=a;if(c.substr(a,1)==="("){var d="(";a+=1}else d=null,j&&h('"("');if(d!==null){for(var i=[],n=r();n!==null;)i.push(n),n=r();if(i!==null)if(n=L(),n!==null){for(var k=[],m=r();m!==null;)k.push(m),m=r();k!==null?(c.substr(a,1)===")"?(m=")",a+=1):(m=null,j&&h('")"')),m!==null?d=[d,i,n,k,m]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=null,a=e;e=d!==null?d[2]:null;e===null&&(e=null,a=g);(j=f)&&e===null&&h("[105] BrackettedExpression");z[b]={nextPos:a,result:e};return e}function Da(){var b=
"BuiltInCall@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var g=a,e=a;if(c.substr(a,1)==="S"){var d="S";a+=1}else d=null,j&&h('"S"');d===null&&(c.substr(a,1)==="s"?(d="s",a+=1):(d=null,j&&h('"s"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="T"){var i="T";a+=1}else i=null,j&&h('"T"');i===null&&(c.substr(a,1)==="t"?(i="t",a+=1):(i=null,j&&h('"t"')),i=i!==null?i:null);if(i!==null){if(c.substr(a,1)==="R"){var n="R";a+=1}else n=null,j&&h('"R"');n===null&&(c.substr(a,1)==="r"?(n="r",a+=
1):(n=null,j&&h('"r"')),n=n!==null?n:null);if(n!==null){for(var k=[],m=r();m!==null;)k.push(m),m=r();if(k!==null)if(c.substr(a,1)==="("?(m="(",a+=1):(m=null,j&&h('"("')),m!==null){for(var q=[],t=r();t!==null;)q.push(t),t=r();if(q!==null)if(t=L(),t!==null){for(var w=[],u=r();u!==null;)w.push(u),u=r();w!==null?(c.substr(a,1)===")"?(u=")",a+=1):(u=null,j&&h('")"')),u!==null?d=[d,i,n,k,m,q,t,w,u]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=
e}else d=null,a=e}else d=null,a=e;e=d!==null?function(a){var c={token:"expression",expressionType:"builtincall",builtincall:"str"};c.args=[a];return c}(d[6]):null;e===null&&(e=null,a=g);if(e!==null)g=e;else{e=g=a;c.substr(a,1)==="L"?(d="L",a+=1):(d=null,j&&h('"L"'));d===null&&(c.substr(a,1)==="l"?(d="l",a+=1):(d=null,j&&h('"l"')),d=d!==null?d:null);if(d!==null)if(c.substr(a,1)==="A"?(i="A",a+=1):(i=null,j&&h('"A"')),i===null&&(c.substr(a,1)==="a"?(i="a",a+=1):(i=null,j&&h('"a"')),i=i!==null?i:null),
i!==null)if(c.substr(a,1)==="N"?(n="N",a+=1):(n=null,j&&h('"N"')),n===null&&(c.substr(a,1)==="n"?(n="n",a+=1):(n=null,j&&h('"n"')),n=n!==null?n:null),n!==null)if(c.substr(a,1)==="G"?(k="G",a+=1):(k=null,j&&h('"G"')),k===null&&(c.substr(a,1)==="g"?(k="g",a+=1):(k=null,j&&h('"g"')),k=k!==null?k:null),k!==null){m=[];for(q=r();q!==null;)m.push(q),q=r();if(m!==null)if(c.substr(a,1)==="("?(q="(",a+=1):(q=null,j&&h('"("')),q!==null){t=[];for(w=r();w!==null;)t.push(w),w=r();if(t!==null)if(w=L(),w!==null){for(var u=
[],B=r();B!==null;)u.push(B),B=r();u!==null?(c.substr(a,1)===")"?(B=")",a+=1):(B=null,j&&h('")"')),B!==null?d=[d,i,n,k,m,q,t,w,u,B]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e;else d=null,a=e;else d=null,a=e;e=d!==null?function(a){var c={token:"expression",expressionType:"builtincall",builtincall:"lang"};c.args=[a];return c}(d[7]):null;e===null&&(e=null,a=g);if(e!==null)g=e;else{e=g=a;c.substr(a,11)==="LANGMATCHES"?(d=
"LANGMATCHES",a+=11):(d=null,j&&h('"LANGMATCHES"'));if(d!==null){i=[];for(n=r();n!==null;)i.push(n),n=r();if(i!==null)if(c.substr(a,1)==="("?(n="(",a+=1):(n=null,j&&h('"("')),n!==null){k=[];for(m=r();m!==null;)k.push(m),m=r();if(k!==null)if(m=L(),m!==null){q=[];for(t=r();t!==null;)q.push(t),t=r();if(q!==null)if(c.substr(a,1)===","?(t=",",a+=1):(t=null,j&&h('","')),t!==null){w=[];for(u=r();u!==null;)w.push(u),u=r();if(w!==null)if(u=L(),u!==null){for(var B=[],y=r();y!==null;)B.push(y),y=r();B!==null?
(c.substr(a,1)===")"?(y=")",a+=1):(y=null,j&&h('")"')),y!==null?d=[d,i,n,k,m,q,t,w,u,B,y]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e;e=d!==null?function(a,c){var b={token:"expression",expressionType:"builtincall",builtincall:"langmatches"};b.args=[a,c];return b}(d[4],d[8]):null;e===null&&(e=null,a=g);if(e!==null)g=e;else{e=g=a;c.substr(a,1)==="D"?(d="D",a+=1):(d=null,j&&
h('"D"'));d===null&&(c.substr(a,1)==="d"?(d="d",a+=1):(d=null,j&&h('"d"')),d=d!==null?d:null);if(d!==null)if(c.substr(a,1)==="A"?(i="A",a+=1):(i=null,j&&h('"A"')),i===null&&(c.substr(a,1)==="a"?(i="a",a+=1):(i=null,j&&h('"a"')),i=i!==null?i:null),i!==null)if(c.substr(a,1)==="T"?(n="T",a+=1):(n=null,j&&h('"T"')),n===null&&(c.substr(a,1)==="t"?(n="t",a+=1):(n=null,j&&h('"t"')),n=n!==null?n:null),n!==null)if(c.substr(a,1)==="A"?(k="A",a+=1):(k=null,j&&h('"A"')),k===null&&(c.substr(a,1)==="a"?(k="a",
a+=1):(k=null,j&&h('"a"')),k=k!==null?k:null),k!==null)if(c.substr(a,1)==="T"?(m="T",a+=1):(m=null,j&&h('"T"')),m===null&&(c.substr(a,1)==="t"?(m="t",a+=1):(m=null,j&&h('"t"')),m=m!==null?m:null),m!==null)if(c.substr(a,1)==="Y"?(q="Y",a+=1):(q=null,j&&h('"Y"')),q===null&&(c.substr(a,1)==="y"?(q="y",a+=1):(q=null,j&&h('"y"')),q=q!==null?q:null),q!==null)if(c.substr(a,1)==="P"?(t="P",a+=1):(t=null,j&&h('"P"')),t===null&&(c.substr(a,1)==="p"?(t="p",a+=1):(t=null,j&&h('"p"')),t=t!==null?t:null),t!==null)if(c.substr(a,
1)==="E"?(w="E",a+=1):(w=null,j&&h('"E"')),w===null&&(c.substr(a,1)==="e"?(w="e",a+=1):(w=null,j&&h('"e"')),w=w!==null?w:null),w!==null){u=[];for(B=r();B!==null;)u.push(B),B=r();if(u!==null)if(c.substr(a,1)==="("?(B="(",a+=1):(B=null,j&&h('"("')),B!==null){for(var y=[],C=r();C!==null;)y.push(C),C=r();if(y!==null)if(C=L(),C!==null){for(var x=[],D=r();D!==null;)x.push(D),D=r();x!==null?(c.substr(a,1)===")"?(D=")",a+=1):(D=null,j&&h('")"')),D!==null?d=[d,i,n,k,m,q,t,w,u,B,y,C,x,D]:(d=null,a=e)):(d=null,
a=e)}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e;else d=null,a=e;else d=null,a=e;else d=null,a=e;else d=null,a=e;else d=null,a=e;else d=null,a=e;e=d!==null?function(a){var c={token:"expression",expressionType:"builtincall",builtincall:"datatype"};c.args=[a];return c}(d[11]):null;e===null&&(e=null,a=g);if(e!==null)g=e;else{e=g=a;c.substr(a,5)==="BOUND"?(d="BOUND",a+=5):(d=null,j&&h('"BOUND"'));if(d!==null){i=[];for(n=r();n!==null;)i.push(n),n=r();
if(i!==null)if(c.substr(a,1)==="("?(n="(",a+=1):(n=null,j&&h('"("')),n!==null){k=[];for(m=r();m!==null;)k.push(m),m=r();if(k!==null)if(m=R(),m!==null){q=[];for(t=r();t!==null;)q.push(t),t=r();q!==null?(c.substr(a,1)===")"?(t=")",a+=1):(t=null,j&&h('")"')),t!==null?d=[d,i,n,k,m,q,t]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e;e=d!==null?function(a){var c={token:"expression",expressionType:"builtincall",builtincall:"bound"};c.args=[a];return c}(d[4]):
null;e===null&&(e=null,a=g);if(e!==null)g=e;else{e=g=a;c.substr(a,3)==="IRI"?(d="IRI",a+=3):(d=null,j&&h('"IRI"'));if(d!==null){i=[];for(n=r();n!==null;)i.push(n),n=r();if(i!==null)if(c.substr(a,1)==="("?(n="(",a+=1):(n=null,j&&h('"("')),n!==null){k=[];for(m=r();m!==null;)k.push(m),m=r();if(k!==null)if(m=L(),m!==null){q=[];for(t=r();t!==null;)q.push(t),t=r();q!==null?(c.substr(a,1)===")"?(t=")",a+=1):(t=null,j&&h('")"')),t!==null?d=[d,i,n,k,m,q,t]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e;else d=
null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e;e=d!==null?function(a){var c={token:"expression",expressionType:"builtincall",builtincall:"iri"};c.args=[a];return c}(d[4]):null;e===null&&(e=null,a=g);if(e!==null)g=e;else{e=g=a;c.substr(a,3)==="URI"?(d="URI",a+=3):(d=null,j&&h('"URI"'));if(d!==null){i=[];for(n=r();n!==null;)i.push(n),n=r();if(i!==null)if(c.substr(a,1)==="("?(n="(",a+=1):(n=null,j&&h('"("')),n!==null){k=[];for(m=r();m!==null;)k.push(m),m=r();if(k!==null)if(m=L(),m!==null){q=
[];for(t=r();t!==null;)q.push(t),t=r();q!==null?(c.substr(a,1)===")"?(t=")",a+=1):(t=null,j&&h('")"')),t!==null?d=[d,i,n,k,m,q,t]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e;e=d!==null?function(a){var c={token:"expression",expressionType:"builtincall",builtincall:"uri"};c.args=[a];return c}(d[4]):null;e===null&&(e=null,a=g);if(e!==null)g=e;else{e=g=a;c.substr(a,5)==="BNODE"?(d="BNODE",a+=5):(d=null,j&&h('"BNODE"'));if(d!==null){i=[];for(n=
r();n!==null;)i.push(n),n=r();if(i!==null){n=a;c.substr(a,1)==="("?(k="(",a+=1):(k=null,j&&h('"("'));if(k!==null){m=[];for(q=r();q!==null;)m.push(q),q=r();if(m!==null)if(q=L(),q!==null){t=[];for(w=r();w!==null;)t.push(w),w=r();t!==null?(c.substr(a,1)===")"?(w=")",a+=1):(w=null,j&&h('")"')),w!==null?k=[k,m,q,t,w]:(k=null,a=n)):(k=null,a=n)}else k=null,a=n;else k=null,a=n}else k=null,a=n;k!==null?n=k:(n=ka(),n=n!==null?n:null);n!==null?d=[d,i,n]:(d=null,a=e)}else d=null,a=e}else d=null,a=e;e=d!==null?
function(a){var c={token:"expression",expressionType:"builtincall",builtincall:"bnode"};c.args=a.length===5?[a[2]]:null;return c}(d[2]):null;e===null&&(e=null,a=g);if(e!==null)g=e;else{e=g=a;c.substr(a,8)==="COALESCE"?(d="COALESCE",a+=8):(d=null,j&&h('"COALESCE"'));if(d!==null){i=[];for(n=r();n!==null;)i.push(n),n=r();i!==null?(n=Ob(),n!==null?d=[d,i,n]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e;e=d!==null?function(a){var c={token:"expression",expressionType:"builtincall",builtincall:"coalesce"};
c.args=a;return c}(d[2]):null;e===null&&(e=null,a=g);if(e!==null)g=e;else{e=g=a;c.substr(a,2)==="IF"?(d="IF",a+=2):(d=null,j&&h('"IF"'));if(d!==null){i=[];for(n=r();n!==null;)i.push(n),n=r();if(i!==null)if(c.substr(a,1)==="("?(n="(",a+=1):(n=null,j&&h('"("')),n!==null){k=[];for(m=r();m!==null;)k.push(m),m=r();if(k!==null)if(m=L(),m!==null){q=[];for(t=r();t!==null;)q.push(t),t=r();if(q!==null)if(c.substr(a,1)===","?(t=",",a+=1):(t=null,j&&h('","')),t!==null){w=[];for(u=r();u!==null;)w.push(u),u=r();
if(w!==null)if(u=L(),u!==null){B=[];for(y=r();y!==null;)B.push(y),y=r();if(B!==null)if(c.substr(a,1)===","?(y=",",a+=1):(y=null,j&&h('","')),y!==null){C=[];for(x=r();x!==null;)C.push(x),x=r();if(C!==null)if(x=L(),x!==null){for(var D=[],A=r();A!==null;)D.push(A),A=r();D!==null?(c.substr(a,1)===")"?(A=")",a+=1):(A=null,j&&h('")"')),A!==null?d=[d,i,n,k,m,q,t,w,u,B,y,C,x,D,A]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=
null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e;e=d!==null?function(a,c,b){var d={token:"expression",expressionType:"builtincall",builtincall:"if"};d.args=[a,c,b];return d}(d[4],d[8],d[12]):null;e===null&&(e=null,a=g);if(e!==null)g=e;else{e=g=a;c.substr(a,9)==="ISLITERAL"?(d="ISLITERAL",a+=9):(d=null,j&&h('"ISLITERAL"'));if(d!==null){i=[];for(n=r();n!==null;)i.push(n),n=r();if(i!==null)if(c.substr(a,1)==="("?(n="(",a+=1):(n=null,j&&h('"("')),
n!==null){k=[];for(m=r();m!==null;)k.push(m),m=r();if(k!==null)if(m=L(),m!==null){q=[];for(t=r();t!==null;)q.push(t),t=r();q!==null?(c.substr(a,1)===")"?(t=")",a+=1):(t=null,j&&h('")"')),t!==null?d=[d,i,n,k,m,q,t]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e;e=d!==null?function(a){var c={token:"expression",expressionType:"builtincall",builtincall:"isliteral"};c.args=[a];return c}(d[4]):null;e===null&&(e=null,a=g);if(e!==null)g=e;else{e=
g=a;c.substr(a,7)==="ISBLANK"?(d="ISBLANK",a+=7):(d=null,j&&h('"ISBLANK"'));if(d!==null){i=[];for(n=r();n!==null;)i.push(n),n=r();if(i!==null)if(c.substr(a,1)==="("?(n="(",a+=1):(n=null,j&&h('"("')),n!==null){k=[];for(m=r();m!==null;)k.push(m),m=r();if(k!==null)if(m=L(),m!==null){q=[];for(t=r();t!==null;)q.push(t),t=r();q!==null?(c.substr(a,1)===")"?(t=")",a+=1):(t=null,j&&h('")"')),t!==null?d=[d,i,n,k,m,q,t]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=
e}else d=null,a=e;e=d!==null?function(a){var c={token:"expression",expressionType:"builtincall",builtincall:"isblank"};c.args=[a];return c}(d[4]):null;e===null&&(e=null,a=g);if(e!==null)g=e;else{e=g=a;c.substr(a,8)==="SAMETERM"?(d="SAMETERM",a+=8):(d=null,j&&h('"SAMETERM"'));if(d!==null){i=[];for(n=r();n!==null;)i.push(n),n=r();if(i!==null)if(c.substr(a,1)==="("?(n="(",a+=1):(n=null,j&&h('"("')),n!==null){k=[];for(m=r();m!==null;)k.push(m),m=r();if(k!==null)if(m=L(),m!==null){q=[];for(t=r();t!==null;)q.push(t),
t=r();if(q!==null)if(c.substr(a,1)===","?(t=",",a+=1):(t=null,j&&h('","')),t!==null){w=[];for(u=r();u!==null;)w.push(u),u=r();if(w!==null)if(u=L(),u!==null){B=[];for(y=r();y!==null;)B.push(y),y=r();B!==null?(c.substr(a,1)===")"?(y=")",a+=1):(y=null,j&&h('")"')),y!==null?d=[d,i,n,k,m,q,t,w,u,B,y]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e;e=d!==null?function(a,c){var b={token:"expression",
expressionType:"builtincall",builtincall:"sameterm"};b.args=[a,c];return b}(d[4],d[8]):null;e===null&&(e=null,a=g);if(e!==null)g=e;else{e=g=a;c.substr(a,1)==="I"?(d="I",a+=1):(d=null,j&&h('"I"'));d===null&&(c.substr(a,1)==="i"?(d="i",a+=1):(d=null,j&&h('"i"')),d=d!==null?d:null);if(d!==null)if(c.substr(a,1)==="S"?(i="S",a+=1):(i=null,j&&h('"S"')),i===null&&(c.substr(a,1)==="s"?(i="s",a+=1):(i=null,j&&h('"s"')),i=i!==null?i:null),i!==null)if(c.substr(a,1)==="U"?(n="U",a+=1):(n=null,j&&h('"U"')),n===
null&&(c.substr(a,1)==="u"?(n="u",a+=1):(n=null,j&&h('"u"')),n=n!==null?n:null),n!==null)if(c.substr(a,1)==="R"?(k="R",a+=1):(k=null,j&&h('"R"')),k===null&&(c.substr(a,1)==="r"?(k="r",a+=1):(k=null,j&&h('"r"')),k=k!==null?k:null),k!==null)if(c.substr(a,1)==="I"?(m="I",a+=1):(m=null,j&&h('"I"')),m===null&&(c.substr(a,1)==="i"?(m="i",a+=1):(m=null,j&&h('"i"')),m=m!==null?m:null),m!==null){q=[];for(t=r();t!==null;)q.push(t),t=r();if(q!==null)if(c.substr(a,1)==="("?(t="(",a+=1):(t=null,j&&h('"("')),t!==
null){w=[];for(u=r();u!==null;)w.push(u),u=r();if(w!==null)if(u=L(),u!==null){B=[];for(y=r();y!==null;)B.push(y),y=r();B!==null?(c.substr(a,1)===")"?(y=")",a+=1):(y=null,j&&h('")"')),y!==null?d=[d,i,n,k,m,q,t,w,u,B,y]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e;else d=null,a=e;else d=null,a=e;else d=null,a=e;e=d!==null?function(a){var c={token:"expression",expressionType:"builtincall",builtincall:"isuri"};c.args=[a];return c}(d[8]):
null;e===null&&(e=null,a=g);if(e!==null)g=e;else{e=g=a;c.substr(a,1)==="I"?(d="I",a+=1):(d=null,j&&h('"I"'));d===null&&(c.substr(a,1)==="i"?(d="i",a+=1):(d=null,j&&h('"i"')),d=d!==null?d:null);if(d!==null)if(c.substr(a,1)==="S"?(i="S",a+=1):(i=null,j&&h('"S"')),i===null&&(c.substr(a,1)==="s"?(i="s",a+=1):(i=null,j&&h('"s"')),i=i!==null?i:null),i!==null)if(c.substr(a,1)==="I"?(n="I",a+=1):(n=null,j&&h('"I"')),n===null&&(c.substr(a,1)==="i"?(n="i",a+=1):(n=null,j&&h('"i"')),n=n!==null?n:null),n!==null)if(c.substr(a,
1)==="R"?(k="R",a+=1):(k=null,j&&h('"R"')),k===null&&(c.substr(a,1)==="r"?(k="r",a+=1):(k=null,j&&h('"r"')),k=k!==null?k:null),k!==null)if(c.substr(a,1)==="I"?(m="I",a+=1):(m=null,j&&h('"I"')),m===null&&(c.substr(a,1)==="i"?(m="i",a+=1):(m=null,j&&h('"i"')),m=m!==null?m:null),m!==null){q=[];for(t=r();t!==null;)q.push(t),t=r();if(q!==null)if(c.substr(a,1)==="("?(t="(",a+=1):(t=null,j&&h('"("')),t!==null){w=[];for(u=r();u!==null;)w.push(u),u=r();if(w!==null)if(u=L(),u!==null){B=[];for(y=r();y!==null;)B.push(y),
y=r();B!==null?(c.substr(a,1)===")"?(y=")",a+=1):(y=null,j&&h('")"')),y!==null?d=[d,i,n,k,m,q,t,w,u,B,y]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e;else d=null,a=e;else d=null,a=e;else d=null,a=e;e=d!==null?function(a){var c={token:"expression",expressionType:"builtincall",builtincall:"isuri"};c.args=[a];return c}(d[8]):null;e===null&&(e=null,a=g);e!==null?g=e:(g=ac(),g=g!==null?g:null)}}}}}}}}}}}}}}(j=f)&&g===null&&h("[106] BuiltInCall");
z[b]={nextPos:a,result:g};return g}function ac(){var b="RegexExpression@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var i=a,e=a;if(c.substr(a,1)==="R"){var d="R";a+=1}else d=null,j&&h('"R"');d===null&&(c.substr(a,1)==="r"?(d="r",a+=1):(d=null,j&&h('"r"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="E"){var g="E";a+=1}else g=null,j&&h('"E"');g===null&&(c.substr(a,1)==="e"?(g="e",a+=1):(g=null,j&&h('"e"')),g=g!==null?g:null);if(g!==null){if(c.substr(a,1)==="G"){var n="G";a+=1}else n=
null,j&&h('"G"');n===null&&(c.substr(a,1)==="g"?(n="g",a+=1):(n=null,j&&h('"g"')),n=n!==null?n:null);if(n!==null){if(c.substr(a,1)==="E"){var k="E";a+=1}else k=null,j&&h('"E"');k===null&&(c.substr(a,1)==="e"?(k="e",a+=1):(k=null,j&&h('"e"')),k=k!==null?k:null);if(k!==null){if(c.substr(a,1)==="X"){var m="X";a+=1}else m=null,j&&h('"X"');m===null&&(c.substr(a,1)==="x"?(m="x",a+=1):(m=null,j&&h('"x"')),m=m!==null?m:null);if(m!==null){for(var q=[],t=r();t!==null;)q.push(t),t=r();if(q!==null)if(c.substr(a,
1)==="("?(t="(",a+=1):(t=null,j&&h('"("')),t!==null){for(var w=[],u=r();u!==null;)w.push(u),u=r();if(w!==null)if(u=L(),u!==null){for(var B=[],y=r();y!==null;)B.push(y),y=r();if(B!==null)if(c.substr(a,1)===","?(y=",",a+=1):(y=null,j&&h('","')),y!==null){for(var C=[],x=r();x!==null;)C.push(x),x=r();if(C!==null)if(x=L(),x!==null){for(var D=[],A=r();A!==null;)D.push(A),A=r();if(D!==null){A=a;if(c.substr(a,1)===","){var E=",";a+=1}else E=null,j&&h('","');if(E!==null){for(var M=[],F=r();F!==null;)M.push(F),
F=r();M!==null?(F=L(),F!==null?E=[E,M,F]:(E=null,a=A)):(E=null,a=A)}else E=null,a=A;A=E!==null?E:"";if(A!==null){E=[];for(M=r();M!==null;)E.push(M),M=r();E!==null?(c.substr(a,1)===")"?(M=")",a+=1):(M=null,j&&h('")"')),M!==null?d=[d,g,n,k,m,q,t,w,u,B,y,C,x,D,A,E,M]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e}else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=
null,a=e}else d=null,a=e;e=d!==null?function(a,c,b){var d={token:"expression",expressionType:"regex"};d.text=a;d.pattern=c;d.flags=b[2];return d}(d[8],d[12],d[14]):null;e===null&&(e=null,a=i);(j=f)&&e===null&&h("[107] RegexExpression");z[b]={nextPos:a,result:e};return e}function $b(){var b="Aggregate@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var i=a,e=a;if(c.substr(a,1)==="C"){var d="C";a+=1}else d=null,j&&h('"C"');d===null&&(c.substr(a,1)==="c"?(d="c",a+=1):(d=null,j&&h('"c"')),d=d!==
null?d:null);if(d!==null){if(c.substr(a,1)==="O"){var g="O";a+=1}else g=null,j&&h('"O"');g===null&&(c.substr(a,1)==="o"?(g="o",a+=1):(g=null,j&&h('"o"')),g=g!==null?g:null);if(g!==null){if(c.substr(a,1)==="U"){var k="U";a+=1}else k=null,j&&h('"U"');k===null&&(c.substr(a,1)==="u"?(k="u",a+=1):(k=null,j&&h('"u"')),k=k!==null?k:null);if(k!==null){if(c.substr(a,1)==="N"){var m="N";a+=1}else m=null,j&&h('"N"');m===null&&(c.substr(a,1)==="n"?(m="n",a+=1):(m=null,j&&h('"n"')),m=m!==null?m:null);if(m!==null){if(c.substr(a,
1)==="T"){var q="T";a+=1}else q=null,j&&h('"T"');q===null&&(c.substr(a,1)==="t"?(q="t",a+=1):(q=null,j&&h('"t"')),q=q!==null?q:null);if(q!==null){for(var w=[],t=r();t!==null;)w.push(t),t=r();if(w!==null)if(c.substr(a,1)==="("?(t="(",a+=1):(t=null,j&&h('"("')),t!==null){for(var u=[],C=r();C!==null;)u.push(C),C=r();if(u!==null){C=a;if(c.substr(a,1)==="D"){var B="D";a+=1}else B=null,j&&h('"D"');B===null&&(c.substr(a,1)==="d"?(B="d",a+=1):(B=null,j&&h('"d"')),B=B!==null?B:null);if(B!==null){if(c.substr(a,
1)==="I"){var y="I";a+=1}else y=null,j&&h('"I"');y===null&&(c.substr(a,1)==="i"?(y="i",a+=1):(y=null,j&&h('"i"')),y=y!==null?y:null);if(y!==null){if(c.substr(a,1)==="S"){var x="S";a+=1}else x=null,j&&h('"S"');x===null&&(c.substr(a,1)==="s"?(x="s",a+=1):(x=null,j&&h('"s"')),x=x!==null?x:null);if(x!==null){if(c.substr(a,1)==="T"){var A="T";a+=1}else A=null,j&&h('"T"');A===null&&(c.substr(a,1)==="t"?(A="t",a+=1):(A=null,j&&h('"t"')),A=A!==null?A:null);if(A!==null){if(c.substr(a,1)==="I"){var D="I";a+=
1}else D=null,j&&h('"I"');D===null&&(c.substr(a,1)==="i"?(D="i",a+=1):(D=null,j&&h('"i"')),D=D!==null?D:null);if(D!==null){if(c.substr(a,1)==="N"){var E="N";a+=1}else E=null,j&&h('"N"');E===null&&(c.substr(a,1)==="n"?(E="n",a+=1):(E=null,j&&h('"n"')),E=E!==null?E:null);if(E!==null){if(c.substr(a,1)==="C"){var M="C";a+=1}else M=null,j&&h('"C"');M===null&&(c.substr(a,1)==="c"?(M="c",a+=1):(M=null,j&&h('"c"')),M=M!==null?M:null);if(M!==null){if(c.substr(a,1)==="T"){var F="T";a+=1}else F=null,j&&h('"T"');
F===null&&(c.substr(a,1)==="t"?(F="t",a+=1):(F=null,j&&h('"t"')),F=F!==null?F:null);F!==null?B=[B,y,x,A,D,E,M,F]:(B=null,a=C)}else B=null,a=C}else B=null,a=C}else B=null,a=C}else B=null,a=C}else B=null,a=C}else B=null,a=C}else B=null,a=C;C=B!==null?B:"";if(C!==null){B=[];for(y=r();y!==null;)B.push(y),y=r();if(B!==null)if(c.substr(a,1)==="*"?(y="*",a+=1):(y=null,j&&h('"*"')),y===null&&(y=L(),y=y!==null?y:null),y!==null){x=[];for(A=r();A!==null;)x.push(A),A=r();if(x!==null)if(c.substr(a,1)===")"?(A=
")",a+=1):(A=null,j&&h('")"')),A!==null){D=[];for(E=r();E!==null;)D.push(E),E=r();D!==null?d=[d,g,k,m,q,w,t,u,C,B,y,x,A,D]:(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e}else d=null,a=e;e=d!==null?function(a,c){exp={token:"expression",expressionType:"aggregate",aggregateType:"count"};exp.distinct=a!=""?"DISTINCT":a;exp.expression=c;return exp}(d[8],
d[10]):null;e===null&&(e=null,a=i);if(e!==null)i=e;else{e=i=a;c.substr(a,1)==="S"?(d="S",a+=1):(d=null,j&&h('"S"'));d===null&&(c.substr(a,1)==="s"?(d="s",a+=1):(d=null,j&&h('"s"')),d=d!==null?d:null);if(d!==null)if(c.substr(a,1)==="U"?(g="U",a+=1):(g=null,j&&h('"U"')),g===null&&(c.substr(a,1)==="u"?(g="u",a+=1):(g=null,j&&h('"u"')),g=g!==null?g:null),g!==null)if(c.substr(a,1)==="M"?(k="M",a+=1):(k=null,j&&h('"M"')),k===null&&(c.substr(a,1)==="m"?(k="m",a+=1):(k=null,j&&h('"m"')),k=k!==null?k:null),
k!==null){m=[];for(q=r();q!==null;)m.push(q),q=r();if(m!==null)if(c.substr(a,1)==="("?(q="(",a+=1):(q=null,j&&h('"("')),q!==null){w=[];for(t=r();t!==null;)w.push(t),t=r();if(w!==null)if(t=a,c.substr(a,1)==="D"?(u="D",a+=1):(u=null,j&&h('"D"')),u===null&&(c.substr(a,1)==="d"?(u="d",a+=1):(u=null,j&&h('"d"')),u=u!==null?u:null),u!==null?(c.substr(a,1)==="I"?(C="I",a+=1):(C=null,j&&h('"I"')),C===null&&(c.substr(a,1)==="i"?(C="i",a+=1):(C=null,j&&h('"i"')),C=C!==null?C:null),C!==null?(c.substr(a,1)===
"S"?(B="S",a+=1):(B=null,j&&h('"S"')),B===null&&(c.substr(a,1)==="s"?(B="s",a+=1):(B=null,j&&h('"s"')),B=B!==null?B:null),B!==null?(c.substr(a,1)==="T"?(y="T",a+=1):(y=null,j&&h('"T"')),y===null&&(c.substr(a,1)==="t"?(y="t",a+=1):(y=null,j&&h('"t"')),y=y!==null?y:null),y!==null?(c.substr(a,1)==="I"?(x="I",a+=1):(x=null,j&&h('"I"')),x===null&&(c.substr(a,1)==="i"?(x="i",a+=1):(x=null,j&&h('"i"')),x=x!==null?x:null),x!==null?(c.substr(a,1)==="N"?(A="N",a+=1):(A=null,j&&h('"N"')),A===null&&(c.substr(a,
1)==="n"?(A="n",a+=1):(A=null,j&&h('"n"')),A=A!==null?A:null),A!==null?(c.substr(a,1)==="C"?(D="C",a+=1):(D=null,j&&h('"C"')),D===null&&(c.substr(a,1)==="c"?(D="c",a+=1):(D=null,j&&h('"c"')),D=D!==null?D:null),D!==null?(c.substr(a,1)==="T"?(E="T",a+=1):(E=null,j&&h('"T"')),E===null&&(c.substr(a,1)==="t"?(E="t",a+=1):(E=null,j&&h('"t"')),E=E!==null?E:null),E!==null?u=[u,C,B,y,x,A,D,E]:(u=null,a=t)):(u=null,a=t)):(u=null,a=t)):(u=null,a=t)):(u=null,a=t)):(u=null,a=t)):(u=null,a=t)):(u=null,a=t),t=u!==
null?u:"",t!==null){u=[];for(C=r();C!==null;)u.push(C),C=r();if(u!==null)if(C=L(),C!==null){B=[];for(y=r();y!==null;)B.push(y),y=r();if(B!==null)if(c.substr(a,1)===")"?(y=")",a+=1):(y=null,j&&h('")"')),y!==null){x=[];for(A=r();A!==null;)x.push(A),A=r();x!==null?d=[d,g,k,m,q,w,t,u,C,B,y,x]:(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e;else d=null,a=e;e=d!==null?function(a,
c){exp={token:"expression",expressionType:"aggregate",aggregateType:"sum"};exp.distinct=a!=""?"DISTINCT":a;exp.expression=c;return exp}(d[6],d[8]):null;e===null&&(e=null,a=i);if(e!==null)i=e;else{e=i=a;c.substr(a,1)==="M"?(d="M",a+=1):(d=null,j&&h('"M"'));d===null&&(c.substr(a,1)==="m"?(d="m",a+=1):(d=null,j&&h('"m"')),d=d!==null?d:null);if(d!==null)if(c.substr(a,1)==="I"?(g="I",a+=1):(g=null,j&&h('"I"')),g===null&&(c.substr(a,1)==="i"?(g="i",a+=1):(g=null,j&&h('"i"')),g=g!==null?g:null),g!==null)if(c.substr(a,
1)==="N"?(k="N",a+=1):(k=null,j&&h('"N"')),k===null&&(c.substr(a,1)==="n"?(k="n",a+=1):(k=null,j&&h('"n"')),k=k!==null?k:null),k!==null){m=[];for(q=r();q!==null;)m.push(q),q=r();if(m!==null)if(c.substr(a,1)==="("?(q="(",a+=1):(q=null,j&&h('"("')),q!==null){w=[];for(t=r();t!==null;)w.push(t),t=r();if(w!==null)if(t=a,c.substr(a,1)==="D"?(u="D",a+=1):(u=null,j&&h('"D"')),u===null&&(c.substr(a,1)==="d"?(u="d",a+=1):(u=null,j&&h('"d"')),u=u!==null?u:null),u!==null?(c.substr(a,1)==="I"?(C="I",a+=1):(C=
null,j&&h('"I"')),C===null&&(c.substr(a,1)==="i"?(C="i",a+=1):(C=null,j&&h('"i"')),C=C!==null?C:null),C!==null?(c.substr(a,1)==="S"?(B="S",a+=1):(B=null,j&&h('"S"')),B===null&&(c.substr(a,1)==="s"?(B="s",a+=1):(B=null,j&&h('"s"')),B=B!==null?B:null),B!==null?(c.substr(a,1)==="T"?(y="T",a+=1):(y=null,j&&h('"T"')),y===null&&(c.substr(a,1)==="t"?(y="t",a+=1):(y=null,j&&h('"t"')),y=y!==null?y:null),y!==null?(c.substr(a,1)==="I"?(x="I",a+=1):(x=null,j&&h('"I"')),x===null&&(c.substr(a,1)==="i"?(x="i",a+=
1):(x=null,j&&h('"i"')),x=x!==null?x:null),x!==null?(c.substr(a,1)==="N"?(A="N",a+=1):(A=null,j&&h('"N"')),A===null&&(c.substr(a,1)==="n"?(A="n",a+=1):(A=null,j&&h('"n"')),A=A!==null?A:null),A!==null?(c.substr(a,1)==="C"?(D="C",a+=1):(D=null,j&&h('"C"')),D===null&&(c.substr(a,1)==="c"?(D="c",a+=1):(D=null,j&&h('"c"')),D=D!==null?D:null),D!==null?(c.substr(a,1)==="T"?(E="T",a+=1):(E=null,j&&h('"T"')),E===null&&(c.substr(a,1)==="t"?(E="t",a+=1):(E=null,j&&h('"t"')),E=E!==null?E:null),E!==null?u=[u,
C,B,y,x,A,D,E]:(u=null,a=t)):(u=null,a=t)):(u=null,a=t)):(u=null,a=t)):(u=null,a=t)):(u=null,a=t)):(u=null,a=t)):(u=null,a=t),t=u!==null?u:"",t!==null){u=[];for(C=r();C!==null;)u.push(C),C=r();if(u!==null)if(C=L(),C!==null){B=[];for(y=r();y!==null;)B.push(y),y=r();if(B!==null)if(c.substr(a,1)===")"?(y=")",a+=1):(y=null,j&&h('")"')),y!==null){x=[];for(A=r();A!==null;)x.push(A),A=r();x!==null?d=[d,g,k,m,q,w,t,u,C,B,y,x]:(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=
null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e;else d=null,a=e;e=d!==null?function(a,c){exp={token:"expression",expressionType:"aggregate",aggregateType:"min"};exp.distinct=a!=""?"DISTINCT":a;exp.expression=c;return exp}(d[6],d[8]):null;e===null&&(e=null,a=i);if(e!==null)i=e;else{e=i=a;c.substr(a,1)==="M"?(d="M",a+=1):(d=null,j&&h('"M"'));d===null&&(c.substr(a,1)==="m"?(d="m",a+=1):(d=null,j&&h('"m"')),d=d!==null?d:null);if(d!==null)if(c.substr(a,1)==="A"?
(g="A",a+=1):(g=null,j&&h('"A"')),g===null&&(c.substr(a,1)==="a"?(g="a",a+=1):(g=null,j&&h('"a"')),g=g!==null?g:null),g!==null)if(c.substr(a,1)==="X"?(k="X",a+=1):(k=null,j&&h('"X"')),k===null&&(c.substr(a,1)==="x"?(k="x",a+=1):(k=null,j&&h('"x"')),k=k!==null?k:null),k!==null){m=[];for(q=r();q!==null;)m.push(q),q=r();if(m!==null)if(c.substr(a,1)==="("?(q="(",a+=1):(q=null,j&&h('"("')),q!==null){w=[];for(t=r();t!==null;)w.push(t),t=r();if(w!==null)if(t=a,c.substr(a,1)==="D"?(u="D",a+=1):(u=null,j&&
h('"D"')),u===null&&(c.substr(a,1)==="d"?(u="d",a+=1):(u=null,j&&h('"d"')),u=u!==null?u:null),u!==null?(c.substr(a,1)==="I"?(C="I",a+=1):(C=null,j&&h('"I"')),C===null&&(c.substr(a,1)==="i"?(C="i",a+=1):(C=null,j&&h('"i"')),C=C!==null?C:null),C!==null?(c.substr(a,1)==="S"?(B="S",a+=1):(B=null,j&&h('"S"')),B===null&&(c.substr(a,1)==="s"?(B="s",a+=1):(B=null,j&&h('"s"')),B=B!==null?B:null),B!==null?(c.substr(a,1)==="T"?(y="T",a+=1):(y=null,j&&h('"T"')),y===null&&(c.substr(a,1)==="t"?(y="t",a+=1):(y=
null,j&&h('"t"')),y=y!==null?y:null),y!==null?(c.substr(a,1)==="I"?(x="I",a+=1):(x=null,j&&h('"I"')),x===null&&(c.substr(a,1)==="i"?(x="i",a+=1):(x=null,j&&h('"i"')),x=x!==null?x:null),x!==null?(c.substr(a,1)==="N"?(A="N",a+=1):(A=null,j&&h('"N"')),A===null&&(c.substr(a,1)==="n"?(A="n",a+=1):(A=null,j&&h('"n"')),A=A!==null?A:null),A!==null?(c.substr(a,1)==="C"?(D="C",a+=1):(D=null,j&&h('"C"')),D===null&&(c.substr(a,1)==="c"?(D="c",a+=1):(D=null,j&&h('"c"')),D=D!==null?D:null),D!==null?(c.substr(a,
1)==="T"?(E="T",a+=1):(E=null,j&&h('"T"')),E===null&&(c.substr(a,1)==="t"?(E="t",a+=1):(E=null,j&&h('"t"')),E=E!==null?E:null),E!==null?u=[u,C,B,y,x,A,D,E]:(u=null,a=t)):(u=null,a=t)):(u=null,a=t)):(u=null,a=t)):(u=null,a=t)):(u=null,a=t)):(u=null,a=t)):(u=null,a=t),t=u!==null?u:"",t!==null){u=[];for(C=r();C!==null;)u.push(C),C=r();if(u!==null)if(C=L(),C!==null){B=[];for(y=r();y!==null;)B.push(y),y=r();if(B!==null)if(c.substr(a,1)===")"?(y=")",a+=1):(y=null,j&&h('")"')),y!==null){x=[];for(A=r();A!==
null;)x.push(A),A=r();x!==null?d=[d,g,k,m,q,w,t,u,C,B,y,x]:(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e;else d=null,a=e;e=d!==null?function(a,c){exp={token:"expression",expressionType:"aggregate",aggregateType:"max"};exp.distinct=a!=""?"DISTINCT":a;exp.expression=c;return exp}(d[6],d[8]):null;e===null&&(e=null,a=i);if(e!==null)i=e;else{e=i=a;c.substr(a,1)==="A"?(d="A",a+=
1):(d=null,j&&h('"A"'));d===null&&(c.substr(a,1)==="a"?(d="a",a+=1):(d=null,j&&h('"a"')),d=d!==null?d:null);if(d!==null)if(c.substr(a,1)==="V"?(g="V",a+=1):(g=null,j&&h('"V"')),g===null&&(c.substr(a,1)==="v"?(g="v",a+=1):(g=null,j&&h('"v"')),g=g!==null?g:null),g!==null)if(c.substr(a,1)==="G"?(k="G",a+=1):(k=null,j&&h('"G"')),k===null&&(c.substr(a,1)==="g"?(k="g",a+=1):(k=null,j&&h('"g"')),k=k!==null?k:null),k!==null){m=[];for(q=r();q!==null;)m.push(q),q=r();if(m!==null)if(c.substr(a,1)==="("?(q="(",
a+=1):(q=null,j&&h('"("')),q!==null){w=[];for(t=r();t!==null;)w.push(t),t=r();if(w!==null)if(t=a,c.substr(a,1)==="D"?(u="D",a+=1):(u=null,j&&h('"D"')),u===null&&(c.substr(a,1)==="d"?(u="d",a+=1):(u=null,j&&h('"d"')),u=u!==null?u:null),u!==null?(c.substr(a,1)==="I"?(C="I",a+=1):(C=null,j&&h('"I"')),C===null&&(c.substr(a,1)==="i"?(C="i",a+=1):(C=null,j&&h('"i"')),C=C!==null?C:null),C!==null?(c.substr(a,1)==="S"?(B="S",a+=1):(B=null,j&&h('"S"')),B===null&&(c.substr(a,1)==="s"?(B="s",a+=1):(B=null,j&&
h('"s"')),B=B!==null?B:null),B!==null?(c.substr(a,1)==="T"?(y="T",a+=1):(y=null,j&&h('"T"')),y===null&&(c.substr(a,1)==="t"?(y="t",a+=1):(y=null,j&&h('"t"')),y=y!==null?y:null),y!==null?(c.substr(a,1)==="I"?(x="I",a+=1):(x=null,j&&h('"I"')),x===null&&(c.substr(a,1)==="i"?(x="i",a+=1):(x=null,j&&h('"i"')),x=x!==null?x:null),x!==null?(c.substr(a,1)==="N"?(A="N",a+=1):(A=null,j&&h('"N"')),A===null&&(c.substr(a,1)==="n"?(A="n",a+=1):(A=null,j&&h('"n"')),A=A!==null?A:null),A!==null?(c.substr(a,1)==="C"?
(D="C",a+=1):(D=null,j&&h('"C"')),D===null&&(c.substr(a,1)==="c"?(D="c",a+=1):(D=null,j&&h('"c"')),D=D!==null?D:null),D!==null?(c.substr(a,1)==="T"?(E="T",a+=1):(E=null,j&&h('"T"')),E===null&&(c.substr(a,1)==="t"?(E="t",a+=1):(E=null,j&&h('"t"')),E=E!==null?E:null),E!==null?u=[u,C,B,y,x,A,D,E]:(u=null,a=t)):(u=null,a=t)):(u=null,a=t)):(u=null,a=t)):(u=null,a=t)):(u=null,a=t)):(u=null,a=t)):(u=null,a=t),t=u!==null?u:"",t!==null){u=[];for(C=r();C!==null;)u.push(C),C=r();if(u!==null)if(C=L(),C!==null){B=
[];for(y=r();y!==null;)B.push(y),y=r();if(B!==null)if(c.substr(a,1)===")"?(y=")",a+=1):(y=null,j&&h('")"')),y!==null){x=[];for(A=r();A!==null;)x.push(A),A=r();x!==null?d=[d,g,k,m,q,w,t,u,C,B,y,x]:(d=null,a=e)}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e}else d=null,a=e;else d=null,a=e;else d=null,a=e;e=d!==null?function(a,c){exp={token:"expression",expressionType:"aggregate",aggregateType:"avg"};exp.distinct=a!=""?
"DISTINCT":a;exp.expression=c;return exp}(d[6],d[8]):null;e===null&&(e=null,a=i);i=e!==null?e:null}}}}(j=f)&&i===null&&h("[110] Aggregate");z[b]={nextPos:a,result:i};return i}function Zb(){var c="IRIrefOrFunction@"+a,b=z[c];if(b)return a=b.nextPos,b.result;b=j;j=!1;var f=a,e=a,d=S();if(d!==null){var g=ib(),g=g!==null?g:"";g!==null?d=[d,g]:(d=null,a=e)}else d=null,a=e;e=d!==null?function(a,c){var b={token:"expression",expressionType:"irireforfunction"};b.iriref=a;b.args=c.value;return b}(d[0],d[1]):
null;e===null&&(e=null,a=f);(j=b)&&e===null&&h("[117] IRIrefOrFunction");z[c]={nextPos:a,result:e};return e}function Fa(){var b="RDFLiteral@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var g=a,e=a,d=bc();if(d!==null){var k=cc();if(k===null){k=a;if(c.substr(a,2)==="^^"){var i="^^";a+=2}else i=null,j&&h('"^^"');if(i!==null){var m=S();m!==null?i=[i,m]:(i=null,a=k)}else i=null,a=k;k=i!==null?i:null}k=k!==null?k:"";k!==null?d=[d,k]:(d=null,a=e)}else d=null,a=e;e=d!==null?function(a,c){return typeof c===
"string"&&c.length>0?{token:"literal",value:a.value,lang:c.slice(1),type:null}:typeof c==="object"?(c.shift(),{token:"literal",value:a.value,lang:null,type:c[0]}):{token:"literal",value:a.value,lang:null,type:null}}(d[0],d[1]):null;e===null&&(e=null,a=g);(j=f)&&e===null&&h("[112] RDFLiteral");z[b]={nextPos:a,result:e};return e}function Ga(){var c="NumericLiteral@"+a,b=z[c];if(b)return a=b.nextPos,b.result;b=j;j=!1;var f=dc();f===null&&(f=ec(),f===null&&(f=ra(),f=f!==null?f:null));(j=b)&&f===null&&
h("[113] NumericLiteral");z[c]={nextPos:a,result:f};return f}function dc(){var c="NumericLiteralUnsigned@"+a,b=z[c];if(b)return a=b.nextPos,b.result;b=j;j=!1;var f=Qa();f===null&&(f=Ra(),f===null&&(f=ca(),f=f!==null?f:null));(j=b)&&f===null&&h("[114] NumericLiteralUnsigned");z[c]={nextPos:a,result:f};return f}function ec(){var c="NumericLiteralPositive@"+a,b=z[c];if(b)return a=b.nextPos,b.result;b=j;j=!1;var f=fc();f===null&&(f=gc(),f===null&&(f=hc(),f=f!==null?f:null));(j=b)&&f===null&&h("[115] NumericLiteralPositive");
z[c]={nextPos:a,result:f};return f}function ra(){var c="NumericLiteralNegative@"+a,b=z[c];if(b)return a=b.nextPos,b.result;b=j;j=!1;var f=ic();f===null&&(f=jc(),f===null&&(f=kc(),f=f!==null?f:null));(j=b)&&f===null&&h("[116] NumericLiteralNegative");z[c]={nextPos:a,result:f};return f}function Ha(){var b="BooleanLiteral@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a;if(c.substr(a,1)==="T"){var d="T";a+=1}else d=null,j&&h('"T"');d===null&&(c.substr(a,1)==="t"?(d="t",a+=1):(d=null,
j&&h('"t"')),d=d!==null?d:null);if(d!==null){if(c.substr(a,1)==="R"){var g="R";a+=1}else g=null,j&&h('"R"');g===null&&(c.substr(a,1)==="r"?(g="r",a+=1):(g=null,j&&h('"r"')),g=g!==null?g:null);if(g!==null){if(c.substr(a,1)==="U"){var i="U";a+=1}else i=null,j&&h('"U"');i===null&&(c.substr(a,1)==="u"?(i="u",a+=1):(i=null,j&&h('"u"')),i=i!==null?i:null);if(i!==null){if(c.substr(a,1)==="E"){var m="E";a+=1}else m=null,j&&h('"E"');m===null&&(c.substr(a,1)==="e"?(m="e",a+=1):(m=null,j&&h('"e"')),m=m!==null?
m:null);m!==null?d=[d,g,i,m]:(d=null,a=e)}else d=null,a=e}else d=null,a=e}else d=null,a=e;e=d!==null?lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!0}:null;e===null&&(e=null,a=k);if(e!==null)k=e;else{e=k=a;c.substr(a,1)==="F"?(d="F",a+=1):(d=null,j&&h('"F"'));d===null&&(c.substr(a,1)==="f"?(d="f",a+=1):(d=null,j&&h('"f"')),d=d!==null?d:null);if(d!==null)if(c.substr(a,1)==="A"?(g="A",a+=1):(g=null,j&&h('"A"')),g===null&&(c.substr(a,1)==="a"?(g="a",a+=1):(g=null,
j&&h('"a"')),g=g!==null?g:null),g!==null)if(c.substr(a,1)==="L"?(i="L",a+=1):(i=null,j&&h('"L"')),i===null&&(c.substr(a,1)==="l"?(i="l",a+=1):(i=null,j&&h('"l"')),i=i!==null?i:null),i!==null)if(c.substr(a,1)==="S"?(m="S",a+=1):(m=null,j&&h('"S"')),m===null&&(c.substr(a,1)==="s"?(m="s",a+=1):(m=null,j&&h('"s"')),m=m!==null?m:null),m!==null){if(c.substr(a,1)==="E"){var q="E";a+=1}else q=null,j&&h('"E"');q===null&&(c.substr(a,1)==="e"?(q="e",a+=1):(q=null,j&&h('"e"')),q=q!==null?q:null);q!==null?d=[d,
g,i,m,q]:(d=null,a=e)}else d=null,a=e;else d=null,a=e;else d=null,a=e;else d=null,a=e;e=d!==null?lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!1}:null;e===null&&(e=null,a=k);k=e!==null?e:null}(j=f)&&k===null&&h("[117] BooleanLiteral");z[b]={nextPos:a,result:k};return k}function bc(){var c="String@"+a,b=z[c];if(b)return a=b.nextPos,b.result;b=j;j=!1;var f=a,e=lc(),e=e!==null?{token:"string",value:e}:null;e===null&&(e=null,a=f);e!==null?f=e:(f=a,e=mc(),e=e!==
null?{token:"string",value:e}:null,e===null&&(e=null,a=f),e!==null?f=e:(f=a,e=nc(),e=e!==null?{token:"string",value:e}:null,e===null&&(e=null,a=f),e!==null?f=e:(f=a,e=oc(),e=e!==null?{token:"string",value:e}:null,e===null&&(e=null,a=f),f=e!==null?e:null)));(j=b)&&f===null&&h("[118] String");z[c]={nextPos:a,result:f};return f}function S(){var c="IRIref@"+a,b=z[c];if(b)return a=b.nextPos,b.result;b=j;j=!1;var f=a,e=ma(),e=e!==null?{token:"uri",prefix:null,suffix:null,value:e}:null;e===null&&(e=null,
a=f);e!==null?f=e:(f=a,e=pc(),e=e!==null?e:null,e===null&&(e=null,a=f),f=e!==null?e:null);(j=b)&&f===null&&h("[119] IRIref");z[c]={nextPos:a,result:f};return f}function pc(){var c="PrefixedName@"+a,b=z[c];if(b)return a=b.nextPos,b.result;b=j;j=!1;var f=a,e=qc(),e=e!==null?{token:"uri",prefix:e[0],suffix:e[1],value:null}:null;e===null&&(e=null,a=f);e!==null?f=e:(f=a,e=Ca(),e=e!==null?{token:"uri",prefix:e,suffix:"",value:null}:null,e===null&&(e=null,a=f),f=e!==null?e:null);(j=b)&&f===null&&h("[120] PrefixedName");
z[c]={nextPos:a,result:f};return f}function Yb(){var c="BlankNode@"+a,b=z[c];if(b)return a=b.nextPos,b.result;b=j;j=!1;var f=a,e=rc(),e=e!==null?{token:"blank",label:e}:null;e===null&&(e=null,a=f);e!==null?f=e:(f=a,sc()!==null?(ea++,e={token:"blank",label:""+ea}):e=null,e===null&&(e=null,a=f),f=e!==null?e:null);(j=b)&&f===null&&h("[121] BlankNode");z[c]={nextPos:a,result:f};return f}function ma(){var b="IRI_REF@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var g=a,e=a;if(c.substr(a,1)==="<"){var d=
"<";a+=1}else d=null,j&&h('"<"');if(d!==null){var k=[];if(c.substr(a).match(/^[^<>"{} | ^\\]/)!==null){var i=c.charAt(a);a++}else i=null,j&&h('[^<>"{} | ^\\\\]');for(;i!==null;)k.push(i),c.substr(a).match(/^[^<>"{} | ^\\]/)!==null?(i=c.charAt(a),a++):(i=null,j&&h('[^<>"{} | ^\\\\]'));k!==null?(c.substr(a,1)===">"?(i=">",a+=1):(i=null,j&&h('">"')),i!==null?d=[d,k,i]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e;e=d!==null?d[1].join(""):null;e===null&&(e=null,a=g);(j=f)&&e===null&&h("[122] IRI_REF");z[b]=
{nextPos:a,result:e};return e}function Ca(){var b="PNAME_NS@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var g=a,e=a,d=Va(),d=d!==null?d:"";if(d!==null){if(c.substr(a,1)===":"){var k=":";a+=1}else k=null,j&&h('":"');k!==null?d=[d,k]:(d=null,a=e)}else d=null,a=e;e=d!==null?d[0]:null;e===null&&(e=null,a=g);(j=f)&&e===null&&h("[123] PNAME_NS");z[b]={nextPos:a,result:e};return e}function qc(){var c="PNAME_LN@"+a,b=z[c];if(b)return a=b.nextPos,b.result;b=j;j=!1;var f=a,e=a,d=Ca();if(d!==null){var g=
ob();g!==null?d=[d,g]:(d=null,a=e)}else d=null,a=e;e=d!==null?[d[0],d[1]]:null;e===null&&(e=null,a=f);(j=b)&&e===null&&h("[124] PNAME_LN");z[c]={nextPos:a,result:e};return e}function rc(){var b="BLANK_NODE_LABEL@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var g=a,e=a;if(c.substr(a,2)==="_:"){var d="_:";a+=2}else d=null,j&&h('"_:"');if(d!==null){var k=ob();k!==null?d=[d,k]:(d=null,a=e)}else d=null,a=e;e=d!==null?d[1]:null;e===null&&(e=null,a=g);(j=f)&&e===null&&h("[125] BLANK_NODE_LABEL");
z[b]={nextPos:a,result:e};return e}function Wb(){var b="VAR1@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var g=a,e=a;if(c.substr(a,1)==="?"){var d="?";a+=1}else d=null,j&&h('"?"');if(d!==null){var k=pb();k!==null?d=[d,k]:(d=null,a=e)}else d=null,a=e;e=d!==null?d[1]:null;e===null&&(e=null,a=g);(j=f)&&e===null&&h("[126] VAR1");z[b]={nextPos:a,result:e};return e}function Xb(){var b="VAR2@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var g=a,e=a;if(c.substr(a,1)==="$"){var d="$";a+=1}else d=
null,j&&h('"$"');if(d!==null){var k=pb();k!==null?d=[d,k]:(d=null,a=e)}else d=null,a=e;e=d!==null?d[1]:null;e===null&&(e=null,a=g);(j=f)&&e===null&&h("[127] VAR2");z[b]={nextPos:a,result:e};return e}function cc(){var b="LANGTAG@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var g=a,e=a;if(c.substr(a,1)==="@"){var d="@";a+=1}else d=null,j&&h('"@"');if(d!==null){if(c.substr(a).match(/^[a-zA-Z]/)!==null){var k=c.charAt(a);a++}else k=null,j&&h("[a-zA-Z]");if(k!==null)for(var i=[];k!==null;)i.push(k),
c.substr(a).match(/^[a-zA-Z]/)!==null?(k=c.charAt(a),a++):(k=null,j&&h("[a-zA-Z]"));else i=null;if(i!==null){var k=[],m=a;if(c.substr(a,1)==="-"){var q="-";a+=1}else q=null,j&&h('"-"');if(q!==null){if(c.substr(a).match(/^[a-zA-Z0-9]/)!==null){var r=c.charAt(a);a++}else r=null,j&&h("[a-zA-Z0-9]");if(r!==null)for(var t=[];r!==null;)t.push(r),c.substr(a).match(/^[a-zA-Z0-9]/)!==null?(r=c.charAt(a),a++):(r=null,j&&h("[a-zA-Z0-9]"));else t=null;t!==null?q=[q,t]:(q=null,a=m)}else q=null,a=m;for(;q!==null;)if(k.push(q),
m=a,c.substr(a,1)==="-"?(q="-",a+=1):(q=null,j&&h('"-"')),q!==null){c.substr(a).match(/^[a-zA-Z0-9]/)!==null?(r=c.charAt(a),a++):(r=null,j&&h("[a-zA-Z0-9]"));if(r!==null)for(t=[];r!==null;)t.push(r),c.substr(a).match(/^[a-zA-Z0-9]/)!==null?(r=c.charAt(a),a++):(r=null,j&&h("[a-zA-Z0-9]"));else t=null;t!==null?q=[q,t]:(q=null,a=m)}else q=null,a=m;k!==null?d=[d,i,k]:(d=null,a=e)}else d=null,a=e}else d=null,a=e;e=d!==null?d[2].length===0?("@"+d[1].join("")).toLowerCase():("@"+d[1].join("")+"-"+d[2][0][1].join("")).toLowerCase():
null;e===null&&(e=null,a=g);(j=f)&&e===null&&h("[128] LANGTAG");z[b]={nextPos:a,result:e};return e}function ca(){var b="INTEGER@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a;if(c.substr(a).match(/^[0-9]/)!==null){var e=c.charAt(a);a++}else e=null,j&&h("[0-9]");if(e!==null)for(var d=[];e!==null;)d.push(e),c.substr(a).match(/^[0-9]/)!==null?(e=c.charAt(a),a++):(e=null,j&&h("[0-9]"));else d=null;e=d!==null?function(a){lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#integer"};
lit.value=Z(a);return lit}(d):null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[129] INTEGER");z[b]={nextPos:a,result:e};return e}function Ra(){var b="DECIMAL@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a;if(c.substr(a).match(/^[0-9]/)!==null){var d=c.charAt(a);a++}else d=null,j&&h("[0-9]");if(d!==null)for(var g=[];d!==null;)g.push(d),c.substr(a).match(/^[0-9]/)!==null?(d=c.charAt(a),a++):(d=null,j&&h("[0-9]"));else g=null;if(g!==null)if(c.substr(a,1)==="."?(d=".",a+=1):(d=null,
j&&h('"."')),d!==null){var i=[];if(c.substr(a).match(/^[0-9]/)!==null){var m=c.charAt(a);a++}else m=null,j&&h("[0-9]");for(;m!==null;)i.push(m),c.substr(a).match(/^[0-9]/)!==null?(m=c.charAt(a),a++):(m=null,j&&h("[0-9]"));i!==null?g=[g,d,i]:(g=null,a=e)}else g=null,a=e;else g=null,a=e;e=g!==null?function(a,c,b){lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"};lit.value=Z([a,c,b]);return lit}(g[0],g[1],g[2]):null;e===null&&(e=null,a=k);if(e!==null)k=e;else{e=k=a;c.substr(a,
1)==="."?(g=".",a+=1):(g=null,j&&h('"."'));if(g!==null){c.substr(a).match(/^[0-9]/)!==null?(d=c.charAt(a),a++):(d=null,j&&h("[0-9]"));if(d!==null)for(i=[];d!==null;)i.push(d),c.substr(a).match(/^[0-9]/)!==null?(d=c.charAt(a),a++):(d=null,j&&h("[0-9]"));else i=null;i!==null?g=[g,i]:(g=null,a=e)}else g=null,a=e;e=g!==null?function(a,c){lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"};lit.value=Z([a,c]);return lit}(g[0],g[1]):null;e===null&&(e=null,a=k);k=e!==null?e:null}(j=
f)&&k===null&&h("[130] DECIMAL");z[b]={nextPos:a,result:k};return k}function Qa(){var b="DOUBLE@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var g=a,e=a;if(c.substr(a).match(/^[0-9]/)!==null){var d=c.charAt(a);a++}else d=null,j&&h("[0-9]");if(d!==null)for(var k=[];d!==null;)k.push(d),c.substr(a).match(/^[0-9]/)!==null?(d=c.charAt(a),a++):(d=null,j&&h("[0-9]"));else k=null;if(k!==null)if(c.substr(a,1)==="."?(d=".",a+=1):(d=null,j&&h('"."')),d!==null){var i=[];if(c.substr(a).match(/^[0-9]/)!==
null){var m=c.charAt(a);a++}else m=null,j&&h("[0-9]");for(;m!==null;)i.push(m),c.substr(a).match(/^[0-9]/)!==null?(m=c.charAt(a),a++):(m=null,j&&h("[0-9]"));i!==null?(m=Sa(),m!==null?k=[k,d,i,m]:(k=null,a=e)):(k=null,a=e)}else k=null,a=e;else k=null,a=e;e=k!==null?function(a,c,b,d){lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};lit.value=Z([a,c,b,d]);return lit}(k[0],k[1],k[2],k[3]):null;e===null&&(e=null,a=g);if(e!==null)g=e;else{e=g=a;c.substr(a,1)==="."?(k=".",a+=
1):(k=null,j&&h('"."'));if(k!==null){c.substr(a).match(/^[0-9]/)!==null?(i=c.charAt(a),a++):(i=null,j&&h("[0-9]"));if(i!==null)for(d=[];i!==null;)d.push(i),c.substr(a).match(/^[0-9]/)!==null?(i=c.charAt(a),a++):(i=null,j&&h("[0-9]"));else d=null;d!==null?(i=Sa(),i!==null?k=[k,d,i]:(k=null,a=e)):(k=null,a=e)}else k=null,a=e;e=k!==null?function(a,c,b){lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};lit.value=Z([a,c,b]);return lit}(k[0],k[1],k[2]):null;e===null&&(e=null,
a=g);if(e!==null)g=e;else{e=g=a;c.substr(a).match(/^[0-9]/)!==null?(d=c.charAt(a),a++):(d=null,j&&h("[0-9]"));if(d!==null)for(k=[];d!==null;)k.push(d),c.substr(a).match(/^[0-9]/)!==null?(d=c.charAt(a),a++):(d=null,j&&h("[0-9]"));else k=null;k!==null?(d=Sa(),d!==null?k=[k,d]:(k=null,a=e)):(k=null,a=e);e=k!==null?function(a,c){lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};lit.value=Z([a,c]);return lit}(k[0],k[1]):null;e===null&&(e=null,a=g);g=e!==null?e:null}}(j=f)&&
g===null&&h("[131] DOUBLE");z[b]={nextPos:a,result:g};return g}function hc(){var b="INTEGER_POSITIVE@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a;if(c.substr(a,1)==="+"){var d="+";a+=1}else d=null,j&&h('"+"');if(d!==null){var g=ca();g!==null?d=[d,g]:(d=null,a=e)}else d=null,a=e;e=d!==null?function(a){a.value="+"+a.value;return a}(d[1]):null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[132] INTEGER_POSITIVE");z[b]={nextPos:a,result:e};return e}function gc(){var b="DECIMAL_POSITIVE@"+
a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a;if(c.substr(a,1)==="+"){var d="+";a+=1}else d=null,j&&h('"+"');if(d!==null){var g=Ra();g!==null?d=[d,g]:(d=null,a=e)}else d=null,a=e;e=d!==null?function(a){a.value="+"+a.value;return a}(d[1]):null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[133] DECIMAL_POSITIVE");z[b]={nextPos:a,result:e};return e}function fc(){var b="DOUBLE_POSITIVE@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a;if(c.substr(a,1)==="+"){var d="+";a+=
1}else d=null,j&&h('"+"');if(d!==null){var g=Qa();g!==null?d=[d,g]:(d=null,a=e)}else d=null,a=e;e=d!==null?function(a){a.value="+"+a.value;return a}(d[1]):null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[134] DOUBLE_POSITIVE");z[b]={nextPos:a,result:e};return e}function kc(){var b="INTEGER_NEGATIVE@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a;if(c.substr(a,1)==="-"){var d="-";a+=1}else d=null,j&&h('"-"');if(d!==null){var g=ca();g!==null?d=[d,g]:(d=null,a=e)}else d=null,a=e;e=d!==
null?function(a){a.value="-"+a.value;return a}(d[1]):null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[135] INTEGER_NEGATIVE");z[b]={nextPos:a,result:e};return e}function jc(){var b="DECIMAL_NEGATIVE@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a;if(c.substr(a,1)==="-"){var d="-";a+=1}else d=null,j&&h('"-"');if(d!==null){var g=Ra();g!==null?d=[d,g]:(d=null,a=e)}else d=null,a=e;e=d!==null?function(a){a.value="-"+a.value;return a}(d[1]):null;e===null&&(e=null,a=k);(j=f)&&e===null&&
h("[136] DECIMAL_NEGATIVE");z[b]={nextPos:a,result:e};return e}function ic(){var b="DOUBLE_NEGATIVE@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a;if(c.substr(a,1)==="-"){var d="-";a+=1}else d=null,j&&h('"-"');if(d!==null){var g=Qa();g!==null?d=[d,g]:(d=null,a=e)}else d=null,a=e;e=d!==null?function(a){a.value="-"+a.value;return a}(d[1]):null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[137] DOUBLE_NEGATIVE");z[b]={nextPos:a,result:e};return e}function Sa(){var b="EXPONENT@"+a,f=z[b];
if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a;if(c.substr(a).match(/^[eE]/)!==null){var d=c.charAt(a);a++}else d=null,j&&h("[eE]");if(d!==null){if(c.substr(a).match(/^[+\-]/)!==null){var g=c.charAt(a);a++}else g=null,j&&h("[+\\-]");g=g!==null?g:"";if(g!==null){if(c.substr(a).match(/^[0-9]/)!==null){var i=c.charAt(a);a++}else i=null,j&&h("[0-9]");if(i!==null)for(var m=[];i!==null;)m.push(i),c.substr(a).match(/^[0-9]/)!==null?(i=c.charAt(a),a++):(i=null,j&&h("[0-9]"));else m=null;m!==null?d=
[d,g,m]:(d=null,a=e)}else d=null,a=e}else d=null,a=e;e=d!==null?Z([d[0],d[1],d[2]]):null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[138] EXPONENT");z[b]={nextPos:a,result:e};return e}function nc(){var b="STRING_LITERAL1@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a;if(c.substr(a,1)==="'"){var d="'";a+=1}else d=null,j&&h('"\'"');if(d!==null){var g=[];if(c.substr(a).match(/^[^'\\\n\r]/)!==null){var i=c.charAt(a);a++}else i=null,j&&h("[^'\\\\\\n\\r]");i===null&&(i=fa(),i=i!==null?
i:null);for(;i!==null;)g.push(i),c.substr(a).match(/^[^'\\\n\r]/)!==null?(i=c.charAt(a),a++):(i=null,j&&h("[^'\\\\\\n\\r]")),i===null&&(i=fa(),i=i!==null?i:null);g!==null?(c.substr(a,1)==="'"?(i="'",a+=1):(i=null,j&&h('"\'"')),i!==null?d=[d,g,i]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e;e=d!==null?Z(d[1]):null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[139] STRING_LITERAL1");z[b]={nextPos:a,result:e};return e}function oc(){var b="STRING_LITERAL2@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=
!1;var k=a,e=a;if(c.substr(a,1)==='"'){var d='"';a+=1}else d=null,j&&h('"\\""');if(d!==null){var g=[];if(c.substr(a).match(/^[^"\\\n\r]/)!==null){var i=c.charAt(a);a++}else i=null,j&&h('[^"\\\\\\n\\r]');i===null&&(i=fa(),i=i!==null?i:null);for(;i!==null;)g.push(i),c.substr(a).match(/^[^"\\\n\r]/)!==null?(i=c.charAt(a),a++):(i=null,j&&h('[^"\\\\\\n\\r]')),i===null&&(i=fa(),i=i!==null?i:null);g!==null?(c.substr(a,1)==='"'?(i='"',a+=1):(i=null,j&&h('"\\""')),i!==null?d=[d,g,i]:(d=null,a=e)):(d=null,
a=e)}else d=null,a=e;e=d!==null?Z(d[1]):null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[140] STRING_LITERAL2");z[b]={nextPos:a,result:e};return e}function lc(){var b="STRING_LITERAL_LONG1@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var k=a,e=a;if(c.substr(a,3)==="'''"){var d="'''";a+=3}else d=null,j&&h("\"'''\"");if(d!==null){var g=[];if(c.substr(a).match(/^[^'\\]/)!==null){var i=c.charAt(a);a++}else i=null,j&&h("[^'\\\\]");i===null&&(i=fa(),i=i!==null?i:null);for(;i!==null;)g.push(i),c.substr(a).match(/^[^'\\]/)!==
null?(i=c.charAt(a),a++):(i=null,j&&h("[^'\\\\]")),i===null&&(i=fa(),i=i!==null?i:null);g!==null?(c.substr(a,3)==="'''"?(i="'''",a+=3):(i=null,j&&h("\"'''\"")),i!==null?d=[d,g,i]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e;e=d!==null?Z(d[1]):null;e===null&&(e=null,a=k);(j=f)&&e===null&&h("[141] STRING_LITERAL_LONG1");z[b]={nextPos:a,result:e};return e}function mc(){var b="STRING_LITERAL_LONG2@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var i=a,e=a;if(c.substr(a,3)==='"""'){var d='"""';a+=
3}else d=null,j&&h('"\\"\\"\\""');if(d!==null){var k=[];if(c.substr(a).match(/^[^"\\]/)!==null){var g=c.charAt(a);a++}else g=null,j&&h('[^"\\\\]');g===null&&(g=fa(),g=g!==null?g:null);for(;g!==null;)k.push(g),c.substr(a).match(/^[^"\\]/)!==null?(g=c.charAt(a),a++):(g=null,j&&h('[^"\\\\]')),g===null&&(g=fa(),g=g!==null?g:null);k!==null?(c.substr(a,3)==='"""'?(g='"""',a+=3):(g=null,j&&h('"\\"\\"\\""')),g!==null?d=[d,k,g]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e;e=d!==null?Z(d[1]):null;e===null&&(e=
null,a=i);(j=f)&&e===null&&h("[142] STRING_LITERAL_LONG2");z[b]={nextPos:a,result:e};return e}function fa(){var b="ECHAR@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var g=a;if(c.substr(a,1)==="\\"){var e="\\";a+=1}else e=null,j&&h('"\\\\"');if(e!==null){if(c.substr(a).match(/^[tbnrf"']/)!==null){var d=c.charAt(a);a++}else d=null,j&&h("[tbnrf\"']");d!==null?e=[e,d]:(e=null,a=g)}else e=null,a=g;(j=f)&&e===null&&h("[143] ECHAR");z[b]={nextPos:a,result:e};return e}function ka(){var b="NIL@"+
a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var g=a,e=a;if(c.substr(a,1)==="("){var d="(";a+=1}else d=null,j&&h('"("');if(d!==null){for(var k=[],i=r();i!==null;)k.push(i),i=r();k!==null?(c.substr(a,1)===")"?(i=")",a+=1):(i=null,j&&h('")"')),i!==null?d=[d,k,i]:(d=null,a=e)):(d=null,a=e)}else d=null,a=e;e=d!==null?{token:"triplesnodecollection",triplesContext:[],chainSubject:[{token:"uri",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}]}:null;e===null&&(e=null,a=g);(j=f)&&e===null&&h("[144] NIL");
z[b]={nextPos:a,result:e};return e}function r(){var b="WS@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;if(c.substr(a).match(/^[ ]/)!==null){var g=c.charAt(a);a++}else g=null,j&&h("[ ]");g===null&&(c.substr(a).match(/^[\t]/)!==null?(g=c.charAt(a),a++):(g=null,j&&h("[\t]")),g===null&&(c.substr(a).match(/^[\r]/)!==null?(g=c.charAt(a),a++):(g=null,j&&h("[\\r]")),g===null&&(c.substr(a).match(/^[\n]/)!==null?(g=c.charAt(a),a++):(g=null,j&&h("[\\n]")),g===null&&(g=tc(),g=g!==null?g:null))));(j=f)&&
g===null&&h("[145] WS");z[b]={nextPos:a,result:g};return g}function tc(){var b="COMMENT@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var g=a;if(c.substr(a,1)==="#"){var e="#";a+=1}else e=null,j&&h('"#"');if(e!==null){var d=[];if(c.substr(a).match(/^[^\n\r]/)!==null){var i=c.charAt(a);a++}else i=null,j&&h("[^\\n\\r]");for(;i!==null;)d.push(i),c.substr(a).match(/^[^\n\r]/)!==null?(i=c.charAt(a),a++):(i=null,j&&h("[^\\n\\r]"));d!==null?e=[e,d]:(e=null,a=g)}else e=null,a=g;(j=f)&&e===null&&h(" COMMENT");
z[b]={nextPos:a,result:e};return e}function sc(){var b="ANON@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var g=a;if(c.substr(a,1)==="["){var e="[";a+=1}else e=null,j&&h('"["');if(e!==null){for(var d=[],i=r();i!==null;)d.push(i),i=r();d!==null?(c.substr(a,1)==="]"?(i="]",a+=1):(i=null,j&&h('"]"')),i!==null?e=[e,d,i]:(e=null,a=g)):(e=null,a=g)}else e=null,a=g;(j=f)&&e===null&&h("[146] ANON");z[b]={nextPos:a,result:e};return e}function qb(){var b="PN_CHARS_BASE@"+a,f=z[b];if(f)return a=f.nextPos,
f.result;f=j;j=!1;if(c.substr(a).match(/^[A-Z]/)!==null){var g=c.charAt(a);a++}else g=null,j&&h("[A-Z]");g===null&&(c.substr(a).match(/^[a-z]/)!==null?(g=c.charAt(a),a++):(g=null,j&&h("[a-z]")),g===null&&(c.substr(a).match(/^[\xC0-\xD6]/)!==null?(g=c.charAt(a),a++):(g=null,j&&h("[\\xC0-\\xD6]")),g===null&&(c.substr(a).match(/^[\xD8-\xF6]/)!==null?(g=c.charAt(a),a++):(g=null,j&&h("[\\xD8-\\xF6]")),g===null&&(c.substr(a).match(/^[\xF8-\u02FF]/)!==null?(g=c.charAt(a),a++):(g=null,j&&h("[\\xF8-\\u02FF]")),
g===null&&(c.substr(a).match(/^[\u0370-\u037D]/)!==null?(g=c.charAt(a),a++):(g=null,j&&h("[\\u0370-\\u037D]")),g===null&&(c.substr(a).match(/^[\u037F-\u1FFF]/)!==null?(g=c.charAt(a),a++):(g=null,j&&h("[\\u037F-\\u1FFF]")),g===null&&(c.substr(a).match(/^[\u200C-\u200D]/)!==null?(g=c.charAt(a),a++):(g=null,j&&h("[\\u200C-\\u200D]")),g===null&&(c.substr(a).match(/^[\u2070-\u218F]/)!==null?(g=c.charAt(a),a++):(g=null,j&&h("[\\u2070-\\u218F]")),g===null&&(c.substr(a).match(/^[\u2C00-\u2FEF]/)!==null?(g=
c.charAt(a),a++):(g=null,j&&h("[\\u2C00-\\u2FEF]")),g===null&&(c.substr(a).match(/^[\u3001-\uD7FF]/)!==null?(g=c.charAt(a),a++):(g=null,j&&h("[\\u3001-\\uD7FF]")),g===null&&(c.substr(a).match(/^[\uF900-\uFDCF]/)!==null?(g=c.charAt(a),a++):(g=null,j&&h("[\\uF900-\\uFDCF]")),g===null&&(c.substr(a).match(/^[\uFDF0-\uFFFD]/)!==null?(g=c.charAt(a),a++):(g=null,j&&h("[\\uFDF0-\\uFFFD]")),g===null&&(c.substr(a).match(/^[\u1000-\uEFFF]/)!==null?(g=c.charAt(a),a++):(g=null,j&&h("[\\u1000-\\uEFFF]")),g=g!==
null?g:null)))))))))))));(j=f)&&g===null&&h("[147] PN_CHARS_BASE");z[b]={nextPos:a,result:g};return g}function sa(){var b="PN_CHARS_U@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var g=qb();g===null&&(c.substr(a,1)==="_"?(g="_",a+=1):(g=null,j&&h('"_"')),g=g!==null?g:null);(j=f)&&g===null&&h("[148] PN_CHARS_U");z[b]={nextPos:a,result:g};return g}function pb(){var b="VARNAME@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var g=a,e=a,d=sa();d===null&&(c.substr(a).match(/^[0-9]/)!==null?
(d=c.charAt(a),a++):(d=null,j&&h("[0-9]")),d=d!==null?d:null);if(d!==null){var i=[],k=sa();k===null&&(c.substr(a).match(/^[0-9]/)!==null?(k=c.charAt(a),a++):(k=null,j&&h("[0-9]")),k===null&&(c.substr(a).match(/^[\xB7]/)!==null?(k=c.charAt(a),a++):(k=null,j&&h("[\\xB7]")),k===null&&(c.substr(a).match(/^[\u0300-\u036F]/)!==null?(k=c.charAt(a),a++):(k=null,j&&h("[\\u0300-\\u036F]")),k===null&&(c.substr(a).match(/^[\u203F-\u2040]/)!==null?(k=c.charAt(a),a++):(k=null,j&&h("[\\u203F-\\u2040]")),k=k!==null?
k:null))));for(;k!==null;)i.push(k),k=sa(),k===null&&(c.substr(a).match(/^[0-9]/)!==null?(k=c.charAt(a),a++):(k=null,j&&h("[0-9]")),k===null&&(c.substr(a).match(/^[\xB7]/)!==null?(k=c.charAt(a),a++):(k=null,j&&h("[\\xB7]")),k===null&&(c.substr(a).match(/^[\u0300-\u036F]/)!==null?(k=c.charAt(a),a++):(k=null,j&&h("[\\u0300-\\u036F]")),k===null&&(c.substr(a).match(/^[\u203F-\u2040]/)!==null?(k=c.charAt(a),a++):(k=null,j&&h("[\\u203F-\\u2040]")),k=k!==null?k:null))));i!==null?d=[d,i]:(d=null,a=e)}else d=
null,a=e;e=d!==null?d[0]+d[1].join(""):null;e===null&&(e=null,a=g);(j=f)&&e===null&&h("[149] VARNAME");z[b]={nextPos:a,result:e};return e}function Ba(){var b="PN_CHARS@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var g=sa();g===null&&(c.substr(a,1)==="-"?(g="-",a+=1):(g=null,j&&h('"-"')),g===null&&(c.substr(a).match(/^[0-9]/)!==null?(g=c.charAt(a),a++):(g=null,j&&h("[0-9]")),g===null&&(c.substr(a).match(/^[\xB7]/)!==null?(g=c.charAt(a),a++):(g=null,j&&h("[\\xB7]")),g===null&&(c.substr(a).match(/^[\u0300-\u036F]/)!==
null?(g=c.charAt(a),a++):(g=null,j&&h("[\\u0300-\\u036F]")),g===null&&(c.substr(a).match(/^[\u203F-\u2040]/)!==null?(g=c.charAt(a),a++):(g=null,j&&h("[\\u203F-\\u2040]")),g=g!==null?g:null)))));(j=f)&&g===null&&h("[150] PN_CHARS");z[b]={nextPos:a,result:g};return g}function Va(){var b="PN_PREFIX@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var g=a,e=a,d=qb();if(d!==null){var k=[],i=Ba();i===null&&(c.substr(a,1)==="."?(i=".",a+=1):(i=null,j&&h('"."')),i=i!==null?i:null);for(;i!==null;)k.push(i),
i=Ba(),i===null&&(c.substr(a,1)==="."?(i=".",a+=1):(i=null,j&&h('"."')),i=i!==null?i:null);k!==null?d=[d,k]:(d=null,a=e)}else d=null,a=e;e=d!==null?function(a,c){if(c[c.length-1]==".")throw Error("Wrong PN_PREFIX, cannot finish with '.'");else return a+c.join("")}(d[0],d[1]):null;e===null&&(e=null,a=g);(j=f)&&e===null&&h("[151] PN_PREFIX");z[b]={nextPos:a,result:e};return e}function ob(){var b="PN_LOCAL@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var g=a,e=a,d=sa();d===null&&(c.substr(a).match(/^[0-9]/)!==
null?(d=c.charAt(a),a++):(d=null,j&&h("[0-9]")),d=d!==null?d:null);if(d!==null){for(var k=[],i=Ba();i!==null;)k.push(i),i=Ba();k!==null?d=[d,k]:(d=null,a=e)}else d=null,a=e;e=d!==null?d[0]+d[1].join(""):null;e===null&&(e=null,a=g);(j=f)&&e===null&&h("[152] PN_LOCAL");z[b]={nextPos:a,result:e};return e}function uc(){var b=function(a){a.sort();for(var c=null,b=[],f=0;f<a.length;f++)a[f]!==c&&(b.push(a[f]),c=a[f]);switch(b.length){case 0:return"end of input";case 1:return b[0];default:return b.slice(0,
b.length-1).join(", ")+" or "+b[b.length-1]}}(Ta),f=Math.max(a,va),f=f<c.length?i(c.charAt(f)):"end of input";return"Expected "+b+" but "+f+" found."}function vc(){for(var a=1,b=1,f=!1,e=0;e<va;e++){var d=c.charAt(e);d==="\n"?(f||a++,b=1,f=!1):d==="\r"|d==="\u2028"||d==="\u2029"?(a++,b=1,f=!0):(b++,f=!1)}return{line:a,column:b}}var ha={ANON:sc,AdditiveExpression:T,Aggregate:$b,ArgList:ib,AskQuery:W,BLANK_NODE_LABEL:rc,BaseDecl:C,BindingValue:xa,BindingsClause:rb,BlankNode:Yb,BlankNodePropertyList:Ub,
BooleanLiteral:Ha,BrackettedExpression:Ea,BuiltInCall:Da,COMMENT:tc,Clear:zb,Collection:Tb,ConditionalAndExpression:Oa,ConditionalOrExpression:L,Constraint:wa,ConstructQuery:O,ConstructTemplate:ub,ConstructTriples:jb,Create:Bb,DECIMAL:Ra,DECIMAL_NEGATIVE:jc,DECIMAL_POSITIVE:gc,DOCUMENT:function(){var b="DOCUMENT@"+a,c=z[b];if(c)return a=c.nextPos,c.result;c=g();c===null&&(c=x(),c=c!==null?c:null);z[b]={nextPos:a,result:c};return c},DOUBLE:Qa,DOUBLE_NEGATIVE:ic,DOUBLE_POSITIVE:fc,DatasetClause:Q,DefaultGraphClause:$,
DeleteClause:Gb,DeleteData:Db,DeleteWhere:Eb,DescribeQuery:P,Drop:Ab,ECHAR:fa,EXPONENT:Sa,ExistsFunc:function(){var b="ExistsFunc@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var g=a;if(c.substr(a,6)==="EXISTS"){var e="EXISTS";a+=6}else e=null,j&&h('"EXISTS"');if(e!==null){var d=V();d!==null?e=[e,d]:(e=null,a=g)}else e=null,a=g;(j=f)&&e===null&&h("[108] ExistsFunc");z[b]={nextPos:a,result:e};return e},ExpressionList:Ob,Filter:Nb,FunctionCall:Wa,GraphGraphPattern:Lb,GraphNode:pa,GraphPatternNotTriples:hb,
GraphRef:Ia,GraphRefAll:$a,GraphTerm:Vb,GroupClause:ga,GroupCondition:ia,GroupGraphPattern:V,GroupGraphPatternSub:Hb,GroupOrUnionGraphPattern:Ib,HavingClause:ua,INTEGER:ca,INTEGER_NEGATIVE:kc,INTEGER_POSITIVE:hc,IRI_REF:ma,IRIref:S,IRIrefOrFunction:Zb,InsertClause:bb,InsertData:Cb,LANGTAG:cc,LimitClause:Ya,LimitOffsetClauses:wb,Load:yb,MinusGraphPattern:Kb,Modify:Fb,MultiplicativeExpression:qa,NIL:ka,NamedGraphClause:aa,NotExistsFunc:function(){var b="NotExistsFunc@"+a,f=z[b];if(f)return a=f.nextPos,
f.result;f=j;j=!1;var g=a;if(c.substr(a,10)==="NOT EXISTS"){var e="NOT EXISTS";a+=10}else e=null,j&&h('"NOT EXISTS"');if(e!==null){var d=V();d!==null?e=[e,d]:(e=null,a=g)}else e=null,a=g;(j=f)&&e===null&&h("[109] NotExistsFunc");z[b]={nextPos:a,result:e};return e},NumericLiteral:Ga,NumericLiteralNegative:ra,NumericLiteralPositive:ec,NumericLiteralUnsigned:dc,ObjectList:la,OffsetClause:Za,OptionalGraphPattern:Jb,OrderClause:vb,OrderCondition:Xa,PNAME_LN:qc,PNAME_NS:Ca,PN_CHARS:Ba,PN_CHARS_BASE:qb,
PN_CHARS_U:sa,PN_LOCAL:ob,PN_PREFIX:Va,PathAlternative:mb,PathElt:nb,PathEltOrInverse:Na,PathMod:Rb,PathNegatedPropertySet:Sb,PathOneInPropertySet:za,PathPrimary:Qb,PathSequence:Ma,PrefixDecl:u,PrefixedName:pc,PrimaryExpression:Aa,Prologue:w,PropertyList:Pb,PropertyListNotEmpty:ya,PropertyListNotEmptyPath:function(){var b="PropertyListNotEmptyPath@"+a,f=z[b];if(f)return a=f.nextPos,f.result;f=j;j=!1;var g=a,e=La();e===null&&(e=R(),e=e!==null?e:null);if(e!==null){var d=la();if(d!==null){var k=[],i=
a;if(c.substr(a,1)===";"){var m=";";a+=1}else m=null,j&&h('";"');if(m!==null){var q=a,r=La();r===null&&(r=R(),r=r!==null?r:null);if(r!==null){var t=la();t!==null?r=[r,t]:(r=null,a=q)}else r=null,a=q;q=r!==null?r:"";q!==null?m=[m,q]:(m=null,a=i)}else m=null,a=i;for(;m!==null;)k.push(m),i=a,c.substr(a,1)===";"?(m=";",a+=1):(m=null,j&&h('";"')),m!==null?(q=a,r=La(),r===null&&(r=R(),r=r!==null?r:null),r!==null?(t=la(),t!==null?r=[r,t]:(r=null,a=q)):(r=null,a=q),q=r!==null?r:"",q!==null?m=[m,q]:(m=null,
a=i)):(m=null,a=i);k!==null?e=[e,d,k]:(e=null,a=g)}else e=null,a=g}else e=null,a=g;(j=f)&&e===null&&h("[73] PropertyListNotEmptyPath");z[b]={nextPos:a,result:e};return e},PropertyListPath:function(){var b="PropertyListPath@"+a,c=z[b];if(c)return a=c.nextPos,c.result;c=j;j=!1;var f=ya(),f=f!==null?f:"";(j=c)&&f===null&&h("[74] PropertyListPath");z[b]={nextPos:a,result:f};return f},QuadData:ab,QuadPattern:eb,Quads:fb,QuadsNotTriples:gb,Query:m,RDFLiteral:Fa,RegexExpression:ac,RelationalExpression:Pa,
SPARQL:g,STRING_LITERAL1:nc,STRING_LITERAL2:oc,STRING_LITERAL_LONG1:lc,STRING_LITERAL_LONG2:mc,SelectClause:K,SelectQuery:J,ServiceGraphPattern:Mb,SolutionModifier:X,String:bc,SubSelect:G,TURTLE:x,TriplesBlock:na,TriplesNode:lb,TriplesSameSubject:Ja,TriplesTemplate:oa,UnaryExpression:ba,Update:Ua,Update1:xb,UsingClause:cb,VAR1:Wb,VAR2:Xb,VARNAME:pb,Var:R,VarOrIRIref:ja,VarOrTerm:kb,Verb:Ka,VerbPath:La,WS:r,WhereClause:U,base:I,directive:E,prefixID:F,statement:A};if(b!==void 0){if(ha[b]===void 0)throw Error("Invalid rule name: "+
i(b)+".");}else b="DOCUMENT";var a=0,j=!0,va=0,Ta=[],z={},Z=function(a){for(var b="",c=0;c<a.length;c++)b+=typeof a[c]==="string"?a[c]:a[c].join("");return b},ea=0,sb=function(a){for(var c="",b=0;b<a.length;b++)c+=a[b];return c.toUpperCase()},ha=ha[b]();if(ha===null||a!==c.length)throw ha=vc(),new this.SyntaxError(uc(),ha.line,ha.column);return ha},toSource:function(){return this._source},SyntaxError:function(c,b,g){this.name="SyntaxError";this.message=c;this.line=b;this.column=g}};b.SyntaxError.prototype=
Error.prototype;return b}();var X={};(new Date).getTime();X.combined_parser=ia.parser;X.parser={};X.parser.parse=function(b,c){for(var f=[],g=X.combined_parser.parse(b),i={},h={namespaces:i,base:"",blankCounter:0},q=0;q<g.length;q++){var m=g[q];if(m.token==="base")h.base=m.value;else if(m.token==="prefix")i[m.prefix]=m.local;else if(m.token==="triples"||m.token==="triplespattern")for(var w=0;w<m.triplesContext.length;w++){var C=m.triplesContext[w],C={subject:A.lexicalFormTerm(C.subject,h),predicate:A.lexicalFormTerm(C.predicate,
h),object:A.lexicalFormTerm(C.object,h),graph:c};f.push(C)}}return f};var x={defaultContext:{rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",xsd:"http://www.w3.org/2001/XMLSchema#",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",cal:"http://www.w3.org/2002/12/cal/ical#",vcard:"http://www.w3.org/2006/vcard/ns# ",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",cc:"http://creativecommons.org/ns#",
sioc:"http://rdfs.org/sioc/ns#",doap:"http://usefulinc.com/ns/doap#",com:"http://purl.org/commerce#",ps:"http://purl.org/payswarm#",gr:"http://purl.org/goodrelations/v1#",sig:"http://purl.org/signature#",ccard:"http://purl.org/commerce/creditcard#"},UrisMap:function(){this.defaultNs="";this.interfaceProperties=["get","remove","set","setDefault","addAll","resolve","shrink"]}};x.UrisMap.prototype.values=function(){var b={},c;for(c in this)A.include(this.interfaceProperties,c)||(b[c]=this[c]);return b};
x.UrisMap.prototype.get=function(b){if(b.indexOf(" ")!=-1)throw"Prefix must not contain any whitespaces";return this[b]};x.UrisMap.prototype.remove=function(b){if(b.indexOf(" ")!=-1)throw"Prefix must not contain any whitespaces";delete this[b];return null};x.UrisMap.prototype.set=function(b,c){if(b.indexOf(" ")!=-1)throw"Prefix must not contain any whitespaces";this[b]=c};x.UrisMap.prototype.setDefault=function(b){this.defaultNs=b};x.UrisMap.prototype.addAll=function(b,c){for(var f in b)A.include(this.interfaceProperties,
f)||(this[f]!=null?c===!0&&(this[f]=b[f]):this[f]=b[f]);return this};x.UrisMap.prototype.resolve=function(b){var c=b.split(":"),b=c[0],c=c[1];return b===""?this.defaultNs+c:this[b]!=null?this[b]+c:null};x.UrisMap.prototype.shrink=function(b){for(var c in this){var f=this[c];if(b.indexOf(f)===0&&f!=="")return b=b.split(f)[1],c+":"+b}return b};x.Profile=function(){this.prefixes=new x.UrisMap;this.terms=new x.UrisMap};x.Profile.prototype.importProfile=function(b,c){this.prefixes.addAll(b.prefixes,c);
this.terms.addAll(b.terms,c)};x.Profile.prototype.resolve=function(b){return b.indexOf(":")!=-1?this.prefixes.resolve(b):this.terms[b]!=null?this.terms.resolve(b):null};x.Profile.prototype.setDefaultPrefix=function(b){this.prefixes.setDefault(b)};x.Profile.prototype.setDefaultVocabulary=function(b){this.terms.setDefault(b)};x.Profile.prototype.setPrefix=function(b,c){this.prefixes.set(b,c)};x.Profile.prototype.setTerm=function(b,c){this.terms.set(b,c)};x.RDFEnvironment=function(){this.blankNodeCounter=
0;var b=this;this.filters={s:function(b){return function(c){return c.subject.equals(b)}},p:function(b){return function(c){return c.predicate.equals(b)}},o:function(b){return function(c){return c.object.equals(b)}},sp:function(b,c){return function(g){return g.subject.equals(b)&&g.predicate.equals(c)}},so:function(b,c){return function(g){return g.subject.equals(b)&&g.object.equals(c)}},po:function(b,c){return function(g){return g.predicate.equals(b)&&g.object.equals(c)}},spo:function(b,c,g){return function(h){return h.subject.equals(b)&&
h.predicate.equals(c)&&h.object.equals(g)}},describes:function(b){return function(c){return c.subject.equals(b)||c.object.equals(b)}},type:function(c){var g=b.resolve("rdf:type");return function(b){return b.predicate.equals(g)&&b.object.equals(c)}}};for(var c in x.defaultContext)this.prefixes.set(c,x.defaultContext[c])};A["extends"](x.Profile,x.RDFEnvironment);x.RDFEnvironment.prototype.createBlankNode=function(){var b=x.BlankNode(this.blankNodeCounter);this.blankNodeCounter++;return b};x.RDFEnvironment.prototype.createNamedNode=
function(b){var c=this.resolve(b);return c!=null?new x.NamedNode(c):new x.NamedNode(b)};x.RDFEnvironment.prototype.createLiteral=function(b,c,f){return f!=null?new x.Literal(b,c,f.toString()):new x.Literal(b,c,f)};x.RDFEnvironment.prototype.createTriple=function(b,c,f){return new x.Triple(b,c,f)};x.RDFEnvironment.prototype.createGraph=function(b){var c=new x.Graph;if(b!=null)for(var f=0;f<b.length;f++)c.add(b[f]);return c};x.RDFEnvironment.prototype.createAction=function(b,c){return function(f){return b(f)?
c(f):f}};x.RDFEnvironment.prototype.createProfile=function(b){return b===!0?new x.RDFEnvironment.Profile:(b=new x.RDFEnvironment.Profile,b.importProfile(this),b)};x.RDFEnvironment.prototype.createTermMap=function(b){if(b===!0)return new x.UrisMap;else{var b=this.terms.values(),c=new x.UrisMap,f;for(f in b)c[f]=b[f];return c}};x.RDFEnvironment.prototype.createPrefixMap=function(b){if(b===!0)return new x.UrisMap;else{var b=this.prefixes.values(),c=new x.UrisMap,f;for(f in b)c[f]=b[f];return c}};x.RDFNode=
function(b){this.interfaceName=b;this.attributes=["interfaceName","nominalValue"]};x.RDFNode.prototype.equals=function(b){if(b.interfaceName==null)return this.valueOf()==b;else{for(var c in this.attributes){var f=this.attributes[c];if(this[f]!=b[f])return!1}return!0}};x.BlankNode=function(b){x.RDFNode.call(this,"BlankNode");this.nominalValue="_:"+b;this.bnodeId=b};A["extends"](x.RDFNode,x.BlankNode);x.BlankNode.prototype.toString=function(){return this.nominalValue};x.BlankNode.prototype.toNT=function(){return this.nominalValue};
x.BlankNode.prototype.valueOf=function(){return this.nominalValue};x.Literal=function(b,c,f){x.RDFNode.call(this,"Literal");this.nominalValue=b;if(c!=null)this.language=c;else if(f!=null)this.datatype=f};A["extends"](x.RDFNode,x.Literal);x.Literal.prototype.toString=function(){var b='"'+this.nominalValue+'"';this.language!=null?b=b+"@"+this.language:this.type!=null&&(b=b+"^^"+this.datatype);return b};x.Literal.prototype.toNT=function(){return this.toString()};x.Literal.prototype.valueOf=function(){return g.effectiveTypeValue({token:"literal",
type:this.type,value:this.nominalValue,language:this.language})};x.NamedNode=function(b){x.RDFNode.call(this,"NamedNode");this.nominalValue=b.value!=null?b.value:b};A["extends"](x.RDFNode,x.NamedNode);x.NamedNode.prototype.toString=function(){return this.nominalValue};x.NamedNode.prototype.toNT=function(){return"<"+this.toString()+">"};x.NamedNode.prototype.valueOf=function(){return this.nominalValue};x.Triple=function(b,c,f){this.subject=b;this.predicate=c;this.object=f};x.Triple.prototype.equals=
function(b){return this.subject.equals(b.subject)&&this.predicate.equals(b.predicate)&&this.object.equals(b.object)};x.Triple.prototype.toString=function(){return this.subject.toNT()+" "+this.predicate.toNT()+" "+this.object.toNT()+" . \r\n"};x.Graph=function(){this.triples=[];this.duplicates={};this.actions=[]};x.Graph.prototype.add=function(b){for(var c=0;c<this.actions.length;c++)b=this.actions[c](b);c=b.subject.toString()+b.predicate.toString()+b.object.toString();this.duplicates[c]||(this.duplicates[c]=
!0,this.triples.push(b));return this};x.Graph.prototype.addAction=function(b,c){this.actions.push(b);if(c==!0)for(var f=0;f<this.triples.length;f++)this.triples[f]=b(this.triples[f]);return this};x.Graph.prototype.addAll=function(b){for(var b=b.toArray(),c=0;c<b.length;c++)this.add(b[c]);return this};x.Graph.prototype.remove=function(b){for(var c=null,f=0;f<this.triples.length;f++)if(this.triples[f].equals(b)){delete this.duplicates[b.subject.toString()+b.predicate.toString()+b.object.toString()];
c=f;break}c!=null&&this.triples.splice(c,1);return this};x.Graph.prototype.toArray=function(){return this.triples};x.Graph.prototype.some=function(b){for(var c=0;c<this.triples.length;c++)if(b(this.triples[c],this)===!0)return!0;return!1};x.Graph.prototype.every=function(b){for(var c=0;c<this.triples.length;c++)if(b(this.triples[c],this)===!1)return!1;return!0};x.Graph.prototype.filter=function(b){for(var c=new x.Graph,f=0;f<this.triples.length;f++)b(this.triples[f],this)===!0&&c.add(this.triples[f]);
return c};x.Graph.prototype.forEach=function(b){for(var c=0;c<this.triples.length;c++)b(this.triples[c],this)};x.Graph.prototype.merge=function(){for(var b=new x.Graph,c=0;c<this.triples;c++){var f=this.triples[c];b.add(f)}for(c=0;c<triples.length;c++)f=triples[c],this.add(f);return b};x.Graph.prototype.match=function(b,c,f,g){for(var i=new x.Graph,h=0,q=0;q<this.triples.length;q++){var m=this.triples[q];if(b==null||m.subject.equals(b))if(c==null||m.predicate.equals(c))if(f==null||m.object.equals(f))if(g==
null||h<g)h++,i.add(m);else break}return i};x.Graph.prototype.removeMatches=function(b,c,f){for(var g=[],i=0;i<this.triples.length;i++){var h=this.triples[i];if(b==null||h.subject.equals(b))if(c==null||h.predicate.equals(c))(f==null||h.object.equals(f))&&g.push(h)}for(i=0;i<g.length;i++)this.remove(g[i]);return this};x.Graph.prototype.toNT=function(){var b="";this.forEach(function(c){b+=c.toString()});return b};x.buildRDFResource=function(b,c,f,g){return b.token==="blank"?x.buildBlankNode(b,c,f,g):
b.token==="literal"?x.buildLiteral(b,c,f,g):b.token==="uri"?x.buildNamedNode(b,c,f,g):b.token==="var"?(b=c[b.value],b!=null?x.buildRDFResource(b,c,f,g):null):null};x.buildBlankNode=function(b){if(b.value==null&&b.label)b.value=b.label;if(b.value.indexOf("_:")===0)b.value=b.value.split("_:")[1];return new x.BlankNode(b.value)};x.buildLiteral=function(b){return new x.Literal(b.value,b.lang,b.type)};x.buildNamedNode=function(b,c,f,g){if(b.value==null&&b.prefix!=null)c=f.resolveNsInEnvironment(b.prefix,
g),b.value=c+b.suffix;return new x.NamedNode(b)};x.rdf=new x.RDFEnvironment;var g={checkFilters:function(b,c,f,k,i){var h=b.filter,q=[];if(h==null||b.length!=null)return c;for(b=0;b<h.length;b++){for(var c=g.run(h[b].value,c,f,k,i),m=[],w=0;w<c.length;w++)c[w].__nullify__!=null?q.push(c[w]):m.push(c[w]);c=m}return c.concat(q)}};g.boundVars=function(b){if(b.expressionType!=null){var c=b.expressionType;if(c=="relationalexpression")return c=b.op2,g.boundVars(b.op1)+g.boundVars(c);else if(c=="conditionalor"||
c=="conditionaland"){for(var f=[],c=0;c<b.operands;c++)f=f.concat(g.boundVars(b.operands[c]));return f}else if(c=="builtincall")if(b.args==null)return[];else{f=[];for(c=0;c<b.args.length;c++)f=f.concat(g.boundVars(b.args[c]));return f}else if(c=="multiplicativeexpression"){f=g.boundVars(b.factor);for(c=0;c<b.factors.length;c++)f=f.concat(g.boundVars(b.factors[c].expression));return f}else if(c=="additiveexpression"){f=g.boundVars(b.summand);for(c=0;c<b.summands.length;c++)f=f.concat(g.boundVars(b.summands[c].expression));
return f}else if(c=="regex")return f=g.boundVars(b.expression1),f.concat(g.boundVars(b.expression2));else if(c=="unaryexpression")return g.boundVars(b.expression);else if(c=="atomic")return b.primaryexpression=="var"?[b.value]:[]}else throw console.log("ERROR"),console.log(b),"Cannot find bound expressions in a no expression token";};g.run=function(b,c,f,k,i){for(var h=i.copyDenormalizedBindings(c,k.outCache),q=[],m=0;m<c.length;m++){var w=g.runFilter(b,h[m],i,k),w=g.ebv(w);g.isEbvError(w)?f&&(w=
{__nullify__:!0,bindings:c[m]},q.push(w)):w===!0?q.push(c[m]):f&&(w={__nullify__:!0,bindings:c[m]},q.push(w))}return q};g.collect=function(b,c,f,k){for(var i=k.copyDenormalizedBindings(c,f.outCache),h=[],q=0;q<i.length;q++){var m=g.runFilter(b,i[q],k,f);h.push({binding:c[q],value:m})}return h};g.runDistinct=function(){};g.runAggregator=function(b,c,f,k){if(c==null||c.length===0)return g.ebvError();else if(b.token==="variable"&&b.kind=="var")return c[0][b.value.value];else if(b.token==="variable"&&
b.kind==="aliased")if(b.expression.expressionType==="atomic"&&b.expression.primaryexpression==="var")return c[0][b.expression.value.value];else if(b.expression.expressionType==="aggregate")if(b.expression.aggregateType==="max"){for(var i=null,h=0;h<c.length;h++){var q=c[h],q=g.runFilter(b.expression.expression,q,f,k);g.isEbvError(q)||(i===null?i=q:g.runLtFunction(i,q).value===!0&&(i=q))}return i===null?g.ebvError():i}else if(b.expression.aggregateType==="min"){i=null;for(h=0;h<c.length;h++)q=c[h],
q=g.runFilter(b.expression.expression,q,f,k),g.isEbvError(q)||(i===null?i=q:g.runGtFunction(i,q).value===!0&&(i=q));return i===null?g.ebvError():i}else if(b.expression.aggregateType==="count"){var i={},m=0;if(b.expression.expression==="*")if(b.expression.distinct!=null&&b.expression.distinct!="")for(h=0;h<c.length;h++){var q=c[h],w=A.hashTerm(q);i[w]==null&&(i[w]=!0,m++)}else m=c.length;else for(h=0;h<c.length;h++)q=c[h],q=g.runFilter(b.expression.expression,q,f,k),g.isEbvError(q)||(b.expression.distinct!=
null&&b.expression.distinct!=""?(w=A.hashTerm(q),i[w]==null&&(i[w]=!0,m++)):m++);return{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:""+m}}else if(b.expression.aggregateType==="avg"){for(var i={},C={token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:"0"},h=m=0;h<c.length;h++)q=c[h],q=g.runFilter(b.expression.expression,q,f,k),g.isEbvError(q)||(b.expression.distinct!=null&&b.expression.distinct!=""?(w=A.hashTerm(q),i[w]==null&&(i[w]=!0,g.isNumeric(q)&&(C=
g.runSumFunction(C,q),m++))):g.isNumeric(q)&&(C=g.runSumFunction(C,q),m++));b=g.runDivFunction(C,{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:""+m});b.value=""+b.value;return b}else if(b.expression.aggregateType==="sum"){i={};C={token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:"0"};for(h=0;h<c.length;h++)q=c[h],q=g.runFilter(b.expression.expression,q,f,k),g.isEbvError(q)||(b.expression.distinct!=null&&b.expression.distinct!=""?(w=A.hashTerm(q),i[w]==
null&&(i[w]=!0,g.isNumeric(q)&&(C=g.runSumFunction(C,q)))):g.isNumeric(q)&&(C=g.runSumFunction(C,q)));C.value=""+C.value;return C}else return q=g.runFilter(aggregate.expression,c[0],{blanks:{},outCache:{}})};g.runFilter=function(b,c,f,k){if(b.expressionType!=null){var i=b.expressionType;if(i=="relationalexpression"){var i=g.runFilter(b.op1,c,f,k),h=g.runFilter(b.op2,c,f,k);return g.runRelationalFilter(b,i,h,c,f,k)}else if(i=="conditionalor")return g.runOrFunction(b,c,f,k);else if(i=="conditionaland")return g.runAndFunction(b,
c,f,k);else if(i=="additiveexpression")return g.runAddition(b.summand,b.summands,c,f,k);else if(i=="builtincall")return g.runBuiltInCall(b.builtincall,b.args,c,f,k);else if(i=="multiplicativeexpression")return g.runMultiplication(b.factor,b.factors,c,f,k);else if(i=="unaryexpression")return g.runUnaryExpression(b.unaryexpression,b.expression,c,f,k);else if(i=="irireforfunction")return g.runIriRefOrFunction(b.iriref,b.args,c,f,k);else if(i=="regex")return g.runRegex(b.text,b.pattern,b.flags,c,f,k);
else if(i=="atomic")if(b.primaryexpression=="var")return c[b.value.value];else{if(typeof b.value=="object"&&!(b.value.type==null||typeof b.value.type!="object"))b.value.type=A.lexicalFormBaseUri(b.value.type,k);return b.value}else throw"Unknown filter expression type";}else throw"Cannot find bound expressions in a no expression token";};g.isRDFTerm=function(b){return b==null?!1:b.token&&b.token=="literal"||b.token&&b.token=="uri"||b.token&&b.token=="blank"?!0:!1};g.RDFTermEquality=function(b,c,f,
k){return b.token==="literal"&&c.token==="literal"?b.lang==c.lang&&b.type==c.type&&b.value==c.value?!0:b.type!=null&&c.type!=null?g.ebvError():g.isSimpleLiteral(b)&&c.type!=null?g.ebvError():g.isSimpleLiteral(c)&&b.type!=null?g.ebvError():!1:b.token==="uri"&&c.token==="uri"?A.lexicalFormBaseUri(b,k)==A.lexicalFormBaseUri(c,k):b.token==="blank"&&c.token==="blank"?b.value==c.value:!1};g.isInteger=function(b){return b==null?!1:b.token==="literal"?b.type=="http://www.w3.org/2001/XMLSchema#integer"||b.type==
"http://www.w3.org/2001/XMLSchema#decimal"||b.type=="http://www.w3.org/2001/XMLSchema#double"||b.type=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||b.type=="http://www.w3.org/2001/XMLSchema#negativeInteger"||b.type=="http://www.w3.org/2001/XMLSchema#long"||b.type=="http://www.w3.org/2001/XMLSchema#int"||b.type=="http://www.w3.org/2001/XMLSchema#short"||b.type=="http://www.w3.org/2001/XMLSchema#byte"||b.type=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||b.type=="http://www.w3.org/2001/XMLSchema#unsignedLong"||
b.type=="http://www.w3.org/2001/XMLSchema#unsignedInt"||b.type=="http://www.w3.org/2001/XMLSchema#unsignedShort"||b.type=="http://www.w3.org/2001/XMLSchema#unsignedByte"||b.type=="http://www.w3.org/2001/XMLSchema#positiveInteger"?!0:!1:!1};g.isFloat=function(b){return b==null?!1:b.token==="literal"?b.type=="http://www.w3.org/2001/XMLSchema#float"?!0:!1:!1};g.isDecimal=function(b){return b==null?!1:b.token==="literal"?b.type=="http://www.w3.org/2001/XMLSchema#decimal"?!0:!1:!1};g.isDouble=function(b){return b==
null?!1:b.token==="literal"?b.type=="http://www.w3.org/2001/XMLSchema#double"?!0:!1:!1};g.isNumeric=function(b){return b==null?!1:b.token==="literal"?b.type=="http://www.w3.org/2001/XMLSchema#integer"||b.type=="http://www.w3.org/2001/XMLSchema#decimal"||b.type=="http://www.w3.org/2001/XMLSchema#float"||b.type=="http://www.w3.org/2001/XMLSchema#double"||b.type=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||b.type=="http://www.w3.org/2001/XMLSchema#negativeInteger"||b.type=="http://www.w3.org/2001/XMLSchema#long"||
b.type=="http://www.w3.org/2001/XMLSchema#int"||b.type=="http://www.w3.org/2001/XMLSchema#short"||b.type=="http://www.w3.org/2001/XMLSchema#byte"||b.type=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||b.type=="http://www.w3.org/2001/XMLSchema#unsignedLong"||b.type=="http://www.w3.org/2001/XMLSchema#unsignedInt"||b.type=="http://www.w3.org/2001/XMLSchema#unsignedShort"||b.type=="http://www.w3.org/2001/XMLSchema#unsignedByte"||b.type=="http://www.w3.org/2001/XMLSchema#positiveInteger"?!0:!1:
!1};g.isSimpleLiteral=function(b){return b&&b.token=="literal"?b.type==null&&b.lang==null?!0:!1:!1};g.isXsdType=function(b,c){return c&&c.token=="literal"?c.type=="http://www.w3.org/2001/XMLSchema#"+b:!1};g.ebv=function(b){if(b==null||g.isEbvError(b))return g.ebvError();else if(b.token&&b.token==="literal")if(b.type=="http://www.w3.org/2001/XMLSchema#integer"||b.type=="http://www.w3.org/2001/XMLSchema#decimal"||b.type=="http://www.w3.org/2001/XMLSchema#double"||b.type=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||
b.type=="http://www.w3.org/2001/XMLSchema#negativeInteger"||b.type=="http://www.w3.org/2001/XMLSchema#long"||b.type=="http://www.w3.org/2001/XMLSchema#int"||b.type=="http://www.w3.org/2001/XMLSchema#short"||b.type=="http://www.w3.org/2001/XMLSchema#byte"||b.type=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||b.type=="http://www.w3.org/2001/XMLSchema#unsignedLong"||b.type=="http://www.w3.org/2001/XMLSchema#unsignedInt"||b.type=="http://www.w3.org/2001/XMLSchema#unsignedShort"||b.type=="http://www.w3.org/2001/XMLSchema#unsignedByte"||
b.type=="http://www.w3.org/2001/XMLSchema#positiveInteger"){var c=parseFloat(b.value);return isNaN(c)?!1:parseFloat(b.value)!=0}else return b.type==="http://www.w3.org/2001/XMLSchema#boolean"?b.value==="true"||b.value===!0||b.value==="True":b.type==="http://www.w3.org/2001/XMLSchema#string"?b.value!="":b.type==="http://www.w3.org/2001/XMLSchema#dateTime"?new Date(b.value)!=null:g.isEbvError(b)?b:b.type==null?b.value!=""?!0:!1:g.ebvError();else return b.value===!0};g.ebvTrue=function(){return val=
{token:"literal",type:"http://www.w3.org/2001/XMLSchema#boolean",value:!0}};g.ebvFalse=function(){return val={token:"literal",type:"http://www.w3.org/2001/XMLSchema#boolean",value:!1}};g.ebvError=function(){return val={token:"literal",type:"https://github.com/antoniogarrote/js-tools/types#error",value:null}};g.isEbvError=function(b){return typeof b=="object"&&b!=null?b.type==="https://github.com/antoniogarrote/js-tools/types#error":!1};g.ebvBoolean=function(b){return g.isEbvError(b)?b:b===!0?g.ebvTrue():
g.ebvFalse()};g.runRelationalFilter=function(b,c,f,k,i,h){b=b.operator;if(b==="=")return g.runEqualityFunction(c,f,k,i,h);else if(b==="!="){c=g.runEqualityFunction(c,f,k,i,h);if(!g.isEbvError(c))c.value=!c.value;return c}else if(b==="<")return g.runLtFunction(c,f,k);else if(b===">")return g.runGtFunction(c,f,k);else if(b==="<=")return g.runLtEqFunction(c,f,k);else if(b===">=")return g.runGtEqFunction(c,f,k);else throw"Error applying relational filter, unknown operator";};g.effectiveTypeValue=function(b){if(b.token==
"literal")if(b.type=="http://www.w3.org/2001/XMLSchema#integer")return b=parseInt(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#decimal")return b=parseFloat(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#float")return b=parseFloat(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#double")return b=parseFloat(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger")return b=parseFloat(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#negativeInteger")return b=
parseInt(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#long")return b=parseInt(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#int")return b=parseInt(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#short")return b=parseInt(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#byte")return b=parseInt(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger")return b=parseInt(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#unsignedLong")return b=
parseInt(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#unsignedInt")return b=parseInt(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#unsignedShort")return b=parseInt(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#unsignedByte")return b=parseInt(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#positiveInteger")return b=parseInt(b.value);else if(b.type=="http://www.w3.org/2001/XMLSchema#date"||b.type=="http://www.w3.org/2001/XMLSchema#dateTime")try{return A.parseISO8601(b.value)}catch(c){return null}else return b.type==
"http://www.w3.org/2001/XMLSchema#boolean"?b.value===!0||b.value==="true"||b.value==="1"||b.value===1||b.value===!0?!0:b.value===!1||b.value==="false"||b.value==="0"||b.value===0||b.value===!1?!1:void 0:b.type=="http://www.w3.org/2001/XMLSchema#string"?b.value===null||b.value===void 0?void 0:""+b.value:b.value;else throw console.log("not implemented yet"),"value not supported in operations yet";};g.runOrFunction=function(b,c,f,k){for(var i=null,h=0;h<b.operands.length;h++){var q=g.runFilter(b.operands[h],
c,f,k);g.isEbvError(q)==!1&&(q=g.ebv(q));i==null?i=q:g.isEbvError(q)?i=g.isEbvError(i)?g.ebvError():i===!0?!0:g.ebvError():q===!0?i=!0:g.isEbvError(i)&&(i=g.ebvError())}return g.ebvBoolean(i)};g.runAndFunction=function(b,c,f,k){for(var i=null,h=0;h<b.operands.length;h++){var q=g.runFilter(b.operands[h],c,f,k);g.isEbvError(q)==!1&&(q=g.ebv(q));i==null?i=q:g.isEbvError(q)?i=g.isEbvError(i)?g.ebvError():i===!0?g.ebvError():!1:q===!0?g.isEbvError(i)&&(i=g.ebvError()):i=!1}return g.ebvBoolean(i)};g.runEqualityFunction=
function(b,c,f,k,i){if(g.isEbvError(b)||g.isEbvError(c))return g.ebvError();if(g.isNumeric(b)&&g.isNumeric(c)){var f=g.effectiveTypeValue(b),h=g.effectiveTypeValue(c);return isNaN(f)||isNaN(h)?g.ebvBoolean(g.RDFTermEquality(b,c,k,i)):g.ebvBoolean(f==h)}else if((g.isSimpleLiteral(b)||g.isXsdType("string",b))&&(g.isSimpleLiteral(c)||g.isXsdType("string",c)))return g.ebvBoolean(g.effectiveTypeValue(b)==g.effectiveTypeValue(c));else if(g.isXsdType("boolean",b)&&g.isXsdType("boolean",c))return g.ebvBoolean(g.effectiveTypeValue(b)==
g.effectiveTypeValue(c));else if((g.isXsdType("dateTime",b)||g.isXsdType("date",b))&&(g.isXsdType("dateTime",c)||g.isXsdType("date",c))){if(g.isXsdType("dateTime",b)&&g.isXsdType("date",c))return g.ebvFalse();if(g.isXsdType("date",b)&&g.isXsdType("dateTime",c))return g.ebvFalse();b=A.compareDateComponents(b.value,c.value);return b!=null?b==0?g.ebvTrue():g.ebvFalse():g.ebvError()}else return g.isRDFTerm(b)&&g.isRDFTerm(c)?g.ebvBoolean(g.RDFTermEquality(b,c,k,i)):g.ebvFalse()};g.runGtFunction=function(b,
c){if(g.isEbvError(b)||g.isEbvError(c))return g.ebvError();if(g.isNumeric(b)&&g.isNumeric(c))return g.ebvBoolean(g.effectiveTypeValue(b)>g.effectiveTypeValue(c));else if(g.isSimpleLiteral(b)&&g.isSimpleLiteral(c))return g.ebvBoolean(g.effectiveTypeValue(b)>g.effectiveTypeValue(c));else if(g.isXsdType("string",b)&&g.isXsdType("string",c))return g.ebvBoolean(g.effectiveTypeValue(b)>g.effectiveTypeValue(c));else if(g.isXsdType("boolean",b)&&g.isXsdType("boolean",c))return g.ebvBoolean(g.effectiveTypeValue(b)>
g.effectiveTypeValue(c));else if((g.isXsdType("dateTime",b)||g.isXsdType("date",b))&&(g.isXsdType("dateTime",c)||g.isXsdType("date",c))){if(g.isXsdType("dateTime",b)&&g.isXsdType("date",c))return g.ebvFalse();if(g.isXsdType("date",b)&&g.isXsdType("dateTime",c))return g.ebvFalse();var f=A.compareDateComponents(b.value,c.value);return f!=null?f==1?g.ebvTrue():g.ebvFalse():g.ebvError()}else return g.ebvFalse()};g.runTotalGtFunction=function(b,c){return g.isEbvError(b)||g.isEbvError(c)?g.ebvError():g.isNumeric(b)&&
g.isNumeric(c)||g.isSimpleLiteral(b)&&g.isSimpleLiteral(c)||g.isXsdType("string",b)&&g.isSimpleLiteral("string",c)||g.isXsdType("boolean",b)&&g.isSimpleLiteral("boolean",c)||g.isXsdType("dateTime",b)&&g.isSimpleLiteral("dateTime",c)?g.runGtFunction(b,c,[]):b.token&&b.token==="uri"&&c.token&&c.token==="uri"?g.ebvBoolean(b.value>c.value):b.token&&b.token==="literal"&&c.token&&c.token==="literal"?g.ebvBoolean(""+b.value+b.type+b.lang>""+c.value+c.type+c.lang):b.token&&b.token==="blank"&&c.token&&c.token===
"blank"?g.ebvBoolean(b.value>c.value):b.value&&c.value?g.ebvBoolean(b.value>c.value):g.ebvTrue()};g.runLtFunction=function(b,c){if(g.isEbvError(b)||g.isEbvError(c))return g.ebvError();if(g.isNumeric(b)&&g.isNumeric(c))return g.ebvBoolean(g.effectiveTypeValue(b)<g.effectiveTypeValue(c));else if(g.isSimpleLiteral(b)&&g.isSimpleLiteral(c))return g.ebvBoolean(g.effectiveTypeValue(b)<g.effectiveTypeValue(c));else if(g.isXsdType("string",b)&&g.isXsdType("string",c))return g.ebvBoolean(g.effectiveTypeValue(b)<
g.effectiveTypeValue(c));else if(g.isXsdType("boolean",b)&&g.isXsdType("boolean",c))return g.ebvBoolean(g.effectiveTypeValue(b)<g.effectiveTypeValue(c));else if((g.isXsdType("dateTime",b)||g.isXsdType("date",b))&&(g.isXsdType("dateTime",c)||g.isXsdType("date",c))){if(g.isXsdType("dateTime",b)&&g.isXsdType("date",c))return g.ebvFalse();if(g.isXsdType("date",b)&&g.isXsdType("dateTime",c))return g.ebvFalse();var f=A.compareDateComponents(b.value,c.value);return f!=null?f==-1?g.ebvTrue():g.ebvFalse():
g.ebvError()}else return g.ebvFalse()};g.runGtEqFunction=function(b,c){if(g.isEbvError(b)||g.isEbvError(c))return g.ebvError();if(g.isNumeric(b)&&g.isNumeric(c))return g.ebvBoolean(g.effectiveTypeValue(b)>=g.effectiveTypeValue(c));else if(g.isSimpleLiteral(b)&&g.isSimpleLiteral(c))return g.ebvBoolean(g.effectiveTypeValue(b)>=g.effectiveTypeValue(c));else if(g.isXsdType("string",b)&&g.isXsdType("string",c))return g.ebvBoolean(g.effectiveTypeValue(b)>=g.effectiveTypeValue(c));else if(g.isXsdType("boolean",
b)&&g.isXsdType("boolean",c))return g.ebvBoolean(g.effectiveTypeValue(b)>=g.effectiveTypeValue(c));else if((g.isXsdType("dateTime",b)||g.isXsdType("date",b))&&(g.isXsdType("dateTime",c)||g.isXsdType("date",c))){if(g.isXsdType("dateTime",b)&&g.isXsdType("date",c))return g.ebvFalse();if(g.isXsdType("date",b)&&g.isXsdType("dateTime",c))return g.ebvFalse();var f=A.compareDateComponents(b.value,c.value);return f!=null?f!=-1?g.ebvTrue():g.ebvFalse():g.ebvError()}else return g.ebvFalse()};g.runLtEqFunction=
function(b,c){if(g.isEbvError(b)||g.isEbvError(c))return g.ebvError();if(g.isNumeric(b)&&g.isNumeric(c))return g.ebvBoolean(g.effectiveTypeValue(b)<=g.effectiveTypeValue(c));else if(g.isSimpleLiteral(b)&&g.isSimpleLiteral(c))return g.ebvBoolean(g.effectiveTypeValue(b)<=g.effectiveTypeValue(c));else if(g.isXsdType("string",b)&&g.isXsdType("string",c))return g.ebvBoolean(g.effectiveTypeValue(b)<=g.effectiveTypeValue(c));else if(g.isXsdType("boolean",b)&&g.isXsdType("boolean",c))return g.ebvBoolean(g.effectiveTypeValue(b)<=
g.effectiveTypeValue(c));else if((g.isXsdType("dateTime",b)||g.isXsdType("date",b))&&(g.isXsdType("dateTime",c)||g.isXsdType("date",c))){if(g.isXsdType("dateTime",b)&&g.isXsdType("date",c))return g.ebvFalse();if(g.isXsdType("date",b)&&g.isXsdType("dateTime",c))return g.ebvFalse();var f=A.compareDateComponents(b.value,c.value);return f!=null?f!=1?g.ebvTrue():g.ebvFalse():g.ebvError()}else return g.ebvFalse()};g.runAddition=function(b,c,f,k,i){var h=g.runFilter(b,f,k,i);if(g.isEbvError(h))return g.ebvError();
b=h;if(g.isNumeric(h)){for(h=0;h<c.length;h++){var q=g.runFilter(c[h].expression,f,k,i);if(g.isNumeric(q))c[h].operator==="+"?b=g.runSumFunction(b,q):c[h].operator==="-"&&(b=g.runSubFunction(b,q));else return g.ebvFalse()}return b}else return g.ebvFalse()};g.runSumFunction=function(b,c){if(g.isEbvError(b)||g.isEbvError(c))return g.ebvError();var f=g.effectiveTypeValue(b)+g.effectiveTypeValue(c);return g.isDouble(b)||g.isDouble(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:f}:
g.isFloat(b)||g.isFloat(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",value:f}:g.isDecimal(b)||g.isDecimal(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:f}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:f}};g.runSubFunction=function(b,c){if(g.isEbvError(b)||g.isEbvError(c))return g.ebvError();var f=g.effectiveTypeValue(b)-g.effectiveTypeValue(c);return g.isDouble(b)||g.isDouble(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",
value:f}:g.isFloat(b)||g.isFloat(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",value:f}:g.isDecimal(b)||g.isDecimal(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:f}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:f}};g.runMultiplication=function(b,c,f,k,i){b=g.runFilter(b,f,k,i);if(g.isEbvError(b))return b;var h=b;if(g.isNumeric(b)){for(var q=0;q<c.length;q++){var m=g.runFilter(c[q].expression,f,k,i);if(g.isEbvError(m))return b;
if(g.isNumeric(m))c[q].operator==="*"?h=g.runMulFunction(h,m):c[q].operator==="/"&&(h=g.runDivFunction(h,m));else return g.ebvFalse()}return h}else return g.ebvFalse()};g.runMulFunction=function(b,c){if(g.isEbvError(b)||g.isEbvError(c))return g.ebvError();var f=g.effectiveTypeValue(b)*g.effectiveTypeValue(c);return g.isDouble(b)||g.isDouble(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:f}:g.isFloat(b)||g.isFloat(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",
value:f}:g.isDecimal(b)||g.isDecimal(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:f}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:f}};g.runDivFunction=function(b,c){if(g.isEbvError(b)||g.isEbvError(c))return g.ebvError();var f=g.effectiveTypeValue(b)/g.effectiveTypeValue(c);return g.isDouble(b)||g.isDouble(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:f}:g.isFloat(b)||g.isFloat(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",
value:f}:g.isDecimal(b)||g.isDecimal(c)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:f}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:f}};g.runBuiltInCall=function(b,c,f,k,i){for(var h=[],q=0;q<c.length;q++)if(c[q].token==="var")h.push(c[q]);else{var m=g.runFilter(c[q],f,k,i);if(g.isEbvError(m))return m;h.push(m)}if(b==="str")return h[0].token==="literal"?{token:"literal",type:null,value:""+h[0].value}:h[0].token==="uri"?{token:"literal",type:null,
value:h[0].value}:g.ebvFalse();else if(b==="lang")return h[0].token==="literal"?h[0].lang!=null?{token:"literal",value:""+h[0].lang}:{token:"literal",value:""}:g.ebvError();else if(b==="datatype")return h[0].token==="literal"?(f=h[0],f.type!=null?typeof f.type==="string"?{token:"uri",value:f.type,prefix:null,suffix:null}:f.type:f.lang==null?{token:"uri",value:"http://www.w3.org/2001/XMLSchema#string",prefix:null,suffix:null}:g.ebvError()):g.ebvError();else if(b==="isliteral")return h[0].token==="literal"?
g.ebvTrue():g.ebvFalse();else if(b==="isblank")return h[0].token==="blank"?g.ebvTrue():g.ebvFalse();else if(b==="isuri"||b==="isiri")return h[0].token==="uri"?g.ebvTrue():g.ebvFalse();else if(b==="sameterm")return f=g.RDFTermEquality(h[0],h[1],k,i),g.isEbvError(f)&&(f=!1),g.ebvBoolean(f);else if(b==="langmatches")return f=h[0],h=h[1],f.token==="literal"&&h.token==="literal"?h.value==="*"&&f.value!=""?g.ebvTrue():g.ebvBoolean(f.value.toLowerCase().indexOf(h.value.toLowerCase())===0):g.ebvError();else if(b===
"bound")return h=h[0].value,h==null?g.ebvError():f[h]!=null?g.ebvTrue():g.ebvFalse();else throw"Builtin call "+b+" not implemented yet";};g.runUnaryExpression=function(b,c,f,k,i){c=g.runFilter(c,f,k,i);if(g.isEbvError(c))return c;if(b==="!"){var h=g.ebv(c);return g.isEbvError(h)?g.ebvFalse():g.ebvBoolean(!h)}else if(b==="+")return g.isNumeric(c)?c:g.ebvError();else if(b==="-")if(g.isNumeric(c)){b={};for(h in c)b[h]=c[h];b.value=-b.value;return b}else return g.ebvError()};g.runRegex=function(b,c,f,
k,i,h){if(b!=null)b=g.runFilter(b,k,i,h);else return g.ebvError();if(c!=null)c=g.runFilter(c,k,i,h);else return g.ebvError();f!=null&&(f=g.runFilter(f,k,i,h));if(c!=null&&c.token==="literal"&&(f==null||f.token==="literal"))c=c.value,f=f==null?null:f.value;else return g.ebvError();if(b!=null&&b.token=="var")if(k[b.value]!=null)b=k[b.value];else return g.ebvError();else if(b!=null&&b.token==="literal")if(b.type==null||g.isXsdType("string",b))b=b.value;else return g.ebvError();else return g.ebvError();
return(f==null?RegExp(c):RegExp(c,f.toLowerCase())).exec(b)?g.ebvTrue():g.ebvFalse()};g.normalizeLiteralDatatype=function(b,c,f){if(!(b.value.type==null||typeof b.value.type!="object"))b.value.type=A.lexicalFormBaseUri(b.value.type,f);return b};g.runIriRefOrFunction=function(b,c,f,k,i){if(c==null)return b;else{for(var h=[],q=0;q<c.length;q++)h.push(g.runFilter(c[q],f,k,i));b=A.lexicalFormBaseUri(b,i);if(b=="http://www.w3.org/2001/XMLSchema#integer"||b=="http://www.w3.org/2001/XMLSchema#decimal"||
b=="http://www.w3.org/2001/XMLSchema#double"||b=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||b=="http://www.w3.org/2001/XMLSchema#negativeInteger"||b=="http://www.w3.org/2001/XMLSchema#long"||b=="http://www.w3.org/2001/XMLSchema#int"||b=="http://www.w3.org/2001/XMLSchema#short"||b=="http://www.w3.org/2001/XMLSchema#byte"||b=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||b=="http://www.w3.org/2001/XMLSchema#unsignedLong"||b=="http://www.w3.org/2001/XMLSchema#unsignedInt"||b=="http://www.w3.org/2001/XMLSchema#unsignedShort"||
b=="http://www.w3.org/2001/XMLSchema#unsignedByte"||b=="http://www.w3.org/2001/XMLSchema#positiveInteger")if(h=h[0],h.token==="literal")if(h=g.normalizeLiteralDatatype(h,k,i),h.type=="http://www.w3.org/2001/XMLSchema#integer"||h.type=="http://www.w3.org/2001/XMLSchema#decimal"||h.type=="http://www.w3.org/2001/XMLSchema#double"||h.type=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||h.type=="http://www.w3.org/2001/XMLSchema#negativeInteger"||h.type=="http://www.w3.org/2001/XMLSchema#long"||
h.type=="http://www.w3.org/2001/XMLSchema#int"||h.type=="http://www.w3.org/2001/XMLSchema#short"||h.type=="http://www.w3.org/2001/XMLSchema#byte"||h.type=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||h.type=="http://www.w3.org/2001/XMLSchema#unsignedLong"||h.type=="http://www.w3.org/2001/XMLSchema#unsignedInt"||h.type=="http://www.w3.org/2001/XMLSchema#unsignedShort"||h.type=="http://www.w3.org/2001/XMLSchema#unsignedByte"||h.type=="http://www.w3.org/2001/XMLSchema#positiveInteger")return h.type=
b,h;else if(h.type=="http://www.w3.org/2001/XMLSchema#boolean")return g.ebv(h)==!0?(h.type=b,h.value=1):(h.type=b,h.value=0),h;else if(h.type=="http://www.w3.org/2001/XMLSchema#float"||h.type=="http://www.w3.org/2001/XMLSchema#double")return h.type=b,h.value=parseInt(h.value),h;else if(h.type=="http://www.w3.org/2001/XMLSchema#string"||h.type==null){if(h.value.split(".").length>2)return g.ebvError();else if(h.value.split("-").length>2)return g.ebvError();else if(h.value.split("/").length>2)return g.ebvError();
else if(h.value.split("+").length>2)return g.ebvError();if(b=="http://www.w3.org/2001/XMLSchema#decimal"&&(h.value.indexOf("e")!=-1||h.value.indexOf("E")!=-1))return g.ebvError();if(b=="http://www.w3.org/2001/XMLSchema#int"||b=="http://www.w3.org/2001/XMLSchema#integer")if(h.value.indexOf("e")!=-1||h.value.indexOf("E")!=-1||h.value.indexOf(".")!=-1)return g.ebvError();try{return h.value=parseInt(parseFloat(h.value)),isNaN(h.value)?g.ebvError():(h.type=b,h)}catch(m){return g.ebvError()}}else return g.ebvError();
else return g.ebvError();else if(b=="http://www.w3.org/2001/XMLSchema#boolean")return h=h[0],h.token==="literal"&&h.type==null?h.value==="true"||h.value==="1"?g.ebvTrue():h.value==="false"||h.value==="0"?g.ebvFalse():g.ebvError():h.token==="literal"?g.isEbvError(h)?h:g.ebvBoolean(h):g.ebvError();else if(b=="http://www.w3.org/2001/XMLSchema#string")if(h=h[0],h.token==="literal")if(h=g.normalizeLiteralDatatype(h,k,i),h.type=="http://www.w3.org/2001/XMLSchema#integer"||h.type=="http://www.w3.org/2001/XMLSchema#decimal"||
h.type=="http://www.w3.org/2001/XMLSchema#double"||h.type=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||h.type=="http://www.w3.org/2001/XMLSchema#negativeInteger"||h.type=="http://www.w3.org/2001/XMLSchema#long"||h.type=="http://www.w3.org/2001/XMLSchema#int"||h.type=="http://www.w3.org/2001/XMLSchema#short"||h.type=="http://www.w3.org/2001/XMLSchema#byte"||h.type=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||h.type=="http://www.w3.org/2001/XMLSchema#unsignedLong"||h.type=="http://www.w3.org/2001/XMLSchema#unsignedInt"||
h.type=="http://www.w3.org/2001/XMLSchema#unsignedShort"||h.type=="http://www.w3.org/2001/XMLSchema#unsignedByte"||h.type=="http://www.w3.org/2001/XMLSchema#positiveInteger"||h.type=="http://www.w3.org/2001/XMLSchema#float")return h.type=b,h.value=""+h.value,h;else if(h.type=="http://www.w3.org/2001/XMLSchema#string")return h;else if(h.type=="http://www.w3.org/2001/XMLSchema#boolean")return g.ebv(h)?(h.type=b,h.value="true"):(h.type=b,h.value="false"),h;else if(h.type=="http://www.w3.org/2001/XMLSchema#dateTime"||
h.type=="http://www.w3.org/2001/XMLSchema#date"){h.type=b;if(typeof h.value!="string")h.value=A.iso8601(h.value);return h}else return h.type==null?(h.value=""+h.value,h.type=b,h):g.ebvError();else return h.token==="uri"?{token:"literal",value:A.lexicalFormBaseUri(h,i),type:b,lang:null}:g.ebvError();else if(b=="http://www.w3.org/2001/XMLSchema#dateTime"||b=="http://www.w3.org/2001/XMLSchema#date")if(h=h[0],h.type=="http://www.w3.org/2001/XMLSchema#dateTime"||h.type=="http://www.w3.org/2001/XMLSchema#date")return h;
else if(h.type=="http://www.w3.org/2001/XMLSchema#string"||h.type==null)try{return h.value=A.iso8601(A.parseStrictISO8601(h.value)),h.type=b,h}catch(w){return g.ebvError()}else return g.ebvError();else if(b=="http://www.w3.org/2001/XMLSchema#float")if(h=h[0],h.token==="literal")if(h=g.normalizeLiteralDatatype(h,k,i),h.type=="http://www.w3.org/2001/XMLSchema#decimal"||h.type=="http://www.w3.org/2001/XMLSchema#int")return h.type=b,h.value=parseFloat(h.value),h;else if(h.type=="http://www.w3.org/2001/XMLSchema#boolean")return g.ebv(h)==
!0?(h.type=b,h.value=1):(h.type=b,h.value=0),h;else if(h.type=="http://www.w3.org/2001/XMLSchema#float"||h.type=="http://www.w3.org/2001/XMLSchema#double")return h.type=b,h.value=parseFloat(h.value),h;else if(h.type=="http://www.w3.org/2001/XMLSchema#string")try{return h.value=parseFloat(h.value),isNaN(h.value)?g.ebvError():(h.type=b,h)}catch(C){return g.ebvError()}else if(h.type==null){if(h.value.split(".").length>2)return g.ebvError();else if(h.value.split("-").length>2)return g.ebvError();else if(h.value.split("/").length>
2)return g.ebvError();else if(h.value.split("+").length>2)return g.ebvError();try{return h.value=parseFloat(h.value),isNaN(h.value)?g.ebvError():(h.type=b,h)}catch(u){return g.ebvError()}}else return g.ebvError();else return g.ebvError();else return g.ebvError()}};var E={orderJoins:function(b){return b},variablesInBGP:function(b){var c=b.variables;if(c)return c;var f=b.value||b,c=[];for(comp in f)f[comp]&&f[comp].token==="var"?c.push(f[comp].value):f[comp]&&f[comp].token==="blank"&&c.push("blank:"+
f[comp].label);return b.variables=c},variablesIntersectionBGP:function(b,c){for(var f=E.variablesInBGP(b).sort(),g=E.variablesInBGP(c).sort(),i=0,h=0,q=[];i<f.length&&h<g.length;)f[i]===g[h]?(q.push(f[i]),i++,h++):f[i]<g[h]?i++:h++;return q}};E.executeAndBGPs=function(b,c,f,g){b=A.partition(b,2);return E.buildBushyJoinTreeBase(b,c,f,g)};E.buildBushyJoinTreeBase=function(b,c,f,g){for(var i=[],h=0;h<b.length;h++){var q=b[h];results=E.executeAndBGP(q[0],q[1],c,f,g);if(results!=null)i.push(results);else return null}return E.buildBushyJoinTreeBranches(i)};
E.buildBushyJoinTreeBranches=function(b){if(b.length===1)return b[0];else{for(var b=A.partition(b,2),c=[],f=0;f<b.length;f++){var g=b[f],g=E.executeAndBindings(g[0],g[1]);c.push(g)}return E.buildBushyJoinTreeBranches(c)}};E.executeAndBindings=function(b,c){return b==null?c:c==null?b:b==[]||c==[]?[]:E.variablesIntersectionBindings(b[0],c[0]).length==0?E.crossProductBindings(b,c):E.joinBindings(b,c)};E.executeAndBGP=function(b,c,f,g,i){if(b==null)return E.executeEmptyJoinBGP(c,f,g,i);else if(c==null)return E.executeEmptyJoinBGP(b,
f,g,i);else{var h=E.variablesIntersectionBGP(b,c);return h.length===0?E.executeCrossProductBGP(h,b,c,f,g,i):E.executeJoinBGP(h,b,c,f,g,i)}};E.executeEmptyJoinBGP=function(b,c,f,g){return E.executeBGPDatasets(b,c,f,g)};E.executeJoinBGP=function(b,c,f,g,i,h){b=E.executeBGPDatasets(c,g,i,h);return b!=null?(f=E.executeBGPDatasets(f,g,i,h),f!=null?E.joinBindings(b,f):null):null};E.executeBGPDatasets=function(b,c,f,g){var i={};if(b.graph==null){for(var h=[],q=0;q<c["default"].length;q++)if(i[c["default"][q].oid]==
null){i[c["default"][q].oid]=!0;b.graph=c["default"][q];var m=f.rangeQuery(b,g),m=E.buildBindingsFromRange(m,b);h.push(m)}return b=E.unionManyBindings(h)}else if(b.graph.token==="var"){for(var w=b.graph.value,h=[],q=0;q<c.named.length;q++)if(i[c.named[q].oid]==null)if(i[c.named[q].oid]=!0,b.graph=c.named[q],m=f.rangeQuery(b,g),m!=null){for(var m=E.buildBindingsFromRange(m,b),C=0;C<m.length;C++)m[C][w]=c.named[q].oid;h.push(m)}else return null;return b=E.unionManyBindings(h||[])}else return m=f.rangeQuery(b,
g),m!=null?m=E.buildBindingsFromRange(m,b):null};E.executeCrossProductBGP=function(b,c,f,g,i,h){b=E.executeBGPDatasets(c,g,i,h);return b!=null?(f=E.executeBGPDatasets(f,g,i,h),f!=null?E.crossProductBindings(b,f):null):null};E.buildBindingsFromRange=function(b,c){E.variablesInBGP(c);var f={},g=c.value||c,f={};for(m in g)g[m]&&g[m].token==="var"?f[m]=g[m].value:g[m]&&g[m].token==="blank"&&(f[m]="blank:"+g[m].label);for(var g=[],i=0;i<b.length;i++){var h={},q=b[i],m;for(m in f)h[f[m]]=q[m];g.push(h)}return g};
E.variablesIntersectionBindings=function(b,c){var f=0,g=0,i=[],h=[],q;for(q in b)i.push(q);for(q in c)h.push(q);i.sort();h.sort();for(q=[];f<i.length&&g<h.length;)i[f]===h[g]?(q.push(i[f]),f++,g++):i[f]<h[g]?f++:g++;return q};E.areCompatibleBindings=function(b,c){for(var f in b)if(c[f]!=null&&c[f]!=b[f])return!1;return!0};E.mergeBindings=function(b,c){var f={},g;for(g in b)f[g]=b[g];for(g in c)f[g]=c[g];return f};E.joinBindings=function(b,c){for(var f=[],g=0;g<b.length;g++)for(var i=b[g],h=0;h<c.length;h++){var q=
c[h];E.areCompatibleBindings(i,q)&&f.push(E.mergeBindings(i,q))}return f};E.augmentMissingBindings=function(b,c){for(var f in c)b[f]==null&&(b[f]=null);return b};E.leftOuterJoinBindings=function(b,c){for(var f=[],g=0;g<b.length;g++){for(var i=b[g],h=!1,q=0;q<c.length;q++){var m=c[q];E.areCompatibleBindings(i,m)&&(h=!0,f.push(E.mergeBindings(i,m)))}h===!1&&(E.augmentMissingBindings(i,m),f.push(i))}return f};E.crossProductBindings=function(b,c){for(var f=[],g=0;g<b.length;g++)for(var i=b[g],h=0;h<c.length;h++)f.push(E.mergeBindings(i,
c[h]));return f};E.unionBindings=function(b,c){return b.concat(c)};E.unionManyBindings=function(b){for(var c=[],f=0;f<b.length;f++)c=E.unionBindings(c,b[f]);return c};var J={QueryEngine:function(b){if(arguments.length!=0)this.backend=b.backend,this.lexicon=b.lexicon,this.abstractQueryTree=new Q.AbstractQueryTree,this.rdfLoader=new aa.RDFLoader(b.communication),this.callbacksBackend=new F.CallbacksBackend(this)}};J.QueryEngine.prototype.registerNsInEnvironment=function(b,c){for(var f=b.prefixes,g=
{},i=0;i<f.length;i++){var h=f[i];if(h.token==="prefix")g[h.prefix]=h.local}c.namespaces=g;c.base=b.base&&typeof b.base==="object"?b.base.value:null};J.QueryEngine.prototype.applyModifier=function(b,c){if(b=="DISTINCT"){for(var f={},g=[],i=0;i<c.length;i++){var h=c[i],q="",m;for(m in h){var w=h[m];w==null?q=q+m+"null":w.token=="literal"?(w.value!=null&&(q+=w.value),w.lang!=null&&(q+=w.lang),w.type!=null&&(q+=w.type)):q=w.value?q+m+w.value:q+m+w}f[q]==null&&(g.push(h),f[q]=!0)}return g}else return c};
J.QueryEngine.prototype.applyLimitOffset=function(b,c,f){if(c==null&&b==null)return f;b==null&&(b=0);c=c==null?f.length:b+c;return f.slice(b,c)};J.QueryEngine.prototype.applySingleOrderBy=function(b,c,f){for(var k=[],i=0;i<b.length;i++){var h=g.collect(b[i].expression,[c],f,this);k.push(h[0].value)}return{binding:c,value:k}};J.QueryEngine.prototype.applyOrderBy=function(b,c,f){var g=this,i=[];if(b!=null&&b.length>0){for(var h=0;h<c.length;h++){var q=g.applySingleOrderBy(b,c[h],f);i.push(q)}i.sort(function(c,
h){return g.compareFilteredBindings(c,h,b,f)});c=[];for(h=0;h<i.length;h++)c.push(i[h].binding)}return c};J.QueryEngine.prototype.compareFilteredBindings=function(b,c,f,k){for(var i=0;;){if(i==b.value.length)return 0;var h=f[i].direction;if(b.value[i]==null&&c.value[i]==null)i++;else{if(b.value[i]==null)b={value:!1};else if(c.value[i]==null)b={value:!0};else if(b.value[i].token==="blank"&&c.value[i].token==="blank"){i++;continue}else if(b.value[i].token==="blank")b={value:!1};else if(c.value[i].token===
"blank")b={value:!0};else if(b.value[i].token==="uri"&&c.value[i].token==="uri")if(g.runEqualityFunction(b.value[i],c.value[i],[],this,k).value==!0){i++;continue}else b=g.runTotalGtFunction(b.value[i],c.value[i],[]);else if(b.value[i].token==="uri")b={value:!1};else if(c.value[i].token==="uri")b={value:!0};else if(b.value[i].token==="literal"&&c.value[i].token==="literal"&&b.value[i].type==null&&c.value[i].type==null)if(g.runEqualityFunction(b.value[i],c.value[i],[],this,k).value==!0){i++;continue}else b=
g.runTotalGtFunction(b.value[i],c.value[i],[]);else if(b.value[i].token==="literal"&&b.value[i].type==null)b={value:!1};else if(c.value[i].token==="literal"&&c.value[i].type==null)b={value:!0};else if(g.runEqualityFunction(b.value[i],c.value[i],[],this,k).value==!0){i++;continue}else b=g.runTotalGtFunction(b.value[i],c.value[i],[]);return b.value==!0?h==="ASC"?1:-1:h==="ASC"?-1:1}}};J.QueryEngine.prototype.removeDefaultGraphBindings=function(b,c){for(var f=[],g={},i=0;i<c.named.length;i++)g[c.named[i].oid]=
!0;for(i=0;i<c["default"].length;i++)g[c["default"][i].oid]==null&&f.push(c["default"][i].oid);f=[];for(i=0;i<b.length;i++){var h=b[i],q=!1,m;for(m in h){for(var w=0;w<g.length;w++)if(h[m]===g[w]){q=!0;break}if(q)break}q||f.push(h)}return f};J.QueryEngine.prototype.aggregateBindings=function(b,c,f){for(var c=this.copyDenormalizedBindings(c,f.outCache),k={},i=0;i<b.length;i++){var h=g.runAggregator(b[i],c,this,f);b[i].alias?k[b[i].alias.value]=h:k[b[i].value.value]=h}return k};J.QueryEngine.prototype.projectBindings=
function(b,c){if(b[0].kind==="*")return c;else{for(var f=[],k=0;k<c.length;k++){for(var i=c[k],h={},q=!0,m=0;m<b.length;m++)if(b[m].token=="variable"&&b[m].kind!="aliased")h[b[m].value.value]=i[b[m].value.value];else if(b[m].token=="variable"&&b[m].kind=="aliased"){var w=g.runFilter(b[m].expression,i,this,{blanks:{},outCache:{}});if(g.isEbvError(w)){q=!1;break}else h[b[m].alias.value]=w}q===!0&&f.push(h)}return f}};J.QueryEngine.prototype.resolveNsInEnvironment=function(b,c){return c.namespaces[b]};
J.QueryEngine.prototype.normalizeTerm=function(b,c,f){if(b.token==="uri")return c=A.lexicalFormBaseUri(b,c),c==null?null:f?this.lexicon.registerUri(c):this.lexicon.resolveUri(c);else if(b.token==="literal")return c=A.lexicalFormLiteral(b,c),b=f?this.lexicon.registerLiteral(c):this.lexicon.resolveLiteral(c);else if(b.token==="blank"){var g=b.label,b=c.blanks[g];b==null&&(b=f?this.lexicon.registerBlank(g):this.lexicon.resolveBlank(g),c.blanks[g]=b);return b}else return b.token==="var"?b.value:null};
J.QueryEngine.prototype.normalizeDatasets=function(b,c){for(var f=0;f<b.length;f++){var g=b[f];if(g.value===this.lexicon.defaultGraphUri)g.oid=this.lexicon.defaultGraphOid;else{var i=this.normalizeTerm(g,c,!1);if(i!=null)g.oid=i;else return null}}return!0};J.QueryEngine.prototype.normalizeQuad=function(b,c,f){var g=null,i=null,h=g=null,q;if(b.graph==null)h=0;else if(q=this.normalizeTerm(b.graph,c,f),q!=null)h=q,f===!0&&b.graph.token!="var"&&this.lexicon.registerGraph(q);else return null;q=this.normalizeTerm(b.subject,
c,f);if(q!=null)g=q;else return null;q=this.normalizeTerm(b.predicate,c,f);if(q!=null)i=q;else return null;q=this.normalizeTerm(b.object,c,f);return q==null?null:{subject:g,predicate:i,object:q,graph:h}};J.QueryEngine.prototype.denormalizeBindingsList=function(b,c){for(var f=[],g=0;g<b.length;g++)result=this.denormalizeBindings(b[g],c),f.push(result);return f};J.QueryEngine.prototype.copyDenormalizedBindings=function(b,c){for(var f=[],g=0;g<b.length;g++){for(var i={},h=b[g],q=A.keys(h),m=0;m<q.length;m++){var w=
h[q[m]];if(w==null)i[q[m]]=null;else if(typeof w==="object")i[q[m]]=w;else{var C=c[w];C==null&&(C=this.lexicon.retrieve(w),c[w]=C);i[q[m]]=C}}f.push(i)}return f};J.QueryEngine.prototype.denormalizeBindings=function(b,c){for(var f=A.keys(b),g=0;g<f.length;g++){var i=b[f[g]];i==null?b[f[g]]=null:c[i]!=null?b[f[g]]=c[i]:(i=this.lexicon.retrieve(i),b[f[g]]=i)}return b};J.QueryEngine.prototype.execute=function(b,c,f,g){b=A.normalizeUnicodeLiterals(b);b=this.abstractQueryTree.parseQueryString(b);if(b==
null)c(!1,"Error parsing query string");else if(b.token==="query"&&b.kind=="update"){this.callbacksBackend.startGraphModification();var i=this;this.executeUpdate(b,function(b,f){b?i.callbacksBackend.endGraphModification(function(){c(b,f)}):(i.callbacksBackend.cancelGraphModification(),c(b,f))})}else b.token==="query"&&b.kind=="query"&&this.executeQuery(b,c,f,g)};J.QueryEngine.prototype.executeQuery=function(b,c,f,g){var i=b.units,h=this,q={blanks:{},outCache:{}};this.registerNsInEnvironment(b.prologue,
q);var m=h.abstractQueryTree.parseExecutableUnit(i[0]);if(m.kind==="select")this.executeSelect(m,q,f,g,function(b,f){b?typeof f==="object"&&f.denorm===!0?c(!0,f.bindings):(f=h.denormalizeBindingsList(f,q.outCache),f!=null?c(!0,f):c(!1,f)):c(!1,f)});else if(m.kind==="ask")m.projection=[{token:"variable",kind:"*"}],this.executeSelect(m,q,f,g,function(b,f){b?b?f.length>0?c(!0,!0):c(!0,!1):c(!1,f):c(!1,f)});else if(m.kind==="construct")m.projection=[{token:"variable",kind:"*"}],h=this,this.executeSelect(m,
q,f,g,function(b,f){if(b)if(b)if(f=h.denormalizeBindingsList(f,q.outCache),f!=null){var g=new x.Graph;if(m.template==null)m.template={triplesContext:m.pattern};for(var i=1,k=0;k<f.length;k++)for(var A=f[k],E={},F=0;F<m.template.triplesContext.length;F++){for(var I=["subject","predicate","object"],J=m.template.triplesContext[F],G=0;G<I.length;G++){var K=I[G];if(J[K].token==="blank")if(E[J[K].value]!=null)J[K].value=E[J[K].value];else{var O="_:b"+i;i++;E[J[K].value]=O;J[K].value=O}}I=x.buildRDFResource(J.subject,
A,h,q);G=x.buildRDFResource(J.predicate,A,h,q);J=x.buildRDFResource(J.object,A,h,q);I!=null&&G!=null&&J!=null&&(G=new x.Triple(I,G,J),g.add(G))}c(!0,g)}else c(!1,f);else c(!1,f);else c(!1,f)})};J.QueryEngine.prototype.executeSelect=function(b,c,f,g,i){if(b.kind==="select"||b.kind==="ask"||b.kind==="construct"||b.kind==="modify"){var h=b.projection,q=b.dataset,m=b.modifier,w=b.limit,C=b.offset,u=b.order;if(f!=null||g!=null)q["default"]=f||[],q.named=g||[];q["default"]!=null&&q["default"].length===
0&&q.named!=null&&q.named.length===0&&q["default"].push(this.lexicon.defaultGraphUriTerm);if(this.normalizeDatasets(q["default"].concat(q.named),c)!=null)if(g=this.executeSelectUnit(h,q,b.pattern,c),g!=null){if(b.group!=null&&b.group===""){for(var x=!1,f=0;f<b.projection.length;f++)if(b.projection[f].expression!=null&&b.projection[f].expression.expressionType==="aggregate"){x=!0;break}if(x===!0)b.group="singleGroup"}if(b.group&&b.group!="")if(this.checkGroupSemantics(b.group,h)){q=this.groupSolution(g,
b.group,c);m=[];for(f=0;f<q.length;f++)w=this.aggregateBindings(h,q[f],c),m.push(w);i(!0,{bindings:m,denorm:!0})}else i(!1,"Incompatible Group and Projection variables");else c=this.applyOrderBy(u,g,c),h=this.projectBindings(h,c),modifiedBindings=this.applyModifier(m,h),filteredBindings=this.removeDefaultGraphBindings(this.applyLimitOffset(C,w,modifiedBindings),q),i(!0,filteredBindings)}else console.log("ERROR selectUnit"),i(!1,g);else console.log("ERROR normalizing"),i(!1,results)}else i(!1,"Cannot execute "+
b.kind+" query as a select query")};J.QueryEngine.prototype.groupSolution=function(b,c,f){var k=[],i=[],h=!1;if(c==="singleGroup")return[b];else{for(var q=0;q<b.length;q++){for(var m=b[q],w=!0,C=0;C<c.length;C++){var u=c[C],x=null;if(u.token==="var")x=u.value,h==!1&&k.push(x);else if(u.token==="aliased_expression")if(x=u.alias.value,h==!1&&k.push(x),u.expression.primaryexpression==="var")m[u.alias.value]=m[u.expression.value.value];else if(x=this.copyDenormalizedBindings([m],f.outCache),x=g.runFilter(u.expression,
x[0],this,f),g.isEbvError(x))w=!1;else{if(x.value!=null)x.value=""+x.value;m[u.alias.value]=x}else x=this.copyDenormalizedBindings([m],f.outCache),x=g.runFilter(u,x[0],this,f),g.isEbvError(x)?w=!1:(m["groupCondition"+env._i]=x,x="groupCondition"+env._i,h==!1&&k.push(x))}h==!1&&(h=!0);w===!0&&i.push(m)}b={};for(q=0;q<i.length;q++){c=i[q];f="";for(C=0;C<k.length;C++)h=c[k[C]],f+=typeof h==="object"?h.value:h;b[f]==null?b[f]=[c]:b[f].push(c)}var k=[],A;for(A in b)k.push(b[A]);return k}};J.QueryEngine.prototype.executeSelectUnit=
function(b,c,f,k){return f.kind==="BGP"?this.executeAndBGP(b,c,f,k):f.kind==="UNION"?this.executeUNION(b,c,f.value,k):f.kind==="JOIN"?this.executeJOIN(b,c,f,k):f.kind==="LEFT_JOIN"?this.executeLEFT_JOIN(b,c,f,k):f.kind==="FILTER"?(b=this.executeSelectUnit(b,c,f.value,k),b!=null?b=g.checkFilters(f,b,!1,k,this):[]):f.kind==="EMPTY_PATTERN"?[]:(console.log("Cannot execute query pattern "+f.kind+". Not implemented yet."),null)};J.QueryEngine.prototype.executeUNION=function(b,c,f,k){var i=f[0],h=f[1],
q=null,m=null;if(f.length!=2)throw"SPARQL algebra UNION with more than two components";q=this.executeSelectUnit(b,c,i,k);if(q==null)return null;m=this.executeSelectUnit(b,c,h,k);if(m==null)return null;b=E.unionBindings(q,m);return b=g.checkFilters(f,b,!1,k,this)};J.QueryEngine.prototype.executeAndBGP=function(b,c,f,k){b=E.executeAndBGPs(f.value,c,this,k);return b!=null?g.checkFilters(f,b,!1,k,this):null};J.QueryEngine.prototype.executeLEFT_JOIN=function(b,c,f,k){var i=f.rvalue,h=null,q=null,h=this.executeSelectUnit(b,
c,f.lvalue,k);if(h==null)return null;q=this.executeSelectUnit(b,c,i,k);if(q==null)return null;b=E.leftOuterJoinBindings(h,q);f=g.checkFilters(f,b,!0,k,this);if(h.length>1&&q.length>1){var k=[],b={},m;for(m in h[0])b[m]=!0;for(m in q[0])b[m]!=!0&&k.push(m);acum=[];duplicates={};for(h=0;h<f.length;h++)if(f[h].__nullify__===!0){for(b=0;b<k.length;b++)f[h].bindings[k[b]]=null;b=[];q=[];for(m in f[h].bindings)f[h].bindings[m]!=null&&(b.push(m+f[h].bindings[m]),b.sort(),q.push(b.join("")));if(duplicates[b.join("")]==
null){for(b=0;b<q.length;b++)duplicates[q[b]]=!0;acum.push(f[h].bindings)}}else for(m in acum.push(f[h]),b=[],f[h])b.push(m+f[h][m]),b.sort(),duplicates[b.join("")]=!0;return acum}else return f};J.QueryEngine.prototype.executeJOIN=function(b,c,f,k){var i=f.rvalue,h=null,q=null,h=this.executeSelectUnit(b,c,f.lvalue,k);if(h==null)return null;q=this.executeSelectUnit(b,c,i,k);if(q==null)return null;b=E.joinBindings(h,q);return b=g.checkFilters(f,b,!1,k,this)};J.QueryEngine.prototype.rangeQuery=function(b,
c){var f=this.normalizeQuad(b,c,!1);return f!=null?(f=this.backend.range(new W.Pattern(f)),f==null||f.length==0?[]:f):(console.log("ERROR normalizing quad"),null)};J.QueryEngine.prototype.executeUpdate=function(b,c){var f=b.units,g=this,i={blanks:{},outCache:{}};this.registerNsInEnvironment(b.prologue,i);for(var h=0;h<f.length;h++){var q=g.abstractQueryTree.parseExecutableUnit(f[h]);if(q.kind==="insertdata"){for(var m=0;m<q.quads.length;m++){var w=q.quads[m];if(g._executeQuadInsert(w,i)!==!0)return c(!1,
error)}c(!0)}else if(q.kind==="deletedata"){for(m=0;m<q.quads.length;m++)w=q.quads[m],this._executeQuadDelete(w,i);c(!0)}else if(q.kind==="modify")this._executeModifyQuery(q,i,c);else if(q.kind==="create")c(!0);else if(q.kind==="load")m={uri:A.lexicalFormBaseUri(q.sourceGraph,i)},q.destinyGraph!=null&&(m={uri:A.lexicalFormBaseUri(q.destinyGraph,i)}),g=this,this.rdfLoader.load(q.sourceGraph.value,m,function(b,f){b==!1?(console.log("Error loading graph"),console.log(f)):(f=g.batchLoad(f),c(f!=null,
f||"error batch loading quads"))});else if(q.kind==="drop")this._executeClearGraph(q.destinyGraph,i,c);else if(q.kind==="clear")this._executeClearGraph(q.destinyGraph,i,c);else throw Error("not supported execution unit");}};J.QueryEngine.prototype.batchLoad=function(b,c){for(var f=null,g=null,i=null,h=null,q=0,m=!0,w={},x,u,A=0;A<b.length;A++)if(u=b[A],u.subject.uri||u.subject.token==="uri"?f=x=this.lexicon.registerUri(u.subject.uri||u.subject.value):u.subject.literal||u.subject.token==="literal"?
f=x=this.lexicon.registerLiteral(u.subject.literal||u.subject.value):(h=w[u.subject.blank||u.subject.value],h==null&&(h=this.lexicon.registerBlank(u.subject.blank||u.subject.value),w[u.subject.blank||u.subject.value]=h),f=h),u.predicate.uri||u.predicate.token==="uri"?x=this.lexicon.registerUri(u.predicate.uri||u.predicate.value):u.predicate.literal||u.predicate.token==="literal"?x=this.lexicon.registerLiteral(u.predicate.literal||u.predicate.value):(h=w[u.predicate.blank||u.predicate.value],h==null&&
(h=this.lexicon.registerBlank(u.predicate.blank||u.predicate.value),w[u.predicate.blank||u.predicate.value]=h)),g=x,u.object.uri||u.object.token==="uri"?x=this.lexicon.registerUri(u.object.uri||u.object.value):u.object.literal||u.object.token==="literal"?x=this.lexicon.registerLiteral(u.object.literal||u.object.value):(h=w[u.object.blank||u.object.value],h==null&&(h=this.lexicon.registerBlank(u.object.blank||u.object.value),w[u.object.blank||u.object.value]=h)),i=x,u.graph.uri||u.graph.token==="uri"?
(x=this.lexicon.registerUri(u.graph.uri||u.graph.value),this.lexicon.registerGraph(x)):u.graph.literal||u.graph.token==="literal"?x=this.lexicon.registerLiteral(u.graph.literal||u.graph.value):(h=w[u.graph.blank||u.graph.value],h==null&&(h=this.lexicon.registerBlank(u.graph.blank||u.graph.value),w[u.graph.blank||u.graph.value]=h)),h=x,u={subject:f,predicate:g,object:i,graph:h},f=new W.NodeKey(u),this.backend.index(f)==!0)q+=1;else{m=!1;break}return m?(c&&c(!0,q),q):(c&&c(!1,null),null)};J.QueryEngine.prototype._executeModifyQuery=
function(b,c,f){var g=this,i=!0,h=null,q=["subject","predicate","object","graph"];b.insert=b.insert==null?[]:b.insert;b["delete"]=b["delete"]==null?[]:b["delete"];A.seq(function(f){var q=[],x=[];b["with"]!=null&&q.push(b["with"]);if(b.using!=null)for(var x=[],u=0;u<b.using.length;u++){var A=b.using[u];A.kind==="named"?x.push(A.uri):q.push(A.uri)}b.dataset={};b.projection=[{token:"variable",kind:"*"}];g.executeSelect(b,c,q,x,function(b,q){b?(q=g.denormalizeBindingsList(q,c.outCache),q!=null?h=q:i=
!1):i=!1;return f()})},function(f){var w=b["with"];if(i){for(var x=[],u=0;u<b["delete"].length;u++)for(var A=b["delete"][u],E=0;E<h.length;E++){for(var F={},I=h[E],J=0;J<q.length;J++){var G=q[J];G=="graph"&&A[G]==null?F.graph=w:F[G]=A[G].token==="var"?I[A[G].value]:A[G]}x.push(F)}for(E=0;E<x.length;E++)F=x[E],g._executeQuadDelete(F,c)}f()},function(f){var w=b["with"];if(i){for(var x=[],u=0;u<b.insert.length;u++)for(var A=b.insert[u],E=0;E<h.length;E++){for(var F={},J=h[E],I=0;I<q.length;I++){var G=
q[I];G=="graph"&&A[G]==null?F.graph=w:F[G]=A[G].token==="var"?J[A[G].value]:A[G]}x.push(F)}for(u=0;u<x.length;u++)F=x[u],g._executeQuadInsert(F,c)}f()})(function(){f(i)})};J.QueryEngine.prototype._executeQuadInsert=function(b,c){var f=this.normalizeQuad(b,c,!0);if(f!=null){var g=new W.NodeKey(f),i=this.backend.search(g);return i?i:(i=this.backend.index(g),i==!0?(this.callbacksBackend.nextGraphModification(F.added,[b,f]),!0):(console.log("ERROR inserting quad"),!1))}else return console.log("ERROR normalizing quad"),
!1};J.QueryEngine.prototype._executeQuadDelete=function(b,c){var f=this.normalizeQuad(b,c,!1);if(f!=null){var g=new W.NodeKey(f);this.backend["delete"](g);return this.lexicon.unregister(b,g)==!0?(this.callbacksBackend.nextGraphModification(F.deleted,[b,f]),!0):(console.log("ERROR unregistering quad"),!1)}else return console.log("ERROR normalizing quad"),!1};J.QueryEngine.prototype._executeClearGraph=function(b,c,f){if(b==="default")this.execute("DELETE { ?s ?p ?o } WHERE { ?s ?p ?o }",f);else if(b===
"named"){var g=this,i=this.lexicon.registeredGraphs(!0);if(i!=null){var h=!1;A.repeat(0,i.length,function(b,c){var f=i[c._i],x=arguments.callee;h?b(x,c):g.execute("DELETE { GRAPH <"+f+"> { ?s ?p ?o } } WHERE { GRAPH <"+f+"> { ?s ?p ?o } }",function(f){h=!f;b(x,c)})},function(){f(!h)})}else f(!1,"Error deleting named graphs")}else b==="all"?(g=this,this.execute("CLEAR DEFAULT",function(b,c){b?g.execute("CLEAR NAMED",f):f(!1,c)})):b.token=="uri"?(b=A.lexicalFormBaseUri(b,c),b!=null?this.execute("DELETE { GRAPH <"+
b+"> { ?s ?p ?o } } WHERE { GRAPH <"+b+"> { ?s ?p ?o } }",f):f(!1,"wrong graph URI")):f(!1,"wrong graph URI")};J.QueryEngine.prototype.checkGroupSemantics=function(b,c){if(b==="singleGroup")return!0;for(var f={},g=0;g<b.length;g++){var i=b[g];i.token==="var"?f[i.value]=!0:i.token==="aliased_expression"&&(f[i.alias.value]=!0)}for(g=0;g<c.length;g++)if(i=c[g],i.kind==="var"){if(f[i.value.value]==null)return!1}else if(i.kind==="aliased"&&i.expression&&i.expression.primaryexpression==="var"&&f[i.expression.value.value]==
null)return!1;return!0};var F={ANYTHING:{token:"var",value:"_"},added:"added",deleted:"deleted",eventsFlushed:"eventsFlushed",CallbacksBackend:function(b){this.aqt=new Q.AbstractQueryTree;this.engine=b;this.indexMap={};this.observersMap={};this.queriesIndexMap={};this.emptyNotificationsMap={};this.queriesList=[];this.pendingQueries=[];this.matchedQueries=[];this.updateInProgress=null;this.indices=["SPOG","GP","OGS","POG","GSP","OS"];this.componentOrders={SPOG:["subject","predicate","object","graph"],
GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]};this.callbackCounter=0;this.callbacksMap={};this.callbacksInverseMap={};this.queryCounter=0;this.queriesMap={};this.queriesCallbacksMap={};this.queriesInverseMap={};for(b=0;b<this.indices.length;b++){var c=this.indices[b];this.indexMap[c]={};this.queriesIndexMap[c]={}}}};F.CallbacksBackend.prototype.startGraphModification=
function(){this.pendingQueries=[].concat(this.queriesList);this.matchedQueries=[];if(this.updateInProgress==null)this.updateInProgress={added:[],deleted:[]}};F.CallbacksBackend.prototype.nextGraphModification=function(b,c){this.updateInProgress[b].push(c)};F.CallbacksBackend.prototype.endGraphModification=function(b){var c=this;if(this.updateInProgress!=null){var f=c.updateInProgress;c.updateInProgress=null;this.sendNotification(F.deleted,f[F.deleted],function(){c.sendNotification(F.added,f[F.added],
function(){c.sendEmptyNotification(F.eventsFlushed,null,function(){c.dispatchQueries(function(){b(!0)})})})})}else b(!0)};F.CallbacksBackend.prototype.cancelGraphModification=function(){this.updateInProgress=null};F.CallbacksBackend.prototype.sendNotification=function(b,c,f){for(var g={},i=0;i<c.length;i++){var h=c[i],q;for(q in this.indexMap){var m=this.indexMap[q],w=this.componentOrders[q];this._searchCallbacksInIndex(m,w,b,h,g);this.pendingQueries.length!=0&&(m=this.queriesIndexMap[q],this._searchQueriesInIndex(m,
w,h))}}this.dispatchNotifications(g);f!=null&&f(!0)};F.CallbacksBackend.prototype.sendEmptyNotification=function(b,c,f){for(var g=this.emptyNotificationsMap[b]||[],i=0;i<g.length;i++)g[i](b,c);f()};F.CallbacksBackend.prototype.dispatchNotifications=function(b){for(var c in b){var f=this.callbacksMap[c],g=b[c][F.deleted];g!=null&&f(F.deleted,g);for(var i in b[c])i!=F.deleted&&f(i,b[c][i])}};F.CallbacksBackend.prototype._searchCallbacksInIndex=function(b,c,f,g,i){for(var h=g[1],g=g[0],q=0;q<c.length+
1;q++){for(var m=b._||[],w=[],x=0;x<m.length;x++){var u=m[x];this.callbacksMap[u]!=null&&(i[u]=i[u]||{},i[u][f]=i[u][f]||[],i[u][f].push(g),w.push(u))}b._=w;m=c[q];if(b[""+h[m]]!=null)b=b[""+h[m]];else break}};F.CallbacksBackend.prototype.subscribeEmpty=function(b,c){var f=this.emptyNotificationsMap[b]||[];f.push(c);this.emptyNotificationsMap[b]=f};F.CallbacksBackend.prototype.unsubscribeEmpty=function(b,c){var f=this.emptyNotificationsMap[b];f!=null&&(f=A.remove(f,c));this.emptyNotificationsMap[b]=
f};F.CallbacksBackend.prototype.subscribe=function(b,c,f,g,i,h){b=this.engine.normalizeQuad(this._tokenizeComponents(b,c,f,g),{blanks:{},outCache:{}},!0);f=this._indexForPattern(new W.Pattern(b));c=this.componentOrders[f];f=this.indexMap[f];for(g=0;g<c.length;g++){var q=b[c[g]];if(q==="_"){f._==null&&(f._=[]);this.callbackCounter++;f._.push(this.callbackCounter);this.callbacksMap[this.callbackCounter]=i;this.callbacksInverseMap[i]=this.callbackCounter;break}else g===c.length-1?(f[q]=f[q]||{_:[]},
this.callbackCounter++,f[q]._.push(this.callbackCounter),this.callbacksMap[this.callbackCounter]=i,this.callbacksInverseMap[i]=this.callbackCounter):(f[q]=f[q]||{},f=f[q])}h!=null&&h(!0)};F.CallbacksBackend.prototype.unsubscribe=function(b){var c=this.callbacksInverseMap[b];c!=null&&(delete this.callbacksInverseMap[b],delete this.callbacksMap[c])};F.CallbacksBackend.prototype._tokenizeComponents=function(b,c,f,g){var i={};b==null?i.subject=F.ANYTHING:b.indexOf("_:")==0?(console.log("BLANK!!"),i.subject=
{token:"blank",value:b}):i.subject={token:"uri",value:b};i.predicate=c==null?F.ANYTHING:{token:"uri",value:c};i.object=f==null?F.ANYTHING:{token:"uri",value:f};i.graph=g==null?F.ANYTHING:{token:"uri",value:g};return i};F.CallbacksBackend.prototype._indexForPattern=function(b){for(var b=b.indexKey,c=this.indices,f=0;f<c.length;f++)for(var g=c[f],i=this.componentOrders[g],h=0;h<i.length;h++){if(A.include(b,i[h])===!1)break;if(h==b.length-1)return g}return"SPOG"};F.CallbacksBackend.prototype.observeNode=
function(){var b,c,f,g;arguments.length===4?(b=arguments[0],c=arguments[1],f=arguments[2],g=arguments[3]):(b=arguments[0],c=this.engine.lexicon.defaultGraphUri,f=arguments[1],g=arguments[2]);var i=this,h={blanks:{},outCache:{}},q=[];this.engine.execute("CONSTRUCT { <"+b+"> ?p ?o } WHERE { GRAPH <"+c+"> { <"+b+"> ?p ?o } }",function(c,w){if(c){var A=!1,u=function(b,c){if(b==="eventsFlushed"&&A)A=!1,f(w);else if(b!=="eventsFlushed"){A=!0;for(var g=0;g<c.length;g++){var k=c[g],m=x.buildRDFResource(k.subject,
q,i.engine,h),u=x.buildRDFResource(k.predicate,q,i.engine,h),k=x.buildRDFResource(k.object,q,i.engine,h);m!=null&&u!=null&&k!=null&&(k=new x.Triple(m,u,k),b===F.added?w.add(k):b===F.deleted&&w.remove(k))}}};i.observersMap[f]=u;i.subscribeEmpty(F.eventsFlushed,u);i.subscribe(b,null,null,null,u,function(){f(w);g&&g(!0)})}else g&&g(!1)})};F.CallbacksBackend.prototype.stopObservingNode=function(b){return(b=this.observersMap[b])?(this.unsubscribe(b),this.unsubscribeEmpty(F.eventsFlushed,b),!0):!1};F.CallbacksBackend.prototype.observeQuery=
function(b,c,f){var g=this.aqt.collectBasicTriples(this.aqt.parseSelect(this.aqt.parseQueryString(b).units[0])),i={blanks:{},outCache:{}},h,q,m,w=this.queryCounter;this.queryCounter++;this.queriesMap[w]=b;this.queriesInverseMap[b]=w;this.queriesList.push(w);this.queriesCallbacksMap[w]=c;for(var x=0;x<g.length;x++){q=g[x];if(q.graph==null)q.graph=this.engine.lexicon.defaultGraphUriTerm;q=this.engine.normalizeQuad(q,i,!0);h=new W.Pattern(q);m=this._indexForPattern(h);h=this.componentOrders[m];m=this.queriesIndexMap[m];
for(x=0;x<h.length;x++){var u=q[h[x]];if(typeof u==="string"){m._==null&&(m._=[]);m._.push(w);break}else x===h.length-1?(m[u]=m[u]||{_:[]},m[u]._.push(w)):(m[u]=m[u]||{},m=m[u])}}this.engine.execute(b,function(b,f){b?c(f):console.log("ERROR in query callback "+f)});f!=null&&f()};F.CallbacksBackend.prototype.stopObservingQuery=function(b){var c=this.queriesInverseMap[b];if(c!=null)delete this.queriesInverseMap[b],delete this.queriesMap[c],this.queriesList=A.remove(this.queriesList,c)};F.CallbacksBackend.prototype._searchQueriesInIndex=
function(b,c,f){for(var f=f[1],g=0;g<c.length+1;g++){for(var i=b._||[],h=[],q=0;q<i.length;q++){var m=i[q];A.include(this.pendingQueries,m)&&(A.remove(this.pendingQueries,m),this.matchedQueries.push(m));this.queriesMap[m]!=null&&h.push(m)}b._=h;i=c[g];if(b[""+f[i]]!=null)b=b[""+f[i]];else break}};F.CallbacksBackend.prototype.dispatchQueries=function(b){var c=this,f,g,i,h;A.repeat(0,this.matchedQueries.length,function(b,m){f=arguments.callee;i=c.matchedQueries[m._i];g=c.queriesMap[i];h=c.queriesCallbacksMap[i];
A.recur(function(){c.engine.execute(g,function(c,g){c?h(g):console.log("ERROR executing query callback "+g);b(f,m)})})},function(){b()})};var O={};try{console.log("*** Checking if web workers are available"),console.log("*** Web workers available")}catch(xc){Worker=null}if(Worker)O.RDFStoreClient=function(b,c,f){this.connection=Worker.Worker?new Worker.Worker(b):new Worker(b);this.callbacksCounter=1;var g=this;this.rdf=x.rdf;g=this;this.connection.onmessage=function(b){g.receive(b)};this.observingCallbacks=
{};this.callbacks={0:{cb:function(b,c){b===!0?f(!0,g):f(!1,c)},fn:"create"}};this.connection.postMessage({fn:"create",args:c,callback:"0"})},O.RDFStoreClient.prototype.receive=function(b){event=b.data||b;if(b=this.callbacks[event.callback])b.fn==="create"||b.fn==="execute"||b.fn==="insert"||b.fn=="graph"||b.fn==="node"||b.fn==="insert"||b.fn==="delete"||b.fn==="clear"||b.fn==="load"||b.fn==="startObservingQueryEndCb"||b.fn==="registeredGraphs"?(delete this.callbacks[event.callback],b.cb(event.success,
event.result)):b.fn==="startObservingNode"?b.cb(event.result):b.fn==="subscribe"&&b.cb(event.event,event.result)},O.RDFStoreClient.prototype.registerCallback=function(b,c){var f=""+this.callbacksCounter;this.callbacks[f]={fn:b,cb:c};this.callbacksCounter++;return f},O.RDFStoreClient.prototype.execute=function(){if(arguments.length===3)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2]);else if(arguments.length===4)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2],
arguments[3]);else{var b,c;arguments.length===1?(b=arguments[0],c=function(){}):arguments.length===2&&(b=arguments[0],c=arguments[1]);c=this.registerCallback("execute",c);this.connection.postMessage({fn:"execute",args:[b],callback:c})}},O.RDFStoreClient.prototype.insert=function(){var b,c,f;if(arguments.length===1)c=arguments[0],this.connection.postMessage({fn:"insert",args:[c]});else if(arguments.length===2)c=arguments[0],f=arguments[1]||function(){},f=this.registerCallback("insert",f),this.connection.postMessage({fn:"insert",
args:[c],callback:f});else if(arguments.length===3)c=arguments[0],b=arguments[1],f=arguments[2]||function(){},f=this.registerCallback("insert",f),this.connection.postMessage({fn:"insert",args:[c,b],callback:f});else throw"The triples to insert, an optional graph and callback must be provided";},O.RDFStoreClient.prototype.graph=function(){var b=null,c=null;if(arguments.length===1)c=arguments[0]||function(){};else if(arguments.length===2)c=arguments[1]||function(){},b=arguments[0];else throw"An optional graph URI and a callback function must be provided";
var f=this,g=this.registerCallback("insert",function(b,h){if(b){for(var g,k=0;k<h.triples.length;k++)g=h.triples[k],h.triples[k]=new x.Triple(f.adaptJSInterface(g.subject),f.adaptJSInterface(g.predicate),f.adaptJSInterface(g.object));c(b,f.rdf.createGraph(h.triples))}else c(b,h)});b==null?this.connection.postMessage({fn:"graph",args:[],callback:g}):this.connection.postMessage({fn:"graph",args:[b],callback:g})},O.RDFStoreClient.prototype.node=function(){var b=null,c=null,f=null;if(arguments.length===
2)f=arguments[0],c=arguments[1]||function(){};else if(arguments.length===3)f=arguments[0],b=arguments[1],c=arguments[2]||function(){};else throw"An optional graph URI and a callback function must be provided";var g=this,i=this.registerCallback("insert",function(b,f){if(b){for(var i,w=0;w<f.triples.length;w++)i=f.triples[w],f.triples[w]=new x.Triple(g.adaptJSInterface(i.subject),g.adaptJSInterface(i.predicate),g.adaptJSInterface(i.object));c(b,g.rdf.createGraph(f.triples))}else c(b,f)});b==null?this.connection.postMessage({fn:"node",
args:[f],callback:i}):this.connection.postMessage({fn:"node",args:[f,b],callback:i})},O.RDFStoreClient.prototype.setPrefix=function(b,c){this.rdf.setPrefix(b,c);this.connection.postMessage({fn:"rdf/setPrefix",args:[b,c],callback:null})},O.RDFStoreClient.prototype.setDefaultPrefix=function(b){this.rdf.setDefaultPrefix(b);this.connection.postMessage({fn:"rdf/setDefaultPrefix",args:[b],callback:null})},O.RDFStoreClient.prototype["delete"]=function(){var b,c,f;if(arguments.length===1)c=arguments[0],this.connection.postMessage({fn:"delete",
args:[c]});else if(arguments.length===2)c=arguments[0],f=arguments[1]||function(){},f=this.registerCallback("delete",f),this.connection.postMessage({fn:"delete",args:[c],callback:f});else if(arguments.length===3)c=arguments[0],b=arguments[1],f=arguments[2]||function(){},f=this.registerCallback("delete",f),this.connection.postMessage({fn:"delete",args:[c,b],callback:f});else throw"The triples to delete, an optional graph and callback must be provided";},O.RDFStoreClient.prototype.clear=function(){var b,
c;if(arguments.length===1)c=arguments[0]||function(){},c=this.registerCallback("clear",c),this.connection.postMessage({fn:"clear",args:[],callback:c});else if(arguments.length===2)b=arguments[0],c=arguments[1]||function(){},c=this.registerCallback("clear",c),this.connection.postMessage({fn:"clear",args:[b],callback:c});else throw"The optional graph and a callback must be provided";},O.RDFStoreClient.prototype.load=function(){var b,c,f,g;if(arguments.length===3)b=arguments[0],c=arguments[1],g=arguments[2]||
function(){},g=this.registerCallback("load",g),this.connection.postMessage({fn:"load",args:[b,c],callback:g});else if(arguments.length===4)b=arguments[0],c=arguments[1],f=arguments[2],g=arguments[3]||function(){},g=this.registerCallback("load",g),this.connection.postMessage({fn:"load",args:[b,c,f],callback:g});else if(arguments.length===2)throw"The mediaType of the parser, the data a callback and an optional graph must be provided";},O.RDFStoreClient.prototype.startObservingQuery=function(b,c,f){f!=
null?(c=this.registerCallback("startObservingQuery",c),this.observingCallbacks[b]=c,f=this.registerCallback("startObservingQueryEndCb",f),this.connection.postMessage({fn:"startObservingQuery",args:[b],callback:[c,f]})):(c=this.registerCallback("startObservingQuery",c),this.observingCallbacks[b]=c,this.connection.postMessage({fn:"startObservingQuery",args:[b],callback:[c]}))},O.RDFStoreClient.prototype.stopObservingQuery=function(b){var c=this.observingCallbacks[b];delete this.observingCallbacks[b];
delete this.callbacks[c];this.connection.postMessage({fn:"stopObservingQuery",args:[b],callback:[]})},O.RDFStoreClient.prototype.startObservingNode=function(){var b,c,f;if(arguments.length===2){b=arguments[0];f=arguments[1];var g=this,i=this.registerCallback("startObservingNode",function(b){for(var c,i=0;i<b.triples.length;i++)c=b.triples[i],b.triples[i]=new x.Triple(g.adaptJSInterface(c.subject),g.adaptJSInterface(c.predicate),g.adaptJSInterface(c.object));f(g.rdf.createGraph(b.triples))});this.observingCallbacks[f]=
i;this.connection.postMessage({fn:"startObservingNode",args:[b],callback:i})}else arguments.length===3&&(b=arguments[0],c=arguments[1],f=arguments[2],g=this,i=this.registerCallback("startObservingNode",function(b){for(var c,i=0;i<b.triples.length;i++)c=b.triples[i],b.triples[i]=new x.Triple(g.adaptJSInterface(c.subject),g.adaptJSInterface(c.predicate),g.adaptJSInterface(c.object));f(g.rdf.createGraph(b.triples))}),this.observingCallbacks[f]=i,this.connection.postMessage({fn:"startObservingNode",args:[b,
c],callback:i}))},O.RDFStoreClient.prototype.stopObservingNode=function(b){var c=this.observingCallbacks[b];delete this.observingCallbacks[b];delete this.callbacks[c];this.connection.postMessage({fn:"stopObservingNode",args:[c],callback:[]})},O.RDFStoreClient.prototype.subscribe=function(b,c,f,g,i){var h=this,q=this.registerCallback("subscribe",function(b,c){for(var f,g=0;g<c.length;g++)f=c[g],c[g]=new x.Triple(h.adaptJSInterface(f.subject),h.adaptJSInterface(f.predicate),h.adaptJSInterface(f.object));
i(b,c)});this.observingCallbacks[i]=q;this.connection.postMessage({fn:"subscribe",args:[b,c,f,g],callback:q})},O.RDFStoreClient.prototype.unsubscribe=function(b){var c=this.observingCallbacks[b];delete this.observingCallbacks[b];delete this.callbacks[c];this.connection.postMessage({fn:"unsubscribe",args:[c],callback:[]})},O.RDFStoreClient.prototype.registeredGraphs=function(b){var c=this;this.connection.postMessage({fn:"registeredGraphs",args:[],callback:this.registerCallback("registeredGraphs",function(f,
g){if(f)for(var i=0;i<g.length;i++)graph=g[i],g[i]=c.adaptJSInterface(graph);b(f,g)})})},O.RDFStoreClient.prototype.adaptJSInterface=function(b){if(b.interfaceName==="BlankNode")return new x.BlankNode(b.bnodeId);else if(b.interfaceName==="Literal")return new x.Literal(b.nominalValue,b.language,b.datatype);else if(b.interfaceName==="NamedNode")return new x.NamedNode(b.nominalValue)},O.RDFStoreClient.prototype.isWebWorkerConnection=!0;var G={VERSION:"0.4.3"};G.connect=function(){var b,c,f;arguments.length==
1&&(b=__dirname,c={},f=arguments[0]);arguments.length==2?(typeof arguments[0]==="string"?(b=arguments[0],c={}):(b=__dirname+"/index.js",c=arguments[0]),f=arguments[1]):(b=arguments[0],c=arguments[1],f=arguments[2]);try{Worker?new O.RDFStoreClient(b,c,function(b,c){f(b,c)}):G.create(c,function(b){f(!1,b)})}catch(g){console.log(g),G.create(c,function(b){f(!1,b)})}};G.create=function(){return arguments.length==1?new G.Store(arguments[0]):arguments.length==2?new G.Store(arguments[0],arguments[1]):new G.Store};
G.Store=function(b,c){var f=null,g=null;if(arguments.length==0)g={};else if(arguments.length==1)g={},f=b;else if(arguments.length>1)g=b,f=c;else throw"An optional argument map and a callback must be provided";g.treeOrder==null&&(g.treeOrder=15);this.rdf=x.rdf;this.functionMap={};var i=this;new P.Lexicon(function(b){g.overwrite===!0&&b.clear();new $.QuadBackend(g,function(c){g.overwrite===!0&&c.clear();g.backend=c;g.lexicon=b;i.engine=new J.QueryEngine(g);f&&f(i)})},g.name)};G.Store.prototype.execute=
function(){if(arguments.length===3)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2]);else if(arguments.length===4)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2],arguments[3]);else{var b,c;arguments.length===1?(b=arguments[0],c=function(){}):arguments.length===2&&(b=arguments[0],c=arguments[1]);this.engine.execute(b,c)}};G.Store.prototype.executeWithEnvironment=function(){var b,c,f,g;arguments.length===3?(b=arguments[0],c=function(){},f=arguments[1],g=arguments[2]):
arguments.length===4&&(b=arguments[0],c=arguments[3],f=arguments[1],g=arguments[2]);this.engine.execute(b,c,f,g)};G.Store.prototype.graph=function(){var b=null,c=null;if(arguments.length===1)c=arguments[0]||function(){},b=this.engine.lexicon.defaultGraphUri;else if(arguments.length===2)c=arguments[1]||function(){},b=arguments[0];else throw"An optional graph URI and a callback function must be provided";this.rdf.resolve(b)!=null&&(b=this.rdf.resolve(b));this.engine.execute("CONSTRUCT { ?s ?p ?o } WHERE { GRAPH <"+
b+"> { ?s ?p ?o } }",c)};G.Store.prototype.node=function(){var b=null,c=null,f=null;if(arguments.length===2)f=arguments[0],c=arguments[1]||function(){},b=this.engine.lexicon.defaultGraphUri;else if(arguments.length===3)f=arguments[0],b=arguments[1],c=arguments[2]||function(){};else throw"An optional graph URI and a callback function must be provided";this.rdf.resolve(b)!=null&&(b=this.rdf.resolve(b));this.rdf.resolve(f)!=null&&(f=this.rdf.resolve(f));this.engine.execute("CONSTRUCT { <"+f+"> ?p ?o } WHERE { GRAPH <"+
b+"> { <"+f+"> ?p ?o } }",c)};G.Store.prototype.startObservingNode=function(){var b,c,f;arguments.length===2?(b=arguments[0],f=arguments[1],this.engine.callbacksBackend.observeNode(b,f,function(){})):arguments.length===3&&(b=arguments[0],c=arguments[1],f=arguments[2],this.engine.callbacksBackend.observeNode(b,c,f,function(){}))};G.Store.prototype.stopObservingNode=function(b){this.engine.callbacksBackend.stopObservingNode(b)};G.Store.prototype.startObservingQuery=function(b,c,f){f!=null?this.engine.callbacksBackend.observeQuery(b,
c,f):this.engine.callbacksBackend.observeQuery(b,c,function(){})};G.Store.prototype.stopObservingQuery=function(b){this.engine.callbacksBackend.stopObservingQuery(b)};G.Store.prototype.subscribe=function(b,c,f,g,i){var h=function(b,c){for(var f=[],g={blanks:{},outCache:{}},h=[],k=0;k<c.length;k++){var A=c[k],E=x.buildRDFResource(A.subject,h,this.engine,g),F=x.buildRDFResource(A.predicate,h,this.engine,g),A=x.buildRDFResource(A.object,h,this.engine,g);E!=null&&F!=null&&A!=null&&(A=new x.Triple(E,F,
A),f.push(A))}i(b,f)};this.functionMap[i]=h;this.engine.callbacksBackend.subscribe(b,c,f,g,h,function(){})};G.Store.prototype.unsubscribe=function(b){this.engine.callbacksBackend.unsubscribe(this.functionMap[b]);delete this.functionMap[b]};G.Store.prototype.setPrefix=function(b,c){this.rdf.setPrefix(b,c)};G.Store.prototype.setDefaultPrefix=function(b){this.rdf.setDefaultPrefix(b)};G.Store.prototype.insert=function(){var b,c,f;if(arguments.length===1)c=arguments[0];else if(arguments.length===2)b=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),
c=arguments[0],f=arguments[1]||function(){};else if(arguments.length===3)c=arguments[0],b=this.rdf.createNamedNode(arguments[1]),f=arguments[2]||function(){};else throw"The triples to insert, an optional graph and callback must be provided";var g="",i=this;c.forEach(function(b){g=g+i._nodeToQuery(b.subject)+i._nodeToQuery(b.predicate)+i._nodeToQuery(b.object)+"."});g=b!=null?"INSERT DATA { GRAPH "+this._nodeToQuery(b)+" { "+g+" } }":"INSERT DATA { "+this._nodeToQuery(b)+" { "+g+" }";this.engine.execute(g,
f)};G.Store.prototype._nodeToQuery=function(b){if(b.interfaceName==="NamedNode"){var c=this.rdf.resolve(b.valueOf());return c!=null?"<"+c+">":"<"+b.valueOf()+">"}else return b.toString()};G.Store.prototype["delete"]=function(){var b,c,f;if(arguments.length===1)c=arguments[0];else if(arguments.length===2)b=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),c=arguments[0],f=arguments[1]||function(){};else if(arguments.length===3)c=arguments[0],b=this.rdf.createNamedNode(arguments[1]),f=arguments[2]||
function(){};else throw"The triples to delete, an optional graph and callback must be provided";var g="",i=this;c.forEach(function(b){g=g+i._nodeToQuery(b.subject)+i._nodeToQuery(b.predicate)+i._nodeToQuery(b.object)+"."});g=b!=null?"DELETE DATA { GRAPH "+this._nodeToQuery(b)+" { "+g+" } }":"DELETE DATA { "+this._nodeToQuery(b)+" { "+g+" }";this.engine.execute(g,f)};G.Store.prototype.clear=function(){var b,c;if(arguments.length===1)b=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),c=
arguments[0]||function(){};else if(arguments.length===2)b=this.rdf.createNamedNode(arguments[0]),c=arguments[1]||function(){};else throw"The optional graph and a callback must be provided";this.engine.execute("CLEAR GRAPH "+this._nodeToQuery(b),c)};G.Store.prototype.load=function(){var b,c,f,g;if(arguments.length===3)f=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),b=arguments[0],c=arguments[1],g=arguments[2]||function(){};else if(arguments.length===4)b=arguments[0],c=arguments[1],
f=this.rdf.createNamedNode(arguments[2]),g=arguments[3]||function(){};else if(arguments.length===2)throw"The mediaType of the parser, the data a callback and an optional graph must be provided";if(b==="remote")c=this.rdf.createNamedNode(c),this.engine.execute("LOAD <"+c.valueOf()+"> INTO GRAPH <"+f.valueOf()+">",g);else if(c&&typeof c==="string"&&c.indexOf("file://")===0){b=this.engine.rdfLoader.parsers[b];var i=this;this.engine.rdfLoader.loadFromFile(b,{token:"uri",value:f.valueOf()},c,function(b,
c){b?i.engine.batchLoad(c,g):g(b,c)})}else b=this.engine.rdfLoader.parsers[b],i=this,this.engine.rdfLoader.tryToParse(b,{token:"uri",value:f.valueOf()},c,function(b,c){b?i.engine.batchLoad(c,g):g(b,c)})};G.Store.prototype.registerParser=function(b,c){this.engine.rdfLoader.registerParser(b,c)};G.Store.prototype.registeredGraphs=function(b){for(var c=this.engine.lexicon.registeredGraphs(!0),f=[],g=0;g<c.length;g++){var i=new x.NamedNode(c[g]);f.push(i)}return b(!0,f)};G.Store.prototype._nodeToQuery=
function(b){if(b.interfaceName==="NamedNode"){var c=this.rdf.resolve(b.valueOf());return c!=null?"<"+c+">":"<"+b.valueOf()+">"}else return b.toString()};G.Store.prototype.getNetworkTransport=function(){return ga};G.Store.prototype.setNetworkTransport=function(b){ga=b};RDFStoreWorker={observingCallbacks:{}};RDFStoreWorker.handleCreate=function(b,c){args=[b];args.push(function(b){RDFStoreWorker.store=b;postMessage({callback:c,result:"created",success:!0})});G.create.apply(G,args)};RDFStoreWorker.receive=
function(b){var c=b.data||b;if(c.fn==="create"&&c.args!=null)RDFStoreWorker.handleCreate(c.args,c.callback);else if((c.fn==="execute"||c.fn==="executeWithEnvironment"||c.fn==="graph"||c.fn==="node"||c.fn==="clear"||c.fn==="load")&&c.args!=null){c.args.push(function(b,f){c.callback!=null&&postMessage({callback:c.callback,result:f,success:b})});try{RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,c.args)}catch(f){console.log("Error executing method through connection"),console.log(f)}}else if((c.fn===
"insert"||c.fn==="delete")&&c.args!=null)try{c.args.push(function(b,f){c.callback!=null&&postMessage({callback:c.callback,result:f,success:b})});for(var g,i=c.args[0],b=0;b<i.triples.length;b++)g=i.triples[b],i.triples[b]=new x.Triple(RDFStoreWorker.adaptJSInterface(g.subject),RDFStoreWorker.adaptJSInterface(g.predicate),RDFStoreWorker.adaptJSInterface(g.object));c.args[1].interfaceName!=null&&(c.args[1]=RDFStoreWorker.adaptJSInterface(c.args[1]));c.args[0]=RDFStoreWorker.store.rdf.createGraph(i.triples);
RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,c.args)}catch(h){console.log("Error executing method through connection"),console.log(h)}else c.fn==="rdf/setPrefix"&&c.args!=null?RDFStoreWorker.store.rdf.setPrefix(c.args[0],c.args[1]):c.fn==="rdf/setDefaultPrefix"&&c.args!=null?RDFStoreWorker.store.rdf.setDefaultPrefix(c.args[0]):c.fn==="startObservingQuery"&&c.args!=null?(g=function(b,f){postMessage({callback:c.callback[0],result:f,success:b})},RDFStoreWorker.observingCallbacks[c.args[0]]=
g,c.args.push(g),c.args.push(function(b,f){c.callback&&c.callback[1]!=null&&postMessage({callback:c.callback[1],result:f,success:b})}),RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,c.args)):c.fn==="stopObservingQuery"?((g=RDFStoreWorker.observingCallbacks[c.args[0]])&&RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,[g]),delete RDFStoreWorker.observingCallbacks[c.args[0]]):c.fn==="startObservingNode"&&c.args!=null?(g=function(b){postMessage({callback:c.callback,result:b})},RDFStoreWorker.observingCallbacks[c.callback]=
g,c.args.push(g),RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,c.args)):c.fn==="stopObservingNode"&&c.args!=null?((g=RDFStoreWorker.observingCallbacks[c.args[0]])&&RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,[g]),delete RDFStoreWorker.observingCallbacks[c.args[0]]):c.fn==="subscribe"&&c.args!=null?(g=function(b,f){postMessage({callback:c.callback,event:b,result:f})},RDFStoreWorker.observingCallbacks[c.callback]=g,c.args.push(g),RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,
c.args)):c.fn==="stopObservingNode"&&c.args!=null?((g=RDFStoreWorker.observingCallbacks[c.args[0]])&&RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,[g]),delete RDFStoreWorker.observingCallbacks[c.args[0]]):c.fn==="registeredGraphs"&&c.args!=null&&RDFStoreWorker.store[c.fn].apply(RDFStoreWorker.store,[function(b,f){c.callback!=null&&postMessage({callback:c.callback,result:f,success:b})}])};RDFStoreWorker.adaptJSInterface=function(b){if(b.interfaceName==="BlankNode")return new x.BlankNode(b.bnodeId);
else if(b.interfaceName==="Literal")return new x.Literal(b.nominalValue,b.language,b.datatype);else if(b.interfaceName==="NamedNode")return new x.NamedNode(b.nominalValue)};onmessage=RDFStoreWorker.receive;try{window.rdfstore=G}catch(yc){}})();
