(function(){try{console=console||{}}catch(Bc){console={log:function(){}}}var y={"extends":function(c,b){b.prototype=new c},stackCounterLimit:1E3,stackCounter:0};y.recur=function(c){y.stackCounter===y.stackCounterLimit?(y.stackCounter=0,setTimeout(c,0)):(y.stackCounter++,c())};y.shuffle=function(c){for(var b,d,h=c.length;h;b=parseInt(Math.random()*h),d=c[--h],c[h]=c[b],c[b]=d);return c};y.include=function(c,b,d){for(var h=c.length-1;h>=0;h--){var k=!1,k=d==null?c[h]===b:d(c[h],b)===0;if(k===!0)return!0}return!1};
y.remove=function(c,b){for(var d=[],h=0;h<c.length;h++)c[h]!==b&&d.push(c[h]);return d};y.repeat=function(c,b,d,h,k){arguments.length===4&&(k={});c<b?(k._i=c,d(function(g,d){y.recur(function(){y.repeat(c+1,b,g,h,d)})},k)):h(k)};Utilsmeanwhile=function(c,b,d,h){arguments.length===3&&(h={});h._stack_counter==null&&(h._stack_counter=0);c===!0?b(function(b,c,h){h._stack_counter%40==39?(h._stack_counter+=1,setTimeout(function(){Utilsmeanwhile(b,c,d,h)},0)):(h._stack_counter+=1,Utilsmeanwhile(b,c,d,h))},
h):d(h)};y.seq=function(){var c=arguments;return function(b){y.repeat(0,c.length,function(b,h){var k=arguments.callee;c[h._i](function(){b(k,h)})},function(){b()})}};y.partition=function(c,b){for(var d=c.length%b,h=[],k=0;k<d;k++)h.push(null);d=[];for(k=0;k<c.length;k++)h.push(c[k]),h.length%b==0&&(d.push(h),h=[]);return d};y.keys=function(c){var b=[],d;for(d in c)b.push(d);return b};y.iso8601=function(c){function b(b){return b<10?"0"+b:b}return c.getUTCFullYear()+"-"+b(c.getUTCMonth()+1)+"-"+b(c.getUTCDate())+
"T"+b(c.getUTCHours())+":"+b(c.getUTCMinutes())+":"+b(c.getUTCSeconds())+"Z"};y.parseStrictISO8601=function(c){var c=c.match(RegExp("([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?")),b=0,d=new Date(c[1],0,1);if(c[3])d.setMonth(c[3]-1);else throw"missing ISO8061 component";if(c[5])d.setDate(c[5]);else throw"missing ISO8061 component";if(c[7])d.setHours(c[7]);else throw"missing ISO8061 component";if(c[8])d.setMinutes(c[8]);
else throw"missing ISO8061 component";if(c[10])d.setSeconds(c[10]);else throw"missing ISO8061 component";c[12]&&d.setMilliseconds(Number("0."+c[12])*1E3);c[14]&&(b=Number(c[16])*60+Number(c[17]),b*=c[15]=="-"?1:-1);b-=d.getTimezoneOffset();time=Number(d)+b*6E4;c=new Date;c.setTime(Number(time));return c};y.parseISO8601=function(c){var c=c.match(RegExp("([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?")),b=0,d=new Date(c[1],
0,1);c[3]&&d.setMonth(c[3]-1);c[5]&&d.setDate(c[5]);c[7]&&d.setHours(c[7]);c[8]&&d.setMinutes(c[8]);c[10]&&d.setSeconds(c[10]);c[12]&&d.setMilliseconds(Number("0."+c[12])*1E3);c[14]&&(b=Number(c[16])*60+Number(c[17]),b*=c[15]=="-"?1:-1);b-=d.getTimezoneOffset();time=Number(d)+b*6E4;c=new Date;c.setTime(Number(time));return c};y.parseISO8601Components=function(c){var c=c.match(RegExp("([0-9]{4})(-([0-9]{2}))(-([0-9]{2}))(T([0-9]{2}):([0-9]{2})(:([0-9]{2}))?(.([0-9]+))?)?(Z|([-+])([0-9]{2})(:([0-9]{2}))?)?")),
b,d,h,k,g,j,i,q;b=Number(c[1]);d=c[3]-1;h=Number(c[5]);k=Number(c[7]);g=Number(c[8]);j=Number(c[10]);c[12]&&(i=Number("0."+c[12])*1E3);c[13]==="Z"?q=0:c[14]?(q=0,c[17]&&(q=Number(c[17])),q+=Number(c[15])*60,q*=c[14]=="-"?-1:1):c[14]==null&&c[11]&&(q=Number(c[12])*60);return{year:isNaN(b)?null:b,month:isNaN(d)?null:d,date:isNaN(h)?null:h,hours:isNaN(k)?null:k,minutes:isNaN(g)?null:g,seconds:isNaN(j)?null:j,millisecs:isNaN(i)?null:i,timezone:isNaN(q)?null:q}};y.compareDateComponents=function(c,b){var d=
y.parseISO8601Components(c),h=y.parseISO8601Components(b);return d.timezone==null&&h.timezone==null||d.timezone!=null&&h.timezone!=null?(da=y.parseISO8601(c),db=y.parseISO8601(b),da.getTime()==db.getTime()?0:da.getTime()<db.getTime()?-1:1):d.timezone!=null&&h.timezone==null?(da=y.parseISO8601(c),db=y.parseISO8601(b),ta=da.getTime(),tb=db.getTime(),d=50400,ta<tb&&ta<tb+d?-1:ta>tb&&ta>tb-d?1:null):(da=y.parseISO8601(c),db=y.parseISO8601(b),ta=da.getTime(),tb=db.getTime(),d=50400,ta<tb&&ta+d<tb?-1:ta>
tb&&ta+d>tb?1:null)};y.lexicalFormLiteral=function(c,b){var d=c.value,h=c.lang,k=c.type,g=null;if(d!=null&&k!=null&&typeof k!="string"){d=k.value;if(d==null)d=k.suffix,k=b.namespaces[k.prefix],c.type=k+d,d=k+d;g=d.indexOf("hexBinary")!=-1?'"'+c.value.toLowerCase()+'"^^<'+d+">":'"'+c.value+'"^^<'+d+">"}else g=h==null&&k==null?'"'+d+'"':k==null?'"'+d+'"@'+h:k.indexOf("hexBinary")!=-1?'"'+c.value.toLowerCase()+'"^^<'+k+">":'"'+c.value+'"^^<'+k+">";return g};y.lexicalFormBaseUri=function(c,b){var d=null;
if(c.value==null)var d=c.prefix,h=c.suffix,k=b.namespaces[d],d=k!=null?k+h:d+":"+h;else d=c.value;if(d===null)return null;else d.indexOf(":")==-1&&(d=(b.base||"")+d);return d};y.lexicalFormTerm=function(c,b){if(c.token==="uri")return{uri:y.lexicalFormBaseUri(c,b)};else if(c.token==="literal")return{literal:y.lexicalFormLiteral(c,b)};else if(c.token==="blank")return{blank:"_:"+c.label};else callback(!1,"Token of kind "+c.token+" cannot transformed into its lexical form")};y.normalizeUnicodeLiterals=
function(c){for(var b=c.match(/\\u[0-9abcdefABCDEF]{4,4}/g)||[],d={},h=0;h<b.length;h++)d[b[h]]==null&&(d[b[h]]=!0,c=c.replace(RegExp("\\"+b[h],"g"),eval("'"+b[h]+"'")));return c};y.hashTerm=function(c){try{if(c==null)return"";if(c.token==="uri")return"u"+c.value;else if(c.token==="blank")return"b"+c.value;else if(c.token==="literal")return l="l"+c.value,l+=c.type||"",l+=c.lang||"",l}catch(b){if(typeof c==="object"){var d="";for(p in c)d=d+p+c[p];return d}return c}};var za={PriorityQueue:function(c){var b=
[],d={},h=!1,k,g=c.maxSize||10;k=function(b,c){return d[c].priority-d[b].priority};var j=function(){b.sort(k);h=!0};return{debugContents:b,debugStore:d,debugSort:j,push:function(c,k){b.length===g?(h||j(),d[c]==null?(delete d[b[0]],b[0]=c,priority=d[b[b.length-1]].priority-1,d[c]={object:k,priority:priority}):(priority=d[b[b.length-1]].priority-1,d[c].priority=priority),h=!1):b.length===0?(b.push(c),d[c]={object:k,priority:1E3}):(priority=d[b[b.length-1]].priority-1,d[c]==null?(d[c]={object:k,priority:priority},
b.push(c)):(d[c].priority=priority,h=!1))},remove:function(c){if(d[c]!=null){delete d[c];for(var g=null,h=0;h<b.length;h++)if(b[h]===c){g=h;break}g!=null&&b.splice(g,1)}},fetch:function(c){var g=d[c];return d[c]!=null?(h||j(),priority=d[b[b.length-1]].priority-1,d[c].priority=priority,h=!1,g.object):null}}}},F={};F.Tree=function(c,b,d,h){if(arguments.length!=0){var k=null;if(d===!0)try{if(k=window.localStorage,k==null)throw"not found";}catch(g){throw"Local storage is not present, cannot create persistent storage";
}k==null&&(k=function(){var b={};return{setItem:function(c,g){b[c]=g},getItem:function(c){return b[c]||null},removeItem:function(c){delete b[c]},get:function(c){var g=0,d;for(d in b){if(c===g)return d;g++}return""},length:b.length}}());this.storage=k;this.order=c;this.name=b;this.diskManager=new F.LocalStorageManager(b,k,h);this.root=this.diskManager._readRootNode();this.root==null?(this.root=this._allocateNode(),this.root.isLeaf=!0,this.root.level=0,this._diskWrite(this.root),this._updateRootNode(this.root),
this.root=this.root.pointer):this.root=this.diskManager._diskRead(this.root).pointer;this.comparator=function(b,c){return b<c?-1:b>c?1:0};this.merger=null}};F.Tree.prototype._allocateNode=function(){return new F.Node};F.Tree.prototype._diskWrite=function(c){this.diskManager._diskWrite(c)};F.Tree.prototype._diskRead=function(c){return this.diskManager._diskRead(c)};F.Tree.prototype._diskDelete=function(c){this.diskManager._diskDelete(c)};F.Tree.prototype._updateRootNode=function(c){this.diskManager._updateRootNode(c);
return c};F.Tree.prototype.search=function(c,b){for(var d=!0,h=this._diskRead(this.root);d;){for(var k=0;k<h.numberActives&&this.comparator(c,h.keys[k].key)===1;)k++;if(k<h.numberActives&&this.comparator(h.keys[k].key,c)===0)return b!=null&&b==!0?!0:h.keys[k].data;else h.isLeaf===!0?d=!1:h=this._diskRead(h.children[k])}return null};F.Tree.prototype.walk=function(c){this._walk(c,this._diskRead(this.root))};F.Tree.prototype._walk=function(c,b){if(b.isLeaf)for(var d=0;d<b.numberActives;d++)c(b.keys[d]);
else{for(d=0;d<b.numberActives;d++)this._walk(c,this._diskRead(b.children[d])),c(b.keys[d]);this._walk(c,this._diskRead(b.children[b.numberActives]))}};F.Tree.prototype.walkNodes=function(c){this._walkNodes(c,this._diskRead(this.root))};F.Tree.prototype._walkNodes=function(c,b){if(b.isLeaf)c(b);else{c(b);for(var d=0;d<b.numberActives;d++)this._walkNodes(c,this._diskRead(b.children[d]));this._walkNodes(c,this._diskRead(b.children[b.numberActives]))}};F.Tree.prototype._splitChild=function(c,b,d){var h=
this._allocateNode();h.isLeaf=d.isLeaf;h.level=d.level;h.numberActives=this.order-1;var k=d.keys[this.order-1];d.keys[this.order-1]=null;for(var g=0;g<this.order-1;g++)h.keys[g]=d.keys[g+this.order],d.keys[g+this.order]=null,d.isLeaf||(h.children[g]=d.children[g+this.order],d.children[g+this.order]=null);d.isLeaf||(h.children[g]=d.children[g+this.order],d.children[g+this.order]=null);d.numberActives=this.order-1;for(g=c.numberActives+1;g>b+1;g--)c.children[g]=c.children[g-1];this._diskWrite(h);c.children[b+
1]=h.pointer;for(g=c.numberActives;g>b;g--)c.keys[g]=c.keys[g-1];c.keys[b]=k;c.numberActives++;this._diskWrite(c);this._diskWrite(d)};F.Tree.prototype.insert=function(c,b){var d=this._diskRead(this.root);if(d.numberActives===2*this.order-1){var h=this._allocateNode();h.isLeaf=!1;h.level=d.level+1;h.numberActives=0;h.children[0]=d.pointer;this._diskWrite(h);this._splitChild(h,0,d);this.root=h.pointer;this._updateRootNode(h);this._insertNonFull(h,c,b)}else this._insertNonFull(d,c,b)};F.Tree.prototype._insertNonFull=
function(c,b,d){for(var h=c.numberActives-1;!c.isLeaf;){for(;h>=0&&this.comparator(b,c.keys[h].key)===-1;)h--;h++;var k=this._diskRead(c.children[h]);k.numberActives===2*this.order-1&&(this._splitChild(c,h,k),this.comparator(b,c.keys[h].key)===1&&h++);c=this._diskRead(c.children[h]);h=c.numberActives-1}for(;h>=0&&this.comparator(b,c.keys[h].key)===-1;)c.keys[h+1]=c.keys[h],h--;c.keys[h+1]={key:b,data:d};c.numberActives++;this._diskWrite(c)};F.Tree.prototype["delete"]=function(c){for(var b=this._diskRead(this.root),
d=null,h=!0,k=null,g=null,j=null,i=!0;i===!0;){for(i=!1;h===!0;){r=0;if(b.numberActives===0)return!1;for(;r<b.numberActives&&this.comparator(c,b.keys[r].key)===1;)r++;k=r;r<b.numberActives&&this.comparator(c,b.keys[r].key)===0&&(h=!1);if(h===!0){if(b.isLeaf===!0)return!1;d=b;b=this._diskRead(b.children[r]);if(b===null)return!1;k===d.numberActives?(g=this._diskRead(d.children[k-1]),j=null):k===0?(g=null,j=this._diskRead(d.children[1])):(g=this._diskRead(d.children[k-1]),j=this._diskRead(d.children[k+
1]));b.numberActives===this.order-1&&d!=null&&(j!=null&&j.numberActives>this.order-1?(this._moveKey(d,r,-1),b=this._diskRead(b.pointer)):g!=null&&g.numberActives>this.order-1?(this._moveKey(d,r,1),b=this._diskRead(b.pointer)):g!=null&&g.numberActives===this.order-1?b=this._mergeSiblings(d,r,-1):j!=null&&j.numberActives===this.order-1&&(b=this._mergeSiblings(d,r,1)))}}if(b.isLeaf&&b.numberActives>this.order-1)return this._deleteKeyFromNode(b,k),!0;if(b.isLeaf&&b.pointer===this.root)return this._deleteKeyFromNode(b,
k),!0;try{if(b.isLeaf===!1)if(g=d=null,(d=this._diskRead(b.children[k])).numberActives>this.order-1){var q=this._getMaxKeyPos(d),c=q.node.keys[q.index];b.keys[k]=c;this._diskWrite(b);b=d;c=c.key;h=i=!0}else if((d=this._diskRead(b.children[k+1])).numberActives>this.order-1)q=this._getMinKeyPos(d),c=q.node.keys[q.index],b.keys[k]=c,this._diskWrite(b),b=d,c=c.key,h=i=!0;else if((d=this._diskRead(b.children[k])).numberActives===this.order-1&&(g=this._diskRead(b.children[k+1])).numberActives===this.order-
1){var w=this._mergeNodes(d,b.keys[k],g);b.children[k]=w.pointer;k++;for(var r=k;r<b.numberActives;r++)b.children[r]=b.children[r+1],b.keys[r-1]=b.keys[r];b.children[r]=null;b.keys[r-1]=null;b.numberActives--;if(b.numberActives===0&&this.root===b.pointer)this.root=w.pointer,this._updateRootNode(w);this._diskWrite(b);b=w;h=i=!0}}catch(x){console.log("!!!"),console.log(x)}b.isLeaf&&b.numberActives>this.order-1&&h===!1&&this._deleteKeyFromNode(b,k);if(i===!1)return!0}};F.Tree.prototype._moveKey=function(c,
b,d){d===1&&b--;var h=this._diskRead(c.children[b]),k=this._diskRead(c.children[b+1]);if(d==-1){h.keys[h.numberActives]=c.keys[b];h.children[h.numberActives+1]=k.children[0];k.children[0]=null;h.numberActives++;c.keys[b]=k.keys[0];for(d=1;d<k.numberActives;d++)k.keys[d-1]=k.keys[d],k.children[d-1]=k.children[d];k.children[k.numberActives-1]=k.children[k.numberActives];k.numberActives--}else{k.children[k.numberActives+1]=k.children[k.numberActives];for(d=k.numberActives;d>0;d--)k.children[d]=k.children[d-
1],k.keys[d]=k.keys[d-1];k.keys[0]=null;k.children[0]=null;k.children[0]=h.children[h.numberActives];k.keys[0]=c.keys[b];k.numberActives++;h.children[h.numberActives]=null;c.keys[b]=h.keys[h.numberActives-1];h.keys[h.numberActives-1]=null;h.numberActives--}this._diskWrite(h);this._diskWrite(k);this._diskWrite(c)};F.Tree.prototype._mergeSiblings=function(c,b){var d,h,k;b===c.numberActives?(b--,h=this._diskRead(c.children[c.numberActives-1]),k=this._diskRead(c.children[c.numberActives])):(h=this._diskRead(c.children[b]),
k=this._diskRead(c.children[b+1]));var g=this._allocateNode();g.isLeaf=h.isLeaf;g.level=h.level;for(d=0;d<this.order-1;d++)g.keys[d]=h.keys[d],g.children[d]=h.children[d];g.keys[this.order-1]=c.keys[b];g.children[this.order-1]=h.children[this.order-1];for(d=0;d<this.order-1;d++)g.keys[d+this.order]=k.keys[d],g.children[d+this.order]=k.children[d];g.children[2*this.order-1]=k.children[this.order-1];this._diskWrite(g);c.children[b]=g.pointer;for(d=b;d<c.numberActives;d++)c.keys[d]=c.keys[d+1],c.children[d+
1]=c.children[d+2];g.numberActives=h.numberActives+k.numberActives+1;c.numberActives--;for(d=c.numberActives;d<2*this.order-1;d++)c.keys[d]=null;if(c.numberActives===0&&this.root===c.pointer)this.root=g.pointer,g.isLeaf=g.level?!1:!0;this._diskWrite(g);this.root===g.pointer&&this._updateRootNode(g);this._diskWrite(c);this._diskDelete(h);this._diskDelete(k);return g};F.Tree.prototype._deleteKeyFromNode=function(c,b){var d=2*this.order-1;if(c.numberActives<d)d=c.numberActives;var h;if(c.isLeaf===!1)return!1;
for(h=b;h<d-1;h++)c.keys[h]=c.keys[h+1];c.keys.splice(d-1,c.keys.length-(d-1));c.numberActives--;this._diskWrite(c);return!0};F.Tree.prototype._mergeNodes=function(c,b,d){var h,k;h=this._allocateNode();h.isLeaf=!0;for(k=0;k<c.numberActives;k++)h.keys[k]=c.keys[k],h.children[k]=c.children[k];h.children[c.numberActives]=c.children[c.numberActives];h.keys[c.numberActives]=b;for(k=0;k<d.numberActives;k++)h.keys[k+c.numberActives+1]=d.keys[k],h.children[k+c.numberActives+1]=d.children[k];h.children[2*
this.order-1]=d.children[d.numberActives];h.numberActives=c.numberActives+d.numberActives+1;h.isLeaf=c.isLeaf;h.level=c.level;this._diskWrite(h);this._diskDelete(c);this._diskDelete(d);return h};F.Tree.prototype.audit=function(c){var b=[],d=[],h=this,k=function(g){for(var k=0;k<d.length;k++)if(h.comparator(d[k],g)===0){var i=" !!! duplicated key "+g;c===!0&&console.log(i);b.push(i)}},g=null,h=this;this.walkNodes(function(j){c===!0&&(console.log("--- Node at "+j.level+" level"),console.log(" - pointer: "+
j.pointer),console.log(" - leaf? "+j.isLeaf),console.log(" - num actives? "+j.numberActives),console.log(" - keys: "));for(var i=j.numberActives;i<j.keys.length;i++)j.keys[i]!=null&&c===!0&&(console.log(" * warning : redundant key data"),b.push(" * warning : redundant key data"));for(i=j.numberActives+1;i<j.children.length;i++)j.children[i]!=null&&c===!0&&(console.log(" * warning : redundant children data"),b.push(" * warning : redundant key data"));if(j.isLeaf===!1)for(i=0;i<j.numberActives;i++){var q=
h._diskRead(j.children[i]).keys[h._diskRead(j.children[i]).numberActives-1].key,w=h._diskRead(j.children[i+1]).keys[0].key;c===!0&&console.log("   "+j.keys[i].key+"("+q+","+w+")");if(h.comparator(j.keys[i].key,q)===-1){var r=" !!! value max left "+q+" > key "+j.keys[i].key;c===!0&&console.log(r);b.push(r)}h.comparator(j.keys[i].key,w)===1&&(r=" !!! value min right "+w+" < key "+j.keys[i].key,c===!0&&console.log(r),b.push(r));k(j.keys[i].key);d.push(j.keys[i].key)}else{g===null?g=j.level:g!=j.level&&
(r=" !!! Leaf node with wrong level value",c===!0&&console.log(r),b.push(r));for(i=0;i<j.numberActives;i++)c===!0&&console.log(" "+j.keys[i].key),k(j.keys[i].key),d.push(j.keys[i].key)}j.pointer!=h.root&&(j.numberActives>2*h.order-1&&(c===!0&&(r=" !!!! MAX num keys restriction violated "),console.log(r),b.push(r)),j.numberActives<h.order-1&&(c===!0&&(r=" !!!! MIN num keys restriction violated "),console.log(r),b.push(r)))});return b};F.Tree.prototype.clear=function(){this.diskManager.clear();this.root=
this._allocateNode();this.root.isLeaf=!0;this.root.level=0;this._diskWrite(this.root);this._updateRootNode(this.root);this.root=this.root.pointer};F.Tree.prototype._getMaxKeyPos=function(c){for(var b={};;){if(c===null)break;if(c.isLeaf===!0){b.node=c;b.index=c.numberActives-1;break}else b.node=c,b.index=c.numberActives-1,c=this._diskRead(c.children[c.numberActives])}return b};F.Tree.prototype._getMinKeyPos=function(c){for(var b={};;){if(c===null)break;if(c.isLeaf===!0){b.node=c;b.index=0;break}else b.node=
c,b.index=0,c=this._diskRead(c.children[0])}return b};F.Node=function(){this.numberActives=0;this.isLeaf=null;this.keys=[];this.children=[];this.level=0};F.LocalStorageManager=function(c,b,d){this.name=c;this.storage=b;this.maxSize=d;this.bufferCache=new za.PriorityQueue({maxSize:d});this.counter=this.storage.getItem("__"+this.name+"__ID_COUNTER__")||0};F.LocalStorageManager.prototype.clear=function(){for(var c=this.storage.length,b=[],d=0;d<c;d++){var h=this.storage.key(d);(h.indexOf(this.name)==
0||h.indexOf("__"+this.name)==0)&&b.push(h)}for(d=0;d<b.length;d++)this.storage.removeItem(b[d]);this.bufferCache=new za.PriorityQueue({maxSize:this.maxSize})};F.LocalStorageManager.prototype._genIndex=function(){var c=this.name+this.counter;this.counter++;this.storage.setItem("__"+this.name+"__ID_COUNTER__",this.counter);return c};F.LocalStorageManager.prototype._diskRead=function(c){if(typeof c==="object")c=c.pointer;var b=this.bufferCache.fetch(c);if(b==null&&(b=this.storage.getItem(c),b!=null))b=
this._decode(b),b.pointer=c,this.bufferCache.push(c,b);return b};F.LocalStorageManager.prototype._diskWrite=function(c){if(c.pointer==null)c.pointer=this._genIndex();var b=c.children,d=[];if(c.isLeaf===!1)for(var h=0;h<b.length;h++)b[h]==null?d.push(null):typeof b[h]==="object"?d.push(b[h].pointer):d.push(b[h]);c.children=d;this.storage.setItem(c.pointer,this._encode(c));c.children=b;this.bufferCache.push(c.pointer,c)};F.LocalStorageManager.prototype._diskDelete=function(c){this.storage.removeItem(c.pointer);
this.bufferCache.remove(c.pointer)};F.LocalStorageManager.prototype._updateRootNode=function(c){if(c.pointer)this.storage.setItem("__"+this.name+"__ROOT_NODE__",c.pointer);else throw"Cannot set as root of the b-tree a node without pointer";};F.LocalStorageManager.prototype._readRootNode=function(){var c=this.storage.getItem("__"+this.name+"__ROOT_NODE__");return c==null?null:this._diskRead(c)};F.LocalStorageManager.prototype._encode=function(c){encoded=""+c.numberActives;encoded=encoded+":"+c.pointer;
encoded=encoded+":"+c.level;encoded=encoded+":"+(c.isLeaf?1:0);for(var b=0,d="",h=0;h<c.keys.length;h++)c.keys[h]!=null&&(d=typeof c.keys[h].key==="number"?d+":"+c.keys[h].key:d+":"+("_"+(c.keys[h].key.subject||"")+"_"+(c.keys[h].key.predicate||"")+"_"+(c.keys[h].key.object||"")+"_"+(c.keys[h].key.graph||"")),c.keys[h].data==null?d+=":n:":d=typeof c.keys[h].data=="string"?d+":s:"+c.keys[h].data:typeof c.keys[h].data=="number"?c.keys[h]%1==0?d+":i:"+c.keys[h].data:d+":f:"+c.keys[h].data:d+":o:"+JSON.stringify(c.keys[h].data).replace(":",
"&colon;"),b++);encoded=encoded+":"+b+d;if(c.isLeaf===!1){b="";for(h=d=0;h<c.children.length;h++)c.children[h]!=null&&(b=b+":"+c.children[h],d++);encoded=encoded+":"+d+b}return encoded};F.LocalStorageManager.prototype._decode=function(c){var b=new F.Node,c=c.split(":");b.numberActives=parseInt(c[0]);b.pointer=c[1];b.level=parseInt(c[2]);b.isLeaf=c[3]==="1"?!0:!1;for(var d=parseInt(c[4]),h=5,k,g,j,i=0;i<d;i++)k=c[h],k[0]=="_"?(k=k.split("_"),k={subject:parseInt(k[1])||null,predicate:parseInt(k[2])||
null,object:parseInt(k[3])||null,graph:parseInt(k[4]||null)}):k=parseInt(c[h]),g=c[h+1],j=c[h+2],g==="n"?j=void 0:g==="i"?j=parseInt(j):g==="f"?j=parseFloat(j):g==="o"&&(j=JSON.parse(j.replace("&colon;",":"))),b.keys.push({key:k,data:j}),h+=3;if(b.isLeaf===!1){d=parseInt(c[h]);h++;for(i=0;i<d;i++)b.children[i]=c[h],h++}return b};var aa={NodeKey:function(c,b){this.subject=c.subject;this.predicate=c.predicate;this.object=c.object;this.graph=c.graph;this.order=b}};aa.NodeKey.prototype.comparator=function(c){for(var b=
0;b<this.order.length;b++){var d=this.order[b];if(c[d]==null)break;else if(this[d]<c[d])return-1;else if(this[d]>c[d])return 1}return 0};aa.Pattern=function(c){this.subject=c.subject;this.predicate=c.predicate;this.object=c.object;this.graph=c.graph;this.indexKey=[];this.keyComponents={};for(var b=[],d=[],c=["subject","predicate","object","graph"],h=0;h<c.length;h++)typeof this[c[h]]==="string"?(d.push(c[h]),this.keyComponents[c[h]]=null):(b.push(c[h]),this.keyComponents[c[h]]=this[c[h]],this.indexKey.push(c[h]));
this.order=b.concat(d);this.key=new aa.NodeKey(this.keyComponents,this.order)};var ea={Tree:function(c,b){if(arguments!=0)this.componentOrder=c.componentOrder,F.Tree.call(this,c.order,c.name,c.persistent,c.cacheMaxSize),this.comparator=function(b,c){for(var k=0;k<this.componentOrder.length;k++){var g=this.componentOrder[k],j=b[g],g=c[g];if(j<g)return-1;else if(j>g)return 1}return 0},this.rangeComparator=function(b,c){for(var k=0;k<this.componentOrder.length;k++){var g=this.componentOrder[k];if(c[g]==
null||b[g]==null)break;else if(b[g]<c[g])return-1;else if(b[g]>c[g])return 1}return 0},b!=null&&b(this)}};y["extends"](F.Tree,ea.Tree);ea.Tree.prototype.insert=function(c,b){F.Tree.prototype.insert.call(this,c,null);b&&b(!0);return!0};ea.Tree.prototype.search=function(c,b){var d=F.Tree.prototype.search.call(this,c,!0);b&&b(d);return d};ea.Tree.prototype.range=function(c,b){var d=null,d=typeof this.root==="string"?this._rangeTraverse(this,this._diskRead(this.root),c):this._rangeTraverse(this,this.root,
c);b&&b(d);return d};ea.Tree.prototype._rangeTraverse=function(c,b,d){for(var d=d.key,h=[],k=[b],g;k.length>0;){b=k.shift();for(g=0;g<b.numberActives&&c.rangeComparator(b.keys[g].key,d)===-1;)g++;if(b.isLeaf===!0)for(;g<b.numberActives&&c.rangeComparator(b.keys[g].key,d)===0;)h.push(b.keys[g].key),g++;else{var j=c._diskRead(b.children[g]);for(k.push(j);;)if(g<b.numberActives&&c.rangeComparator(b.keys[g].key,d)===0)h.push(b.keys[g].key),g++,j=c._diskRead(b.children[g]),k.push(j);else break}}return h};
var U={QuadBackend:function(c,b){if(arguments!=0){this.indexMap={};this.treeOrder=c.treeOrder;this.indices=["SPOG","GP","OGS","POG","GSP","OS"];this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]};for(var d=0;d<this.indices.length;d++){var h=this.indices[d],k=new ea.Tree({order:this.treeOrder,
componentOrder:this.componentOrders[h],persistent:c.persistent,name:(c.name||"")+h,cacheMaxSize:c.cacheMaxSize});this.indexMap[h]=k}b&&b(this)}}};U.QuadBackend.prototype.clear=function(){for(var c=0;c<this.indices.length;c++)this.indexMap[this.indices[c]].clear()};U.QuadBackend.prototype._indexForPattern=function(c){for(var c=c.indexKey,b=this.indices,d=0;d<b.length;d++)for(var h=b[d],k=this.componentOrders[h],g=0;g<k.length;g++){if(y.include(c,k[g])===!1)break;if(g==c.length-1)return h}return"SPOG"};
U.QuadBackend.prototype.index=function(c,b){for(var d=0;d<this.indices.length;d++)this.indexMap[this.indices[d]].insert(c);b&&b(!0);return!0};U.QuadBackend.prototype.range=function(c,b){var d=this.indexMap[this._indexForPattern(c)].range(c);b&&b(d);return d};U.QuadBackend.prototype.search=function(c,b){var d=this.indexMap[this.indices[0]].search(c);b&&b(d!=null);return d!=null};U.QuadBackend.prototype["delete"]=function(c,b){for(var d,h=0;h<this.indices.length;h++)d=this.indices[h],d=this.indexMap[d],
d["delete"](c);b&&b(!0);return!0};var O={Lexicon:function(c,b){this.name=b||"";this.storage=null;try{this.storage=window.localStorage}catch(d){}if(this.storage==null)this.storage={setItem:function(){},getItem:function(){return null},removeItem:function(){},key:function(){return""},length:0};this.uriToOID={};this.OIDToUri={};this.literalToOID={};this.OIDToLiteral={};this.blankToOID={};this.OIDToBlank={};this.defaultGraphOid=0;this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph";
this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri,oid:this.defaultGraphOid};this.oidCounter=parseInt(this.storage.getItem(this.pointer("oidCounter")))||1;this.storage.getItem(this.pointer("knownGraphs"))==null?(this.knownGraphs={},this.storage.setItem(this.pointer("knownGraphs"),JSON.stringify(this.knownGraphs))):this.knownGraphs=JSON.parse(this.storage.getItem(this.pointer("knownGraphs")));c!=null&&c(this)}};O.Lexicon.prototype.updateAfterWrite=function(){this.storage.setItem(this.pointer("oidCounter"),
""+this.oidCounter)};O.Lexicon.prototype.pointer=function(c,b){c=="uriToOID"?c="uo":c=="OIDToUri"?c="ou":c=="literalToOID"?c="lo":c=="OIDToLiteral"?c="ok":c=="blankToOID"?c="bo":c=="OIDToBlank"&&(c="ob");return b==null?this.name+"_l_"+c:this.name+"_l_"+c+"_"+b};O.Lexicon.prototype.clear=function(){this.uriToOID={};this.OIDToUri={};this.literalToOID={};this.OIDToLiteral={};this.blankToOID={};this.OIDToBlank={};for(var c=this.storage.length,b=this.name+"_l_",d=[],h=0;h<c;h++){var k=this.storage.key(h);
k.indexOf(b)==0&&d.push(k)}for(h=0;h<d.length;h++)this.storage.removeItem(d[h])};O.Lexicon.prototype.registerGraph=function(c){c!=this.defaultGraphOid&&(this.knownGraphs[c]=!0,this.storage.setItem(this.pointer("knownGraphs"),JSON.stringify(this.knownGraphs)));return!0};O.Lexicon.prototype.registeredGraphs=function(c){var b=[],d;for(d in this.knownGraphs)c===!0?b.push(this.retrieve(d)):b.push(d);return b};O.Lexicon.prototype.registerUri=function(c){if(c===this.defaultGraphUri)return this.defaultGraphOid;
else{if(this.uriToOID[c]==null){var b=this.storage.getItem(this.pointer("uriToOID",c));if(b==null){var b=this.oidCounter,d="u"+b;this.oidCounter++;this.uriToOID[c]=[b,0];this.OIDToUri[d]=c;this.storage.setItem(this.pointer("uriToOID",c),b+":0");this.storage.setItem(this.pointer("OIDToUri",d),c)}else{var h=b.split(":"),b=parseInt(h[0]),d="u"+b,h=parseInt(h[1])+1;this.uriToOID[c]=[b,h];this.OIDToUri[d]=c;this.storage.setItem(this.pointer("uriToOID",c),b+":0")}}else d=this.uriToOID[c],b=d[0],h=d[1]+
1,this.uriToOID[c]=[b,h],this.storage.setItem(this.pointer("uriToOID",c),b+":"+h);return b}};O.Lexicon.prototype.resolveUri=function(c){if(c===this.defaultGraphUri)return this.defaultGraphOid;else{var b=this.uriToOID[c];if(b!=null)return b[0];else if(b=this.storage.getItem(this.pointer("uriToOID",c)),b==null)return-1;else{var d=b.split(":"),b=parseInt(d[0]),h="u"+b,d=parseInt(d[1]);this.uriToOID[c]=[b,d];this.OIDToUri[h]=c;return b}}};O.Lexicon.prototype.resolveUriCost=function(c){return c===this.defaultGraphUri?
this.defaultGraphOid:(c=this.uriToOID[c],c!=null?c[1]:-1)};O.Lexicon.prototype.registerBlank=function(){var c=this.oidCounter;this.oidCounter++;c=""+c;this.storage.setItem(this.pointer("OIDToBlank",c),!0);this.OIDToBlank[c]=!0;return c};O.Lexicon.prototype.resolveBlank=function(){var c=this.oidCounter;this.oidCounter++;return""+c};O.Lexicon.prototype.resolveBlankCost=function(){return 0};O.Lexicon.prototype.registerLiteral=function(c){if(this.literalToOID[c]==null){var b=this.storage.getItem(this.pointer("literalToOID",
c));if(b==null){var b=this.oidCounter,d="l"+b;this.oidCounter++;this.literalToOID[c]=[b,0];this.OIDToLiteral[d]=c;this.storage.setItem(this.pointer("literalToOID",c),b+":0");this.storage.setItem(this.pointer("OIDToLiteral",d),c)}else d=b.split(":"),b=parseInt(d[0]),d=parseInt(d[1])+1,this.literalToOID[c]=[b,d],this.storage.setItem(this.pointer("literalToOID",c),b+":"+d)}else d=this.literalToOID[c],b=d[0],d=d[1]+1,this.storage.setItem(this.pointer("literalToOID",c),b+":"+d),this.literalToOID[c]=[b,
d];return b};O.Lexicon.prototype.resolveLiteral=function(c){var b=this.literalToOID[c];if(b!=null)return b[0];else if(fromStorage=this.storage.getItem(this.pointer("literalToOID",c)),fromStorage!=null){var b=fromStorage.split(":"),d=parseInt(b[0]),b=parseInt(b[1]);this.literalToOID[c]=[d,b];this.OIDToLiteral["l"+d]=c;return d}else return-1};O.Lexicon.prototype.resolveLiteralCost=function(c){c=this.literalToOID[c];return c!=null?c[1]:0};O.Lexicon.prototype.parseLiteral=function(c){var b=c.lastIndexOf("@");
if(b!=-1&&c[b-1]==='"'){var d=c.substring(1,b-1),c=c.substring(b+1,c.length);return{token:"literal",value:d,lang:c}}b=c.lastIndexOf("^^");if(b!=-1&&c[b-1]==='"'&&c[b+2]==="<"&&c[c.length-1]===">")return d=c.substring(1,b-1),c=c.substring(b+3,c.length-1),{token:"literal",value:d,type:c};d=c.substring(1,c.length-1);return{token:"literal",value:d}};O.Lexicon.prototype.parseUri=function(c){return{token:"uri",value:c}};O.Lexicon.prototype.retrieve=function(c){var b;try{if(c===this.defaultGraphOid)return{token:"uri",
value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0};else{var d=this.OIDToUri["u"+c];if(d!=null)return this.parseUri(d);else{var h=this.OIDToLiteral["l"+c];if(h!=null)return this.parseLiteral(h);else{var k=this.OIDToBlank[""+c];if(k!=null)return{token:"blank",value:"_:"+c};else if(d=this.storage.getItem(this.pointer("OIDToUri","u"+c)),d!=null){this.OIDToUri["u"+c]=d;b=this.storage.getItem(this.pointer("uriToOID",d));var g=b.split(":"),j=parseInt(g[1]);this.uriToOID[d]=[c,j];return this.parseUri(d)}else if(h=
this.storage.getItem(this.pointer("OIDToLiteral","l"+c)),h!=null){this.OIDToLiteral["l"+c]=h;b=this.storage.getItem(this.pointer("literalToOID",h));var i=b.split(":"),c=parseInt(i[0]),j=parseInt(i[1]);this.literalToOID[h]=[c,j];return this.parseLiteral(h)}else if(k=this.storage.getItem(this.pointer("OIDToBlank",""+c)),k!=null)return this.OIDToBlank[""+c]=!0,{token:"blank",value:"_:"+c};else throw"Null value for OID";}}}}catch(q){throw console.log("error in lexicon retrieving OID:"),console.log(c),
q.message&&console.log(q.message),q.stack&&console.log(q.stack),Error("Unknown retrieving OID in lexicon:"+c);}};O.Lexicon.prototype.unregister=function(c,b){try{return this.unregisterTerm(c.subject.token,b.subject),this.unregisterTerm(c.predicate.token,b.predicate),this.unregisterTerm(c.object.token,b.object),c.graph!=null&&this.unregisterTerm(c.graph.token,b.graph),!0}catch(d){return console.log("Error unregistering quad"),console.log(d.message),!1}};O.Lexicon.prototype.unregisterTerm=function(c,
b){if(c==="uri"){if(b!=this.defaultGraphOid){var d="u"+b,h=this.OIDToUri[d],k=this.uriToOID[h],g=k[1];if(""+k[0]===""+b)g===0?(delete this.OIDToUri[d],delete this.uriToOID[h],delete this.knownGraphs[b]):this.uriToOID[h]=[b,g-1];else throw"Not matching OID : "+b+" vs "+k[0];}}else if(c==="literal")if(this.oidCounter++,d="l"+b,h=this.OIDToLiteral[d],k=this.literalToOID[h],g=k[1],""+k[0]===""+b)g===0?(delete this.OIDToLiteral[d],delete this.literalToOID[h]):this.literalToOID[h]=[b,g-1];else throw"Not matching OID : "+
b+" vs "+k[0];else c==="blank"&&delete this.OIDToBlank[""+b]};var Y={};Y.load=function(c,b,d){jQuery.ajax({url:c,headers:{Accept:b},success:function(b,c,g){if((""+g.status)[0]=="2"){for(var c=g.getAllResponseHeaders().split("\n"),g={},j=0;j<c.length;j++){var i=c[j].split(":");g[i[0]]=i[1]}d(!0,{headers:g,data:b})}},error:function(c){(""+c.status)[0]=="3"?redirection==0?d(!1,500):(c=c.getAllResponseHeaders().Location||c.getAllResponseHeaders().location,c!=null?Y.load(c,b,d,redirection-1):d(!1,500)):
d(!1,c.statusCode())}})};var Aa=null;(function(){var c=function(b,c){b.stack="";for(var g in c)b[g]=c[g]};if(typeof module!=="undefined"&&module.exports){var b={};Exception=function(b){c(this,b);this.stack=Error().stack}}else typeof window!=="undefined"?(b=window.jsonld=window.jsonld||{},Exception=function(b){c(this,b)}):(window={},b=window.jsonld={},Exception=function(b){c(this,b)});Aa=b;var d={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",
xsd:"http://www.w3.org/2001/XMLSchema#",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",cal:"http://www.w3.org/2002/12/cal/ical#",vcard:"http://www.w3.org/2006/vcard/ns# ",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",cc:"http://creativecommons.org/ns#",sioc:"http://rdfs.org/sioc/ns#",doap:"http://usefulinc.com/ns/doap#",com:"http://purl.org/commerce#",ps:"http://purl.org/payswarm#",gr:"http://purl.org/goodrelations/v1#",sig:"http://purl.org/signature#",ccard:"http://purl.org/commerce/creditcard#"},
h={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",xsd:"http://www.w3.org/2001/XMLSchema#"},k={"boolean":h.xsd+"boolean","double":h.xsd+"double",integer:h.xsd+"integer"},g=function(b,c,g){c in b?b[c].constructor===Array?b[c].push(g):b[c]=[b[c],g]:b[c]=g},j=function(b){var c;if(b.constructor===Object){c={};var g=y.keys(b).sort(),d;for(d in g){var h=g[d];c[h]=j(b[h])}}else if(b.constructor===Array)for(d in c=[],b)c[d]=j(b[d]);else c=b;return c},i=function(b){var c={"@datatype":"@datatype","@iri":"@iri",
"@language":"@language","@literal":"@literal","@subject":"@subject","@type":"@type"};if(b){var g={},d;for(d in b)b[d].constructor===String&&b[d]in c&&(g[b[d]]=d);for(d in g)c[d]=g[d]}return c},q=function(b,c,g){var d=null,j;for(j in b)if(j.length>0&&j[0]!=="@"&&c===b[j]){d=j;g!==null&&(g[j]=b[j]);break}d===null&&c===h.rdf+"type"&&(d=i(b)["@type"]);if(d===null)for(j in b)if(j.length>0&&j[0]!=="@"){var k=b[j];if(c.indexOf(k)===0&&c.length>k.length){d=j+":"+c.substr(k.length);g!==null&&(g[j]=k);break}}d===
null&&(d=c);return d},w=function(b,c,g){var d,j=i(b);d=c.indexOf(":");d!=-1?(j=c.substr(0,d),j in b?(d=b[j]+c.substr(d+1),g!==null&&(g[j]=b[j])):d=c):c in b?(d=b[c],g!==null&&(g[c]=d)):c===j["@subject"]?d=j["@subject"]:c===j["@type"]?d=h.rdf+"type":(d=c,"@vocab"in b&&(d=b["@vocab"]+d,g!==null&&(g["@vocab"]=b["@vocab"])));return d};b.normalize=function(b){return(new r).normalize(b)};b.expand=function(b){return(new r).expand({},null,b,!1)};b.compact=function(c,g){var d=null;if(g!==null){var g=b.expand(g),
h;g.constructor===Array?(d=[],h=g):h=[g];for(var k in h){var i={},n=(new r).compact(j(c),null,h[k],i);y.keys(i).length>0&&(n["@context"]=i);d===null?d=n:d.push(n)}}return d};b.mergeContexts=function(b,c){var g=j(b),d=j(c),h;for(h in d)if(h.indexOf("@")!==0)for(var k in g)if(g[k]===d[h]){delete g[k];break}if(k="@coerce"in g||"@coerce"in d){var i="@coerce"in g?g["@coerce"]:{},n="@coerce"in d?d["@coerce"]:{};delete g["@coerce"];delete d["@coerce"]}for(h in d)g[h]=d[h];if(k){for(var r in i)if(r in n){h=
i[r];k=n[r];k.constructor!==Array&&(k=[k]);for(var q in k)if(d=k[q],h.constructor!==Array&&h!==d||h.constructor===Array&&h.indexOf(d)==-1)h.constructor===Array?h.push(d):h=i[r]=[h,d]}for(r in n)r in i||(i[r]=n[r]);n={};h=[];for(r in i)for(q in d=i[r],d.constructor===String&&(d=[d]),d)d[q]in n?h.indexOf(d[q])==-1&&h.push(d[q]):n[d[q]]=!0;if(h.length>0)throw{message:"Invalid type coercion specification. More than one type specified for at least one property.",duplicates:h};g["@coerce"]=i}return g};
b.expandTerm=w;b.compactIri=function(b,c){return q(b,c,null)};b.frame=function(b,c,g){return(new r).frame(b,c,g)};b.toTriples=function(c,g,d){var h=null;normalized=b.normalize(c);d=d||null;d===null&&(h=[],d=function(b,c,d){h.push({subject:y.lexicalFormTerm(b),predicate:y.lexicalFormTerm(c),object:y.lexicalFormTerm(d),graph:g})});var j=!1,k;for(k in normalized){var c=normalized[k],i={token:"uri",value:c["@subject"]["@iri"]};if(i.value[0]==="_")i.token="blank",i.label=i.value.split(":")[1];for(var n in c)if(n!==
"@subject"){var r=c[n];r.constructor!==Array&&(r=[r]);for(var q in r)if(j=r[q],typeof j==="string"?j={token:"literal",value:j}:j["@iri"]!=null?j=j["@iri"][0]=="_"?{token:"blank",label:j["@iri"].split(":")[1]}:{token:"uri",value:j["@iri"]}:j["@datatype"]!=null?j={token:"literal",value:j["@literal"],type:j["@datatype"]}:j["@language"]!=null&&(j={token:"literal",value:j["@literal"],lang:j["@language"]}),j=d(i,{token:"uri",value:n},j)===!1)break;if(j)break}if(j)break}return h};var r=function(){};r.prototype.compact=
function(b,c,g,d){var h,r=i(b);if(g===null)h=null,this.getCoerceType(b,c,d);else if(g.constructor===Array){h=[];for(var w in g)h.push(this.compact(b,c,g[w],d))}else if(g.constructor===Object&&"@subject"in g&&g["@subject"].constructor===Array)h={},h[r["@subject"]]=this.compact(b,c,g["@subject"],d);else if(g.constructor===Object&&!("@literal"in g)&&!("@iri"in g)){h={};for(var x in g)if(g[x]!=="@context"&&(r=q(b,x,d),r!==x||!(r in h)))h[r]=this.compact(b,x,g[x],d)}else{c=this.getCoerceType(b,c,d);w=
null;g.constructor===Object?"@language"in g||(w="@datatype"in g?g["@datatype"]:"@iri"in g?"@iri":c):g.constructor===String&&(w=c);if(c===null&&(w===k["boolean"]||w===k.integer||w===k["double"]))c=w;if(c!==null)if(w===null)throw{message:"Cannot coerce type when a language is specified. The language information would be lost."};else if(w!==c)throw new Exception({message:"Cannot coerce type because the datatype does not match.",type:w,expected:c});else g.constructor===Object?"@iri"in g?h=g["@iri"]:"@literal"in
g&&(h=g["@literal"]):h=g,c===k["boolean"]?h=h==="true"||h!=0:c===k["double"]?h=parseFloat(h):c===k.integer&&(h=parseInt(h));else if(g.constructor===Object)for(x in h={},g)h[r[x]]=g[x];else h=j(g);w==="@iri"&&(h.constructor===Object?h[r["@iri"]]=q(b,h[r["@iri"]],d):h=q(b,h,d))}return h};r.prototype.expand=function(c,d,h,r){var q;if(h===null)q=null;else if(d===null&&h.constructor===String)q=w(c,h,null);else if(h.constructor===Array){q=[];for(var x in h)q.push(this.expand(c,d,h[x],r))}else if(h.constructor===
Object)if("@context"in h&&(c=b.mergeContexts(c,h["@context"])),x=i(c),x["@literal"]in h||x["@iri"]in h)q={},x["@iri"]in h?q["@iri"]=h[x["@iri"]]:(q["@literal"]=h[x["@literal"]],x["@language"]in h?q["@language"]=h[x["@language"]]:x["@datatype"]in h&&(q["@datatype"]=h[x["@datatype"]]));else{q={};for(var T in h)T==="@embed"||T==="@explicit"||T==="@default"||T==="@omitDefault"?g(q,T,j(h[T])):T!=="@context"&&g(q,w(c,T,null),this.expand(c,T,h[T],r))}else{T=this.getCoerceType(c,d,null);x=i(c);if(T===null&&
(h.constructor===Number||h.constructor===Boolean))T=h.constructor===Boolean?k["boolean"]:(""+h).indexOf(".")==-1?k.integer:k["double"];T!==null&&(d!==x["@subject"]||r)?(q={},T==="@iri"?q["@iri"]=w(c,h,null):(q["@datatype"]=T,T===k["double"]&&(h=h.toExponential(6).replace(/(e(?:\+|-))([0-9])$/,"$10$2")),q["@literal"]=""+h)):q=""+h}return q};r.prototype.normalize=function(b){var c=[];if(b!==null){this.ng={tmp:null,c14n:null};var g=this.expand(d,null,b,!0);this.nameBlankNodes(g);b={};H(null,null,g,b);
for(var h in b){var g=b[h],j={},k=y.keys(g).sort(),i;for(i in k){var n=k[i];j[n]=g[n]}c.push(j)}this.canonicalizeBlankNodes(c);c.sort(function(b,c){return G(b["@subject"]["@iri"],c["@subject"]["@iri"])})}return c};r.prototype.getCoerceType=function(b,c,d){var j=null,c=w(b,c,null);if(c==="@subject"||c===h.rdf+"type")j="@iri";else if("@coerce"in b){var c=q(b,c,null),k;for(k in b["@coerce"]){var i=b["@coerce"][k];i.constructor!==Array&&(i=[i]);for(var n in i)if(i[n]===c){j=w(b,k,d);d!==null&&("@coerce"in
d||(d["@coerce"]={}),k in d["@coerce"]?(i=d["@coerce"][k],(i.constructor===Array&&i.indexOf(c)==-1||i.constructor===String&&i!==c)&&g(d["@coerce"],k,c)):d["@coerce"][k]=c);break}}}return j};var x=function(b){return b.indexOf("_:")===0},G=function(b,c){var g=0;if(b.constructor===Array&&c.constructor===Array)for(var d=0;d<b.length&&g===0;++d)g=G(b[d],c[d]);else g=b<c?-1:b>c?1:0;return g},D=function(b,c,g){var d=0;g in b?d=g in c?G(b[g],c[g]):-1:g in c&&(d=1);return d},I=function(b,c){var g=0;b.constructor===
String?g=c.constructor!==String?-1:G(b,c):c.constructor===String?g=1:(g=D(b,c,"@literal"),g===0&&("@literal"in b?(g=D(b,c,"@datatype"),g===0&&(g=D(b,c,"@language"))):g=G(b["@iri"],c["@iri"])));return g},F=function(b,c){var g=0,d;for(d in b){g=G(b[d].constructor===Array?b[d].length:1,c[d].constructor===Array?c[d].length:1);if(g===0){var h=b[d],j=c[d];h.constructor!==Array&&(h=[h],j=[j]);h=h.filter(function(b){return b.constructor===String||!("@iri"in b&&x(b["@iri"]))});j=j.filter(function(b){return b.constructor===
String||!("@iri"in b&&x(b["@iri"]))});g=G(h.length,j.length)}if(g===0){h.sort(I);j.sort(I);for(var k=0;k<h.length&&g===0;++k)g=I(h[k],j[k])}if(g!==0)break}return g},J=function(b){var c=-1,g={next:function(){++c;return g.current()},current:function(){return"_:"+b+c},inNamespace:function(c){return c.indexOf("_:"+b)===0}};return g},E=function(b,c,g){if(b!==null)if(b.constructor===Array)for(var d in b)E(b[d],c,g);else if(b.constructor===Object){"@subject"in b?b["@subject"].constructor==Array?E(b["@subject"],
c,g):c[b["@subject"]["@iri"]]=b:b.constructor===Object&&!("@iri"in b||"@literal"in b)&&(!("@subject"in b)||b.constructor===Object&&"@subject"in b&&"@iri"in b["@subject"]&&x(b["@subject"]["@iri"]))&&g.push(b);for(var h in b)E(b[h],c,g)}},H=function(b,c,g,d){var h=null;if(g!==null)if(g.constructor===Array)for(var k in g)H(b,c,g[k],d);else if(g.constructor===Object)if("@subject"in g&&g["@subject"].constructor===Array){if(b!==null)throw{message:"Embedded graph literals cannot be flattened."};for(var i in g["@subject"])H(b,
c,g["@subject"][i],d)}else if("@literal"in g||"@iri"in g)h=j(g);else for(i in g["@subject"]["@iri"]in d?k=d[g["@subject"]["@iri"]]:(k={},"@subject"in g&&(d[g["@subject"]["@iri"]]=k)),h=k,g){var n=g[i];n!==null&&(i in k?k[i].constructor!==Array&&(k[i]=[k[i]]):k[i]=[],H(k[i],null,n,d),k[i].length===1&&(k[i]=k[i][0]))}else h=g;h!==null&&b!==null&&(h.constructor===Object&&"@subject"in h&&(h=h["@subject"]),b.constructor===Array?(c=!1,h.constructor===Object&&"@iri"in h&&(c=b.filter(function(b){return b.constructor===
Object&&"@iri"in b&&b["@iri"]===h["@iri"]}).length>0),c||b.push(h)):b[c]=h)};r.prototype.nameBlankNodes=function(b){var c=this.ng.tmp=J("tmp"),g={},d=[];E(b,g,d);for(var h in d)if(b=d[h],!("@subject"in b)){for(;c.next()in g;);b["@subject"]={"@iri":c.current()};g[c.current()]=b}};r.prototype.renameBlankNode=function(b,c){var g=b["@subject"]["@iri"];b["@subject"]["@iri"]=c;var d=this.subjects;d[c]=d[g];delete d[g];this.edges.refs[c]=this.edges.refs[g];this.edges.props[c]=this.edges.props[g];delete this.edges.refs[g];
delete this.edges.props[g];var h=this.edges.refs[c].all,j;for(j in h){var k=h[j].s;k===g&&(k=c);var i=d[k],n=this.edges.props[k].all,r;for(r in n)if(n[r].s===g){n[r].s=c;var k=n[r].p,k=i[k].constructor===Object?[i[k]]:i[k].constructor===Array?i[k]:[],q;for(q in k)k[q].constructor===Object&&"@iri"in k[q]&&k[q]["@iri"]===g&&(k[q]["@iri"]=c)}}n=this.edges.props[c].all;for(j in n){var k=n[j].s,h=this.edges.refs[k].all,w;for(w in h)if(h[w].s===g)h[w].s=c}};r.prototype.canonicalizeBlankNodes=function(b){this.renamed=
{};this.mappings={};this.serializations={};var c=this.edges={refs:{},props:{}},g=this.subjects={},d=[],h;for(h in b){var j=b[h]["@subject"]["@iri"];g[j]=b[h];c.refs[j]={all:[],bnodes:[]};c.props[j]={all:[],bnodes:[]};x(j)&&d.push(b[h])}this.collectEdges();var b=this.ng.c14n=J("c14n"),k=this.ng.tmp;for(h in d){var i=d[h],j=i["@subject"]["@iri"];if(b.inNamespace(j)){for(;k.next()in g;);this.renameBlankNode(i,k.current());j=i["@subject"]["@iri"]}this.serializations[j]={props:null,refs:null}}for(var n=
this;d.length>0;){d.sort(function(b,c){return n.deepCompareBlankNodes(b,c)});var i=d.shift(),j=i["@subject"]["@iri"],k=["props","refs"],r;for(r in k){i=k[r];if(this.serializations[j][i]===null){var q={};q[j]="s1"}else q=this.serializations[j][i].m;var w=y.keys(q);w.sort(function(b,c){return G(q[b],q[c])});var D=[];for(h in w){var E=w[h];!b.inNamespace(j)&&E in g&&(this.renameBlankNode(g[E],b.next()),D.push(E))}w=d;d=[];for(h in w){var E=w[h],F=E["@subject"]["@iri"];if(!b.inNamespace(F)){for(var H in D)this.markSerializationDirty(F,
D[H],i);d.push(E)}}}}for(var Ca in c.props)if(c.props[Ca].bnodes.length>0){var i=g[Ca],L;for(L in i)L.indexOf("@")!==0&&i[L].constructor===Array&&i[L].sort(I)}};MappingBuilder=function(){this.count=1;this.processed={};this.mapping={};this.adj={};this.keyStack=[{keys:["s1"],idx:0}];this.done={};this.s=""};MappingBuilder.prototype.copy=function(){var b=new MappingBuilder;b.count=this.count;b.processed=j(this.processed);b.mapping=j(this.mapping);b.adj=j(this.adj);b.keyStack=j(this.keyStack);b.done=j(this.done);
b.s=this.s;return b};MappingBuilder.prototype.mapNode=function(b){b in this.mapping||(this.mapping[b]=b.indexOf("_:c14n")===0?"c"+b.substr(6):"s"+this.count++);return this.mapping[b]};MappingBuilder.prototype.serialize=function(b,c){if(this.keyStack.length>0)for(var g=this.keyStack.pop();g.idx<g.keys.length;++g.idx){var d=g.keys[g.idx];if(!(d in this.adj)){this.keyStack.push(g);break}if(d in this.done)this.s+="_"+d;else{this.done[d]=!0;var h=d,d=this.adj[d],j=d.i;if(j in b){var k=b[j],i="",n=!0,r=
void 0;for(r in k)if(r!=="@subject"){n?n=!1:i+="|";i+="<"+r+">";var q=k[r].constructor===Array?k[r]:[k[r]],w;for(w in q){var y=q[w];y.constructor===Object?"@iri"in y?i+=x(y["@iri"])?"_:":"<"+y["@iri"]+">":(i+='"'+y["@literal"]+'"',"@datatype"in y?i+="^^<"+y["@datatype"]+">":"@language"in y&&(i+="@"+y["@language"])):i+='"'+y+'"'}}h+="["+i+"]";k=!0;h+="[";var j=c.refs[j].all,G;for(G in j)k?k=!1:h+="|",h+="<"+j[G].p+">",h+=x(j[G].s)?"_:":"<"+j[G].s+">";h+="]"}h+=d.k.join("");this.s+=h;this.keyStack.push({keys:d.k,
idx:0});this.serialize(b,c)}}};r.prototype.markSerializationDirty=function(b,c,g){b=this.serializations[b];b[g]!==null&&c in b[g].m&&(b[g]=null)};var L=function(b,c){var g=0;return g=b.length==c.length?G(b,c):b.length>c.length?G(b.substr(0,c.length),c):G(b,c.substr(0,b.length))};r.prototype.serializeCombos=function(b,c,g,d,h,k,i){if(i.length>0){k=j(k);k[d.mapNode(i[0].s)]=i[0].s;for(var n=d.copy(),i=i.slice(1),r=Math.max(1,i.length),q=0;q<r;++q){var w=q===0?d:n.copy();this.serializeCombos(b,c,g,w,
h,k,i);i.unshift.apply(i,i.splice(1,i.length))}}else if(i=y.keys(k).sort(),d.adj[g]={i:c,k:i,m:k},d.serialize(this.subjects,this.edges),b[h]===null||L(d.s,b[h].s)<=0){for(n in i)this.serializeBlankNode(b,k[i[n]],d,h);d.serialize(this.subjects,this.edges);if(b[h]===null||L(d.s,b[h].s)<=0&&d.s.length>=b[h].s.length)b[h]={s:d.s,m:d.mapping}}};r.prototype.serializeBlankNode=function(b,c,g,d){if(!(c in g.processed)){g.processed[c]=!0;var h=g.mapNode(c),j=g.copy(),k=this.edges[d][c].bnodes,i={},n=[],r;
for(r in k)k[r].s in g.mapping?i[g.mapping[k[r].s]]=k[r].s:n.push(k[r]);k=Math.max(1,n.length);for(r=0;r<k;++r){var q=r===0?g:j.copy();this.serializeCombos(b,c,h,q,d,i,n)}}};r.prototype.deepCompareBlankNodes=function(b,c){var g=0,d=b["@subject"]["@iri"],h=c["@subject"]["@iri"];if(d===h)g=0;else if(g=this.shallowCompareBlankNodes(b,c),g===0)for(var k=["props","refs"],i=0;g===0&&i<k.length;++i){var g=k[i],n=this.serializations[d],r=this.serializations[h];if(n[g]===null){var q=new MappingBuilder;if(g===
"refs")q.mapping=j(n.props.m),q.count=y.keys(q.mapping).length+1;this.serializeBlankNode(n,d,q,g)}if(r[g]===null){q=new MappingBuilder;if(g==="refs")q.mapping=j(r.props.m),q.count=y.keys(q.mapping).length+1;this.serializeBlankNode(r,h,q,g)}g=G(n[g].s,r[g].s)}return g};r.prototype.shallowCompareBlankNodes=function(b,c){var g=0,d=y.keys(b),h=y.keys(c),g=G(d.length,h.length);g===0&&(g=G(d.sort(),h.sort()));g===0&&(g=F(b,c));if(g===0)var j=this.edges.refs[b["@subject"]["@iri"]].all,k=this.edges.refs[c["@subject"]["@iri"]].all,
g=G(j.length,k.length);if(g===0)for(d=0;d<j.length&&g===0;++d)g=this.compareEdges(j[d],k[d]);return g};r.prototype.compareEdges=function(b,c){var g=0,d=x(b.s),h=x(c.s),j=this.ng.c14n;d!=h?g=d?1:-1:(d||(g=G(b.s,c.s)),g===0&&(g=G(b.p,c.p)),g===0&&j!==null&&(d=j.inNamespace(b.s),j=j.inNamespace(c.s),d!=j?g=d?1:-1:d&&(g=G(b.s,c.s))));return g};r.prototype.collectEdges=function(){var b=this.edges.refs,c=this.edges.props,g;for(g in this.subjects){var d=this.subjects[g],h;for(h in d)if(h!=="@subject"){var j=
d[h],j=j.constructor!==Array?[j]:j,k;for(k in j){var i=j[k];i.constructor===Object&&"@iri"in i&&i["@iri"]in this.subjects&&(i=i["@iri"],b[i].all.push({s:g,p:h}),c[g].all.push({s:i,p:h}))}}}var n=this;for(g in b)b[g].all.sort(function(b,c){return n.compareEdges(b,c)}),b[g].bnodes=b[g].all.filter(function(b){return x(b.s)});for(g in c)c[g].all.sort(function(b,c){return n.compareEdges(b,c)}),c[g].bnodes=c[g].all.filter(function(b){return x(b.s)})};var O=function(b,c){var g=!1;if(!(h.rdf+"type"in c)){var d=
y.keys(c).filter(function(b){return b.indexOf("@")!==0});if(d.length===0)g=!0;else if(b.constructor===Object&&"@subject"in b){var g=!0,j;for(j in d)if(!(d[j]in b)){g=!1;break}}}return g},S=function(b,c,g,d,j,k,i,n){var r=null,q=-1,w;g.constructor===Array?(r=[],w=g,w.length===0&&w.push({})):(w=[g],q=1);for(var x=[],y=0;y<w.length&&q!==0;++y){g=w[y];if(g.constructor!==Object)throw{message:"Invalid JSON-LD frame. Frame must be an object or an array.",frame:g};x[y]=[];for(var G=0;G<c.length&&q!==0;++G){var D=
c[G],R=!1,E=h.rdf+"type";if(E in g&&D.constructor===Object&&"@subject"in D&&E in D)for(var I=D[E].constructor===Array?D[E]:[D[E]],F=g[E].constructor===Array?g[E]:[g[E]],H=0;H<F.length&&!R;++H){var E=F[H]["@iri"],J;for(J in I)if(I[J]["@iri"]===E){R=!0;break}}if(R||O(D,g))x[y].push(D),--q}}for(var cb in x)for(var L in x[cb]){g=w[cb];q=x[cb][L];if(q.constructor===Object&&"@subject"in q)if(c=b,y=d,D=j,R=k,E=i,G=n,I=q["@subject"]["@iri"],F=I in y?y[I]:null,(g["@embed"]===!0||G.defaults.embedOn)&&(F===
null||F.autoembed&&!D)){F===null?(F={},y[I]=F):F.parent!==null&&(F.parent[F.key]=q["@subject"]);F.autoembed=D;F.parent=R;F.key=E;if(g["@explicit"]===!0||G.defaults.explicitOn)for(key in q)key!=="@subject"&&!(key in g)&&delete q[key];for(key in q)if(key.indexOf("@")!==0&&key!==h.rdf+"type"){key in g?(D=g[key],R=!1):(D=q[key].constructor===Array?[]:{},R=!0);var E=q[key],E=E.constructor===Array?E:[E],pa;for(pa in E)E[pa].constructor===Object&&"@iri"in E[pa]&&E[pa]["@iri"]in c&&(E[pa]=c[E[pa]["@iri"]]);
q[key]=S(c,E,D,y,R,q,key,G)}for(key in g)key.indexOf("@")!==0&&key!==h.rdf+"type"&&!(key in q)&&(D=g[key],D.constructor===Array?q[key]=[]:(D.constructor===Array&&(D=D.length>0?D[0]:{}),D["@omitDefault"]===!0||G.defaults.omitDefaultOn||(q[key]="@default"in D?D["@default"]:null)))}else q=q["@subject"];r===null?r=q:r.push(q)}return r};r.prototype.frame=function(c,g,d){var c=b.normalize(c),h=null;"@context"in g&&(h=j(g["@context"]));var g=b.expand(g),d={defaults:{embedOn:!0,explicitOn:!1,omitDefaultOn:!1}},
k={},i;for(i in c)k[c[i]["@subject"]["@iri"]]=c[i];c=S(k,c,g,{},!1,null,null,d);h!==null&&c!==null&&(c=b.compact(h,c));return c}})();var Da={parser:{}};Da.parser.parse=function(c,b){typeof c==="string"&&(c=JSON.parse(c));return Aa.toTriples(c,b)};var Z={RDFLoader:function(c){this.precedences=["text/turtle","text/n3","application/json"];this.parsers={"text/turtle":fa.parser,"text/n3":fa.parser,"application/json":Da.parser};if(c!=null)for(var b in c.parsers)this.parsers[b]=c.parsers[b];if(c&&c.precedences!=
null)for(b in this.precedences=c.precedences,c.parsers)y.include(this.precedences,b)||this.precedences.push(b);this.acceptHeaderValue="";for(c=0;c<this.precedences.length;c++)c!=0?this.acceptHeaderValue=this.acceptHeaderValue+","+this.precedences[c]:this.acceptHeaderValue+=this.precedences[c]}};Z.RDFLoader.prototype.registerParser=function(c,b){this.parsers[c]=b;this.precedences.push(c)};Z.RDFLoader.prototype.unregisterParser=function(c){delete this.parsers[c];for(var b=[],d=0;d<this.precedences.length;d++)this.precedences[d]!=
c&&b.push(this.precedences[d]);this.precedences=b};Z.RDFLoader.prototype.setAcceptHeaderPrecedence=function(c){this.precedences=c};Z.RDFLoader.prototype.load=function(c,b,d){var h=this;Y.load(c,this.acceptHeaderValue,function(k,g){if(k==!0){var j=g.headers["Content-Type"]||g.headers["content-type"],i=g.data;if(j!=null){var j=j.split(";")[0],q;for(q in h.parsers)if(q.indexOf("/")!=-1){var w=q.split("/");if(w[1]==="*"){if(j.indexOf(w[0])!=-1)return h.tryToParse(h.parsers[q],b,i,d)}else if(j.indexOf(q)!=
-1)return h.tryToParse(h.parsers[q],b,i,d);else if(j.indexOf(w[1])!=-1)return h.tryToParse(h.parsers[q],b,i,d)}else if(j.indexOf(q)!=-1)return h.tryToParse(h.parsers[q],c,b,d);d(!1,"Unknown media type : "+j)}else console.log("Unknown media type"),console.log(g.headers),d(!1,"Uknown media type")}else d(!1,"Network error: "+g)})};Z.RDFLoader.prototype.loadFromFile=function(c,b,d,h){try{var k=this;fs=require("fs");fs.readFile(d.split("file:/")[1],function(g,d){if(g)throw g;d=d.toString("utf8");k.tryToParse(c,
b,d,h)})}catch(g){h(!1,g)}};Z.RDFLoader.prototype.tryToParse=function(c,b,d,h){try{typeof d==="string"&&(d=y.normalizeUnicodeLiterals(d));var k=c.parse(d,b);k!=null?h(!0,k):h(!1,"parsing error")}catch(g){console.log(g.message),console.log(g.stack),h(!1,"parsing error with mime type : "+g)}};var M={AbstractQueryTree:function(){}};M.AbstractQueryTree.prototype.parseQueryString=function(c){return ka.parser.parse(c)};M.AbstractQueryTree.prototype.parseExecutableUnit=function(c){if(c.kind==="select")return this.parseSelect(c);
else if(c.kind==="ask")return this.parseSelect(c);else if(c.kind==="modify")return this.parseSelect(c);else if(c.kind==="construct")return this.parseSelect(c);else if(c.kind==="insertdata")return this.parseInsertData(c);else if(c.kind==="deletedata")return this.parseInsertData(c);else if(c.kind==="load")return c;else if(c.kind==="clear")return c;else if(c.kind==="drop")return c;else if(c.kind==="create")return c;else throw Error("unknown executable unit: "+c.kind);};M.AbstractQueryTree.prototype.parseSelect=
function(c){return c==null?(console.log("error parsing query"),null):(c.pattern=this.build(c.pattern,{}),c)};M.AbstractQueryTree.prototype.parseInsertData=function(c){return c==null?(console.log("error parsing query"),null):c};M.AbstractQueryTree.prototype.build=function(c,b){if(c.token==="groupgraphpattern")return this._buildGroupGraphPattern(c,b);else if(c.token==="basicgraphpattern")return{kind:"BGP",value:c.triplesContext};else if(c.token==="graphunionpattern"){var d=this.build(c.value[0],b),
h=this.build(c.value[1],b);return{kind:"UNION",value:[d,h]}}else if(c.token==="graphgraphpattern")return{kind:"GRAPH",value:this.build(c.value,b),graph:c.graph};else throw Error("not supported token in query:"+c.token);};M.AbstractQueryTree.prototype._buildGroupGraphPattern=function(c,b){for(var d=c.filters||[],h={kind:"EMPTY_PATTERN"},k=0;k<c.patterns.length;k++){var g=c.patterns[k];g.token==="optionalgraphpattern"?(g=this.build(g.value,b),h=g.kind==="FILTER"?{kind:"LEFT_JOIN",lvalue:h,rvalue:g.value,
filter:g.filter}:{kind:"LEFT_JOIN",lvalue:h,rvalue:g,filter:!0}):(g=this.build(g,b),h=h.kind=="EMPTY_PATTERN"?g:{kind:"JOIN",lvalue:h,rvalue:g})}if(d.length!=0)if(h.kind==="EMPTY_PATTERN")return{kind:"FILTER",filter:d,value:h};else if(h.kind==="LEFT_JOIN"&&h.filter===!0)return{kind:"FILTER",filter:d,value:h};else if(h.kind==="LEFT_JOIN")return{kind:"FILTER",filter:d,value:h};else if(h.kind==="JOIN")return{kind:"FILTER",filter:d,value:h};else if(h.kind==="UNION")return{kind:"FILTER",filter:d,value:h};
else if(h.kind==="GRAPH")return{kind:"FILTER",filter:d,value:h};else if(h.kind==="BGP")return{kind:"FILTER",filter:d,value:h};else throw Error("Unknow kind of algebra expression: "+h.kind);else return h};M.AbstractQueryTree.prototype.collectBasicTriples=function(c,b){b==null&&(b=[]);if(c.kind==="select")b=this.collectBasicTriples(c.pattern,b);else if(c.kind==="BGP")b=b.concat(c.value);else if(c.kind==="UNION")b=this.collectBasicTriples(c.value[0],b),b=this.collectBasicTriples(c.value[1],b);else if(c.kind===
"GRAPH")b=this.collectBasicTriples(c.value,b);else if(c.kind==="LEFT_JOIN"||c.kind==="JOIN")b=this.collectBasicTriples(c.lvalue,b),b=this.collectBasicTriples(c.rvalue,b);else if(c.kind==="FILTER")b=this.collectBasicTriples(c.value,b);else if(c.kind==="construct")b=this.collectBasicTriples(c.pattern,b);else if(c.kind!=="EMPTY_PATTERN")throw"Unknown pattern: "+c.kind;return b};M.AbstractQueryTree.prototype.bind=function(c,b){if(c.graph!=null&&c.graph.token&&c.graph.token==="var"&&b[c.graph.value]!=
null)c.graph=b[c.graph.value];if(c.filter!=null){for(var d=[],h=0;h<c.filter.length;h++)c.filter[h].value=this._bindFilter(c.filter[h].value,b),d.push(c.filter[h]);c.filter=d}if(c.kind==="select")c.pattern=this.bind(c.pattern,b);else if(c.kind==="BGP")c.value=this._bindTripleContext(c.value,b);else if(c.kind==="UNION")c.value[0]=this.bind(c.value[0],b),c.value[1]=this.bind(c.value[1],b);else if(c.kind==="GRAPH")c.value=this.bind(c.value,b);else if(c.kind==="LEFT_JOIN"||c.kind==="JOIN")c.lvalue=this.bind(c.lvalue,
b),c.rvalue=this.bind(c.rvalue,b);else if(c.kind==="FILTER")this.collectBasicTriples(c.value,d);else if(c.kind!=="EMPTY_PATTERN")throw"Unknown pattern: "+c.kind;return c};M.AbstractQueryTree.prototype._bindTripleContext=function(c,b){for(var d=0;d<c.length;d++){delete c[d].graph;delete c[d].variables;for(var h in c[d]){var k=c[d][h];k.token==="var"&&b[k.value]!=null&&(c[d][h]=b[k.value])}}return c};M.AbstractQueryTree.prototype._bindFilter=function(c,b){if(c.expressionType!=null){var d=c.expressionType;
if(d=="relationalexpression")c.op1=this._bindFilter(c.op1,b),c.op2=this._bindFilter(c.op2,b);else if(d=="conditionalor"||d=="conditionaland")for(d=0;d<c.operands.length;d++)c.operands[d]=this._bindFilter(c.operands[d],b);else if(d=="additiveexpression"){c.summand=this._bindFilter(c.summand,b);for(d=0;d<c.summands.length;d++)c.summands[d].expression=this._bindFilter(c.summands[d].expression,b)}else if(d=="builtincall")for(d=0;d<c.args.length;d++)c.args[d]=this._bindFilter(c.args[d],b);else if(d=="multiplicativeexpression"){c.factor=
this._bindFilter(c.factor,b);for(d=0;d<c.factors.length;d++)c.factors[d].expression=this._bindFilter(c.factors[d].expression,b)}else if(d=="unaryexpression")c.expression=this._bindFilter(c.expression,b);else if(d=="irireforfunction")for(d=0;d<c.factors.args;d++)c.args[d]=this._bindFilter(c.args[d],b);else if(d=="atomic"&&c.primaryexpression=="var"&&b[c.value.value]!=null)d=b[c.value.value],c.primaryexpression=d.token==="uri"?"iri":"literal",c.value=d}return c};var ka={};ka.parser=function(){var c=
{parse:function(b,c){function h(a){var b=a.charCodeAt(0);if(b<=255)var a="x",c=2;else a="u",c=4;var a="\\"+a,f=b.toString(16).toUpperCase(),b=f;c-=f.length;for(f=0;f<c;f++)b="0"+b;return a+b}function k(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/[\x80-\uFFFF]/g,h)+'"'}function g(b){a<Ea||(a>Ea&&(Ea=a,fb=[]),fb.push(b))}function j(){var b="SPARQL@"+a,c=z[b];if(c)return a=c.nextPos,c.result;c=i();c===null&&(c=eb(),c=c!==null?c:null);z[b]=
{nextPos:a,result:c};return c}function i(){var b="Query@"+a,c=z[b];if(c)return a=c.nextPos,c.result;c=m;m=!1;var d=a,f=a,e=q();if(e!==null){var u=I();u===null&&(u=L(),u===null&&(u=O(),u===null&&(u=S(),u=u!==null?u:null)));u!==null?e=[e,u]:(e=null,a=f)}else e=null,a=f;f=e!==null?{token:"query",kind:"query",prologue:e[0],units:[e[1]]}:null;f===null&&(f=null,a=d);(m=c)&&f===null&&g("[2] Query");z[b]={nextPos:a,result:f};return f}function q(){var b="Prologue@"+a,c=z[b];if(c)return a=c.nextPos,c.result;
c=m;m=!1;var d=a,f=a,e=w(),e=e!==null?e:"";if(e!==null){for(var u=[],o=s();o!==null;)u.push(o),o=s();if(u!==null){for(var o=[],v=r();v!==null;)o.push(v),v=r();o!==null?e=[e,u,o]:(e=null,a=f)}else e=null,a=f}else e=null,a=f;f=e!==null?{token:"prologue",base:e[0],prefixes:e[2]}:null;f===null&&(f=null,a=d);(m=c)&&f===null&&g("[3] Prologue");z[b]={nextPos:a,result:f};return f}function w(){var c="BaseDecl@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;for(var h=a,f=a,e=[],u=s();u!==null;)e.push(u),
u=s();if(e!==null)if(b.substr(a,1)==="B"?(u="B",a+=1):(u=null,m&&g('"B"')),u===null&&(b.substr(a,1)==="b"?(u="b",a+=1):(u=null,m&&g('"b"')),u=u!==null?u:null),u!==null){if(b.substr(a,1)==="A"){var o="A";a+=1}else o=null,m&&g('"A"');o===null&&(b.substr(a,1)==="a"?(o="a",a+=1):(o=null,m&&g('"a"')),o=o!==null?o:null);if(o!==null){if(b.substr(a,1)==="S"){var v="S";a+=1}else v=null,m&&g('"S"');v===null&&(b.substr(a,1)==="s"?(v="s",a+=1):(v=null,m&&g('"s"')),v=v!==null?v:null);if(v!==null){if(b.substr(a,
1)==="E"){var A="E";a+=1}else A=null,m&&g('"E"');A===null&&(b.substr(a,1)==="e"?(A="e",a+=1):(A=null,m&&g('"e"')),A=A!==null?A:null);if(A!==null){for(var Q=[],t=s();t!==null;)Q.push(t),t=s();Q!==null?(t=qa(),t!==null?e=[e,u,o,v,A,Q,t]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;else e=null,a=f;f=e!==null?function(a){base={token:"base"};base.value=a;return base}(e[6]):null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[4] BaseDecl");z[c]={nextPos:a,result:f};
return f}function r(){var c="PrefixDecl@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;for(var h=a,f=a,e=[],u=s();u!==null;)e.push(u),u=s();if(e!==null)if(b.substr(a,1)==="P"?(u="P",a+=1):(u=null,m&&g('"P"')),u===null&&(b.substr(a,1)==="p"?(u="p",a+=1):(u=null,m&&g('"p"')),u=u!==null?u:null),u!==null){if(b.substr(a,1)==="R"){var o="R";a+=1}else o=null,m&&g('"R"');o===null&&(b.substr(a,1)==="r"?(o="r",a+=1):(o=null,m&&g('"r"')),o=o!==null?o:null);if(o!==null){if(b.substr(a,1)==="E"){var v="E";
a+=1}else v=null,m&&g('"E"');v===null&&(b.substr(a,1)==="e"?(v="e",a+=1):(v=null,m&&g('"e"')),v=v!==null?v:null);if(v!==null){if(b.substr(a,1)==="F"){var A="F";a+=1}else A=null,m&&g('"F"');A===null&&(b.substr(a,1)==="f"?(A="f",a+=1):(A=null,m&&g('"f"')),A=A!==null?A:null);if(A!==null){if(b.substr(a,1)==="I"){var Q="I";a+=1}else Q=null,m&&g('"I"');Q===null&&(b.substr(a,1)==="i"?(Q="i",a+=1):(Q=null,m&&g('"i"')),Q=Q!==null?Q:null);if(Q!==null){if(b.substr(a,1)==="X"){var t="X";a+=1}else t=null,m&&g('"X"');
t===null&&(b.substr(a,1)==="x"?(t="x",a+=1):(t=null,m&&g('"x"')),t=t!==null?t:null);if(t!==null){for(var j=[],k=s();k!==null;)j.push(k),k=s();if(j!==null)if(k=Ka(),k!==null){for(var i=[],ra=s();ra!==null;)i.push(ra),ra=s();i!==null?(ra=qa(),ra!==null?e=[e,u,o,v,A,Q,t,j,k,i,ra]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;else e=null,a=f;f=e!==null?function(a,b){prefix={token:"prefix"};prefix.prefix=
a;prefix.local=b;return prefix}(e[8],e[10]):null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[5] PrefixDecl");z[c]={nextPos:a,result:f};return f}function x(){var b="TURTLE@"+a,c=z[b];if(c)return a=c.nextPos,c.result;for(var c=a,g=[],f=y();f!==null;)g.push(f),f=y();g=g!==null?g:null;g===null&&(g=null,a=c);z[b]={nextPos:a,result:g};return g}function y(){var c="statement@"+a,d=z[c];if(d)return a=d.nextPos,d.result;for(var h=d=a,f=[],e=s();e!==null;)f.push(e),e=s();if(f!==null)if(e=D(),e!==null){for(var u=
[],o=s();o!==null;)u.push(o),o=s();if(u!==null)if(b.substr(a,1)==="."?(o=".",a+=1):(o=null,m&&g('"."')),o!==null){for(var v=[],A=s();A!==null;)v.push(A),A=s();v!==null?f=[f,e,u,o,v]:(f=null,a=h)}else f=null,a=h;else f=null,a=h}else f=null,a=h;else f=null,a=h;h=f!==null?f[1]:null;h===null&&(h=null,a=d);if(h!==null)d=h;else{h=d=a;f=[];for(e=s();e!==null;)f.push(e),e=s();if(f!==null)if(e=sa(),e!==null){u=[];for(o=s();o!==null;)u.push(o),o=s();u!==null?f=[f,e,u]:(f=null,a=h)}else f=null,a=h;else f=null,
a=h;h=f!==null?f[1]:null;h===null&&(h=null,a=d);if(h!==null)d=h;else{d=s();if(d!==null)for(h=[];d!==null;)h.push(d),d=s();else h=null;d=h!==null?h:null}}z[c]={nextPos:a,result:d};return d}function D(){var b="directive@"+a,c=z[b];if(c)return a=c.nextPos,c.result;c=F();c===null&&(c=E(),c=c!==null?c:null);z[b]={nextPos:a,result:c};return c}function E(){var c="base@"+a,d=z[c];if(d)return a=d.nextPos,d.result;for(var h=d=a,f=[],e=s();e!==null;)f.push(e),e=s();if(f!==null)if(b.substr(a,5)==="@base"?(e=
"@base",a+=5):(e=null,m&&g('"@base"')),e!==null){var u=s();if(u!==null)for(var o=[];u!==null;)o.push(u),u=s();else o=null;o!==null?(u=qa(),u!==null?f=[f,e,o,u]:(f=null,a=h)):(f=null,a=h)}else f=null,a=h;else f=null,a=h;h=f!==null?function(a){base={token:"base"};base.value=a;return base}(f[3]):null;h===null&&(h=null,a=d);z[c]={nextPos:a,result:h};return h}function F(){var c="prefixID@"+a,d=z[c];if(d)return a=d.nextPos,d.result;for(var h=d=a,f=[],e=s();e!==null;)f.push(e),e=s();if(f!==null)if(b.substr(a,
7)==="@prefix"?(e="@prefix",a+=7):(e=null,m&&g('"@prefix"')),e!==null){var u=s();if(u!==null)for(var o=[];u!==null;)o.push(u),u=s();else o=null;if(o!==null)if(u=gb(),u=u!==null?u:"",u!==null){if(b.substr(a,1)===":"){var v=":";a+=1}else v=null,m&&g('":"');if(v!==null){for(var A=[],Q=s();Q!==null;)A.push(Q),Q=s();A!==null?(Q=qa(),Q!==null?f=[f,e,o,u,v,A,Q]:(f=null,a=h)):(f=null,a=h)}else f=null,a=h}else f=null,a=h;else f=null,a=h}else f=null,a=h;else f=null,a=h;h=f!==null?function(a,b){prefix={token:"prefix"};
prefix.prefix=a;prefix.local=b;return prefix}(f[3],f[6]):null;h===null&&(h=null,a=d);z[c]={nextPos:a,result:h};return h}function I(){var b="SelectQuery@"+a,c=z[b];if(c)return a=c.nextPos,c.result;c=m;m=!1;var d=a,f=a,e=J();if(e!==null){for(var u=[],o=s();o!==null;)u.push(o),o=s();if(u!==null){for(var o=[],v=M();v!==null;)o.push(v),v=M();if(o!==null){for(var v=[],h=s();h!==null;)v.push(h),h=s();if(v!==null)if(h=U(),h!==null){for(var Q=[],t=s();t!==null;)Q.push(t),t=s();if(Q!==null)if(t=Z(),t!==null){for(var j=
[],k=s();k!==null;)j.push(k),k=s();j!==null?(k=Aa(),k!==null?e=[e,u,o,v,h,Q,t,j,k]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;f=e!==null?function(a,b,c,e){for(var f={named:[],"default":[]},g=0;g<b.length;g++){var m=b[g];m.kind==="default"?f["default"].push(m.graph):f.named.push(m.graph)}f.named.length===0&&f["default"].length===0&&f["default"].push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});
b={kind:"select",token:"executableunit"};b.dataset=f;b.projection=a.vars;b.modifier=a.modifier;b.pattern=c;if(e!=null&&e.limit!=null)b.limit=e.limit;if(e!=null&&e.offset!=null)b.offset=e.offset;if(e!=null&&e.order!=null&&e.order!="")b.order=e.order;if(e!=null&&e.group!=null)b.group=e.group;return b}(e[0],e[2],e[4],e[6]):null;f===null&&(f=null,a=d);(m=c)&&f===null&&g("[6] SelectQuery");z[b]={nextPos:a,result:f};return f}function H(){var b="SubSelect@"+a,c=z[b];if(c)return a=c.nextPos,c.result;c=m;
m=!1;var d=a,f=J();if(f!==null){var e=U();if(e!==null){var u=Z();u!==null?f=[f,e,u]:(f=null,a=d)}else f=null,a=d}else f=null,a=d;(m=c)&&f===null&&g("[7] SubSelect");z[b]={nextPos:a,result:f};return f}function J(){var c="SelectClause@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;for(var h=a,f=a,e=[],u=s();u!==null;)e.push(u),u=s();if(e!==null)if(b.substr(a,1)==="S"?(u="S",a+=1):(u=null,m&&g('"S"')),u===null&&(b.substr(a,1)==="s"?(u="s",a+=1):(u=null,m&&g('"s"')),u=u!==null?u:null),u!==null){if(b.substr(a,
1)==="E"){var o="E";a+=1}else o=null,m&&g('"E"');o===null&&(b.substr(a,1)==="e"?(o="e",a+=1):(o=null,m&&g('"e"')),o=o!==null?o:null);if(o!==null){if(b.substr(a,1)==="L"){var v="L";a+=1}else v=null,m&&g('"L"');v===null&&(b.substr(a,1)==="l"?(v="l",a+=1):(v=null,m&&g('"l"')),v=v!==null?v:null);if(v!==null){if(b.substr(a,1)==="E"){var A="E";a+=1}else A=null,m&&g('"E"');A===null&&(b.substr(a,1)==="e"?(A="e",a+=1):(A=null,m&&g('"e"')),A=A!==null?A:null);if(A!==null){if(b.substr(a,1)==="C"){var j="C";a+=
1}else j=null,m&&g('"C"');j===null&&(b.substr(a,1)==="c"?(j="c",a+=1):(j=null,m&&g('"c"')),j=j!==null?j:null);if(j!==null){if(b.substr(a,1)==="T"){var t="T";a+=1}else t=null,m&&g('"T"');t===null&&(b.substr(a,1)==="t"?(t="t",a+=1):(t=null,m&&g('"t"')),t=t!==null?t:null);if(t!==null){for(var k=[],i=s();i!==null;)k.push(i),i=s();if(k!==null){i=a;if(b.substr(a,1)==="D"){var K="D";a+=1}else K=null,m&&g('"D"');K===null&&(b.substr(a,1)==="d"?(K="d",a+=1):(K=null,m&&g('"d"')),K=K!==null?K:null);if(K!==null){if(b.substr(a,
1)==="I"){var n="I";a+=1}else n=null,m&&g('"I"');n===null&&(b.substr(a,1)==="i"?(n="i",a+=1):(n=null,m&&g('"i"')),n=n!==null?n:null);if(n!==null){if(b.substr(a,1)==="S"){var C="S";a+=1}else C=null,m&&g('"S"');C===null&&(b.substr(a,1)==="s"?(C="s",a+=1):(C=null,m&&g('"s"')),C=C!==null?C:null);if(C!==null){if(b.substr(a,1)==="T"){var B="T";a+=1}else B=null,m&&g('"T"');B===null&&(b.substr(a,1)==="t"?(B="t",a+=1):(B=null,m&&g('"t"')),B=B!==null?B:null);if(B!==null){if(b.substr(a,1)==="I"){var q="I";a+=
1}else q=null,m&&g('"I"');q===null&&(b.substr(a,1)==="i"?(q="i",a+=1):(q=null,m&&g('"i"')),q=q!==null?q:null);if(q!==null){if(b.substr(a,1)==="N"){var r="N";a+=1}else r=null,m&&g('"N"');r===null&&(b.substr(a,1)==="n"?(r="n",a+=1):(r=null,m&&g('"n"')),r=r!==null?r:null);if(r!==null){if(b.substr(a,1)==="C"){var w="C";a+=1}else w=null,m&&g('"C"');w===null&&(b.substr(a,1)==="c"?(w="c",a+=1):(w=null,m&&g('"c"')),w=w!==null?w:null);if(w!==null){if(b.substr(a,1)==="T"){var x="T";a+=1}else x=null,m&&g('"T"');
x===null&&(b.substr(a,1)==="t"?(x="t",a+=1):(x=null,m&&g('"t"')),x=x!==null?x:null);x!==null?K=[K,n,C,B,q,r,w,x]:(K=null,a=i)}else K=null,a=i}else K=null,a=i}else K=null,a=i}else K=null,a=i}else K=null,a=i}else K=null,a=i}else K=null,a=i;K!==null?i=K:(i=a,b.substr(a,1)==="R"?(K="R",a+=1):(K=null,m&&g('"R"')),K===null&&(b.substr(a,1)==="r"?(K="r",a+=1):(K=null,m&&g('"r"')),K=K!==null?K:null),K!==null?(b.substr(a,1)==="E"?(n="E",a+=1):(n=null,m&&g('"E"')),n===null&&(b.substr(a,1)==="e"?(n="e",a+=1):
(n=null,m&&g('"e"')),n=n!==null?n:null),n!==null?(b.substr(a,1)==="D"?(C="D",a+=1):(C=null,m&&g('"D"')),C===null&&(b.substr(a,1)==="d"?(C="d",a+=1):(C=null,m&&g('"d"')),C=C!==null?C:null),C!==null?(b.substr(a,1)==="U"?(B="U",a+=1):(B=null,m&&g('"U"')),B===null&&(b.substr(a,1)==="u"?(B="u",a+=1):(B=null,m&&g('"u"')),B=B!==null?B:null),B!==null?(b.substr(a,1)==="C"?(q="C",a+=1):(q=null,m&&g('"C"')),q===null&&(b.substr(a,1)==="c"?(q="c",a+=1):(q=null,m&&g('"c"')),q=q!==null?q:null),q!==null?(b.substr(a,
1)==="E"?(r="E",a+=1):(r=null,m&&g('"E"')),r===null&&(b.substr(a,1)==="e"?(r="e",a+=1):(r=null,m&&g('"e"')),r=r!==null?r:null),r!==null?(b.substr(a,1)==="D"?(w="D",a+=1):(w=null,m&&g('"D"')),w===null&&(b.substr(a,1)==="d"?(w="d",a+=1):(w=null,m&&g('"d"')),w=w!==null?w:null),w!==null?K=[K,n,C,B,q,r,w]:(K=null,a=i)):(K=null,a=i)):(K=null,a=i)):(K=null,a=i)):(K=null,a=i)):(K=null,a=i)):(K=null,a=i),i=K!==null?K:null);i=i!==null?i:"";if(i!==null){K=[];for(n=s();n!==null;)K.push(n),n=s();if(K!==null){C=
a;B=[];for(q=s();q!==null;)B.push(q),q=s();if(B!==null)if(q=V(),q!==null){r=[];for(w=s();w!==null;)r.push(w),w=s();r!==null?B=[B,q,r]:(B=null,a=C)}else B=null,a=C;else B=null,a=C;if(B!==null)C=B;else{C=a;B=[];for(q=s();q!==null;)B.push(q),q=s();if(B!==null)if(b.substr(a,1)==="("?(q="(",a+=1):(q=null,m&&g('"("')),q!==null){r=[];for(w=s();w!==null;)r.push(w),w=s();if(r!==null)if(w=N(),w!==null){for(var x=[],y=s();y!==null;)x.push(y),y=s();if(x!==null)if(b.substr(a,1)==="A"?(y="A",a+=1):(y=null,m&&g('"A"')),
y===null&&(b.substr(a,1)==="a"?(y="a",a+=1):(y=null,m&&g('"a"')),y=y!==null?y:null),y!==null){if(b.substr(a,1)==="S"){var D="S";a+=1}else D=null,m&&g('"S"');D===null&&(b.substr(a,1)==="s"?(D="s",a+=1):(D=null,m&&g('"s"')),D=D!==null?D:null);if(D!==null){for(var G=[],E=s();E!==null;)G.push(E),E=s();if(G!==null)if(E=V(),E!==null){for(var R=[],F=s();F!==null;)R.push(F),F=s();if(R!==null)if(b.substr(a,1)===")"?(F=")",a+=1):(F=null,m&&g('")"')),F!==null){for(var I=[],H=s();H!==null;)I.push(H),H=s();I!==
null?B=[B,q,r,w,x,y,D,G,E,R,F,I]:(B=null,a=C)}else B=null,a=C;else B=null,a=C}else B=null,a=C;else B=null,a=C}else B=null,a=C}else B=null,a=C;else B=null,a=C}else B=null,a=C;else B=null,a=C}else B=null,a=C;else B=null,a=C;C=B!==null?B:null}if(C!==null)for(n=[];C!==null;){n.push(C);C=a;B=[];for(q=s();q!==null;)B.push(q),q=s();if(B!==null)if(q=V(),q!==null){r=[];for(w=s();w!==null;)r.push(w),w=s();r!==null?B=[B,q,r]:(B=null,a=C)}else B=null,a=C;else B=null,a=C;if(B!==null)C=B;else{C=a;B=[];for(q=s();q!==
null;)B.push(q),q=s();if(B!==null)if(b.substr(a,1)==="("?(q="(",a+=1):(q=null,m&&g('"("')),q!==null){r=[];for(w=s();w!==null;)r.push(w),w=s();if(r!==null)if(w=N(),w!==null){x=[];for(y=s();y!==null;)x.push(y),y=s();if(x!==null)if(b.substr(a,1)==="A"?(y="A",a+=1):(y=null,m&&g('"A"')),y===null&&(b.substr(a,1)==="a"?(y="a",a+=1):(y=null,m&&g('"a"')),y=y!==null?y:null),y!==null)if(b.substr(a,1)==="S"?(D="S",a+=1):(D=null,m&&g('"S"')),D===null&&(b.substr(a,1)==="s"?(D="s",a+=1):(D=null,m&&g('"s"')),D=D!==
null?D:null),D!==null){G=[];for(E=s();E!==null;)G.push(E),E=s();if(G!==null)if(E=V(),E!==null){R=[];for(F=s();F!==null;)R.push(F),F=s();if(R!==null)if(b.substr(a,1)===")"?(F=")",a+=1):(F=null,m&&g('")"')),F!==null){I=[];for(H=s();H!==null;)I.push(H),H=s();I!==null?B=[B,q,r,w,x,y,D,G,E,R,F,I]:(B=null,a=C)}else B=null,a=C;else B=null,a=C}else B=null,a=C;else B=null,a=C}else B=null,a=C;else B=null,a=C;else B=null,a=C}else B=null,a=C;else B=null,a=C}else B=null,a=C;else B=null,a=C;C=B!==null?B:null}}else n=
null;if(n===null){n=a;C=[];for(B=s();B!==null;)C.push(B),B=s();if(C!==null)if(b.substr(a,1)==="*"?(B="*",a+=1):(B=null,m&&g('"*"')),B!==null){q=[];for(r=s();r!==null;)q.push(r),r=s();q!==null?C=[C,B,q]:(C=null,a=n)}else C=null,a=n;else C=null,a=n;n=C!==null?C:null}n!==null?e=[e,u,o,v,A,j,t,k,i,K,n]:(e=null,a=f)}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;else e=null,a=f;f=e!==null?function(a,b){var c=
[];if(b.length===3&&b[1]==="*")return{vars:[{token:"variable",kind:"*"}],modifier:Hb(a)};for(var e=0;e<b.length;e++){var f=b[e];f.length===3?c.push({token:"variable",kind:"var",value:f[1]}):c.push({token:"variable",kind:"aliased",expression:f[3],alias:f[8]})}return{vars:c,modifier:Hb(a)}}(e[8],e[10]):null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[8] SelectClause");z[c]={nextPos:a,result:f};return f}function L(){var c="ConstructQuery@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;for(var h=
a,f=a,e=[],u=s();u!==null;)e.push(u),u=s();if(e!==null)if(b.substr(a,1)==="C"?(u="C",a+=1):(u=null,m&&g('"C"')),u===null&&(b.substr(a,1)==="c"?(u="c",a+=1):(u=null,m&&g('"c"')),u=u!==null?u:null),u!==null){if(b.substr(a,1)==="O"){var o="O";a+=1}else o=null,m&&g('"O"');o===null&&(b.substr(a,1)==="o"?(o="o",a+=1):(o=null,m&&g('"o"')),o=o!==null?o:null);if(o!==null){if(b.substr(a,1)==="N"){var v="N";a+=1}else v=null,m&&g('"N"');v===null&&(b.substr(a,1)==="n"?(v="n",a+=1):(v=null,m&&g('"n"')),v=v!==null?
v:null);if(v!==null){if(b.substr(a,1)==="S"){var A="S";a+=1}else A=null,m&&g('"S"');A===null&&(b.substr(a,1)==="s"?(A="s",a+=1):(A=null,m&&g('"s"')),A=A!==null?A:null);if(A!==null){if(b.substr(a,1)==="T"){var j="T";a+=1}else j=null,m&&g('"T"');j===null&&(b.substr(a,1)==="t"?(j="t",a+=1):(j=null,m&&g('"t"')),j=j!==null?j:null);if(j!==null){if(b.substr(a,1)==="R"){var t="R";a+=1}else t=null,m&&g('"R"');t===null&&(b.substr(a,1)==="r"?(t="r",a+=1):(t=null,m&&g('"r"')),t=t!==null?t:null);if(t!==null){if(b.substr(a,
1)==="U"){var k="U";a+=1}else k=null,m&&g('"U"');k===null&&(b.substr(a,1)==="u"?(k="u",a+=1):(k=null,m&&g('"u"')),k=k!==null?k:null);if(k!==null){if(b.substr(a,1)==="C"){var i="C";a+=1}else i=null,m&&g('"C"');i===null&&(b.substr(a,1)==="c"?(i="c",a+=1):(i=null,m&&g('"c"')),i=i!==null?i:null);if(i!==null){if(b.substr(a,1)==="T"){var K="T";a+=1}else K=null,m&&g('"T"');K===null&&(b.substr(a,1)==="t"?(K="t",a+=1):(K=null,m&&g('"t"')),K=K!==null?K:null);if(K!==null){for(var n=[],q=s();q!==null;)n.push(q),
q=s();if(n!==null)if(q=Ib(),q!==null){for(var r=[],w=s();w!==null;)r.push(w),w=s();if(r!==null){for(var w=[],x=M();x!==null;)w.push(x),x=M();if(w!==null){for(var x=[],y=s();y!==null;)x.push(y),y=s();if(x!==null)if(y=U(),y!==null){for(var D=[],G=s();G!==null;)D.push(G),G=s();D!==null?(G=Z(),G!==null?e=[e,u,o,v,A,j,t,k,i,K,n,q,r,w,x,y,D,G]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=
null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;else e=null,a=f;f=e!==null?function(a,b,c,e){for(var f={named:[],"default":[]},g=0;g<b.length;g++){var m=b[g];m.kind==="default"?f["default"].push(m.graph):f.named.push(m.graph)}f.named.length===0&&f["default"].length===0&&f["default"].push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});b={kind:"construct",token:"executableunit"};b.dataset=
f;b.template=a;b.pattern=c;if(e!=null&&e.limit!=null)b.limit=e.limit;if(e!=null&&e.offset!=null)b.offset=e.offset;if(e!=null&&e.order!=null&&e.order!="")b.order=e.order;return b}(e[11],e[13],e[15],e[17]):null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[9] ConstructQuery");z[c]={nextPos:a,result:f};return f}function O(){var c="DescribeQuery@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a;if(b.substr(a,8)==="DESCRIBE"){var f="DESCRIBE";a+=8}else f=null,m&&g('"DESCRIBE"');if(f!==null){var e=
la();if(e!==null)for(var u=[];e!==null;)u.push(e),e=la();else u=null;u!==null?e=u:(b.substr(a,1)==="*"?(e="*",a+=1):(e=null,m&&g('"*"')),e=e!==null?e:null);if(e!==null){for(var u=[],o=M();o!==null;)u.push(o),o=M();if(u!==null)if(o=U(),o=o!==null?o:"",o!==null){var v=Z();v!==null?f=[f,e,u,o,v]:(f=null,a=h)}else f=null,a=h;else f=null,a=h}else f=null,a=h}else f=null,a=h;(m=d)&&f===null&&g("[10] DescribeQuery");z[c]={nextPos:a,result:f};return f}function S(){var c="AskQuery@"+a,d=z[c];if(d)return a=
d.nextPos,d.result;d=m;m=!1;for(var h=a,f=a,e=[],u=s();u!==null;)e.push(u),u=s();if(e!==null)if(b.substr(a,1)==="A"?(u="A",a+=1):(u=null,m&&g('"A"')),u===null&&(b.substr(a,1)==="a"?(u="a",a+=1):(u=null,m&&g('"a"')),u=u!==null?u:null),u!==null){if(b.substr(a,1)==="S"){var o="S";a+=1}else o=null,m&&g('"S"');o===null&&(b.substr(a,1)==="s"?(o="s",a+=1):(o=null,m&&g('"s"')),o=o!==null?o:null);if(o!==null){if(b.substr(a,1)==="K"){var v="K";a+=1}else v=null,m&&g('"K"');v===null&&(b.substr(a,1)==="k"?(v=
"k",a+=1):(v=null,m&&g('"k"')),v=v!==null?v:null);if(v!==null){for(var A=[],j=s();j!==null;)A.push(j),j=s();if(A!==null){for(var j=[],t=M();t!==null;)j.push(t),t=M();if(j!==null){for(var t=[],k=s();k!==null;)t.push(k),k=s();t!==null?(k=U(),k!==null?e=[e,u,o,v,A,j,t,k]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;else e=null,a=f;f=e!==null?function(a,b){for(var c={named:[],"default":[]},e=0;e<a.length;e++){var f=a[e];f.kind==="default"?
c["default"].push(f.graph):c.named.push(f.graph)}c.named.length===0&&c["default"].length===0&&c["default"].push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});e={kind:"ask",token:"executableunit"};e.dataset=c;e.pattern=b;return e}(e[5],e[7]):null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[11] AskQuery");z[c]={nextPos:a,result:f};return f}function M(){var c="DatasetClause@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a;if(b.substr(a,
1)==="F"){var e="F";a+=1}else e=null,m&&g('"F"');e===null&&(b.substr(a,1)==="f"?(e="f",a+=1):(e=null,m&&g('"f"')),e=e!==null?e:null);if(e!==null){if(b.substr(a,1)==="R"){var u="R";a+=1}else u=null,m&&g('"R"');u===null&&(b.substr(a,1)==="r"?(u="r",a+=1):(u=null,m&&g('"r"')),u=u!==null?u:null);if(u!==null){if(b.substr(a,1)==="O"){var o="O";a+=1}else o=null,m&&g('"O"');o===null&&(b.substr(a,1)==="o"?(o="o",a+=1):(o=null,m&&g('"o"')),o=o!==null?o:null);if(o!==null){if(b.substr(a,1)==="M"){var v="M";a+=
1}else v=null,m&&g('"M"');v===null&&(b.substr(a,1)==="m"?(v="m",a+=1):(v=null,m&&g('"m"')),v=v!==null?v:null);if(v!==null){for(var A=[],j=s();j!==null;)A.push(j),j=s();if(A!==null)if(j=Y(),j===null&&(j=aa(),j=j!==null?j:null),j!==null){for(var t=[],k=s();k!==null;)t.push(k),k=s();t!==null?e=[e,u,o,v,A,j,t]:(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;f=e!==null?e[5]:null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[12] DatasetClause");
z[c]={nextPos:a,result:f};return f}function Y(){var b="DefaultGraphClause@"+a,c=z[b];if(c)return a=c.nextPos,c.result;c=m;m=!1;for(var d=a,f=a,e=[],u=s();u!==null;)e.push(u),u=s();e!==null?(u=W(),u!==null?e=[e,u]:(e=null,a=f)):(e=null,a=f);f=e!==null?{graph:e[1],kind:"default",token:"graphClause"}:null;f===null&&(f=null,a=d);(m=c)&&f===null&&g("[13] DefaultGraphClause");z[b]={nextPos:a,result:f};return f}function aa(){var c="NamedGraphClause@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=
a,f=a;if(b.substr(a,1)==="N"){var e="N";a+=1}else e=null,m&&g('"N"');e===null&&(b.substr(a,1)==="n"?(e="n",a+=1):(e=null,m&&g('"n"')),e=e!==null?e:null);if(e!==null){if(b.substr(a,1)==="A"){var u="A";a+=1}else u=null,m&&g('"A"');u===null&&(b.substr(a,1)==="a"?(u="a",a+=1):(u=null,m&&g('"a"')),u=u!==null?u:null);if(u!==null){if(b.substr(a,1)==="M"){var o="M";a+=1}else o=null,m&&g('"M"');o===null&&(b.substr(a,1)==="m"?(o="m",a+=1):(o=null,m&&g('"m"')),o=o!==null?o:null);if(o!==null){if(b.substr(a,1)===
"E"){var v="E";a+=1}else v=null,m&&g('"E"');v===null&&(b.substr(a,1)==="e"?(v="e",a+=1):(v=null,m&&g('"e"')),v=v!==null?v:null);if(v!==null){if(b.substr(a,1)==="D"){var A="D";a+=1}else A=null,m&&g('"D"');A===null&&(b.substr(a,1)==="d"?(A="d",a+=1):(A=null,m&&g('"d"')),A=A!==null?A:null);if(A!==null){for(var j=[],t=s();t!==null;)j.push(t),t=s();j!==null?(t=W(),t!==null?e=[e,u,o,v,A,j,t]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;f=e!==
null?{graph:e[6],kind:"named",token:"graphCluase"}:null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[14] NamedGraphClause");z[c]={nextPos:a,result:f};return f}function U(){var c="WhereClause@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a,e=a;if(b.substr(a,1)==="W"){var u="W";a+=1}else u=null,m&&g('"W"');u===null&&(b.substr(a,1)==="w"?(u="w",a+=1):(u=null,m&&g('"w"')),u=u!==null?u:null);if(u!==null){if(b.substr(a,1)==="H"){var o="H";a+=1}else o=null,m&&g('"H"');o===null&&(b.substr(a,
1)==="h"?(o="h",a+=1):(o=null,m&&g('"h"')),o=o!==null?o:null);if(o!==null){if(b.substr(a,1)==="E"){var v="E";a+=1}else v=null,m&&g('"E"');v===null&&(b.substr(a,1)==="e"?(v="e",a+=1):(v=null,m&&g('"e"')),v=v!==null?v:null);if(v!==null){if(b.substr(a,1)==="R"){var A="R";a+=1}else A=null,m&&g('"R"');A===null&&(b.substr(a,1)==="r"?(A="r",a+=1):(A=null,m&&g('"r"')),A=A!==null?A:null);if(A!==null){if(b.substr(a,1)==="E"){var j="E";a+=1}else j=null,m&&g('"E"');j===null&&(b.substr(a,1)==="e"?(j="e",a+=1):
(j=null,m&&g('"e"')),j=j!==null?j:null);j!==null?u=[u,o,v,A,j]:(u=null,a=e)}else u=null,a=e}else u=null,a=e}else u=null,a=e}else u=null,a=e;e=u!==null?u:"";if(e!==null){u=[];for(o=s();o!==null;)u.push(o),o=s();if(u!==null)if(o=$(),o!==null){v=[];for(A=s();A!==null;)v.push(A),A=s();v!==null?e=[e,u,o,v]:(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f;f=e!==null?e[2]:null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[16] WhereClause");z[c]={nextPos:a,result:f};return f}function Z(){var b=
"SolutionModifier@"+a,c=z[b];if(c)return a=c.nextPos,c.result;c=m;m=!1;var d=a,f=a,e=ea(),e=e!==null?e:"";if(e!==null){var u=fa(),u=u!==null?u:"";if(u!==null){var o=oa(),o=o!==null?o:"";if(o!==null){var v=za(),v=v!==null?v:"";v!==null?e=[e,u,o,v]:(e=null,a=f)}else e=null,a=f}else e=null,a=f}else e=null,a=f;f=e!==null?function(a,b,c){var e={};if(c!=null){if(c.limit!=null)e.limit=c.limit;if(c.offset!=null)e.offset=c.offset}if(a!=null)e.group=a;e.order=b;return e}(e[0],e[2],e[3]):null;f===null&&(f=null,
a=d);(m=c)&&f===null&&g("[17] SolutionModifier");z[b]={nextPos:a,result:f};return f}function ea(){var c="GroupClause@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a;if(b.substr(a,1)==="G"){var e="G";a+=1}else e=null,m&&g('"G"');e===null&&(b.substr(a,1)==="g"?(e="g",a+=1):(e=null,m&&g('"g"')),e=e!==null?e:null);if(e!==null){if(b.substr(a,1)==="R"){var u="R";a+=1}else u=null,m&&g('"R"');u===null&&(b.substr(a,1)==="r"?(u="r",a+=1):(u=null,m&&g('"r"')),u=u!==null?u:null);if(u!==null){if(b.substr(a,
1)==="O"){var o="O";a+=1}else o=null,m&&g('"O"');o===null&&(b.substr(a,1)==="o"?(o="o",a+=1):(o=null,m&&g('"o"')),o=o!==null?o:null);if(o!==null){if(b.substr(a,1)==="U"){var v="U";a+=1}else v=null,m&&g('"U"');v===null&&(b.substr(a,1)==="u"?(v="u",a+=1):(v=null,m&&g('"u"')),v=v!==null?v:null);if(v!==null){if(b.substr(a,1)==="P"){var A="P";a+=1}else A=null,m&&g('"P"');A===null&&(b.substr(a,1)==="p"?(A="p",a+=1):(A=null,m&&g('"p"')),A=A!==null?A:null);if(A!==null){for(var j=[],t=s();t!==null;)j.push(t),
t=s();if(j!==null)if(b.substr(a,1)==="B"?(t="B",a+=1):(t=null,m&&g('"B"')),t===null&&(b.substr(a,1)==="b"?(t="b",a+=1):(t=null,m&&g('"b"')),t=t!==null?t:null),t!==null){if(b.substr(a,1)==="Y"){var k="Y";a+=1}else k=null,m&&g('"Y"');k===null&&(b.substr(a,1)==="y"?(k="y",a+=1):(k=null,m&&g('"y"')),k=k!==null?k:null);if(k!==null){for(var i=[],n=s();n!==null;)i.push(n),n=s();if(i!==null){n=T();if(n!==null)for(var q=[];n!==null;)q.push(n),n=T();else q=null;q!==null?e=[e,u,o,v,A,j,t,k,i,q]:(e=null,a=f)}else e=
null,a=f}else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;f=e!==null?e[9]:null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[18] GroupClause");z[c]={nextPos:a,result:f};return f}function T(){var c="GroupCondition@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;for(var h=a,f=a,e=[],u=s();u!==null;)e.push(u),u=s();if(e!==null)if(u=La(),u!==null){for(var o=[],v=s();v!==null;)o.push(v),v=s();o!==null?e=[e,u,o]:(e=null,a=
f)}else e=null,a=f;else e=null,a=f;f=e!==null?e[1]:null;f===null&&(f=null,a=h);if(f!==null)h=f;else{f=h=a;e=[];for(u=s();u!==null;)e.push(u),u=s();if(e!==null)if(u=hb(),u!==null){o=[];for(v=s();v!==null;)o.push(v),v=s();o!==null?e=[e,u,o]:(e=null,a=f)}else e=null,a=f;else e=null,a=f;f=e!==null?e[1]:null;f===null&&(f=null,a=h);if(f!==null)h=f;else{f=h=a;e=[];for(u=s();u!==null;)e.push(u),u=s();if(e!==null)if(b.substr(a,1)==="("?(u="(",a+=1):(u=null,m&&g('"("')),u!==null){o=[];for(v=s();v!==null;)o.push(v),
v=s();if(o!==null)if(v=N(),v!==null){for(var A=[],j=s();j!==null;)A.push(j),j=s();if(A!==null){j=a;if(b.substr(a,1)==="A"){var t="A";a+=1}else t=null,m&&g('"A"');t===null&&(b.substr(a,1)==="a"?(t="a",a+=1):(t=null,m&&g('"a"')),t=t!==null?t:null);if(t!==null){if(b.substr(a,1)==="S"){var k="S";a+=1}else k=null,m&&g('"S"');k===null&&(b.substr(a,1)==="s"?(k="s",a+=1):(k=null,m&&g('"s"')),k=k!==null?k:null);if(k!==null){for(var i=[],n=s();n!==null;)i.push(n),n=s();i!==null?(n=V(),n!==null?t=[t,k,i,n]:
(t=null,a=j)):(t=null,a=j)}else t=null,a=j}else t=null,a=j;j=t!==null?t:"";if(j!==null){t=[];for(k=s();k!==null;)t.push(k),k=s();if(t!==null)if(b.substr(a,1)===")"?(k=")",a+=1):(k=null,m&&g('")"')),k!==null){i=[];for(n=s();n!==null;)i.push(n),n=s();i!==null?e=[e,u,o,v,A,j,t,k,i]:(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f;f=e!==null?e[5].length!=0?{token:"aliased_expression",expression:e[3],alias:e[5][3]}:
e[3]:null;f===null&&(f=null,a=h);if(f!==null)h=f;else{f=h=a;e=[];for(u=s();u!==null;)e.push(u),u=s();if(e!==null)if(u=V(),u!==null){o=[];for(v=s();v!==null;)o.push(v),v=s();o!==null?e=[e,u,o]:(e=null,a=f)}else e=null,a=f;else e=null,a=f;f=e!==null?e[1]:null;f===null&&(f=null,a=h);h=f!==null?f:null}}}(m=d)&&h===null&&g("[19] GroupCondition");z[c]={nextPos:a,result:h};return h}function fa(){var c="HavingClause@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a;if(b.substr(a,6)==="HAVING"){var f=
"HAVING";a+=6}else f=null,m&&g('"HAVING"');if(f!==null){var e=Fa();if(e!==null)for(var u=[];e!==null;)u.push(e),e=Fa();else u=null;u!==null?f=[f,u]:(f=null,a=h)}else f=null,a=h;(m=d)&&f===null&&g("[20] HavingClause");z[c]={nextPos:a,result:f};return f}function oa(){var c="OrderClause@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a;if(b.substr(a,1)==="O"){var e="O";a+=1}else e=null,m&&g('"O"');e===null&&(b.substr(a,1)==="o"?(e="o",a+=1):(e=null,m&&g('"o"')),e=e!==null?e:null);if(e!==
null){if(b.substr(a,1)==="R"){var u="R";a+=1}else u=null,m&&g('"R"');u===null&&(b.substr(a,1)==="r"?(u="r",a+=1):(u=null,m&&g('"r"')),u=u!==null?u:null);if(u!==null){if(b.substr(a,1)==="D"){var o="D";a+=1}else o=null,m&&g('"D"');o===null&&(b.substr(a,1)==="d"?(o="d",a+=1):(o=null,m&&g('"d"')),o=o!==null?o:null);if(o!==null){if(b.substr(a,1)==="E"){var v="E";a+=1}else v=null,m&&g('"E"');v===null&&(b.substr(a,1)==="e"?(v="e",a+=1):(v=null,m&&g('"e"')),v=v!==null?v:null);if(v!==null){if(b.substr(a,1)===
"R"){var A="R";a+=1}else A=null,m&&g('"R"');A===null&&(b.substr(a,1)==="r"?(A="r",a+=1):(A=null,m&&g('"r"')),A=A!==null?A:null);if(A!==null){for(var j=[],k=s();k!==null;)j.push(k),k=s();if(j!==null)if(b.substr(a,1)==="B"?(k="B",a+=1):(k=null,m&&g('"B"')),k===null&&(b.substr(a,1)==="b"?(k="b",a+=1):(k=null,m&&g('"b"')),k=k!==null?k:null),k!==null){if(b.substr(a,1)==="Y"){var i="Y";a+=1}else i=null,m&&g('"Y"');i===null&&(b.substr(a,1)==="y"?(i="y",a+=1):(i=null,m&&g('"y"')),i=i!==null?i:null);if(i!==
null){for(var P=[],n=s();n!==null;)P.push(n),n=s();if(P!==null){var q=ka();if(q!==null)for(n=[];q!==null;)n.push(q),q=ka();else n=null;if(n!==null){for(var q=[],r=s();r!==null;)q.push(r),r=s();q!==null?e=[e,u,o,v,A,j,k,i,P,n,q]:(e=null,a=f)}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;f=e!==null?e[9]:null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[22] OrderClause");z[c]={nextPos:a,result:f};
return f}function ka(){var c="OrderCondition@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a;if(b.substr(a,3)==="ASC"){var e="ASC";a+=3}else e=null,m&&g('"ASC"');e===null&&(b.substr(a,4)==="DESC"?(e="DESC",a+=4):(e=null,m&&g('"DESC"')),e=e!==null?e:null);if(e!==null){for(var u=[],o=s();o!==null;)u.push(o),o=s();if(u!==null)if(o=Ma(),o!==null){for(var v=[],A=s();A!==null;)v.push(A),A=s();v!==null?e=[e,u,o,v]:(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f;f=e!==null?{direction:e[0],
expression:e[2]}:null;f===null&&(f=null,a=h);if(f!==null)h=f;else{f=h=a;e=Fa();e===null&&(e=V(),e=e!==null?e:null);if(e!==null){u=[];for(o=s();o!==null;)u.push(o),o=s();u!==null?e=[e,u]:(e=null,a=f)}else e=null,a=f;f=e!==null?function(a){a.token==="var"&&(a={token:"expression",expressionType:"atomic",primaryexpression:"var",value:a});return{direction:"ASC",expression:a}}(e[0]):null;f===null&&(f=null,a=h);h=f!==null?f:null}(m=d)&&h===null&&g("[23] OrderCondition");z[c]={nextPos:a,result:h};return h}
function za(){var b="LimitOffsetClauses@"+a,c=z[b];if(c)return a=c.nextPos,c.result;c=m;m=!1;var d=a,f=a,e=ab();if(e!==null){var u=bb(),u=u!==null?u:"";u!==null?e=[e,u]:(e=null,a=f)}else e=null,a=f;e!==null?f=e:(f=a,e=bb(),e!==null?(u=ab(),u=u!==null?u:"",u!==null?e=[e,u]:(e=null,a=f)):(e=null,a=f),f=e!==null?e:null);f=f!==null?function(a){for(var b={},c=0;c<a.length;c++){var e=a[c];if(e.limit!=null)b.limit=e.limit;else if(e.offset!=null)b.offset=e.offset}return b}(f):null;f===null&&(f=null,a=d);
(m=c)&&f===null&&g("[24] LimitOffsetClauses");z[b]={nextPos:a,result:f};return f}function ab(){var c="LimitClause@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a;if(b.substr(a,1)==="L"){var e="L";a+=1}else e=null,m&&g('"L"');e===null&&(b.substr(a,1)==="l"?(e="l",a+=1):(e=null,m&&g('"l"')),e=e!==null?e:null);if(e!==null){if(b.substr(a,1)==="I"){var u="I";a+=1}else u=null,m&&g('"I"');u===null&&(b.substr(a,1)==="i"?(u="i",a+=1):(u=null,m&&g('"i"')),u=u!==null?u:null);if(u!==null){if(b.substr(a,
1)==="M"){var o="M";a+=1}else o=null,m&&g('"M"');o===null&&(b.substr(a,1)==="m"?(o="m",a+=1):(o=null,m&&g('"m"')),o=o!==null?o:null);if(o!==null){if(b.substr(a,1)==="I"){var v="I";a+=1}else v=null,m&&g('"I"');v===null&&(b.substr(a,1)==="i"?(v="i",a+=1):(v=null,m&&g('"i"')),v=v!==null?v:null);if(v!==null){if(b.substr(a,1)==="T"){var A="T";a+=1}else A=null,m&&g('"T"');A===null&&(b.substr(a,1)==="t"?(A="t",a+=1):(A=null,m&&g('"t"')),A=A!==null?A:null);if(A!==null){for(var j=[],k=s();k!==null;)j.push(k),
k=s();if(j!==null)if(k=ga(),k!==null){for(var i=[],P=s();P!==null;)i.push(P),P=s();i!==null?e=[e,u,o,v,A,j,k,i]:(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;f=e!==null?{limit:parseInt(e[6].value)}:null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[25] LimitClause");z[c]={nextPos:a,result:f};return f}function bb(){var c="OffsetClause@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a;if(b.substr(a,1)==="O"){var e=
"O";a+=1}else e=null,m&&g('"O"');e===null&&(b.substr(a,1)==="o"?(e="o",a+=1):(e=null,m&&g('"o"')),e=e!==null?e:null);if(e!==null){if(b.substr(a,1)==="F"){var u="F";a+=1}else u=null,m&&g('"F"');u===null&&(b.substr(a,1)==="f"?(u="f",a+=1):(u=null,m&&g('"f"')),u=u!==null?u:null);if(u!==null){if(b.substr(a,1)==="F"){var o="F";a+=1}else o=null,m&&g('"F"');o===null&&(b.substr(a,1)==="f"?(o="f",a+=1):(o=null,m&&g('"f"')),o=o!==null?o:null);if(o!==null){if(b.substr(a,1)==="S"){var v="S";a+=1}else v=null,
m&&g('"S"');v===null&&(b.substr(a,1)==="s"?(v="s",a+=1):(v=null,m&&g('"s"')),v=v!==null?v:null);if(v!==null){if(b.substr(a,1)==="E"){var A="E";a+=1}else A=null,m&&g('"E"');A===null&&(b.substr(a,1)==="e"?(A="e",a+=1):(A=null,m&&g('"e"')),A=A!==null?A:null);if(A!==null){if(b.substr(a,1)==="T"){var j="T";a+=1}else j=null,m&&g('"T"');j===null&&(b.substr(a,1)==="t"?(j="t",a+=1):(j=null,m&&g('"t"')),j=j!==null?j:null);if(j!==null){for(var k=[],i=s();i!==null;)k.push(i),i=s();if(k!==null)if(i=ga(),i!==null){for(var P=
[],n=s();n!==null;)P.push(n),n=s();P!==null?e=[e,u,o,v,A,j,k,i,P]:(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;f=e!==null?{offset:parseInt(e[7].value)}:null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[26] OffsetClause");z[c]={nextPos:a,result:f};return f}function Aa(){var c="BindingsClause@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a;if(b.substr(a,8)==="BINDINGS"){var f="BINDINGS";a+=8}else f=
null,m&&g('"BINDINGS"');if(f!==null){for(var e=[],u=V();u!==null;)e.push(u),u=V();if(e!==null)if(b.substr(a,1)==="{"?(u="{",a+=1):(u=null,m&&g('"{"')),u!==null){var o=[],v=a;if(b.substr(a,1)==="("){var A="(";a+=1}else A=null,m&&g('"("');if(A!==null){var j=Ba();if(j!==null)for(var k=[];j!==null;)k.push(j),j=Ba();else k=null;k!==null?(b.substr(a,1)===")"?(j=")",a+=1):(j=null,m&&g('")"')),j!==null?A=[A,k,j]:(A=null,a=v)):(A=null,a=v)}else A=null,a=v;A!==null?v=A:(v=ma(),v=v!==null?v:null);for(;v!==null;){o.push(v);
v=a;b.substr(a,1)==="("?(A="(",a+=1):(A=null,m&&g('"("'));if(A!==null){j=Ba();if(j!==null)for(k=[];j!==null;)k.push(j),j=Ba();else k=null;k!==null?(b.substr(a,1)===")"?(j=")",a+=1):(j=null,m&&g('")"')),j!==null?A=[A,k,j]:(A=null,a=v)):(A=null,a=v)}else A=null,a=v;A!==null?v=A:(v=ma(),v=v!==null?v:null)}o!==null?(b.substr(a,1)==="}"?(v="}",a+=1):(v=null,m&&g('"}"')),v!==null?f=[f,e,u,o,v]:(f=null,a=h)):(f=null,a=h)}else f=null,a=h;else f=null,a=h}else f=null,a=h;h=f!==null?f:"";(m=d)&&h===null&&g("[27] BindingsClause");
z[c]={nextPos:a,result:h};return h}function Ba(){var c="BindingValue@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=W();h===null&&(h=Na(),h===null&&(h=Oa(),h===null&&(h=Pa(),h===null&&(b.substr(a,5)==="UNDEF"?(h="UNDEF",a+=5):(h=null,m&&g('"UNDEF"')),h=h!==null?h:null))));(m=d)&&h===null&&g("[28] BindingValue");z[c]={nextPos:a,result:h};return h}function eb(){var c="Update@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a,e=q();if(e!==null){for(var u=[],o=s();o!==null;)u.push(o),
o=s();if(u!==null)if(o=Ca(),o!==null){for(var v=a,A=[],j=s();j!==null;)A.push(j),j=s();if(A!==null)if(b.substr(a,1)===";"?(j=";",a+=1):(j=null,m&&g('";"')),j!==null){for(var k=[],i=s();i!==null;)k.push(i),i=s();k!==null?(i=eb(),i=i!==null?i:"",i!==null?A=[A,j,k,i]:(A=null,a=v)):(A=null,a=v)}else A=null,a=v;else A=null,a=v;v=A!==null?A:"";v!==null?e=[e,u,o,v]:(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f;f=e!==null?function(a,b,c){var e={token:"query",kind:"update"};e.prologue=a;a=[b];
c.length!=null&&c[3]!=null&&c[3].units!=null&&(a=a.concat(c[3].units));e.units=a;return e}(e[0],e[2],e[3]):null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[30] Update");z[c]={nextPos:a,result:f};return f}function Ca(){var b="Update1@"+a,c=z[b];if(c)return a=c.nextPos,c.result;c=m;m=!1;var d=Da();d===null&&(d=Bb(),d===null&&(d=Cb(),d===null&&(d=Db(),d===null&&(d=Eb(),d===null&&(d=Fb(),d===null&&(d=Gb(),d===null&&(d=Jb(),d=d!==null?d:null)))))));(m=c)&&d===null&&g("[31] Update1");z[b]={nextPos:a,result:d};
return d}function Da(){var c="Load@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a;if(b.substr(a,1)==="L"){var e="L";a+=1}else e=null,m&&g('"L"');e===null&&(b.substr(a,1)==="l"?(e="l",a+=1):(e=null,m&&g('"l"')),e=e!==null?e:null);if(e!==null){if(b.substr(a,1)==="O"){var u="O";a+=1}else u=null,m&&g('"O"');u===null&&(b.substr(a,1)==="o"?(u="o",a+=1):(u=null,m&&g('"o"')),u=u!==null?u:null);if(u!==null){if(b.substr(a,1)==="A"){var o="A";a+=1}else o=null,m&&g('"A"');o===null&&(b.substr(a,
1)==="a"?(o="a",a+=1):(o=null,m&&g('"a"')),o=o!==null?o:null);if(o!==null){if(b.substr(a,1)==="D"){var v="D";a+=1}else v=null,m&&g('"D"');v===null&&(b.substr(a,1)==="d"?(v="d",a+=1):(v=null,m&&g('"d"')),v=v!==null?v:null);if(v!==null){for(var A=[],j=s();j!==null;)A.push(j),j=s();if(A!==null)if(j=W(),j!==null){for(var k=[],i=s();i!==null;)k.push(i),i=s();if(k!==null){i=a;if(b.substr(a,1)==="I"){var P="I";a+=1}else P=null,m&&g('"I"');P===null&&(b.substr(a,1)==="i"?(P="i",a+=1):(P=null,m&&g('"i"')),
P=P!==null?P:null);if(P!==null){if(b.substr(a,1)==="N"){var n="N";a+=1}else n=null,m&&g('"N"');n===null&&(b.substr(a,1)==="n"?(n="n",a+=1):(n=null,m&&g('"n"')),n=n!==null?n:null);if(n!==null){if(b.substr(a,1)==="T"){var q="T";a+=1}else q=null,m&&g('"T"');q===null&&(b.substr(a,1)==="t"?(q="t",a+=1):(q=null,m&&g('"t"')),q=q!==null?q:null);if(q!==null){if(b.substr(a,1)==="O"){var r="O";a+=1}else r=null,m&&g('"O"');r===null&&(b.substr(a,1)==="o"?(r="o",a+=1):(r=null,m&&g('"o"')),r=r!==null?r:null);if(r!==
null){for(var B=[],w=s();w!==null;)B.push(w),w=s();B!==null?(w=Qa(),w!==null?P=[P,n,q,r,B,w]:(P=null,a=i)):(P=null,a=i)}else P=null,a=i}else P=null,a=i}else P=null,a=i}else P=null,a=i;i=P!==null?P:"";i!==null?e=[e,u,o,v,A,j,k,i]:(e=null,a=f)}else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;f=e!==null?function(a,b){var c={kind:"load",token:"executableunit"};c.sourceGraph=a;c.destinyGraph=b[5];return c}(e[5],e[7]):null;f===null&&(f=null,
a=h);(m=d)&&f===null&&g("[32] Load");z[c]={nextPos:a,result:f};return f}function Bb(){var c="Clear@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a;if(b.substr(a,1)==="C"){var e="C";a+=1}else e=null,m&&g('"C"');e===null&&(b.substr(a,1)==="c"?(e="c",a+=1):(e=null,m&&g('"c"')),e=e!==null?e:null);if(e!==null){if(b.substr(a,1)==="L"){var u="L";a+=1}else u=null,m&&g('"L"');u===null&&(b.substr(a,1)==="l"?(u="l",a+=1):(u=null,m&&g('"l"')),u=u!==null?u:null);if(u!==null){if(b.substr(a,1)===
"E"){var o="E";a+=1}else o=null,m&&g('"E"');o===null&&(b.substr(a,1)==="e"?(o="e",a+=1):(o=null,m&&g('"e"')),o=o!==null?o:null);if(o!==null){if(b.substr(a,1)==="A"){var v="A";a+=1}else v=null,m&&g('"A"');v===null&&(b.substr(a,1)==="a"?(v="a",a+=1):(v=null,m&&g('"a"')),v=v!==null?v:null);if(v!==null){if(b.substr(a,1)==="R"){var A="R";a+=1}else A=null,m&&g('"R"');A===null&&(b.substr(a,1)==="r"?(A="r",a+=1):(A=null,m&&g('"r"')),A=A!==null?A:null);if(A!==null){for(var j=[],k=s();k!==null;)j.push(k),k=
s();if(j!==null){k=a;if(b.substr(a,1)==="S"){var i="S";a+=1}else i=null,m&&g('"S"');i===null&&(b.substr(a,1)==="s"?(i="s",a+=1):(i=null,m&&g('"s"')),i=i!==null?i:null);if(i!==null){if(b.substr(a,1)==="I"){var n="I";a+=1}else n=null,m&&g('"I"');n===null&&(b.substr(a,1)==="i"?(n="i",a+=1):(n=null,m&&g('"i"')),n=n!==null?n:null);if(n!==null){if(b.substr(a,1)==="L"){var q="L";a+=1}else q=null,m&&g('"L"');q===null&&(b.substr(a,1)==="l"?(q="l",a+=1):(q=null,m&&g('"l"')),q=q!==null?q:null);if(q!==null){if(b.substr(a,
1)==="E"){var r="E";a+=1}else r=null,m&&g('"E"');r===null&&(b.substr(a,1)==="e"?(r="e",a+=1):(r=null,m&&g('"e"')),r=r!==null?r:null);if(r!==null){if(b.substr(a,1)==="N"){var C="N";a+=1}else C=null,m&&g('"N"');C===null&&(b.substr(a,1)==="n"?(C="n",a+=1):(C=null,m&&g('"n"')),C=C!==null?C:null);if(C!==null){if(b.substr(a,1)==="T"){var B="T";a+=1}else B=null,m&&g('"T"');B===null&&(b.substr(a,1)==="t"?(B="t",a+=1):(B=null,m&&g('"t"')),B=B!==null?B:null);B!==null?i=[i,n,q,r,C,B]:(i=null,a=k)}else i=null,
a=k}else i=null,a=k}else i=null,a=k}else i=null,a=k}else i=null,a=k;k=i!==null?i:"";if(k!==null){i=[];for(n=s();n!==null;)i.push(n),n=s();i!==null?(n=ib(),n!==null?e=[e,u,o,v,A,j,k,i,n]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;f=e!==null?function(a){var b={kind:"clear",token:"executableunit"};b.destinyGraph=a;return b}(e[8]):null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[33] Clear");z[c]={nextPos:a,
result:f};return f}function Cb(){var c="Drop@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a;if(b.substr(a,1)==="D"){var e="D";a+=1}else e=null,m&&g('"D"');e===null&&(b.substr(a,1)==="d"?(e="d",a+=1):(e=null,m&&g('"d"')),e=e!==null?e:null);if(e!==null){if(b.substr(a,1)==="R"){var u="R";a+=1}else u=null,m&&g('"R"');u===null&&(b.substr(a,1)==="r"?(u="r",a+=1):(u=null,m&&g('"r"')),u=u!==null?u:null);if(u!==null){if(b.substr(a,1)==="O"){var o="O";a+=1}else o=null,m&&g('"O"');o===null&&
(b.substr(a,1)==="o"?(o="o",a+=1):(o=null,m&&g('"o"')),o=o!==null?o:null);if(o!==null){if(b.substr(a,1)==="P"){var v="P";a+=1}else v=null,m&&g('"P"');v===null&&(b.substr(a,1)==="p"?(v="p",a+=1):(v=null,m&&g('"p"')),v=v!==null?v:null);if(v!==null){for(var A=[],j=s();j!==null;)A.push(j),j=s();if(A!==null){j=a;if(b.substr(a,1)==="S"){var k="S";a+=1}else k=null,m&&g('"S"');k===null&&(b.substr(a,1)==="s"?(k="s",a+=1):(k=null,m&&g('"s"')),k=k!==null?k:null);if(k!==null){if(b.substr(a,1)==="I"){var i="I";
a+=1}else i=null,m&&g('"I"');i===null&&(b.substr(a,1)==="i"?(i="i",a+=1):(i=null,m&&g('"i"')),i=i!==null?i:null);if(i!==null){if(b.substr(a,1)==="L"){var n="L";a+=1}else n=null,m&&g('"L"');n===null&&(b.substr(a,1)==="l"?(n="l",a+=1):(n=null,m&&g('"l"')),n=n!==null?n:null);if(n!==null){if(b.substr(a,1)==="E"){var q="E";a+=1}else q=null,m&&g('"E"');q===null&&(b.substr(a,1)==="e"?(q="e",a+=1):(q=null,m&&g('"e"')),q=q!==null?q:null);if(q!==null){if(b.substr(a,1)==="N"){var r="N";a+=1}else r=null,m&&g('"N"');
r===null&&(b.substr(a,1)==="n"?(r="n",a+=1):(r=null,m&&g('"n"')),r=r!==null?r:null);if(r!==null){if(b.substr(a,1)==="T"){var C="T";a+=1}else C=null,m&&g('"T"');C===null&&(b.substr(a,1)==="t"?(C="t",a+=1):(C=null,m&&g('"t"')),C=C!==null?C:null);C!==null?k=[k,i,n,q,r,C]:(k=null,a=j)}else k=null,a=j}else k=null,a=j}else k=null,a=j}else k=null,a=j}else k=null,a=j;j=k!==null?k:"";if(j!==null){k=[];for(i=s();i!==null;)k.push(i),i=s();k!==null?(i=ib(),i!==null?e=[e,u,o,v,A,j,k,i]:(e=null,a=f)):(e=null,a=
f)}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;f=e!==null?function(a){var b={kind:"drop",token:"executableunit"};b.destinyGraph=a;return b}(e[7]):null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[34] Drop");z[c]={nextPos:a,result:f};return f}function Db(){var c="Create@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a;if(b.substr(a,1)==="C"){var e="C";a+=1}else e=null,m&&g('"C"');e===null&&(b.substr(a,1)==="c"?(e="c",a+=1):(e=null,
m&&g('"c"')),e=e!==null?e:null);if(e!==null){if(b.substr(a,1)==="R"){var u="R";a+=1}else u=null,m&&g('"R"');u===null&&(b.substr(a,1)==="r"?(u="r",a+=1):(u=null,m&&g('"r"')),u=u!==null?u:null);if(u!==null){if(b.substr(a,1)==="E"){var o="E";a+=1}else o=null,m&&g('"E"');o===null&&(b.substr(a,1)==="e"?(o="e",a+=1):(o=null,m&&g('"e"')),o=o!==null?o:null);if(o!==null){if(b.substr(a,1)==="A"){var v="A";a+=1}else v=null,m&&g('"A"');v===null&&(b.substr(a,1)==="a"?(v="a",a+=1):(v=null,m&&g('"a"')),v=v!==null?
v:null);if(v!==null){if(b.substr(a,1)==="T"){var A="T";a+=1}else A=null,m&&g('"T"');A===null&&(b.substr(a,1)==="t"?(A="t",a+=1):(A=null,m&&g('"t"')),A=A!==null?A:null);if(A!==null){if(b.substr(a,1)==="E"){var j="E";a+=1}else j=null,m&&g('"E"');j===null&&(b.substr(a,1)==="e"?(j="e",a+=1):(j=null,m&&g('"e"')),j=j!==null?j:null);if(j!==null){for(var k=[],i=s();i!==null;)k.push(i),i=s();if(k!==null){i=a;if(b.substr(a,1)==="S"){var n="S";a+=1}else n=null,m&&g('"S"');n===null&&(b.substr(a,1)==="s"?(n="s",
a+=1):(n=null,m&&g('"s"')),n=n!==null?n:null);if(n!==null){if(b.substr(a,1)==="I"){var q="I";a+=1}else q=null,m&&g('"I"');q===null&&(b.substr(a,1)==="i"?(q="i",a+=1):(q=null,m&&g('"i"')),q=q!==null?q:null);if(q!==null){if(b.substr(a,1)==="L"){var r="L";a+=1}else r=null,m&&g('"L"');r===null&&(b.substr(a,1)==="l"?(r="l",a+=1):(r=null,m&&g('"l"')),r=r!==null?r:null);if(r!==null){if(b.substr(a,1)==="E"){var C="E";a+=1}else C=null,m&&g('"E"');C===null&&(b.substr(a,1)==="e"?(C="e",a+=1):(C=null,m&&g('"e"')),
C=C!==null?C:null);if(C!==null){if(b.substr(a,1)==="N"){var w="N";a+=1}else w=null,m&&g('"N"');w===null&&(b.substr(a,1)==="n"?(w="n",a+=1):(w=null,m&&g('"n"')),w=w!==null?w:null);if(w!==null){if(b.substr(a,1)==="T"){var x="T";a+=1}else x=null,m&&g('"T"');x===null&&(b.substr(a,1)==="t"?(x="t",a+=1):(x=null,m&&g('"t"')),x=x!==null?x:null);x!==null?n=[n,q,r,C,w,x]:(n=null,a=i)}else n=null,a=i}else n=null,a=i}else n=null,a=i}else n=null,a=i}else n=null,a=i;i=n!==null?n:"";if(i!==null){n=[];for(q=s();q!==
null;)n.push(q),q=s();n!==null?(q=Qa(),q!==null?e=[e,u,o,v,A,j,k,i,n,q]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;f=e!==null?function(a){var b={kind:"create",token:"executableunit"};b.destinyGraph=a;return b}(e[9]):null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[35] Create");z[c]={nextPos:a,result:f};return f}function Eb(){var c="InsertData@"+a,d=z[c];if(d)return a=d.nextPos,d.result;
d=m;m=!1;var h=a,f=a;if(b.substr(a,1)==="I"){var e="I";a+=1}else e=null,m&&g('"I"');e===null&&(b.substr(a,1)==="i"?(e="i",a+=1):(e=null,m&&g('"i"')),e=e!==null?e:null);if(e!==null){if(b.substr(a,1)==="N"){var u="N";a+=1}else u=null,m&&g('"N"');u===null&&(b.substr(a,1)==="n"?(u="n",a+=1):(u=null,m&&g('"n"')),u=u!==null?u:null);if(u!==null){if(b.substr(a,1)==="S"){var o="S";a+=1}else o=null,m&&g('"S"');o===null&&(b.substr(a,1)==="s"?(o="s",a+=1):(o=null,m&&g('"s"')),o=o!==null?o:null);if(o!==null){if(b.substr(a,
1)==="E"){var v="E";a+=1}else v=null,m&&g('"E"');v===null&&(b.substr(a,1)==="e"?(v="e",a+=1):(v=null,m&&g('"e"')),v=v!==null?v:null);if(v!==null){if(b.substr(a,1)==="R"){var A="R";a+=1}else A=null,m&&g('"R"');A===null&&(b.substr(a,1)==="r"?(A="r",a+=1):(A=null,m&&g('"r"')),A=A!==null?A:null);if(A!==null){if(b.substr(a,1)==="T"){var j="T";a+=1}else j=null,m&&g('"T"');j===null&&(b.substr(a,1)==="t"?(j="t",a+=1):(j=null,m&&g('"t"')),j=j!==null?j:null);if(j!==null){for(var k=[],i=s();i!==null;)k.push(i),
i=s();if(k!==null)if(b.substr(a,1)==="D"?(i="D",a+=1):(i=null,m&&g('"D"')),i===null&&(b.substr(a,1)==="d"?(i="d",a+=1):(i=null,m&&g('"d"')),i=i!==null?i:null),i!==null){if(b.substr(a,1)==="A"){var n="A";a+=1}else n=null,m&&g('"A"');n===null&&(b.substr(a,1)==="a"?(n="a",a+=1):(n=null,m&&g('"a"')),n=n!==null?n:null);if(n!==null){if(b.substr(a,1)==="T"){var q="T";a+=1}else q=null,m&&g('"T"');q===null&&(b.substr(a,1)==="t"?(q="t",a+=1):(q=null,m&&g('"t"')),q=q!==null?q:null);if(q!==null){if(b.substr(a,
1)==="A"){var r="A";a+=1}else r=null,m&&g('"A"');r===null&&(b.substr(a,1)==="a"?(r="a",a+=1):(r=null,m&&g('"a"')),r=r!==null?r:null);if(r!==null){for(var w=[],B=s();B!==null;)w.push(B),B=s();w!==null?(B=jb(),B!==null?e=[e,u,o,v,A,j,k,i,n,q,r,w,B]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;f=e!==null?function(a){var b={kind:"insertdata",token:"executableunit"};
b.quads=a;return b}(e[12]):null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[36] InsertData");z[c]={nextPos:a,result:f};return f}function Fb(){var c="DeleteData@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a;if(b.substr(a,1)==="D"){var e="D";a+=1}else e=null,m&&g('"D"');e===null&&(b.substr(a,1)==="d"?(e="d",a+=1):(e=null,m&&g('"d"')),e=e!==null?e:null);if(e!==null){if(b.substr(a,1)==="E"){var u="E";a+=1}else u=null,m&&g('"E"');u===null&&(b.substr(a,1)==="e"?(u="e",a+=1):(u=null,m&&
g('"e"')),u=u!==null?u:null);if(u!==null){if(b.substr(a,1)==="L"){var o="L";a+=1}else o=null,m&&g('"L"');o===null&&(b.substr(a,1)==="l"?(o="l",a+=1):(o=null,m&&g('"l"')),o=o!==null?o:null);if(o!==null){if(b.substr(a,1)==="E"){var v="E";a+=1}else v=null,m&&g('"E"');v===null&&(b.substr(a,1)==="e"?(v="e",a+=1):(v=null,m&&g('"e"')),v=v!==null?v:null);if(v!==null){if(b.substr(a,1)==="T"){var A="T";a+=1}else A=null,m&&g('"T"');A===null&&(b.substr(a,1)==="t"?(A="t",a+=1):(A=null,m&&g('"t"')),A=A!==null?
A:null);if(A!==null){if(b.substr(a,1)==="E"){var j="E";a+=1}else j=null,m&&g('"E"');j===null&&(b.substr(a,1)==="e"?(j="e",a+=1):(j=null,m&&g('"e"')),j=j!==null?j:null);if(j!==null){for(var k=[],i=s();i!==null;)k.push(i),i=s();if(k!==null)if(b.substr(a,1)==="D"?(i="D",a+=1):(i=null,m&&g('"D"')),i===null&&(b.substr(a,1)==="d"?(i="d",a+=1):(i=null,m&&g('"d"')),i=i!==null?i:null),i!==null){if(b.substr(a,1)==="A"){var n="A";a+=1}else n=null,m&&g('"A"');n===null&&(b.substr(a,1)==="a"?(n="a",a+=1):(n=null,
m&&g('"a"')),n=n!==null?n:null);if(n!==null){if(b.substr(a,1)==="T"){var q="T";a+=1}else q=null,m&&g('"T"');q===null&&(b.substr(a,1)==="t"?(q="t",a+=1):(q=null,m&&g('"t"')),q=q!==null?q:null);if(q!==null){if(b.substr(a,1)==="A"){var r="A";a+=1}else r=null,m&&g('"A"');r===null&&(b.substr(a,1)==="a"?(r="a",a+=1):(r=null,m&&g('"a"')),r=r!==null?r:null);if(r!==null){var w=jb();w!==null?e=[e,u,o,v,A,j,k,i,n,q,r,w]:(e=null,a=f)}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;else e=null,
a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;f=e!==null?function(a){var b={kind:"deletedata",token:"executableunit"};b.quads=a;return b}(e[11]):null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[37] DeleteData");z[c]={nextPos:a,result:f};return f}function Gb(){var c="DeleteWhere@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a;if(b.substr(a,1)==="D"){var e="D";a+=1}else e=null,m&&g('"D"');e===null&&(b.substr(a,1)==="d"?(e="d",a+=
1):(e=null,m&&g('"d"')),e=e!==null?e:null);if(e!==null){if(b.substr(a,1)==="E"){var u="E";a+=1}else u=null,m&&g('"E"');u===null&&(b.substr(a,1)==="e"?(u="e",a+=1):(u=null,m&&g('"e"')),u=u!==null?u:null);if(u!==null){if(b.substr(a,1)==="L"){var o="L";a+=1}else o=null,m&&g('"L"');o===null&&(b.substr(a,1)==="l"?(o="l",a+=1):(o=null,m&&g('"l"')),o=o!==null?o:null);if(o!==null){if(b.substr(a,1)==="E"){var v="E";a+=1}else v=null,m&&g('"E"');v===null&&(b.substr(a,1)==="e"?(v="e",a+=1):(v=null,m&&g('"e"')),
v=v!==null?v:null);if(v!==null){if(b.substr(a,1)==="T"){var A="T";a+=1}else A=null,m&&g('"T"');A===null&&(b.substr(a,1)==="t"?(A="t",a+=1):(A=null,m&&g('"t"')),A=A!==null?A:null);if(A!==null){if(b.substr(a,1)==="E"){var j="E";a+=1}else j=null,m&&g('"E"');j===null&&(b.substr(a,1)==="e"?(j="e",a+=1):(j=null,m&&g('"e"')),j=j!==null?j:null);if(j!==null){for(var k=[],i=s();i!==null;)k.push(i),i=s();if(k!==null)if(b.substr(a,1)==="W"?(i="W",a+=1):(i=null,m&&g('"W"')),i===null&&(b.substr(a,1)==="w"?(i="w",
a+=1):(i=null,m&&g('"w"')),i=i!==null?i:null),i!==null){if(b.substr(a,1)==="H"){var n="H";a+=1}else n=null,m&&g('"H"');n===null&&(b.substr(a,1)==="h"?(n="h",a+=1):(n=null,m&&g('"h"')),n=n!==null?n:null);if(n!==null){if(b.substr(a,1)==="E"){var q="E";a+=1}else q=null,m&&g('"E"');q===null&&(b.substr(a,1)==="e"?(q="e",a+=1):(q=null,m&&g('"e"')),q=q!==null?q:null);if(q!==null){if(b.substr(a,1)==="R"){var r="R";a+=1}else r=null,m&&g('"R"');r===null&&(b.substr(a,1)==="r"?(r="r",a+=1):(r=null,m&&g('"r"')),
r=r!==null?r:null);if(r!==null){if(b.substr(a,1)==="E"){var w="E";a+=1}else w=null,m&&g('"E"');w===null&&(b.substr(a,1)==="e"?(w="e",a+=1):(w=null,m&&g('"e"')),w=w!==null?w:null);if(w!==null){for(var B=[],x=s();x!==null;)B.push(x),x=s();B!==null?(x=$(),x!==null?e=[e,u,o,v,A,j,k,i,n,q,r,w,B,x]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=
null,a=f;f=e!==null?function(a){var b={kind:"modify"};b.pattern=a;b["with"]=null;b.using=null;for(var c=[],a=a.patterns[0],a=a.triplesContext==null&&a.patterns!=null?a.patterns[0].triplesContext:a.triplesContext,e=0;e<a.length;e++){var f={},g=a[e];f.subject=g.subject;f.predicate=g.predicate;f.object=g.object;f.graph=g.graph;c.push(f)}b["delete"]=c;return b}(e[13]):null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[38] DeleteWhere");z[c]={nextPos:a,result:f};return f}function Jb(){var c="Modify@"+a,
d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a,e=a;if(b.substr(a,1)==="W"){var u="W";a+=1}else u=null,m&&g('"W"');u===null&&(b.substr(a,1)==="w"?(u="w",a+=1):(u=null,m&&g('"w"')),u=u!==null?u:null);if(u!==null){if(b.substr(a,1)==="I"){var o="I";a+=1}else o=null,m&&g('"I"');o===null&&(b.substr(a,1)==="i"?(o="i",a+=1):(o=null,m&&g('"i"')),o=o!==null?o:null);if(o!==null){if(b.substr(a,1)==="T"){var v="T";a+=1}else v=null,m&&g('"T"');v===null&&(b.substr(a,1)==="t"?(v="t",a+=1):(v=null,m&&
g('"t"')),v=v!==null?v:null);if(v!==null){if(b.substr(a,1)==="H"){var A="H";a+=1}else A=null,m&&g('"H"');A===null&&(b.substr(a,1)==="h"?(A="h",a+=1):(A=null,m&&g('"h"')),A=A!==null?A:null);if(A!==null){for(var j=[],k=s();k!==null;)j.push(k),k=s();j!==null?(k=W(),k!==null?u=[u,o,v,A,j,k]:(u=null,a=e)):(u=null,a=e)}else u=null,a=e}else u=null,a=e}else u=null,a=e}else u=null,a=e;e=u!==null?u:"";if(e!==null){u=[];for(o=s();o!==null;)u.push(o),o=s();if(u!==null){o=a;v=Kb();if(v!==null){A=[];for(j=s();j!==
null;)A.push(j),j=s();A!==null?(j=kb(),j=j!==null?j:"",j!==null?v=[v,A,j]:(v=null,a=o)):(v=null,a=o)}else v=null,a=o;v!==null?o=v:(o=kb(),o=o!==null?o:null);if(o!==null){v=[];for(A=s();A!==null;)v.push(A),A=s();if(v!==null){A=[];for(j=lb();j!==null;)A.push(j),j=lb();if(A!==null){j=[];for(k=s();k!==null;)j.push(k),k=s();if(j!==null)if(b.substr(a,1)==="W"?(k="W",a+=1):(k=null,m&&g('"W"')),k===null&&(b.substr(a,1)==="w"?(k="w",a+=1):(k=null,m&&g('"w"')),k=k!==null?k:null),k!==null){if(b.substr(a,1)===
"H"){var i="H";a+=1}else i=null,m&&g('"H"');i===null&&(b.substr(a,1)==="h"?(i="h",a+=1):(i=null,m&&g('"h"')),i=i!==null?i:null);if(i!==null){if(b.substr(a,1)==="E"){var n="E";a+=1}else n=null,m&&g('"E"');n===null&&(b.substr(a,1)==="e"?(n="e",a+=1):(n=null,m&&g('"e"')),n=n!==null?n:null);if(n!==null){if(b.substr(a,1)==="R"){var q="R";a+=1}else q=null,m&&g('"R"');q===null&&(b.substr(a,1)==="r"?(q="r",a+=1):(q=null,m&&g('"r"')),q=q!==null?q:null);if(q!==null){if(b.substr(a,1)==="E"){var r="E";a+=1}else r=
null,m&&g('"E"');r===null&&(b.substr(a,1)==="e"?(r="e",a+=1):(r=null,m&&g('"e"')),r=r!==null?r:null);if(r!==null){for(var w=[],B=s();B!==null;)w.push(B),B=s();if(w!==null)if(B=$(),B!==null){for(var x=[],y=s();y!==null;)x.push(y),y=s();x!==null?e=[e,u,o,v,A,j,k,i,n,q,r,w,B,x]:(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;f=e!==
null?function(a,b,c,e){var f={kind:"modify"};f["with"]=a!=""?a[5]:null;b.length===3&&b[2]===""?(f["delete"]=b[0],f.insert=null):b.length===3&&b[0].length!=null&&b[1].length!=null&&b[2].length!=null?(f["delete"]=b[0],f.insert=b[2]):(f.insert=b,f["delete"]=null);c!=""&&(f.using=c);f.pattern=e;return f}(e[0],e[2],e[4],e[12]):null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[39] Modify");z[c]={nextPos:a,result:f};return f}function Kb(){var c="DeleteClause@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=
m;m=!1;var h=a,f=a;if(b.substr(a,1)==="D"){var e="D";a+=1}else e=null,m&&g('"D"');e===null&&(b.substr(a,1)==="d"?(e="d",a+=1):(e=null,m&&g('"d"')),e=e!==null?e:null);if(e!==null){if(b.substr(a,1)==="E"){var u="E";a+=1}else u=null,m&&g('"E"');u===null&&(b.substr(a,1)==="e"?(u="e",a+=1):(u=null,m&&g('"e"')),u=u!==null?u:null);if(u!==null){if(b.substr(a,1)==="L"){var o="L";a+=1}else o=null,m&&g('"L"');o===null&&(b.substr(a,1)==="l"?(o="l",a+=1):(o=null,m&&g('"l"')),o=o!==null?o:null);if(o!==null){if(b.substr(a,
1)==="E"){var v="E";a+=1}else v=null,m&&g('"E"');v===null&&(b.substr(a,1)==="e"?(v="e",a+=1):(v=null,m&&g('"e"')),v=v!==null?v:null);if(v!==null){if(b.substr(a,1)==="T"){var A="T";a+=1}else A=null,m&&g('"T"');A===null&&(b.substr(a,1)==="t"?(A="t",a+=1):(A=null,m&&g('"t"')),A=A!==null?A:null);if(A!==null){if(b.substr(a,1)==="E"){var j="E";a+=1}else j=null,m&&g('"E"');j===null&&(b.substr(a,1)==="e"?(j="e",a+=1):(j=null,m&&g('"e"')),j=j!==null?j:null);if(j!==null){var k=mb();k!==null?e=[e,u,o,v,A,j,
k]:(e=null,a=f)}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;f=e!==null?e[6]:null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[40] DeleteClause");z[c]={nextPos:a,result:f};return f}function kb(){var c="InsertClause@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a;if(b.substr(a,1)==="I"){var e="I";a+=1}else e=null,m&&g('"I"');e===null&&(b.substr(a,1)==="i"?(e="i",a+=1):(e=null,m&&g('"i"')),e=e!==null?e:null);if(e!==null){if(b.substr(a,
1)==="N"){var u="N";a+=1}else u=null,m&&g('"N"');u===null&&(b.substr(a,1)==="n"?(u="n",a+=1):(u=null,m&&g('"n"')),u=u!==null?u:null);if(u!==null){if(b.substr(a,1)==="S"){var o="S";a+=1}else o=null,m&&g('"S"');o===null&&(b.substr(a,1)==="s"?(o="s",a+=1):(o=null,m&&g('"s"')),o=o!==null?o:null);if(o!==null){if(b.substr(a,1)==="E"){var v="E";a+=1}else v=null,m&&g('"E"');v===null&&(b.substr(a,1)==="e"?(v="e",a+=1):(v=null,m&&g('"e"')),v=v!==null?v:null);if(v!==null){if(b.substr(a,1)==="R"){var A="R";a+=
1}else A=null,m&&g('"R"');A===null&&(b.substr(a,1)==="r"?(A="r",a+=1):(A=null,m&&g('"r"')),A=A!==null?A:null);if(A!==null){if(b.substr(a,1)==="T"){var j="T";a+=1}else j=null,m&&g('"T"');j===null&&(b.substr(a,1)==="t"?(j="t",a+=1):(j=null,m&&g('"t"')),j=j!==null?j:null);if(j!==null){var k=mb();k!==null?e=[e,u,o,v,A,j,k]:(e=null,a=f)}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;f=e!==null?e[6]:null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[41] InsertClause");
z[c]={nextPos:a,result:f};return f}function lb(){var c="UsingClause@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;for(var h=a,f=a,e=[],u=s();u!==null;)e.push(u),u=s();if(e!==null)if(b.substr(a,1)==="U"?(u="U",a+=1):(u=null,m&&g('"U"')),u===null&&(b.substr(a,1)==="u"?(u="u",a+=1):(u=null,m&&g('"u"')),u=u!==null?u:null),u!==null){if(b.substr(a,1)==="S"){var o="S";a+=1}else o=null,m&&g('"S"');o===null&&(b.substr(a,1)==="s"?(o="s",a+=1):(o=null,m&&g('"s"')),o=o!==null?o:null);if(o!==null){if(b.substr(a,
1)==="I"){var v="I";a+=1}else v=null,m&&g('"I"');v===null&&(b.substr(a,1)==="i"?(v="i",a+=1):(v=null,m&&g('"i"')),v=v!==null?v:null);if(v!==null){if(b.substr(a,1)==="N"){var A="N";a+=1}else A=null,m&&g('"N"');A===null&&(b.substr(a,1)==="n"?(A="n",a+=1):(A=null,m&&g('"n"')),A=A!==null?A:null);if(A!==null){if(b.substr(a,1)==="G"){var j="G";a+=1}else j=null,m&&g('"G"');j===null&&(b.substr(a,1)==="g"?(j="g",a+=1):(j=null,m&&g('"g"')),j=j!==null?j:null);if(j!==null){for(var k=[],i=s();i!==null;)k.push(i),
i=s();if(k!==null){i=W();if(i===null){i=a;if(b.substr(a,1)==="N"){var n="N";a+=1}else n=null,m&&g('"N"');n===null&&(b.substr(a,1)==="n"?(n="n",a+=1):(n=null,m&&g('"n"')),n=n!==null?n:null);if(n!==null){if(b.substr(a,1)==="A"){var q="A";a+=1}else q=null,m&&g('"A"');q===null&&(b.substr(a,1)==="a"?(q="a",a+=1):(q=null,m&&g('"a"')),q=q!==null?q:null);if(q!==null){if(b.substr(a,1)==="M"){var r="M";a+=1}else r=null,m&&g('"M"');r===null&&(b.substr(a,1)==="m"?(r="m",a+=1):(r=null,m&&g('"m"')),r=r!==null?
r:null);if(r!==null){if(b.substr(a,1)==="E"){var w="E";a+=1}else w=null,m&&g('"E"');w===null&&(b.substr(a,1)==="e"?(w="e",a+=1):(w=null,m&&g('"e"')),w=w!==null?w:null);if(w!==null){if(b.substr(a,1)==="D"){var B="D";a+=1}else B=null,m&&g('"D"');B===null&&(b.substr(a,1)==="d"?(B="d",a+=1):(B=null,m&&g('"d"')),B=B!==null?B:null);if(B!==null){for(var x=[],y=s();y!==null;)x.push(y),y=s();x!==null?(y=W(),y!==null?n=[n,q,r,w,B,x,y]:(n=null,a=i)):(n=null,a=i)}else n=null,a=i}else n=null,a=i}else n=null,a=
i}else n=null,a=i}else n=null,a=i;i=n!==null?n:null}i!==null?e=[e,u,o,v,A,j,k,i]:(e=null,a=f)}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;else e=null,a=f;f=e!==null?e[7].length!=null?{kind:"named",uri:e[7][6]}:{kind:"default",uri:e[7]}:null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[42] UsingClause");z[c]={nextPos:a,result:f};return f}function Qa(){var c="GraphRef@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a;if(b.substr(a,1)===
"G"){var e="G";a+=1}else e=null,m&&g('"G"');e===null&&(b.substr(a,1)==="g"?(e="g",a+=1):(e=null,m&&g('"g"')),e=e!==null?e:null);if(e!==null){if(b.substr(a,1)==="R"){var u="R";a+=1}else u=null,m&&g('"R"');u===null&&(b.substr(a,1)==="r"?(u="r",a+=1):(u=null,m&&g('"r"')),u=u!==null?u:null);if(u!==null){if(b.substr(a,1)==="A"){var o="A";a+=1}else o=null,m&&g('"A"');o===null&&(b.substr(a,1)==="a"?(o="a",a+=1):(o=null,m&&g('"a"')),o=o!==null?o:null);if(o!==null){if(b.substr(a,1)==="P"){var v="P";a+=1}else v=
null,m&&g('"P"');v===null&&(b.substr(a,1)==="p"?(v="p",a+=1):(v=null,m&&g('"p"')),v=v!==null?v:null);if(v!==null){if(b.substr(a,1)==="H"){var j="H";a+=1}else j=null,m&&g('"H"');j===null&&(b.substr(a,1)==="h"?(j="h",a+=1):(j=null,m&&g('"h"')),j=j!==null?j:null);if(j!==null){for(var k=[],i=s();i!==null;)k.push(i),i=s();k!==null?(i=W(),i!==null?e=[e,u,o,v,j,k,i]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;f=e!==null?e[6]:null;f===null&&(f=
null,a=h);(m=d)&&f===null&&g("[43] GraphRef");z[c]={nextPos:a,result:f};return f}function ib(){var c="GraphRefAll@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=Qa(),f=f!==null?f:null;f===null&&(f=null,a=h);if(f!==null)h=f;else{f=h=a;if(b.substr(a,1)==="D"){var e="D";a+=1}else e=null,m&&g('"D"');e===null&&(b.substr(a,1)==="d"?(e="d",a+=1):(e=null,m&&g('"d"')),e=e!==null?e:null);if(e!==null){if(b.substr(a,1)==="E"){var u="E";a+=1}else u=null,m&&g('"E"');u===null&&(b.substr(a,1)==="e"?
(u="e",a+=1):(u=null,m&&g('"e"')),u=u!==null?u:null);if(u!==null){if(b.substr(a,1)==="F"){var o="F";a+=1}else o=null,m&&g('"F"');o===null&&(b.substr(a,1)==="f"?(o="f",a+=1):(o=null,m&&g('"f"')),o=o!==null?o:null);if(o!==null){if(b.substr(a,1)==="A"){var v="A";a+=1}else v=null,m&&g('"A"');v===null&&(b.substr(a,1)==="a"?(v="a",a+=1):(v=null,m&&g('"a"')),v=v!==null?v:null);if(v!==null){if(b.substr(a,1)==="U"){var j="U";a+=1}else j=null,m&&g('"U"');j===null&&(b.substr(a,1)==="u"?(j="u",a+=1):(j=null,
m&&g('"u"')),j=j!==null?j:null);if(j!==null){if(b.substr(a,1)==="L"){var k="L";a+=1}else k=null,m&&g('"L"');k===null&&(b.substr(a,1)==="l"?(k="l",a+=1):(k=null,m&&g('"l"')),k=k!==null?k:null);if(k!==null){if(b.substr(a,1)==="T"){var i="T";a+=1}else i=null,m&&g('"T"');i===null&&(b.substr(a,1)==="t"?(i="t",a+=1):(i=null,m&&g('"t"')),i=i!==null?i:null);i!==null?e=[e,u,o,v,j,k,i]:(e=null,a=f)}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;f=e!==null?"default":
null;f===null&&(f=null,a=h);f!==null?h=f:(f=h=a,b.substr(a,1)==="N"?(e="N",a+=1):(e=null,m&&g('"N"')),e===null&&(b.substr(a,1)==="n"?(e="n",a+=1):(e=null,m&&g('"n"')),e=e!==null?e:null),e!==null?(b.substr(a,1)==="A"?(u="A",a+=1):(u=null,m&&g('"A"')),u===null&&(b.substr(a,1)==="a"?(u="a",a+=1):(u=null,m&&g('"a"')),u=u!==null?u:null),u!==null?(b.substr(a,1)==="M"?(o="M",a+=1):(o=null,m&&g('"M"')),o===null&&(b.substr(a,1)==="m"?(o="m",a+=1):(o=null,m&&g('"m"')),o=o!==null?o:null),o!==null?(b.substr(a,
1)==="E"?(v="E",a+=1):(v=null,m&&g('"E"')),v===null&&(b.substr(a,1)==="e"?(v="e",a+=1):(v=null,m&&g('"e"')),v=v!==null?v:null),v!==null?(b.substr(a,1)==="D"?(j="D",a+=1):(j=null,m&&g('"D"')),j===null&&(b.substr(a,1)==="d"?(j="d",a+=1):(j=null,m&&g('"d"')),j=j!==null?j:null),j!==null?e=[e,u,o,v,j]:(e=null,a=f)):(e=null,a=f)):(e=null,a=f)):(e=null,a=f)):(e=null,a=f),f=e!==null?"named":null,f===null&&(f=null,a=h),f!==null?h=f:(f=h=a,b.substr(a,1)==="A"?(e="A",a+=1):(e=null,m&&g('"A"')),e===null&&(b.substr(a,
1)==="a"?(e="a",a+=1):(e=null,m&&g('"a"')),e=e!==null?e:null),e!==null?(b.substr(a,1)==="L"?(u="L",a+=1):(u=null,m&&g('"L"')),u===null&&(b.substr(a,1)==="l"?(u="l",a+=1):(u=null,m&&g('"l"')),u=u!==null?u:null),u!==null?(b.substr(a,1)==="L"?(o="L",a+=1):(o=null,m&&g('"L"')),o===null&&(b.substr(a,1)==="l"?(o="l",a+=1):(o=null,m&&g('"l"')),o=o!==null?o:null),o!==null?e=[e,u,o]:(e=null,a=f)):(e=null,a=f)):(e=null,a=f),f=e!==null?"all":null,f===null&&(f=null,a=h),h=f!==null?f:null))}(m=d)&&h===null&&g("[44] GraphRefAll");
z[c]={nextPos:a,result:h};return h}function mb(){var c="QuadPattern@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;for(var h=a,f=a,e=[],u=s();u!==null;)e.push(u),u=s();if(e!==null)if(b.substr(a,1)==="{"?(u="{",a+=1):(u=null,m&&g('"{"')),u!==null){for(var o=[],v=s();v!==null;)o.push(v),v=s();if(o!==null)if(v=nb(),v!==null){for(var j=[],k=s();k!==null;)j.push(k),k=s();if(j!==null)if(b.substr(a,1)==="}"?(k="}",a+=1):(k=null,m&&g('"}"')),k!==null){for(var i=[],n=s();n!==null;)i.push(n),n=s();i!==
null?e=[e,u,o,v,j,k,i]:(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f;f=e!==null?e[3].quadsContext:null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[45] QuadPattern");z[c]={nextPos:a,result:f};return f}function jb(){var c="QuadData@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;for(var h=a,f=a,e=[],u=s();u!==null;)e.push(u),u=s();if(e!==null)if(b.substr(a,1)==="{"?(u="{",a+=1):(u=null,m&&g('"{"')),u!==null){for(var o=[],v=s();v!==
null;)o.push(v),v=s();if(o!==null)if(v=nb(),v!==null){for(var j=[],k=s();k!==null;)j.push(k),k=s();if(j!==null)if(b.substr(a,1)==="}"?(k="}",a+=1):(k=null,m&&g('"}"')),k!==null){for(var i=[],n=s();n!==null;)i.push(n),n=s();i!==null?e=[e,u,o,v,j,k,i]:(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f;f=e!==null?e[3].quadsContext:null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[46] QuadData");z[c]={nextPos:a,result:f};return f}function nb(){var c=
"Quads@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a,e=ua(),e=e!==null?e:"";if(e!==null){var u=[],o=a,v=ob();if(v!==null){if(b.substr(a,1)==="."){var j=".";a+=1}else j=null,m&&g('"."');j=j!==null?j:"";if(j!==null){var k=ua(),k=k!==null?k:"";k!==null?v=[v,j,k]:(v=null,a=o)}else v=null,a=o}else v=null,a=o;for(;v!==null;)u.push(v),o=a,v=ob(),v!==null?(b.substr(a,1)==="."?(j=".",a+=1):(j=null,m&&g('"."')),j=j!==null?j:"",j!==null?(k=ua(),k=k!==null?k:"",k!==null?v=[v,j,k]:(v=null,a=
o)):(v=null,a=o)):(v=null,a=o);u!==null?e=[e,u]:(e=null,a=f)}else e=null,a=f;f=e!==null?function(a,b){var c=[];if(a.triplesContext!=null&&a.triplesContext!=null)for(var e=0;e<a.triplesContext.length;e++){var f=a.triplesContext[e];f.graph=null;c.push(f)}if(b&&b.length>0&&b[0].length>0&&(c=c.concat(b[0][0].quadsContext),b[0][2]!=null&&b[0][2].triplesContext!=null))for(e=0;e<b[0][2].triplesContext.length;e++)f=b[0][2].triplesContext[e],f.graph=null,c.push(f);return{token:"quads",quadsContext:c}}(e[0],
e[1]):null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[47] Quads");z[c]={nextPos:a,result:f};return f}function ob(){var c="QuadsNotTriples@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;for(var h=a,f=a,e=[],u=s();u!==null;)e.push(u),u=s();if(e!==null)if(b.substr(a,1)==="G"?(u="G",a+=1):(u=null,m&&g('"G"')),u===null&&(b.substr(a,1)==="g"?(u="g",a+=1):(u=null,m&&g('"g"')),u=u!==null?u:null),u!==null){if(b.substr(a,1)==="R"){var o="R";a+=1}else o=null,m&&g('"R"');o===null&&(b.substr(a,1)==="r"?
(o="r",a+=1):(o=null,m&&g('"r"')),o=o!==null?o:null);if(o!==null){if(b.substr(a,1)==="A"){var v="A";a+=1}else v=null,m&&g('"A"');v===null&&(b.substr(a,1)==="a"?(v="a",a+=1):(v=null,m&&g('"a"')),v=v!==null?v:null);if(v!==null){if(b.substr(a,1)==="P"){var j="P";a+=1}else j=null,m&&g('"P"');j===null&&(b.substr(a,1)==="p"?(j="p",a+=1):(j=null,m&&g('"p"')),j=j!==null?j:null);if(j!==null){if(b.substr(a,1)==="H"){var k="H";a+=1}else k=null,m&&g('"H"');k===null&&(b.substr(a,1)==="h"?(k="h",a+=1):(k=null,
m&&g('"h"')),k=k!==null?k:null);if(k!==null){for(var i=[],n=s();n!==null;)i.push(n),n=s();if(i!==null)if(n=la(),n!==null){for(var q=[],r=s();r!==null;)q.push(r),r=s();if(q!==null)if(b.substr(a,1)==="{"?(r="{",a+=1):(r=null,m&&g('"{"')),r!==null){for(var w=[],C=s();C!==null;)w.push(C),C=s();if(w!==null)if(C=ua(),C=C!==null?C:"",C!==null){for(var B=[],x=s();x!==null;)B.push(x),x=s();if(B!==null)if(b.substr(a,1)==="}"?(x="}",a+=1):(x=null,m&&g('"}"')),x!==null){for(var y=[],D=s();D!==null;)y.push(D),
D=s();y!==null?e=[e,u,o,v,j,k,i,n,q,r,w,C,B,x,y]:(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;else e=null,a=f;f=e!==null?function(a,b){for(var c=[],e=0;e<b.triplesContext.length;e++){var f=b.triplesContext[e];f.graph=a;c.push(f)}return{token:"quadsnottriples",quadsContext:c}}(e[7],e[11]):null;f===null&&(f=null,a=h);(m=d)&&f===
null&&g("[48] QuadsNotTriples");z[c]={nextPos:a,result:f};return f}function ua(){var c="TriplesTemplate@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a,e=Ra();if(e!==null){for(var u=a,o=[],v=s();v!==null;)o.push(v),v=s();if(o!==null)if(b.substr(a,1)==="."?(v=".",a+=1):(v=null,m&&g('"."')),v!==null){for(var j=[],k=s();k!==null;)j.push(k),k=s();j!==null?(k=ua(),k=k!==null?k:"",k!==null?o=[o,v,j,k]:(o=null,a=u)):(o=null,a=u)}else o=null,a=u;else o=null,a=u;u=o!==null?o:"";u!==null?e=
[e,u]:(e=null,a=f)}else e=null,a=f;f=e!==null?function(a,b){var c=a.triplesContext;typeof b==="object"&&b.length!=null&&b[3].triplesContext!=null&&(c=c.concat(b[3].triplesContext));return{token:"triplestemplate",triplesContext:c}}(e[0],e[1]):null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[49] TriplesTemplate");z[c]={nextPos:a,result:f};return f}function $(){var c="GroupGraphPattern@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a;if(b.substr(a,1)==="{"){var e="{";a+=1}else e=null,
m&&g('"{"');if(e!==null){for(var u=[],o=s();o!==null;)u.push(o),o=s();if(u!==null)if(o=H(),o!==null){for(var v=[],j=s();j!==null;)v.push(j),j=s();v!==null?(b.substr(a,1)==="}"?(j="}",a+=1):(j=null,m&&g('"}"')),j!==null?e=[e,u,o,v,j]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f;f=e!==null?e[2]:null;f===null&&(f=null,a=h);if(f!==null)h=f;else{f=h=a;b.substr(a,1)==="{"?(e="{",a+=1):(e=null,m&&g('"{"'));if(e!==null){u=[];for(o=s();o!==null;)u.push(o),o=s();if(u!==null)if(o=
Lb(),o!==null){v=[];for(j=s();j!==null;)v.push(j),j=s();v!==null?(b.substr(a,1)==="}"?(j="}",a+=1):(j=null,m&&g('"}"')),j!==null?e=[e,u,o,v,j]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f;f=e!==null?e[2]:null;f===null&&(f=null,a=h);h=f!==null?f:null}(m=d)&&h===null&&g("[50] GroupGraphPattern");z[c]={nextPos:a,result:h};return h}function Lb(){var c="GroupGraphPatternSub@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a,e=sa(),e=e!==null?e:"";if(e!==null){for(var u=
[],o=s();o!==null;)u.push(o),o=s();if(u!==null){var o=[],v=a,j=pb();if(j!==null){for(var k=[],i=s();i!==null;)k.push(i),i=s();if(k!==null)if(b.substr(a,1)==="."?(i=".",a+=1):(i=null,m&&g('"."')),i=i!==null?i:"",i!==null){for(var n=[],q=s();q!==null;)n.push(q),q=s();n!==null?(q=sa(),q=q!==null?q:"",q!==null?j=[j,k,i,n,q]:(j=null,a=v)):(j=null,a=v)}else j=null,a=v;else j=null,a=v}else j=null,a=v;for(;j!==null;)if(o.push(j),v=a,j=pb(),j!==null){k=[];for(i=s();i!==null;)k.push(i),i=s();if(k!==null)if(b.substr(a,
1)==="."?(i=".",a+=1):(i=null,m&&g('"."')),i=i!==null?i:"",i!==null){n=[];for(q=s();q!==null;)n.push(q),q=s();n!==null?(q=sa(),q=q!==null?q:"",q!==null?j=[j,k,i,n,q]:(j=null,a=v)):(j=null,a=v)}else j=null,a=v;else j=null,a=v}else j=null,a=v;o!==null?e=[e,u,o]:(e=null,a=f)}else e=null,a=f}else e=null,a=f;f=e!==null?function(a,b){var c=[];a!=null&&a!=[]&&c.push(a);for(var e=0;e<b.length;e++)for(var f=0;f<b[e].length;f++)b[e][f].token!=null&&c.push(b[e][f]);for(var g=[],d=[],m=[],e=0;e<c.length;e++)if(c[e].token!=
"triplespattern"&&c[e].token!="filter"){if(d.length!=0||m.length!=0){for(var o=[],f=0;f<d.length;f++)o=o.concat(d[f].triplesContext);o.length>0&&g.push({token:"basicgraphpattern",triplesContext:o});d=[]}g.push(c[e])}else c[e].token==="triplespattern"?d.push(c[e]):m.push(c[e]);if(d.length!=0||m.length!=0){o=[];for(f=0;f<d.length;f++)o=o.concat(d[f].triplesContext);o.length>0&&g.push({token:"basicgraphpattern",triplesContext:o})}return{token:"groupgraphpattern",patterns:g,filters:m}}(e[0],e[2]):null;
f===null&&(f=null,a=h);(m=d)&&f===null&&g("[51] GroupGraphPatternSub");z[c]={nextPos:a,result:f};return f}function sa(){var c="TriplesBlock@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a,e=Ra();if(e!==null){for(var u=a,o=[],j=s();j!==null;)o.push(j),j=s();if(o!==null)if(b.substr(a,1)==="."?(j=".",a+=1):(j=null,m&&g('"."')),j!==null){var k=sa(),k=k!==null?k:"";k!==null?o=[o,j,k]:(o=null,a=u)}else o=null,a=u;else o=null,a=u;u=o!==null?o:"";u!==null?e=[e,u]:(e=null,a=f)}else e=null,
a=f;f=e!==null?function(a,b){var c=a.triplesContext;typeof b==="object"&&b.length!=null&&b[2].triplesContext!=null&&(c=c.concat(b[2].triplesContext));return{token:"triplespattern",triplesContext:c}}(e[0],e[1]):null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[54] TriplesBlock");z[c]={nextPos:a,result:f};return f}function pb(){var b="GraphPatternNotTriples@"+a,c=z[b];if(c)return a=c.nextPos,c.result;c=m;m=!1;var d=Mb();d===null&&(d=Nb(),d===null&&(d=Ob(),d===null&&(d=Pb(),d===null&&(d=Qb(),d===null&&
(d=Rb(),d=d!==null?d:null)))));(m=c)&&d===null&&g("[53] GraphPatternNotTriples");z[b]={nextPos:a,result:d};return d}function Nb(){var c="OptionalGraphPattern@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;for(var h=a,f=a,e=[],j=s();j!==null;)e.push(j),j=s();if(e!==null)if(b.substr(a,8)==="OPTIONAL"?(j="OPTIONAL",a+=8):(j=null,m&&g('"OPTIONAL"')),j!==null){for(var o=[],v=s();v!==null;)o.push(v),v=s();o!==null?(v=$(),v!==null?e=[e,j,o,v]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f;else e=null,
a=f;f=e!==null?{token:"optionalgraphpattern",value:e[3]}:null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[54] OptionalGraphPattern");z[c]={nextPos:a,result:f};return f}function Pb(){var c="GraphGraphPattern@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;for(var h=a,f=a,e=[],j=s();j!==null;)e.push(j),j=s();if(e!==null)if(b.substr(a,1)==="G"?(j="G",a+=1):(j=null,m&&g('"G"')),j===null&&(b.substr(a,1)==="g"?(j="g",a+=1):(j=null,m&&g('"g"')),j=j!==null?j:null),j!==null){if(b.substr(a,1)==="R"){var o=
"R";a+=1}else o=null,m&&g('"R"');o===null&&(b.substr(a,1)==="r"?(o="r",a+=1):(o=null,m&&g('"r"')),o=o!==null?o:null);if(o!==null){if(b.substr(a,1)==="A"){var v="A";a+=1}else v=null,m&&g('"A"');v===null&&(b.substr(a,1)==="a"?(v="a",a+=1):(v=null,m&&g('"a"')),v=v!==null?v:null);if(v!==null){if(b.substr(a,1)==="P"){var k="P";a+=1}else k=null,m&&g('"P"');k===null&&(b.substr(a,1)==="p"?(k="p",a+=1):(k=null,m&&g('"p"')),k=k!==null?k:null);if(k!==null){if(b.substr(a,1)==="H"){var i="H";a+=1}else i=null,
m&&g('"H"');i===null&&(b.substr(a,1)==="h"?(i="h",a+=1):(i=null,m&&g('"h"')),i=i!==null?i:null);if(i!==null){for(var t=[],n=s();n!==null;)t.push(n),n=s();if(t!==null)if(n=la(),n!==null){for(var q=[],r=s();r!==null;)q.push(r),r=s();q!==null?(r=$(),r!==null?e=[e,j,o,v,k,i,t,n,q,r]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;else e=null,a=f;f=e!==null?function(a,b){for(var c=0;c<b.patterns.length;c++)for(var e=
b.patterns[c],f=0;f<e.triplesContext.length;f++)e.triplesContext[f].graph=a;b.token="groupgraphpattern";return b}(e[7],e[9]):null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[55] GraphGraphPattern");z[c]={nextPos:a,result:f};return f}function Qb(){var c="ServiceGraphPattern@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a;if(b.substr(a,7)==="SERVICE"){var e="SERVICE";a+=7}else e=null,m&&g('"SERVICE"');if(e!==null){var j=la();if(j!==null){var o=$();o!==null?e=[e,j,o]:(e=null,a=f)}else e=
null,a=f}else e=null,a=f;f=e!==null?{token:"servicegraphpattern",status:"todo",value:[e[1],e[2]]}:null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[56] ServiceGraphPattern");z[c]={nextPos:a,result:f};return f}function Ob(){var c="MinusGraphPattern@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a;if(b.substr(a,5)==="MINUS"){var e="MINUS";a+=5}else e=null,m&&g('"MINUS"');if(e!==null){var j=$();j!==null?e=[e,j]:(e=null,a=f)}else e=null,a=f;f=e!==null?{token:"minusgraphpattern",status:"todo",
value:e[1]}:null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[57] MinusGraphPattern");z[c]={nextPos:a,result:f};return f}function Mb(){var c="GroupOrUnionGraphPattern@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a,e=$();if(e!==null){for(var j=[],o=a,v=[],k=s();k!==null;)v.push(k),k=s();if(v!==null)if(b.substr(a,1)==="U"?(k="U",a+=1):(k=null,m&&g('"U"')),k===null&&(b.substr(a,1)==="u"?(k="u",a+=1):(k=null,m&&g('"u"')),k=k!==null?k:null),k!==null){if(b.substr(a,1)==="N"){var i="N";
a+=1}else i=null,m&&g('"N"');i===null&&(b.substr(a,1)==="n"?(i="n",a+=1):(i=null,m&&g('"n"')),i=i!==null?i:null);if(i!==null){if(b.substr(a,1)==="I"){var t="I";a+=1}else t=null,m&&g('"I"');t===null&&(b.substr(a,1)==="i"?(t="i",a+=1):(t=null,m&&g('"i"')),t=t!==null?t:null);if(t!==null){if(b.substr(a,1)==="O"){var n="O";a+=1}else n=null,m&&g('"O"');n===null&&(b.substr(a,1)==="o"?(n="o",a+=1):(n=null,m&&g('"o"')),n=n!==null?n:null);if(n!==null){if(b.substr(a,1)==="N"){var q="N";a+=1}else q=null,m&&g('"N"');
q===null&&(b.substr(a,1)==="n"?(q="n",a+=1):(q=null,m&&g('"n"')),q=q!==null?q:null);if(q!==null){for(var r=[],w=s();w!==null;)r.push(w),w=s();r!==null?(w=$(),w!==null?v=[v,k,i,t,n,q,r,w]:(v=null,a=o)):(v=null,a=o)}else v=null,a=o}else v=null,a=o}else v=null,a=o}else v=null,a=o}else v=null,a=o;else v=null,a=o;for(;v!==null;){j.push(v);o=a;v=[];for(k=s();k!==null;)v.push(k),k=s();if(v!==null)if(b.substr(a,1)==="U"?(k="U",a+=1):(k=null,m&&g('"U"')),k===null&&(b.substr(a,1)==="u"?(k="u",a+=1):(k=null,
m&&g('"u"')),k=k!==null?k:null),k!==null)if(b.substr(a,1)==="N"?(i="N",a+=1):(i=null,m&&g('"N"')),i===null&&(b.substr(a,1)==="n"?(i="n",a+=1):(i=null,m&&g('"n"')),i=i!==null?i:null),i!==null)if(b.substr(a,1)==="I"?(t="I",a+=1):(t=null,m&&g('"I"')),t===null&&(b.substr(a,1)==="i"?(t="i",a+=1):(t=null,m&&g('"i"')),t=t!==null?t:null),t!==null)if(b.substr(a,1)==="O"?(n="O",a+=1):(n=null,m&&g('"O"')),n===null&&(b.substr(a,1)==="o"?(n="o",a+=1):(n=null,m&&g('"o"')),n=n!==null?n:null),n!==null)if(b.substr(a,
1)==="N"?(q="N",a+=1):(q=null,m&&g('"N"')),q===null&&(b.substr(a,1)==="n"?(q="n",a+=1):(q=null,m&&g('"n"')),q=q!==null?q:null),q!==null){r=[];for(w=s();w!==null;)r.push(w),w=s();r!==null?(w=$(),w!==null?v=[v,k,i,t,n,q,r,w]:(v=null,a=o)):(v=null,a=o)}else v=null,a=o;else v=null,a=o;else v=null,a=o;else v=null,a=o;else v=null,a=o;else v=null,a=o}j!==null?e=[e,j]:(e=null,a=f)}else e=null,a=f;f=e!==null?function(a,b){if(b.length===0)return a;else{for(var c={token:"graphunionpattern",value:[a]},e=0;e<
b.length;e++)e==b.length-1?c.value.push(b[e][7]):(c.value.push(b[e][7]),c={token:"graphunionpattern",value:[c]});return c}}(e[0],e[1]):null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[58] GroupOrUnionGraphPattern");z[c]={nextPos:a,result:f};return f}function Rb(){var c="Filter@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;for(var h=a,f=a,e=[],j=s();j!==null;)e.push(j),j=s();if(e!==null)if(b.substr(a,1)==="F"?(j="F",a+=1):(j=null,m&&g('"F"')),j===null&&(b.substr(a,1)==="f"?(j="f",a+=1):(j=null,
m&&g('"f"')),j=j!==null?j:null),j!==null){if(b.substr(a,1)==="I"){var o="I";a+=1}else o=null,m&&g('"I"');o===null&&(b.substr(a,1)==="i"?(o="i",a+=1):(o=null,m&&g('"i"')),o=o!==null?o:null);if(o!==null){if(b.substr(a,1)==="L"){var v="L";a+=1}else v=null,m&&g('"L"');v===null&&(b.substr(a,1)==="l"?(v="l",a+=1):(v=null,m&&g('"l"')),v=v!==null?v:null);if(v!==null){if(b.substr(a,1)==="T"){var k="T";a+=1}else k=null,m&&g('"T"');k===null&&(b.substr(a,1)==="t"?(k="t",a+=1):(k=null,m&&g('"t"')),k=k!==null?
k:null);if(k!==null){if(b.substr(a,1)==="E"){var i="E";a+=1}else i=null,m&&g('"E"');i===null&&(b.substr(a,1)==="e"?(i="e",a+=1):(i=null,m&&g('"e"')),i=i!==null?i:null);if(i!==null){if(b.substr(a,1)==="R"){var n="R";a+=1}else n=null,m&&g('"R"');n===null&&(b.substr(a,1)==="r"?(n="r",a+=1):(n=null,m&&g('"r"')),n=n!==null?n:null);if(n!==null){for(var q=[],r=s();r!==null;)q.push(r),r=s();q!==null?(r=Fa(),r!==null?e=[e,j,o,v,k,i,n,q,r]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f}else e=null,a=f}else e=null,
a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;else e=null,a=f;f=e!==null?{token:"filter",value:e[8]}:null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[59] Filter");z[c]={nextPos:a,result:f};return f}function Fa(){var b="Constraint@"+a,c=z[b];if(c)return a=c.nextPos,c.result;c=m;m=!1;var d=Ma();d===null&&(d=La(),d===null&&(d=hb(),d=d!==null?d:null));(m=c)&&d===null&&g("[60] Constraint");z[b]={nextPos:a,result:d};return d}function hb(){var b="FunctionCall@"+a,c=z[b];if(c)return a=c.nextPos,c.result;
c=m;m=!1;var d=a,f=a,e=W();if(e!==null){var h=qb();h!==null?e=[e,h]:(e=null,a=f)}else e=null,a=f;f=e!==null?function(a,b){var c={token:"expression",expressionType:"irireforfunction"};c.iriref=a;c.args=b.value;return c}(e[0],e[1]):null;f===null&&(f=null,a=d);(m=c)&&f===null&&g("[61] FunctionCall");z[b]={nextPos:a,result:f};return f}function qb(){var c="ArgList@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=ma()!==null?{token:"args",value:[]}:null;f===null&&(f=null,a=h);if(f!==null)h=
f;else{f=h=a;if(b.substr(a,1)==="("){var e="(";a+=1}else e=null,m&&g('"("');if(e!==null){if(b.substr(a,8)==="DISTINCT"){var j="DISTINCT";a+=8}else j=null,m&&g('"DISTINCT"');j=j!==null?j:"";if(j!==null){var o=N();if(o!==null){var v=[],k=a;if(b.substr(a,1)===","){var i=",";a+=1}else i=null,m&&g('","');if(i!==null){var s=N();s!==null?i=[i,s]:(i=null,a=k)}else i=null,a=k;for(;i!==null;)v.push(i),k=a,b.substr(a,1)===","?(i=",",a+=1):(i=null,m&&g('","')),i!==null?(s=N(),s!==null?i=[i,s]:(i=null,a=k)):(i=
null,a=k);v!==null?(b.substr(a,1)===")"?(k=")",a+=1):(k=null,m&&g('")"')),k!==null?e=[e,j,o,v,k]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f}else e=null,a=f}else e=null,a=f;f=e!==null?function(a,b,c){cleanEx=[];for(var e=0;e<c.length;e++)cleanEx.push(c[e][1]);c={token:"args"};c.value=[b].concat(cleanEx);c.distinct=a==="DISTINCT"?!0:!1;return c}(e[1],e[2],e[3]):null;f===null&&(f=null,a=h);h=f!==null?f:null}(m=d)&&h===null&&g("[62] ArgList");z[c]={nextPos:a,result:h};return h}function Sb(){var c="ExpressionList@"+
a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=ma()!==null?{token:"args",value:[]}:null;f===null&&(f=null,a=h);if(f!==null)h=f;else{f=h=a;if(b.substr(a,1)==="("){var e="(";a+=1}else e=null,m&&g('"("');if(e!==null){var j=N();if(j!==null){var o=[],v=a;if(b.substr(a,1)===","){var k=",";a+=1}else k=null,m&&g('","');if(k!==null){var i=N();i!==null?k=[k,i]:(k=null,a=v)}else k=null,a=v;for(;k!==null;)o.push(k),v=a,b.substr(a,1)===","?(k=",",a+=1):(k=null,m&&g('","')),k!==null?(i=N(),i!==null?
k=[k,i]:(k=null,a=v)):(k=null,a=v);o!==null?(b.substr(a,1)===")"?(v=")",a+=1):(v=null,m&&g('")"')),v!==null?e=[e,j,o,v]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f}else e=null,a=f;f=e!==null?function(a,b){cleanEx=[];for(var c=0;c<b.length;c++)cleanEx.push(b[c][1]);c={token:"args"};c.value=[a].concat(cleanEx);return c}(e[1],e[2]):null;f===null&&(f=null,a=h);h=f!==null?f:null}(m=d)&&h===null&&g("[63] ExpressionList");z[c]={nextPos:a,result:h};return h}function Ib(){var c="ConstructTemplate@"+a,d=z[c];
if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a;if(b.substr(a,1)==="{"){var e="{";a+=1}else e=null,m&&g('"{"');if(e!==null){for(var j=[],o=s();o!==null;)j.push(o),o=s();if(j!==null)if(o=rb(),o=o!==null?o:"",o!==null){for(var v=[],k=s();k!==null;)v.push(k),k=s();v!==null?(b.substr(a,1)==="}"?(k="}",a+=1):(k=null,m&&g('"}"')),k!==null?e=[e,j,o,v,k]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f;f=e!==null?e[2]:null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[64] ConstructTemplate");
z[c]={nextPos:a,result:f};return f}function rb(){var c="ConstructTriples@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a,e=Ra();if(e!==null){for(var j=a,o=[],v=s();v!==null;)o.push(v),v=s();if(o!==null)if(b.substr(a,1)==="."?(v=".",a+=1):(v=null,m&&g('"."')),v!==null){for(var k=[],i=s();i!==null;)k.push(i),i=s();k!==null?(i=rb(),i=i!==null?i:"",i!==null?o=[o,v,k,i]:(o=null,a=j)):(o=null,a=j)}else o=null,a=j;else o=null,a=j;j=o!==null?o:"";j!==null?e=[e,j]:(e=null,a=f)}else e=null,
a=f;f=e!==null?function(a,b){var c=a.triplesContext;typeof b==="object"&&b.length!=null&&b[3].triplesContext!=null&&(c=c.concat(b[3].triplesContext));return{token:"triplestemplate",triplesContext:c}}(e[0],e[1]):null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[65] ConstructTriples");z[c]={nextPos:a,result:f};return f}function Ra(){var b="TriplesSameSubject@"+a,c=z[b];if(c)return a=c.nextPos,c.result;c=m;m=!1;for(var d=a,f=a,e=[],h=s();h!==null;)e.push(h),h=s();if(e!==null)if(h=sb(),h!==null){for(var o=
[],j=s();j!==null;)o.push(j),j=s();o!==null?(j=Ga(),j!==null?e=[e,h,o,j]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f;else e=null,a=f;f=e!==null?function(a,b){var c=b.triplesContext;if(b.pairs)for(var e=0;e<b.pairs.length;e++){var f=b.pairs[e],g=null;f[1].length!=null&&(f[1]=f[1][0]);a.token&&a.token==="triplesnodecollection"?(g={subject:a.chainSubject[0],predicate:f[0],object:f[1]},c.push(g),c=c.concat(a.triplesContext)):(g={subject:a,predicate:f[0],object:f[1]},c.push(g))}e={token:"triplessamesubject"};
e.triplesContext=c;e.chainSubject=a;return e}(e[1],e[3]):null;f===null&&(f=null,a=d);if(f!==null)d=f;else{f=d=a;e=[];for(h=s();h!==null;)e.push(h),h=s();if(e!==null)if(h=ub(),h!==null){o=[];for(j=s();j!==null;)o.push(j),j=s();o!==null?(j=Tb(),j!==null?e=[e,h,o,j]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f;else e=null,a=f;f=e!==null?function(a,b){var c=a.triplesContext,e=a.chainSubject;if(b.pairs)for(var f=0;f<b.pairs.length;f++){var g=b.pairs[f];g[1].length!=null&&(g[1]=g[1][0]);if(a.token==="triplesnodecollection")for(var d=
0;d<e.length;d++){var m=e[d];if(m.triplesContext!=null){var o={subject:m.chainSubject,predicate:g[0],object:g[1]};c.concat(m.triplesContext)}else o={subject:e[d],predicate:g[0],object:g[1]},c.push(o)}else o={subject:e,predicate:g[0],object:g[1]},c.push(o)}f={token:"triplessamesubject"};f.triplesContext=c;f.chainSubject=e;return f}(e[1],e[3]):null;f===null&&(f=null,a=d);d=f!==null?f:null}(m=c)&&d===null&&g("[66] TriplesSameSubject");z[b]={nextPos:a,result:d};return d}function Ga(){var c="PropertyListNotEmpty@"+
a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a,e=Sa();if(e!==null){for(var j=[],o=s();o!==null;)j.push(o),o=s();if(j!==null)if(o=na(),o!==null){for(var k=[],i=a,n=[],t=s();t!==null;)n.push(t),t=s();if(n!==null)if(b.substr(a,1)===";"?(t=";",a+=1):(t=null,m&&g('";"')),t!==null){for(var q=[],r=s();r!==null;)q.push(r),r=s();if(q!==null){var r=a,w=Sa();if(w!==null){for(var x=[],C=s();C!==null;)x.push(C),C=s();x!==null?(C=na(),C!==null?w=[w,x,C]:(w=null,a=r)):(w=null,a=r)}else w=null,a=
r;r=w!==null?w:"";r!==null?n=[n,t,q,r]:(n=null,a=i)}else n=null,a=i}else n=null,a=i;else n=null,a=i;for(;n!==null;){k.push(n);i=a;n=[];for(t=s();t!==null;)n.push(t),t=s();if(n!==null)if(b.substr(a,1)===";"?(t=";",a+=1):(t=null,m&&g('";"')),t!==null){q=[];for(r=s();r!==null;)q.push(r),r=s();if(q!==null){r=a;w=Sa();if(w!==null){x=[];for(C=s();C!==null;)x.push(C),C=s();x!==null?(C=na(),C!==null?w=[w,x,C]:(w=null,a=r)):(w=null,a=r)}else w=null,a=r;r=w!==null?w:"";r!==null?n=[n,t,q,r]:(n=null,a=i)}else n=
null,a=i}else n=null,a=i;else n=null,a=i}k!==null?e=[e,j,o,k]:(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f;f=e!==null?function(a,b,c){token={token:"propertylist"};for(var e=[],f=[],g=0;g<b.length;g++)b[g].triplesContext!=null?(e=e.concat(b[g].triplesContext),b[g].token==="triplesnodecollection"&&b[g].chainSubject.length!=null?f.push([a,b[g].chainSubject[0]]):f.push([a,b[g].chainSubject])):f.push([a,b[g]]);for(g=0;g<c.length;g++)for(var b=c[g][3],a=b[0],b=b[2]||[],d=0;d<b.length;d++)b[d].triplesContext!=
null?(e=e.concat(b[d].triplesContext),f.push([a,b[d].chainSubject])):f.push([a,b[d]]);token.pairs=f;token.triplesContext=e;return token}(e[0],e[2],e[3]):null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[67] PropertyListNotEmpty");z[c]={nextPos:a,result:f};return f}function Tb(){var b="PropertyList@"+a,c=z[b];if(c)return a=c.nextPos,c.result;c=m;m=!1;var d=Ga(),d=d!==null?d:"";(m=c)&&d===null&&g("[68] PropertyList");z[b]={nextPos:a,result:d};return d}function na(){var c="ObjectList@"+a,d=z[c];if(d)return a=
d.nextPos,d.result;d=m;m=!1;var h=a,f=a,e=va();if(e!==null){for(var j=[],o=s();o!==null;)j.push(o),o=s();if(j!==null){var o=[],k=a;if(b.substr(a,1)===","){var i=",";a+=1}else i=null,m&&g('","');if(i!==null){for(var n=[],t=s();t!==null;)n.push(t),t=s();n!==null?(t=va(),t!==null?i=[i,n,t]:(i=null,a=k)):(i=null,a=k)}else i=null,a=k;for(;i!==null;)if(o.push(i),k=a,b.substr(a,1)===","?(i=",",a+=1):(i=null,m&&g('","')),i!==null){n=[];for(t=s();t!==null;)n.push(t),t=s();n!==null?(t=va(),t!==null?i=[i,n,
t]:(i=null,a=k)):(i=null,a=k)}else i=null,a=k;o!==null?e=[e,j,o]:(e=null,a=f)}else e=null,a=f}else e=null,a=f;f=e!==null?function(a,b){var c=[];c.push(a);for(var e=0;e<b.length;e++)for(var f=0;f<b[e].length;f++)typeof b[e][f]=="object"&&b[e][f].token!=null&&c.push(b[e][f]);return c}(e[0],e[2]):null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[69] ObjectList");z[c]={nextPos:a,result:f};return f}function Sa(){var c="Verb@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=la();if(h===null){h=
a;if(b.substr(a,1)==="a"){var f="a";a+=1}else f=null,m&&g('"a"');f=f!==null?{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}:null;f===null&&(f=null,a=h);h=f!==null?f:null}(m=d)&&h===null&&g("[71] Verb");z[c]={nextPos:a,result:h};return h}function Ta(){var b="VerbPath@"+a,c=z[b];if(c)return a=c.nextPos,c.result;c=m;m=!1;var d=a,f=vb(),f=f!==null?f:null;f===null&&(f=null,a=d);(m=c)&&f===null&&g("[75]");z[b]={nextPos:a,result:f};return f}function vb(){var c=
"PathAlternative@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=Ua();if(f!==null){var e=[],j=a;if(b.substr(a,1)==="|"){var o="|";a+=1}else o=null,m&&g('"|"');if(o!==null){var k=Ua();k!==null?o=[o,k]:(o=null,a=j)}else o=null,a=j;for(;o!==null;)e.push(o),j=a,b.substr(a,1)==="|"?(o="|",a+=1):(o=null,m&&g('"|"')),o!==null?(k=Ua(),k!==null?o=[o,k]:(o=null,a=j)):(o=null,a=j);e!==null?f=[f,e]:(f=null,a=h)}else f=null,a=h;(m=d)&&f===null&&g("[78] PathAlternative");z[c]={nextPos:a,result:f};
return f}function Ua(){var c="PathSequence@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=Va();if(f!==null){var e=[],j=a;if(b.substr(a,1)==="/"){var o="/";a+=1}else o=null,m&&g('"/"');if(o!==null){var k=Va();k!==null?o=[o,k]:(o=null,a=j)}else o=null,a=j;for(;o!==null;)e.push(o),j=a,b.substr(a,1)==="/"?(o="/",a+=1):(o=null,m&&g('"/"')),o!==null?(k=Va(),k!==null?o=[o,k]:(o=null,a=j)):(o=null,a=j);e!==null?f=[f,e]:(f=null,a=h)}else f=null,a=h;(m=d)&&f===null&&g("[79] PathSequence");z[c]=
{nextPos:a,result:f};return f}function wb(){var b="PathElt@"+a,c=z[b];if(c)return a=c.nextPos,c.result;c=m;m=!1;var d=a,f=Ub();if(f!==null){var e=Vb(),e=e!==null?e:"";e!==null?f=[f,e]:(f=null,a=d)}else f=null,a=d;(m=c)&&f===null&&g("[88] PathElt");z[b]={nextPos:a,result:f};return f}function Va(){var c="PathEltOrInverse@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=wb();if(h===null){h=a;if(b.substr(a,1)==="^"){var f="^";a+=1}else f=null,m&&g('"^"');if(f!==null){var e=wb();e!==null?f=[f,
e]:(f=null,a=h)}else f=null,a=h;h=f!==null?f:null}(m=d)&&h===null&&g("[81] PathEltOrInverse");z[c]={nextPos:a,result:h};return h}function Vb(){var c="PathMod@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;if(b.substr(a,1)==="*"){var h="*";a+=1}else h=null,m&&g('"*"');if(h===null&&(b.substr(a,1)==="?"?(h="?",a+=1):(h=null,m&&g('"?"')),h===null&&(b.substr(a,1)==="+"?(h="+",a+=1):(h=null,m&&g('"+"')),h===null))){h=a;if(b.substr(a,1)==="{"){var f="{";a+=1}else f=null,m&&g('"{"');if(f!==null){var e=
a,j=ga();if(j!==null){var o=a;if(b.substr(a,1)===","){var k=",";a+=1}else k=null,m&&g('","');if(k!==null){if(b.substr(a,1)==="}"){var i="}";a+=1}else i=null,m&&g('"}"');if(i===null){var i=a,n=ga();if(n!==null){if(b.substr(a,1)==="}"){var s="}";a+=1}else s=null,m&&g('"}"');s!==null?n=[n,s]:(n=null,a=i)}else n=null,a=i;i=n!==null?n:null}i!==null?k=[k,i]:(k=null,a=o)}else k=null,a=o;k!==null?o=k:(b.substr(a,1)==="}"?(o="}",a+=1):(o=null,m&&g('"}"')),o=o!==null?o:null);o!==null?j=[j,o]:(j=null,a=e)}else j=
null,a=e;j!==null?e=j:(e=a,b.substr(a,1)===","?(j=",",a+=1):(j=null,m&&g('","')),j!==null?(o=ga(),o!==null?(b.substr(a,1)==="}"?(k="}",a+=1):(k=null,m&&g('"}"')),k!==null?j=[j,o,k]:(j=null,a=e)):(j=null,a=e)):(j=null,a=e),e=j!==null?j:null);e!==null?f=[f,e]:(f=null,a=h)}else f=null,a=h;h=f!==null?f:null}(m=d)&&h===null&&g("[82] PathMod");z[c]={nextPos:a,result:h};return h}function Ub(){var c="PathPrimary@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=W();if(h===null&&(b.substr(a,1)===
"a"?(h="a",a+=1):(h=null,m&&g('"a"')),h===null)){h=a;if(b.substr(a,1)==="!"){var f="!";a+=1}else f=null,m&&g('"!"');if(f!==null){var e=Wb();e!==null?f=[f,e]:(f=null,a=h)}else f=null,a=h;if(f!==null)h=f;else{h=a;b.substr(a,1)==="("?(f="(",a+=1):(f=null,m&&g('"("'));if(f!==null)if(e=vb(),e!==null){if(b.substr(a,1)===")"){var j=")";a+=1}else j=null,m&&g('")"');j!==null?f=[f,e,j]:(f=null,a=h)}else f=null,a=h;else f=null,a=h;h=f!==null?f:null}}(m=d)&&h===null&&g("[83] PathPrimary");z[c]={nextPos:a,result:h};
return h}function Wb(){var c="PathNegatedPropertySet@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=Ha();if(d===null){d=a;if(b.substr(a,1)==="("){var h="(";a+=1}else h=null,m&&g('"("');if(h!==null){var f=a,e=Ha();if(e!==null){var j=[],o=a;if(b.substr(a,1)==="|"){var k="|";a+=1}else k=null,m&&g('"|"');if(k!==null){var i=Ha();i!==null?k=[k,i]:(k=null,a=o)}else k=null,a=o;for(;k!==null;)j.push(k),o=a,b.substr(a,1)==="|"?(k="|",a+=1):(k=null,m&&g('"|"')),k!==null?(i=Ha(),i!==null?k=[k,i]:(k=null,a=o)):
(k=null,a=o);j!==null?e=[e,j]:(e=null,a=f)}else e=null,a=f;f=e!==null?e:"";f!==null?(b.substr(a,1)===")"?(e=")",a+=1):(e=null,m&&g('")"')),e!==null?h=[h,f,e]:(h=null,a=d)):(h=null,a=d)}else h=null,a=d;d=h!==null?h:null}z[c]={nextPos:a,result:d};return d}function Ha(){var c="PathOneInPropertySet@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=W();if(h===null&&(b.substr(a,1)==="a"?(h="a",a+=1):(h=null,m&&g('"a"')),h===null)){h=a;if(b.substr(a,1)==="^"){var f="^";a+=1}else f=null,m&&g('"^"');
if(f!==null){var e=W();e===null&&(b.substr(a,1)==="a"?(e="a",a+=1):(e=null,m&&g('"a"')),e=e!==null?e:null);e!==null?f=[f,e]:(f=null,a=h)}else f=null,a=h;h=f!==null?f:null}(m=d)&&h===null&&g("[85] PathOneInPropertySet");z[c]={nextPos:a,result:h};return h}function ub(){var b="TriplesNode@"+a,c=z[b];if(c)return a=c.nextPos,c.result;c=m;m=!1;var d=a,f=Xb(),f=f!==null?function(a){triplesContext=[];chainSubject=[];for(var b=null,c=0;c<a.length;c++)ha++,b=null,a[c].chainSubject==null&&a[c].triplesContext==
null?b=a[c]:(b=a[c].chainSubject,triplesContext=triplesContext.concat(nextSubject.triplesContext)),b={subject:{token:"blank",label:"_:"+ha},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:b},c==0&&chainSubject.push(b.subject),triplesContext.push(b),b=c===a.length-1?{subject:{token:"blank",label:"_:"+ha},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,
suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",label:"_:"+ha},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",label:"_:"+(ha+1)}},triplesContext.push(b);return{token:"triplesnodecollection",triplesContext:triplesContext,chainSubject:chainSubject}}(f):null;f===null&&(f=null,a=d);f!==null?d=f:(d=Yb(),d=d!==null?d:null);(m=c)&&d===null&&g("[87] TriplesNode");z[b]={nextPos:a,result:d};
return d}function Yb(){var c="BlankNodePropertyList@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;for(var h=a,f=a,e=[],j=s();j!==null;)e.push(j),j=s();if(e!==null)if(b.substr(a,1)==="["?(j="[",a+=1):(j=null,m&&g('"["')),j!==null){for(var o=[],k=s();k!==null;)o.push(k),k=s();if(o!==null)if(k=Ga(),k!==null){for(var i=[],n=s();n!==null;)i.push(n),n=s();if(i!==null)if(b.substr(a,1)==="]"?(n="]",a+=1):(n=null,m&&g('"]"')),n!==null){for(var t=[],q=s();q!==null;)t.push(q),q=s();t!==null?e=[e,j,o,
k,i,n,t]:(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f;f=e!==null?function(a){ha++;for(var b={token:"blank",label:"_:"+ha},c=[],e=0;e<a.pairs.length;e++){var f=a.pairs[e],g={};g.subject=b;g.predicate=f[0];f[1].length!=null&&(f[1]=f[1][0]);g.object=f[1];c.push(g)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:a.triplesContext.concat(c),chainSubject:b}}(e[3]):null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[88] BlankNodePropertyList");
z[c]={nextPos:a,result:f};return f}function Xb(){var c="Collection@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;for(var h=a,f=a,e=[],j=s();j!==null;)e.push(j),j=s();if(e!==null)if(b.substr(a,1)==="("?(j="(",a+=1):(j=null,m&&g('"("')),j!==null){for(var o=[],k=s();k!==null;)o.push(k),k=s();if(o!==null){var i=va();if(i!==null)for(k=[];i!==null;)k.push(i),i=va();else k=null;if(k!==null){for(var i=[],n=s();n!==null;)i.push(n),n=s();if(i!==null)if(b.substr(a,1)===")"?(n=")",a+=1):(n=null,m&&g('")"')),
n!==null){for(var t=[],q=s();q!==null;)t.push(q),q=s();t!==null?e=[e,j,o,k,i,n,t]:(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;else e=null,a=f;f=e!==null?e[3]:null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[89] Collection");z[c]={nextPos:a,result:f};return f}function va(){var b="GraphNode@"+a,c=z[b];if(c)return a=c.nextPos,c.result;c=m;m=!1;for(var d=a,f=a,e=[],h=s();h!==null;)e.push(h),h=s();if(e!==null)if(h=sb(),h!==null){for(var o=[],j=s();j!==null;)o.push(j),
j=s();o!==null?e=[e,h,o]:(e=null,a=f)}else e=null,a=f;else e=null,a=f;if(e!==null)f=e;else{f=a;e=[];for(h=s();h!==null;)e.push(h),h=s();if(e!==null)if(h=ub(),h!==null){o=[];for(j=s();j!==null;)o.push(j),j=s();o!==null?e=[e,h,o]:(e=null,a=f)}else e=null,a=f;else e=null,a=f;f=e!==null?e:null}f=f!==null?f[1]:null;f===null&&(f=null,a=d);(m=c)&&f===null&&g("[90] GraphNode");z[b]={nextPos:a,result:f};return f}function sb(){var b="VarOrTerm@"+a,c=z[b];if(c)return a=c.nextPos,c.result;c=m;m=!1;var d=V();
d===null&&(d=Zb(),d=d!==null?d:null);(m=c)&&d===null&&g("[91] VarOrTerm");z[b]={nextPos:a,result:d};return d}function la(){var b="VarOrIRIref@"+a,c=z[b];if(c)return a=c.nextPos,c.result;c=m;m=!1;var d=V();d===null&&(d=W(),d=d!==null?d:null);(m=c)&&d===null&&g("[92] VarOrIRIref");z[b]={nextPos:a,result:d};return d}function V(){var b="Var@"+a,c=z[b];if(c)return a=c.nextPos,c.result;c=m;m=!1;var d=a,f=$b();f===null&&(f=ac(),f=f!==null?f:null);f=f!==null?function(a){var b={token:"var"};b.value=a;return b}(f):
null;f===null&&(f=null,a=d);(m=c)&&f===null&&g("[93] Var");z[b]={nextPos:a,result:f};return f}function Zb(){var b="GraphTerm@"+a,c=z[b];if(c)return a=c.nextPos,c.result;c=m;m=!1;var d=W();d===null&&(d=Na(),d===null&&(d=Oa(),d===null&&(d=Pa(),d===null&&(d=bc(),d===null&&(d=ma(),d=d!==null?d:null)))));(m=c)&&d===null&&g("[94] GraphTerm");z[b]={nextPos:a,result:d};return d}function N(){var c="ConditionalOrExpression@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a,e=Wa();if(e!==null){for(var j=
[],o=a,k=[],i=s();i!==null;)k.push(i),i=s();if(k!==null)if(b.substr(a,2)==="||"?(i="||",a+=2):(i=null,m&&g('"||"')),i!==null){for(var n=[],t=s();t!==null;)n.push(t),t=s();n!==null?(t=Wa(),t!==null?k=[k,i,n,t]:(k=null,a=o)):(k=null,a=o)}else k=null,a=o;else k=null,a=o;for(;k!==null;){j.push(k);o=a;k=[];for(i=s();i!==null;)k.push(i),i=s();if(k!==null)if(b.substr(a,2)==="||"?(i="||",a+=2):(i=null,m&&g('"||"')),i!==null){n=[];for(t=s();t!==null;)n.push(t),t=s();n!==null?(t=Wa(),t!==null?k=[k,i,n,t]:(k=
null,a=o)):(k=null,a=o)}else k=null,a=o;else k=null,a=o}j!==null?e=[e,j]:(e=null,a=f)}else e=null,a=f;f=e!==null?function(a,b){if(b.length===0)return a;for(var c={token:"expression",expressionType:"conditionalor"},e=[a],f=0;f<b.length;f++)e.push(b[f][3]);c.operands=e;return c}(e[0],e[1]):null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[96] ConditionalOrExpression");z[c]={nextPos:a,result:f};return f}function Wa(){var c="ConditionalAndExpression@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;
var h=a,f=a,e=Xa();if(e!==null){for(var j=[],o=a,k=[],i=s();i!==null;)k.push(i),i=s();if(k!==null)if(b.substr(a,2)==="&&"?(i="&&",a+=2):(i=null,m&&g('"&&"')),i!==null){for(var n=[],t=s();t!==null;)n.push(t),t=s();n!==null?(t=Xa(),t!==null?k=[k,i,n,t]:(k=null,a=o)):(k=null,a=o)}else k=null,a=o;else k=null,a=o;for(;k!==null;){j.push(k);o=a;k=[];for(i=s();i!==null;)k.push(i),i=s();if(k!==null)if(b.substr(a,2)==="&&"?(i="&&",a+=2):(i=null,m&&g('"&&"')),i!==null){n=[];for(t=s();t!==null;)n.push(t),t=s();
n!==null?(t=Xa(),t!==null?k=[k,i,n,t]:(k=null,a=o)):(k=null,a=o)}else k=null,a=o;else k=null,a=o}j!==null?e=[e,j]:(e=null,a=f)}else e=null,a=f;f=e!==null?function(a,b){if(b.length===0)return a;for(var c={token:"expression",expressionType:"conditionaland"},e=[a],f=0;f<b.length;f++)e.push(b[f][3]);c.operands=e;return c}(e[0],e[1]):null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[97] ConditionalAndExpression");z[c]={nextPos:a,result:f};return f}function Xa(){var c="RelationalExpression@"+a,d=z[c];if(d)return a=
d.nextPos,d.result;d=m;m=!1;var h=a,f=a,e=X();if(e!==null){for(var j=[],o=a,k=[],i=s();i!==null;)k.push(i),i=s();if(k!==null)if(b.substr(a,1)==="="?(i="=",a+=1):(i=null,m&&g('"="')),i!==null){for(var n=[],t=s();t!==null;)n.push(t),t=s();n!==null?(t=X(),t!==null?k=[k,i,n,t]:(k=null,a=o)):(k=null,a=o)}else k=null,a=o;else k=null,a=o;if(k!==null)o=k;else{o=a;k=[];for(i=s();i!==null;)k.push(i),i=s();if(k!==null)if(b.substr(a,2)==="!="?(i="!=",a+=2):(i=null,m&&g('"!="')),i!==null){n=[];for(t=s();t!==null;)n.push(t),
t=s();n!==null?(t=X(),t!==null?k=[k,i,n,t]:(k=null,a=o)):(k=null,a=o)}else k=null,a=o;else k=null,a=o;if(k!==null)o=k;else{o=a;k=[];for(i=s();i!==null;)k.push(i),i=s();if(k!==null)if(b.substr(a,1)==="<"?(i="<",a+=1):(i=null,m&&g('"<"')),i!==null){n=[];for(t=s();t!==null;)n.push(t),t=s();n!==null?(t=X(),t!==null?k=[k,i,n,t]:(k=null,a=o)):(k=null,a=o)}else k=null,a=o;else k=null,a=o;if(k!==null)o=k;else{o=a;k=[];for(i=s();i!==null;)k.push(i),i=s();if(k!==null)if(b.substr(a,1)===">"?(i=">",a+=1):(i=
null,m&&g('">"')),i!==null){n=[];for(t=s();t!==null;)n.push(t),t=s();n!==null?(t=X(),t!==null?k=[k,i,n,t]:(k=null,a=o)):(k=null,a=o)}else k=null,a=o;else k=null,a=o;if(k!==null)o=k;else{o=a;k=[];for(i=s();i!==null;)k.push(i),i=s();if(k!==null)if(b.substr(a,2)==="<="?(i="<=",a+=2):(i=null,m&&g('"<="')),i!==null){n=[];for(t=s();t!==null;)n.push(t),t=s();n!==null?(t=X(),t!==null?k=[k,i,n,t]:(k=null,a=o)):(k=null,a=o)}else k=null,a=o;else k=null,a=o;if(k!==null)o=k;else{o=a;k=[];for(i=s();i!==null;)k.push(i),
i=s();if(k!==null)if(b.substr(a,2)===">="?(i=">=",a+=2):(i=null,m&&g('">="')),i!==null){n=[];for(t=s();t!==null;)n.push(t),t=s();n!==null?(t=X(),t!==null?k=[k,i,n,t]:(k=null,a=o)):(k=null,a=o)}else k=null,a=o;else k=null,a=o;o=k!==null?k:null}}}}}for(;o!==null;){j.push(o);o=a;k=[];for(i=s();i!==null;)k.push(i),i=s();if(k!==null)if(b.substr(a,1)==="="?(i="=",a+=1):(i=null,m&&g('"="')),i!==null){n=[];for(t=s();t!==null;)n.push(t),t=s();n!==null?(t=X(),t!==null?k=[k,i,n,t]:(k=null,a=o)):(k=null,a=o)}else k=
null,a=o;else k=null,a=o;if(k!==null)o=k;else{o=a;k=[];for(i=s();i!==null;)k.push(i),i=s();if(k!==null)if(b.substr(a,2)==="!="?(i="!=",a+=2):(i=null,m&&g('"!="')),i!==null){n=[];for(t=s();t!==null;)n.push(t),t=s();n!==null?(t=X(),t!==null?k=[k,i,n,t]:(k=null,a=o)):(k=null,a=o)}else k=null,a=o;else k=null,a=o;if(k!==null)o=k;else{o=a;k=[];for(i=s();i!==null;)k.push(i),i=s();if(k!==null)if(b.substr(a,1)==="<"?(i="<",a+=1):(i=null,m&&g('"<"')),i!==null){n=[];for(t=s();t!==null;)n.push(t),t=s();n!==null?
(t=X(),t!==null?k=[k,i,n,t]:(k=null,a=o)):(k=null,a=o)}else k=null,a=o;else k=null,a=o;if(k!==null)o=k;else{o=a;k=[];for(i=s();i!==null;)k.push(i),i=s();if(k!==null)if(b.substr(a,1)===">"?(i=">",a+=1):(i=null,m&&g('">"')),i!==null){n=[];for(t=s();t!==null;)n.push(t),t=s();n!==null?(t=X(),t!==null?k=[k,i,n,t]:(k=null,a=o)):(k=null,a=o)}else k=null,a=o;else k=null,a=o;if(k!==null)o=k;else{o=a;k=[];for(i=s();i!==null;)k.push(i),i=s();if(k!==null)if(b.substr(a,2)==="<="?(i="<=",a+=2):(i=null,m&&g('"<="')),
i!==null){n=[];for(t=s();t!==null;)n.push(t),t=s();n!==null?(t=X(),t!==null?k=[k,i,n,t]:(k=null,a=o)):(k=null,a=o)}else k=null,a=o;else k=null,a=o;if(k!==null)o=k;else{o=a;k=[];for(i=s();i!==null;)k.push(i),i=s();if(k!==null)if(b.substr(a,2)===">="?(i=">=",a+=2):(i=null,m&&g('">="')),i!==null){n=[];for(t=s();t!==null;)n.push(t),t=s();n!==null?(t=X(),t!==null?k=[k,i,n,t]:(k=null,a=o)):(k=null,a=o)}else k=null,a=o;else k=null,a=o;o=k!==null?k:null}}}}}}j!==null?e=[e,j]:(e=null,a=f)}else e=null,a=f;
f=e!==null?function(a,b){if(b.length===0)return a;else{var c={expressionType:"relationalexpression"};c.operator=b[0][1];c.op1=a;c.op2=b[0][3];c.token="expression";return c}}(e[0],e[1]):null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[99] RelationalExpression");z[c]={nextPos:a,result:f};return f}function X(){var c="AdditiveExpression@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a,e=wa();if(e!==null){for(var k=[],j=a,i=[],n=s();n!==null;)i.push(n),n=s();if(i!==null)if(b.substr(a,1)===
"+"?(n="+",a+=1):(n=null,m&&g('"+"')),n!==null){for(var q=[],t=s();t!==null;)q.push(t),t=s();q!==null?(t=wa(),t!==null?i=[i,n,q,t]:(i=null,a=j)):(i=null,a=j)}else i=null,a=j;else i=null,a=j;if(i!==null)j=i;else{j=a;i=[];for(n=s();n!==null;)i.push(n),n=s();if(i!==null)if(b.substr(a,1)==="-"?(n="-",a+=1):(n=null,m&&g('"-"')),n!==null){q=[];for(t=s();t!==null;)q.push(t),t=s();q!==null?(t=wa(),t!==null?i=[i,n,q,t]:(i=null,a=j)):(i=null,a=j)}else i=null,a=j;else i=null,a=j;if(i!==null)j=i;else{j=a;i=xa();
i===null&&(i=xa(),i=i!==null?i:null);if(i!==null){n=a;q=[];for(t=s();t!==null;)q.push(t),t=s();if(q!==null)if(b.substr(a,1)==="*"?(t="*",a+=1):(t=null,m&&g('"*"')),t!==null){for(var r=[],w=s();w!==null;)r.push(w),w=s();r!==null?(w=ca(),w!==null?q=[q,t,r,w]:(q=null,a=n)):(q=null,a=n)}else q=null,a=n;else q=null,a=n;if(q!==null)n=q;else{n=a;q=[];for(t=s();t!==null;)q.push(t),t=s();if(q!==null)if(b.substr(a,1)==="/"?(t="/",a+=1):(t=null,m&&g('"/"')),t!==null){r=[];for(w=s();w!==null;)r.push(w),w=s();
r!==null?(w=ca(),w!==null?q=[q,t,r,w]:(q=null,a=n)):(q=null,a=n)}else q=null,a=n;else q=null,a=n;n=q!==null?q:null}n=n!==null?n:"";n!==null?i=[i,n]:(i=null,a=j)}else i=null,a=j;j=i!==null?i:null}}for(;j!==null;){k.push(j);j=a;i=[];for(n=s();n!==null;)i.push(n),n=s();if(i!==null)if(b.substr(a,1)==="+"?(n="+",a+=1):(n=null,m&&g('"+"')),n!==null){q=[];for(t=s();t!==null;)q.push(t),t=s();q!==null?(t=wa(),t!==null?i=[i,n,q,t]:(i=null,a=j)):(i=null,a=j)}else i=null,a=j;else i=null,a=j;if(i!==null)j=i;else{j=
a;i=[];for(n=s();n!==null;)i.push(n),n=s();if(i!==null)if(b.substr(a,1)==="-"?(n="-",a+=1):(n=null,m&&g('"-"')),n!==null){q=[];for(t=s();t!==null;)q.push(t),t=s();q!==null?(t=wa(),t!==null?i=[i,n,q,t]:(i=null,a=j)):(i=null,a=j)}else i=null,a=j;else i=null,a=j;if(i!==null)j=i;else{j=a;i=xa();i===null&&(i=xa(),i=i!==null?i:null);if(i!==null){n=a;q=[];for(t=s();t!==null;)q.push(t),t=s();if(q!==null)if(b.substr(a,1)==="*"?(t="*",a+=1):(t=null,m&&g('"*"')),t!==null){r=[];for(w=s();w!==null;)r.push(w),
w=s();r!==null?(w=ca(),w!==null?q=[q,t,r,w]:(q=null,a=n)):(q=null,a=n)}else q=null,a=n;else q=null,a=n;if(q!==null)n=q;else{n=a;q=[];for(t=s();t!==null;)q.push(t),t=s();if(q!==null)if(b.substr(a,1)==="/"?(t="/",a+=1):(t=null,m&&g('"/"')),t!==null){r=[];for(w=s();w!==null;)r.push(w),w=s();r!==null?(w=ca(),w!==null?q=[q,t,r,w]:(q=null,a=n)):(q=null,a=n)}else q=null,a=n;else q=null,a=n;n=q!==null?q:null}n=n!==null?n:"";n!==null?i=[i,n]:(i=null,a=j)}else i=null,a=j;j=i!==null?i:null}}}k!==null?e=[e,k]:
(e=null,a=f)}else e=null,a=f;f=e!==null?function(a,b){if(b.length===0)return a;var c={token:"expression",expressionType:"additiveexpression"};c.summand=a;c.summands=[];for(var e=0;e<b.length;e++){var f=b[e],g={};if(f.length==4&&typeof f[1]==="string")g.operator=f[1],g.expression=f[3];else{var f={},d=g[0],m=g[1][1],h=g[1][3],m=null;d.value<0?(g.operator="-",d.value=-d.value):g.operator="+";f.token="expression";f.expressionType="multiplicativeexpression";f.operator=d;f.factors=[{operator:m,expression:h}];
g.expression=f}c.summands.push(g)}return c}(e[0],e[1]):null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[101] AdditiveExpression");z[c]={nextPos:a,result:f};return f}function wa(){var c="MultiplicativeExpression@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a,e=ca();if(e!==null){for(var k=[],j=a,i=[],n=s();n!==null;)i.push(n),n=s();if(i!==null)if(b.substr(a,1)==="*"?(n="*",a+=1):(n=null,m&&g('"*"')),n!==null){for(var q=[],t=s();t!==null;)q.push(t),t=s();q!==null?(t=ca(),t!==null?i=
[i,n,q,t]:(i=null,a=j)):(i=null,a=j)}else i=null,a=j;else i=null,a=j;if(i!==null)j=i;else{j=a;i=[];for(n=s();n!==null;)i.push(n),n=s();if(i!==null)if(b.substr(a,1)==="/"?(n="/",a+=1):(n=null,m&&g('"/"')),n!==null){q=[];for(t=s();t!==null;)q.push(t),t=s();q!==null?(t=ca(),t!==null?i=[i,n,q,t]:(i=null,a=j)):(i=null,a=j)}else i=null,a=j;else i=null,a=j;j=i!==null?i:null}for(;j!==null;){k.push(j);j=a;i=[];for(n=s();n!==null;)i.push(n),n=s();if(i!==null)if(b.substr(a,1)==="*"?(n="*",a+=1):(n=null,m&&g('"*"')),
n!==null){q=[];for(t=s();t!==null;)q.push(t),t=s();q!==null?(t=ca(),t!==null?i=[i,n,q,t]:(i=null,a=j)):(i=null,a=j)}else i=null,a=j;else i=null,a=j;if(i!==null)j=i;else{j=a;i=[];for(n=s();n!==null;)i.push(n),n=s();if(i!==null)if(b.substr(a,1)==="/"?(n="/",a+=1):(n=null,m&&g('"/"')),n!==null){q=[];for(t=s();t!==null;)q.push(t),t=s();q!==null?(t=ca(),t!==null?i=[i,n,q,t]:(i=null,a=j)):(i=null,a=j)}else i=null,a=j;else i=null,a=j;j=i!==null?i:null}}k!==null?e=[e,k]:(e=null,a=f)}else e=null,a=f;f=e!==
null?function(a,b){if(b.length===0)return a;var c={token:"expression",expressionType:"multiplicativeexpression"};c.factor=a;c.factors=[];for(var e=0;e<b.length;e++){var f=b[e],g={};g.operator=f[1];g.expression=f[3];c.factors.push(g)}return c}(e[0],e[1]):null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[102] MultiplicativeExpression");z[c]={nextPos:a,result:f};return f}function ca(){var c="UnaryExpression@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a;if(b.substr(a,1)==="!"){var e=
"!";a+=1}else e=null,m&&g('"!"');if(e!==null){for(var k=[],j=s();j!==null;)k.push(j),j=s();k!==null?(j=Ia(),j!==null?e=[e,k,j]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f;f=e!==null?function(a){var b={token:"expression",expressionType:"unaryexpression",unaryexpression:"!"};b.expression=a;return b}(e[2]):null;f===null&&(f=null,a=h);if(f!==null)h=f;else{f=h=a;b.substr(a,1)==="+"?(e="+",a+=1):(e=null,m&&g('"+"'));if(e!==null){k=[];for(j=s();j!==null;)k.push(j),j=s();k!==null?(j=Ia(),j!==null?e=[e,k,j]:
(e=null,a=f)):(e=null,a=f)}else e=null,a=f;f=e!==null?function(a){var b={token:"expression",expressionType:"unaryexpression",unaryexpression:"+"};b.expression=a;return b}(e[2]):null;f===null&&(f=null,a=h);if(f!==null)h=f;else{f=h=a;b.substr(a,1)==="-"?(e="-",a+=1):(e=null,m&&g('"-"'));if(e!==null){k=[];for(j=s();j!==null;)k.push(j),j=s();k!==null?(j=Ia(),j!==null?e=[e,k,j]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f;f=e!==null?function(a){var b={token:"expression",expressionType:"unaryexpression",
unaryexpression:"-"};b.expression=a;return b}(e[2]):null;f===null&&(f=null,a=h);f!==null?h=f:(h=Ia(),h=h!==null?h:null)}}(m=d)&&h===null&&g("[103] UnaryExpression");z[c]={nextPos:a,result:h};return h}function Ia(){var b="PrimaryExpression@"+a,c=z[b];if(c)return a=c.nextPos,c.result;c=m;m=!1;var d=Ma();if(d===null&&(d=La(),d===null&&(d=cc(),d===null))){var d=a,f=Na(),f=f!==null?function(a){var b={token:"expression",expressionType:"atomic",primaryexpression:"rdfliteral"};b.value=a;return b}(f):null;
f===null&&(f=null,a=d);f!==null?d=f:(d=a,f=Oa(),f=f!==null?function(a){var b={token:"expression",expressionType:"atomic",primaryexpression:"numericliteral"};b.value=a;return b}(f):null,f===null&&(f=null,a=d),f!==null?d=f:(d=a,f=Pa(),f=f!==null?function(a){var b={token:"expression",expressionType:"atomic",primaryexpression:"booleanliteral"};b.value=a;return b}(f):null,f===null&&(f=null,a=d),f!==null?d=f:(d=dc(),d===null&&(d=a,f=V(),f=f!==null?function(a){var b={token:"expression",expressionType:"atomic",
primaryexpression:"var"};b.value=a;return b}(f):null,f===null&&(f=null,a=d),d=f!==null?f:null))))}(m=c)&&d===null&&g("[104] PrimaryExpression");z[b]={nextPos:a,result:d};return d}function Ma(){var c="BrackettedExpression@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a;if(b.substr(a,1)==="("){var e="(";a+=1}else e=null,m&&g('"("');if(e!==null){for(var j=[],k=s();k!==null;)j.push(k),k=s();if(j!==null)if(k=N(),k!==null){for(var i=[],n=s();n!==null;)i.push(n),n=s();i!==null?(b.substr(a,
1)===")"?(n=")",a+=1):(n=null,m&&g('")"')),n!==null?e=[e,j,k,i,n]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f;f=e!==null?e[2]:null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[105] BrackettedExpression");z[c]={nextPos:a,result:f};return f}function La(){var c="BuiltInCall@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a;if(b.substr(a,1)==="S"){var e="S";a+=1}else e=null,m&&g('"S"');e===null&&(b.substr(a,1)==="s"?(e="s",a+=1):(e=null,m&&g('"s"')),e=e!==
null?e:null);if(e!==null){if(b.substr(a,1)==="T"){var j="T";a+=1}else j=null,m&&g('"T"');j===null&&(b.substr(a,1)==="t"?(j="t",a+=1):(j=null,m&&g('"t"')),j=j!==null?j:null);if(j!==null){if(b.substr(a,1)==="R"){var k="R";a+=1}else k=null,m&&g('"R"');k===null&&(b.substr(a,1)==="r"?(k="r",a+=1):(k=null,m&&g('"r"')),k=k!==null?k:null);if(k!==null){for(var i=[],n=s();n!==null;)i.push(n),n=s();if(i!==null)if(b.substr(a,1)==="("?(n="(",a+=1):(n=null,m&&g('"("')),n!==null){for(var q=[],t=s();t!==null;)q.push(t),
t=s();if(q!==null)if(t=N(),t!==null){for(var r=[],w=s();w!==null;)r.push(w),w=s();r!==null?(b.substr(a,1)===")"?(w=")",a+=1):(w=null,m&&g('")"')),w!==null?e=[e,j,k,i,n,q,t,r,w]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;f=e!==null?function(a){var b={token:"expression",expressionType:"builtincall",builtincall:"str"};b.args=[a];return b}(e[6]):null;f===null&&(f=null,a=h);if(f!==null)h=f;else{f=h=a;b.substr(a,
1)==="L"?(e="L",a+=1):(e=null,m&&g('"L"'));e===null&&(b.substr(a,1)==="l"?(e="l",a+=1):(e=null,m&&g('"l"')),e=e!==null?e:null);if(e!==null)if(b.substr(a,1)==="A"?(j="A",a+=1):(j=null,m&&g('"A"')),j===null&&(b.substr(a,1)==="a"?(j="a",a+=1):(j=null,m&&g('"a"')),j=j!==null?j:null),j!==null)if(b.substr(a,1)==="N"?(k="N",a+=1):(k=null,m&&g('"N"')),k===null&&(b.substr(a,1)==="n"?(k="n",a+=1):(k=null,m&&g('"n"')),k=k!==null?k:null),k!==null)if(b.substr(a,1)==="G"?(i="G",a+=1):(i=null,m&&g('"G"')),i===null&&
(b.substr(a,1)==="g"?(i="g",a+=1):(i=null,m&&g('"g"')),i=i!==null?i:null),i!==null){n=[];for(q=s();q!==null;)n.push(q),q=s();if(n!==null)if(b.substr(a,1)==="("?(q="(",a+=1):(q=null,m&&g('"("')),q!==null){t=[];for(r=s();r!==null;)t.push(r),r=s();if(t!==null)if(r=N(),r!==null){for(var w=[],x=s();x!==null;)w.push(x),x=s();w!==null?(b.substr(a,1)===")"?(x=")",a+=1):(x=null,m&&g('")"')),x!==null?e=[e,j,k,i,n,q,t,r,w,x]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,
a=f}else e=null,a=f;else e=null,a=f;else e=null,a=f;else e=null,a=f;f=e!==null?function(a){var b={token:"expression",expressionType:"builtincall",builtincall:"lang"};b.args=[a];return b}(e[7]):null;f===null&&(f=null,a=h);if(f!==null)h=f;else{f=h=a;b.substr(a,11)==="LANGMATCHES"?(e="LANGMATCHES",a+=11):(e=null,m&&g('"LANGMATCHES"'));if(e!==null){j=[];for(k=s();k!==null;)j.push(k),k=s();if(j!==null)if(b.substr(a,1)==="("?(k="(",a+=1):(k=null,m&&g('"("')),k!==null){i=[];for(n=s();n!==null;)i.push(n),
n=s();if(i!==null)if(n=N(),n!==null){q=[];for(t=s();t!==null;)q.push(t),t=s();if(q!==null)if(b.substr(a,1)===","?(t=",",a+=1):(t=null,m&&g('","')),t!==null){r=[];for(w=s();w!==null;)r.push(w),w=s();if(r!==null)if(w=N(),w!==null){for(var x=[],y=s();y!==null;)x.push(y),y=s();x!==null?(b.substr(a,1)===")"?(y=")",a+=1):(y=null,m&&g('")"')),y!==null?e=[e,j,k,i,n,q,t,r,w,x,y]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=
null,a=f;else e=null,a=f}else e=null,a=f;f=e!==null?function(a,b){var c={token:"expression",expressionType:"builtincall",builtincall:"langmatches"};c.args=[a,b];return c}(e[4],e[8]):null;f===null&&(f=null,a=h);if(f!==null)h=f;else{f=h=a;b.substr(a,1)==="D"?(e="D",a+=1):(e=null,m&&g('"D"'));e===null&&(b.substr(a,1)==="d"?(e="d",a+=1):(e=null,m&&g('"d"')),e=e!==null?e:null);if(e!==null)if(b.substr(a,1)==="A"?(j="A",a+=1):(j=null,m&&g('"A"')),j===null&&(b.substr(a,1)==="a"?(j="a",a+=1):(j=null,m&&g('"a"')),
j=j!==null?j:null),j!==null)if(b.substr(a,1)==="T"?(k="T",a+=1):(k=null,m&&g('"T"')),k===null&&(b.substr(a,1)==="t"?(k="t",a+=1):(k=null,m&&g('"t"')),k=k!==null?k:null),k!==null)if(b.substr(a,1)==="A"?(i="A",a+=1):(i=null,m&&g('"A"')),i===null&&(b.substr(a,1)==="a"?(i="a",a+=1):(i=null,m&&g('"a"')),i=i!==null?i:null),i!==null)if(b.substr(a,1)==="T"?(n="T",a+=1):(n=null,m&&g('"T"')),n===null&&(b.substr(a,1)==="t"?(n="t",a+=1):(n=null,m&&g('"t"')),n=n!==null?n:null),n!==null)if(b.substr(a,1)==="Y"?
(q="Y",a+=1):(q=null,m&&g('"Y"')),q===null&&(b.substr(a,1)==="y"?(q="y",a+=1):(q=null,m&&g('"y"')),q=q!==null?q:null),q!==null)if(b.substr(a,1)==="P"?(t="P",a+=1):(t=null,m&&g('"P"')),t===null&&(b.substr(a,1)==="p"?(t="p",a+=1):(t=null,m&&g('"p"')),t=t!==null?t:null),t!==null)if(b.substr(a,1)==="E"?(r="E",a+=1):(r=null,m&&g('"E"')),r===null&&(b.substr(a,1)==="e"?(r="e",a+=1):(r=null,m&&g('"e"')),r=r!==null?r:null),r!==null){w=[];for(x=s();x!==null;)w.push(x),x=s();if(w!==null)if(b.substr(a,1)==="("?
(x="(",a+=1):(x=null,m&&g('"("')),x!==null){for(var y=[],C=s();C!==null;)y.push(C),C=s();if(y!==null)if(C=N(),C!==null){for(var B=[],D=s();D!==null;)B.push(D),D=s();B!==null?(b.substr(a,1)===")"?(D=")",a+=1):(D=null,m&&g('")"')),D!==null?e=[e,j,k,i,n,q,t,r,w,x,y,C,B,D]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f;else e=null,a=f;else e=null,a=f;else e=null,a=f;else e=null,a=f;else e=null,a=f;else e=null,a=f;f=e!==null?function(a){var b=
{token:"expression",expressionType:"builtincall",builtincall:"datatype"};b.args=[a];return b}(e[11]):null;f===null&&(f=null,a=h);if(f!==null)h=f;else{f=h=a;b.substr(a,5)==="BOUND"?(e="BOUND",a+=5):(e=null,m&&g('"BOUND"'));if(e!==null){j=[];for(k=s();k!==null;)j.push(k),k=s();if(j!==null)if(b.substr(a,1)==="("?(k="(",a+=1):(k=null,m&&g('"("')),k!==null){i=[];for(n=s();n!==null;)i.push(n),n=s();if(i!==null)if(n=V(),n!==null){q=[];for(t=s();t!==null;)q.push(t),t=s();q!==null?(b.substr(a,1)===")"?(t=
")",a+=1):(t=null,m&&g('")"')),t!==null?e=[e,j,k,i,n,q,t]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f;f=e!==null?function(a){var b={token:"expression",expressionType:"builtincall",builtincall:"bound"};b.args=[a];return b}(e[4]):null;f===null&&(f=null,a=h);if(f!==null)h=f;else{f=h=a;b.substr(a,3)==="IRI"?(e="IRI",a+=3):(e=null,m&&g('"IRI"'));if(e!==null){j=[];for(k=s();k!==null;)j.push(k),k=s();if(j!==null)if(b.substr(a,1)==="("?(k="(",
a+=1):(k=null,m&&g('"("')),k!==null){i=[];for(n=s();n!==null;)i.push(n),n=s();if(i!==null)if(n=N(),n!==null){q=[];for(t=s();t!==null;)q.push(t),t=s();q!==null?(b.substr(a,1)===")"?(t=")",a+=1):(t=null,m&&g('")"')),t!==null?e=[e,j,k,i,n,q,t]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f;f=e!==null?function(a){var b={token:"expression",expressionType:"builtincall",builtincall:"iri"};b.args=[a];return b}(e[4]):null;f===null&&(f=null,a=h);if(f!==
null)h=f;else{f=h=a;b.substr(a,3)==="URI"?(e="URI",a+=3):(e=null,m&&g('"URI"'));if(e!==null){j=[];for(k=s();k!==null;)j.push(k),k=s();if(j!==null)if(b.substr(a,1)==="("?(k="(",a+=1):(k=null,m&&g('"("')),k!==null){i=[];for(n=s();n!==null;)i.push(n),n=s();if(i!==null)if(n=N(),n!==null){q=[];for(t=s();t!==null;)q.push(t),t=s();q!==null?(b.substr(a,1)===")"?(t=")",a+=1):(t=null,m&&g('")"')),t!==null?e=[e,j,k,i,n,q,t]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,
a=f}else e=null,a=f;f=e!==null?function(a){var b={token:"expression",expressionType:"builtincall",builtincall:"uri"};b.args=[a];return b}(e[4]):null;f===null&&(f=null,a=h);if(f!==null)h=f;else{f=h=a;b.substr(a,5)==="BNODE"?(e="BNODE",a+=5):(e=null,m&&g('"BNODE"'));if(e!==null){j=[];for(k=s();k!==null;)j.push(k),k=s();if(j!==null){k=a;b.substr(a,1)==="("?(i="(",a+=1):(i=null,m&&g('"("'));if(i!==null){n=[];for(q=s();q!==null;)n.push(q),q=s();if(n!==null)if(q=N(),q!==null){t=[];for(r=s();r!==null;)t.push(r),
r=s();t!==null?(b.substr(a,1)===")"?(r=")",a+=1):(r=null,m&&g('")"')),r!==null?i=[i,n,q,t,r]:(i=null,a=k)):(i=null,a=k)}else i=null,a=k;else i=null,a=k}else i=null,a=k;i!==null?k=i:(k=ma(),k=k!==null?k:null);k!==null?e=[e,j,k]:(e=null,a=f)}else e=null,a=f}else e=null,a=f;f=e!==null?function(a){var b={token:"expression",expressionType:"builtincall",builtincall:"bnode"};b.args=a.length===5?[a[2]]:null;return b}(e[2]):null;f===null&&(f=null,a=h);if(f!==null)h=f;else{f=h=a;b.substr(a,8)==="COALESCE"?
(e="COALESCE",a+=8):(e=null,m&&g('"COALESCE"'));if(e!==null){j=[];for(k=s();k!==null;)j.push(k),k=s();j!==null?(k=Sb(),k!==null?e=[e,j,k]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f;f=e!==null?function(a){var b={token:"expression",expressionType:"builtincall",builtincall:"coalesce"};b.args=a;return b}(e[2]):null;f===null&&(f=null,a=h);if(f!==null)h=f;else{f=h=a;b.substr(a,2)==="IF"?(e="IF",a+=2):(e=null,m&&g('"IF"'));if(e!==null){j=[];for(k=s();k!==null;)j.push(k),k=s();if(j!==null)if(b.substr(a,1)===
"("?(k="(",a+=1):(k=null,m&&g('"("')),k!==null){i=[];for(n=s();n!==null;)i.push(n),n=s();if(i!==null)if(n=N(),n!==null){q=[];for(t=s();t!==null;)q.push(t),t=s();if(q!==null)if(b.substr(a,1)===","?(t=",",a+=1):(t=null,m&&g('","')),t!==null){r=[];for(w=s();w!==null;)r.push(w),w=s();if(r!==null)if(w=N(),w!==null){x=[];for(y=s();y!==null;)x.push(y),y=s();if(x!==null)if(b.substr(a,1)===","?(y=",",a+=1):(y=null,m&&g('","')),y!==null){C=[];for(B=s();B!==null;)C.push(B),B=s();if(C!==null)if(B=N(),B!==null){for(var D=
[],G=s();G!==null;)D.push(G),G=s();D!==null?(b.substr(a,1)===")"?(G=")",a+=1):(G=null,m&&g('")"')),G!==null?e=[e,j,k,i,n,q,t,r,w,x,y,C,B,D,G]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f;f=e!==null?function(a,b,c){var e={token:"expression",expressionType:"builtincall",builtincall:"if"};e.args=[a,b,c];return e}(e[4],
e[8],e[12]):null;f===null&&(f=null,a=h);if(f!==null)h=f;else{f=h=a;b.substr(a,9)==="ISLITERAL"?(e="ISLITERAL",a+=9):(e=null,m&&g('"ISLITERAL"'));if(e!==null){j=[];for(k=s();k!==null;)j.push(k),k=s();if(j!==null)if(b.substr(a,1)==="("?(k="(",a+=1):(k=null,m&&g('"("')),k!==null){i=[];for(n=s();n!==null;)i.push(n),n=s();if(i!==null)if(n=N(),n!==null){q=[];for(t=s();t!==null;)q.push(t),t=s();q!==null?(b.substr(a,1)===")"?(t=")",a+=1):(t=null,m&&g('")"')),t!==null?e=[e,j,k,i,n,q,t]:(e=null,a=f)):(e=null,
a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f;f=e!==null?function(a){var b={token:"expression",expressionType:"builtincall",builtincall:"isliteral"};b.args=[a];return b}(e[4]):null;f===null&&(f=null,a=h);if(f!==null)h=f;else{f=h=a;b.substr(a,7)==="ISBLANK"?(e="ISBLANK",a+=7):(e=null,m&&g('"ISBLANK"'));if(e!==null){j=[];for(k=s();k!==null;)j.push(k),k=s();if(j!==null)if(b.substr(a,1)==="("?(k="(",a+=1):(k=null,m&&g('"("')),k!==null){i=[];for(n=s();n!==null;)i.push(n),
n=s();if(i!==null)if(n=N(),n!==null){q=[];for(t=s();t!==null;)q.push(t),t=s();q!==null?(b.substr(a,1)===")"?(t=")",a+=1):(t=null,m&&g('")"')),t!==null?e=[e,j,k,i,n,q,t]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f;f=e!==null?function(a){var b={token:"expression",expressionType:"builtincall",builtincall:"isblank"};b.args=[a];return b}(e[4]):null;f===null&&(f=null,a=h);if(f!==null)h=f;else{f=h=a;b.substr(a,8)==="SAMETERM"?(e="SAMETERM",a+=
8):(e=null,m&&g('"SAMETERM"'));if(e!==null){j=[];for(k=s();k!==null;)j.push(k),k=s();if(j!==null)if(b.substr(a,1)==="("?(k="(",a+=1):(k=null,m&&g('"("')),k!==null){i=[];for(n=s();n!==null;)i.push(n),n=s();if(i!==null)if(n=N(),n!==null){q=[];for(t=s();t!==null;)q.push(t),t=s();if(q!==null)if(b.substr(a,1)===","?(t=",",a+=1):(t=null,m&&g('","')),t!==null){r=[];for(w=s();w!==null;)r.push(w),w=s();if(r!==null)if(w=N(),w!==null){x=[];for(y=s();y!==null;)x.push(y),y=s();x!==null?(b.substr(a,1)===")"?(y=
")",a+=1):(y=null,m&&g('")"')),y!==null?e=[e,j,k,i,n,q,t,r,w,x,y]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f;f=e!==null?function(a,b){var c={token:"expression",expressionType:"builtincall",builtincall:"sameterm"};c.args=[a,b];return c}(e[4],e[8]):null;f===null&&(f=null,a=h);if(f!==null)h=f;else{f=h=a;b.substr(a,1)==="I"?(e="I",a+=1):(e=null,m&&g('"I"'));e===null&&(b.substr(a,
1)==="i"?(e="i",a+=1):(e=null,m&&g('"i"')),e=e!==null?e:null);if(e!==null)if(b.substr(a,1)==="S"?(j="S",a+=1):(j=null,m&&g('"S"')),j===null&&(b.substr(a,1)==="s"?(j="s",a+=1):(j=null,m&&g('"s"')),j=j!==null?j:null),j!==null)if(b.substr(a,1)==="U"?(k="U",a+=1):(k=null,m&&g('"U"')),k===null&&(b.substr(a,1)==="u"?(k="u",a+=1):(k=null,m&&g('"u"')),k=k!==null?k:null),k!==null)if(b.substr(a,1)==="R"?(i="R",a+=1):(i=null,m&&g('"R"')),i===null&&(b.substr(a,1)==="r"?(i="r",a+=1):(i=null,m&&g('"r"')),i=i!==
null?i:null),i!==null)if(b.substr(a,1)==="I"?(n="I",a+=1):(n=null,m&&g('"I"')),n===null&&(b.substr(a,1)==="i"?(n="i",a+=1):(n=null,m&&g('"i"')),n=n!==null?n:null),n!==null){q=[];for(t=s();t!==null;)q.push(t),t=s();if(q!==null)if(b.substr(a,1)==="("?(t="(",a+=1):(t=null,m&&g('"("')),t!==null){r=[];for(w=s();w!==null;)r.push(w),w=s();if(r!==null)if(w=N(),w!==null){x=[];for(y=s();y!==null;)x.push(y),y=s();x!==null?(b.substr(a,1)===")"?(y=")",a+=1):(y=null,m&&g('")"')),y!==null?e=[e,j,k,i,n,q,t,r,w,x,
y]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f;else e=null,a=f;else e=null,a=f;else e=null,a=f;f=e!==null?function(a){var b={token:"expression",expressionType:"builtincall",builtincall:"isuri"};b.args=[a];return b}(e[8]):null;f===null&&(f=null,a=h);if(f!==null)h=f;else{f=h=a;b.substr(a,1)==="I"?(e="I",a+=1):(e=null,m&&g('"I"'));e===null&&(b.substr(a,1)==="i"?(e="i",a+=1):(e=null,m&&g('"i"')),e=e!==null?e:null);if(e!==null)if(b.substr(a,
1)==="S"?(j="S",a+=1):(j=null,m&&g('"S"')),j===null&&(b.substr(a,1)==="s"?(j="s",a+=1):(j=null,m&&g('"s"')),j=j!==null?j:null),j!==null)if(b.substr(a,1)==="I"?(k="I",a+=1):(k=null,m&&g('"I"')),k===null&&(b.substr(a,1)==="i"?(k="i",a+=1):(k=null,m&&g('"i"')),k=k!==null?k:null),k!==null)if(b.substr(a,1)==="R"?(i="R",a+=1):(i=null,m&&g('"R"')),i===null&&(b.substr(a,1)==="r"?(i="r",a+=1):(i=null,m&&g('"r"')),i=i!==null?i:null),i!==null)if(b.substr(a,1)==="I"?(n="I",a+=1):(n=null,m&&g('"I"')),n===null&&
(b.substr(a,1)==="i"?(n="i",a+=1):(n=null,m&&g('"i"')),n=n!==null?n:null),n!==null){q=[];for(t=s();t!==null;)q.push(t),t=s();if(q!==null)if(b.substr(a,1)==="("?(t="(",a+=1):(t=null,m&&g('"("')),t!==null){r=[];for(w=s();w!==null;)r.push(w),w=s();if(r!==null)if(w=N(),w!==null){x=[];for(y=s();y!==null;)x.push(y),y=s();x!==null?(b.substr(a,1)===")"?(y=")",a+=1):(y=null,m&&g('")"')),y!==null?e=[e,j,k,i,n,q,t,r,w,x,y]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,
a=f}else e=null,a=f;else e=null,a=f;else e=null,a=f;else e=null,a=f;else e=null,a=f;f=e!==null?function(a){var b={token:"expression",expressionType:"builtincall",builtincall:"isuri"};b.args=[a];return b}(e[8]):null;f===null&&(f=null,a=h);f!==null?h=f:(h=ec(),h===null&&(h=fc(),h===null&&(h=gc(),h=h!==null?h:null)))}}}}}}}}}}}}}}(m=d)&&h===null&&g("[106] BuiltInCall");z[c]={nextPos:a,result:h};return h}function ec(){var c="RegexExpression@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var k=a,
f=a;if(b.substr(a,1)==="R"){var e="R";a+=1}else e=null,m&&g('"R"');e===null&&(b.substr(a,1)==="r"?(e="r",a+=1):(e=null,m&&g('"r"')),e=e!==null?e:null);if(e!==null){if(b.substr(a,1)==="E"){var j="E";a+=1}else j=null,m&&g('"E"');j===null&&(b.substr(a,1)==="e"?(j="e",a+=1):(j=null,m&&g('"e"')),j=j!==null?j:null);if(j!==null){if(b.substr(a,1)==="G"){var h="G";a+=1}else h=null,m&&g('"G"');h===null&&(b.substr(a,1)==="g"?(h="g",a+=1):(h=null,m&&g('"g"')),h=h!==null?h:null);if(h!==null){if(b.substr(a,1)===
"E"){var i="E";a+=1}else i=null,m&&g('"E"');i===null&&(b.substr(a,1)==="e"?(i="e",a+=1):(i=null,m&&g('"e"')),i=i!==null?i:null);if(i!==null){if(b.substr(a,1)==="X"){var n="X";a+=1}else n=null,m&&g('"X"');n===null&&(b.substr(a,1)==="x"?(n="x",a+=1):(n=null,m&&g('"x"')),n=n!==null?n:null);if(n!==null){for(var q=[],t=s();t!==null;)q.push(t),t=s();if(q!==null)if(b.substr(a,1)==="("?(t="(",a+=1):(t=null,m&&g('"("')),t!==null){for(var r=[],w=s();w!==null;)r.push(w),w=s();if(r!==null)if(w=N(),w!==null){for(var x=
[],y=s();y!==null;)x.push(y),y=s();if(x!==null)if(b.substr(a,1)===","?(y=",",a+=1):(y=null,m&&g('","')),y!==null){for(var C=[],B=s();B!==null;)C.push(B),B=s();if(C!==null)if(B=N(),B!==null){for(var D=[],G=s();G!==null;)D.push(G),G=s();if(D!==null){G=a;if(b.substr(a,1)===","){var E=",";a+=1}else E=null,m&&g('","');if(E!==null){for(var F=[],R=s();R!==null;)F.push(R),R=s();F!==null?(R=N(),R!==null?E=[E,F,R]:(E=null,a=G)):(E=null,a=G)}else E=null,a=G;G=E!==null?E:"";if(G!==null){E=[];for(F=s();F!==null;)E.push(F),
F=s();E!==null?(b.substr(a,1)===")"?(F=")",a+=1):(F=null,m&&g('")"')),F!==null?e=[e,j,h,i,n,q,t,r,w,x,y,C,B,D,G,E,F]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f}else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;f=e!==null?function(a,b,c){var e={token:"expression",expressionType:"regex"};e.text=a;e.pattern=b;e.flags=c[2];return e}(e[8],
e[12],e[14]):null;f===null&&(f=null,a=k);(m=d)&&f===null&&g("[107] RegexExpression");z[c]={nextPos:a,result:f};return f}function fc(){var c="ExistsFunc@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var k=a,f=a;if(b.substr(a,1)==="E"){var e="E";a+=1}else e=null,m&&g('"E"');e===null&&(b.substr(a,1)==="e"?(e="e",a+=1):(e=null,m&&g('"e"')),e=e!==null?e:null);if(e!==null){if(b.substr(a,1)==="X"){var j="X";a+=1}else j=null,m&&g('"X"');j===null&&(b.substr(a,1)==="x"?(j="x",a+=1):(j=null,m&&g('"x"')),
j=j!==null?j:null);if(j!==null){if(b.substr(a,1)==="I"){var h="I";a+=1}else h=null,m&&g('"I"');h===null&&(b.substr(a,1)==="i"?(h="i",a+=1):(h=null,m&&g('"i"')),h=h!==null?h:null);if(h!==null){if(b.substr(a,1)==="S"){var i="S";a+=1}else i=null,m&&g('"S"');i===null&&(b.substr(a,1)==="s"?(i="s",a+=1):(i=null,m&&g('"s"')),i=i!==null?i:null);if(i!==null){if(b.substr(a,1)==="T"){var n="T";a+=1}else n=null,m&&g('"T"');n===null&&(b.substr(a,1)==="t"?(n="t",a+=1):(n=null,m&&g('"t"')),n=n!==null?n:null);if(n!==
null){if(b.substr(a,1)==="S"){var q="S";a+=1}else q=null,m&&g('"S"');q===null&&(b.substr(a,1)==="s"?(q="s",a+=1):(q=null,m&&g('"s"')),q=q!==null?q:null);if(q!==null){for(var t=[],r=s();r!==null;)t.push(r),r=s();t!==null?(r=$(),r!==null?e=[e,j,h,i,n,q,t,r]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;f=e!==null?function(a){var b={token:"expression",expressionType:"builtincall",builtincall:"exists"};b.args=[a];return b}(e[7]):
null;f===null&&(f=null,a=k);(m=d)&&f===null&&g("[108] ExistsFunc");z[c]={nextPos:a,result:f};return f}function gc(){var c="NotExistsFunc@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var k=a,f=a;if(b.substr(a,1)==="N"){var e="N";a+=1}else e=null,m&&g('"N"');e===null&&(b.substr(a,1)==="n"?(e="n",a+=1):(e=null,m&&g('"n"')),e=e!==null?e:null);if(e!==null){if(b.substr(a,1)==="O"){var j="O";a+=1}else j=null,m&&g('"O"');j===null&&(b.substr(a,1)==="o"?(j="o",a+=1):(j=null,m&&g('"o"')),j=j!==null?
j:null);if(j!==null){if(b.substr(a,1)==="T"){var h="T";a+=1}else h=null,m&&g('"T"');h===null&&(b.substr(a,1)==="t"?(h="t",a+=1):(h=null,m&&g('"t"')),h=h!==null?h:null);if(h!==null){for(var i=[],n=s();n!==null;)i.push(n),n=s();if(i!==null)if(b.substr(a,1)==="E"?(n="E",a+=1):(n=null,m&&g('"E"')),n===null&&(b.substr(a,1)==="e"?(n="e",a+=1):(n=null,m&&g('"e"')),n=n!==null?n:null),n!==null){if(b.substr(a,1)==="X"){var q="X";a+=1}else q=null,m&&g('"X"');q===null&&(b.substr(a,1)==="x"?(q="x",a+=1):(q=null,
m&&g('"x"')),q=q!==null?q:null);if(q!==null){if(b.substr(a,1)==="I"){var t="I";a+=1}else t=null,m&&g('"I"');t===null&&(b.substr(a,1)==="i"?(t="i",a+=1):(t=null,m&&g('"i"')),t=t!==null?t:null);if(t!==null){if(b.substr(a,1)==="S"){var r="S";a+=1}else r=null,m&&g('"S"');r===null&&(b.substr(a,1)==="s"?(r="s",a+=1):(r=null,m&&g('"s"')),r=r!==null?r:null);if(r!==null){if(b.substr(a,1)==="T"){var w="T";a+=1}else w=null,m&&g('"T"');w===null&&(b.substr(a,1)==="t"?(w="t",a+=1):(w=null,m&&g('"t"')),w=w!==null?
w:null);if(w!==null){if(b.substr(a,1)==="S"){var x="S";a+=1}else x=null,m&&g('"S"');x===null&&(b.substr(a,1)==="s"?(x="s",a+=1):(x=null,m&&g('"s"')),x=x!==null?x:null);if(x!==null){for(var y=[],C=s();C!==null;)y.push(C),C=s();y!==null?(C=$(),C!==null?e=[e,j,h,i,n,q,t,r,w,x,y,C]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;f=e!==null?function(a){var b={token:"expression",
expressionType:"builtincall",builtincall:"notexists"};b.args=[a];return b}(e[11]):null;f===null&&(f=null,a=k);(m=d)&&f===null&&g("[109] NotExistsFunc");z[c]={nextPos:a,result:f};return f}function dc(){var c="Aggregate@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var k=a,f=a;if(b.substr(a,1)==="C"){var e="C";a+=1}else e=null,m&&g('"C"');e===null&&(b.substr(a,1)==="c"?(e="c",a+=1):(e=null,m&&g('"c"')),e=e!==null?e:null);if(e!==null){if(b.substr(a,1)==="O"){var j="O";a+=1}else j=null,m&&g('"O"');
j===null&&(b.substr(a,1)==="o"?(j="o",a+=1):(j=null,m&&g('"o"')),j=j!==null?j:null);if(j!==null){if(b.substr(a,1)==="U"){var h="U";a+=1}else h=null,m&&g('"U"');h===null&&(b.substr(a,1)==="u"?(h="u",a+=1):(h=null,m&&g('"u"')),h=h!==null?h:null);if(h!==null){if(b.substr(a,1)==="N"){var i="N";a+=1}else i=null,m&&g('"N"');i===null&&(b.substr(a,1)==="n"?(i="n",a+=1):(i=null,m&&g('"n"')),i=i!==null?i:null);if(i!==null){if(b.substr(a,1)==="T"){var n="T";a+=1}else n=null,m&&g('"T"');n===null&&(b.substr(a,
1)==="t"?(n="t",a+=1):(n=null,m&&g('"t"')),n=n!==null?n:null);if(n!==null){for(var q=[],t=s();t!==null;)q.push(t),t=s();if(q!==null)if(b.substr(a,1)==="("?(t="(",a+=1):(t=null,m&&g('"("')),t!==null){for(var r=[],w=s();w!==null;)r.push(w),w=s();if(r!==null){w=a;if(b.substr(a,1)==="D"){var x="D";a+=1}else x=null,m&&g('"D"');x===null&&(b.substr(a,1)==="d"?(x="d",a+=1):(x=null,m&&g('"d"')),x=x!==null?x:null);if(x!==null){if(b.substr(a,1)==="I"){var y="I";a+=1}else y=null,m&&g('"I"');y===null&&(b.substr(a,
1)==="i"?(y="i",a+=1):(y=null,m&&g('"i"')),y=y!==null?y:null);if(y!==null){if(b.substr(a,1)==="S"){var C="S";a+=1}else C=null,m&&g('"S"');C===null&&(b.substr(a,1)==="s"?(C="s",a+=1):(C=null,m&&g('"s"')),C=C!==null?C:null);if(C!==null){if(b.substr(a,1)==="T"){var B="T";a+=1}else B=null,m&&g('"T"');B===null&&(b.substr(a,1)==="t"?(B="t",a+=1):(B=null,m&&g('"t"')),B=B!==null?B:null);if(B!==null){if(b.substr(a,1)==="I"){var D="I";a+=1}else D=null,m&&g('"I"');D===null&&(b.substr(a,1)==="i"?(D="i",a+=1):
(D=null,m&&g('"i"')),D=D!==null?D:null);if(D!==null){if(b.substr(a,1)==="N"){var G="N";a+=1}else G=null,m&&g('"N"');G===null&&(b.substr(a,1)==="n"?(G="n",a+=1):(G=null,m&&g('"n"')),G=G!==null?G:null);if(G!==null){if(b.substr(a,1)==="C"){var E="C";a+=1}else E=null,m&&g('"C"');E===null&&(b.substr(a,1)==="c"?(E="c",a+=1):(E=null,m&&g('"c"')),E=E!==null?E:null);if(E!==null){if(b.substr(a,1)==="T"){var F="T";a+=1}else F=null,m&&g('"T"');F===null&&(b.substr(a,1)==="t"?(F="t",a+=1):(F=null,m&&g('"t"')),
F=F!==null?F:null);F!==null?x=[x,y,C,B,D,G,E,F]:(x=null,a=w)}else x=null,a=w}else x=null,a=w}else x=null,a=w}else x=null,a=w}else x=null,a=w}else x=null,a=w}else x=null,a=w;w=x!==null?x:"";if(w!==null){x=[];for(y=s();y!==null;)x.push(y),y=s();if(x!==null)if(b.substr(a,1)==="*"?(y="*",a+=1):(y=null,m&&g('"*"')),y===null&&(y=N(),y=y!==null?y:null),y!==null){C=[];for(B=s();B!==null;)C.push(B),B=s();if(C!==null)if(b.substr(a,1)===")"?(B=")",a+=1):(B=null,m&&g('")"')),B!==null){D=[];for(G=s();G!==null;)D.push(G),
G=s();D!==null?e=[e,j,h,i,n,q,t,r,w,x,y,C,B,D]:(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f}else e=null,a=f;f=e!==null?function(a,b){exp={token:"expression",expressionType:"aggregate",aggregateType:"count"};exp.distinct=a!=""?"DISTINCT":a;exp.expression=b;return exp}(e[8],e[10]):null;f===null&&(f=null,a=k);if(f!==null)k=f;else{f=k=a;b.substr(a,
1)==="S"?(e="S",a+=1):(e=null,m&&g('"S"'));e===null&&(b.substr(a,1)==="s"?(e="s",a+=1):(e=null,m&&g('"s"')),e=e!==null?e:null);if(e!==null)if(b.substr(a,1)==="U"?(j="U",a+=1):(j=null,m&&g('"U"')),j===null&&(b.substr(a,1)==="u"?(j="u",a+=1):(j=null,m&&g('"u"')),j=j!==null?j:null),j!==null)if(b.substr(a,1)==="M"?(h="M",a+=1):(h=null,m&&g('"M"')),h===null&&(b.substr(a,1)==="m"?(h="m",a+=1):(h=null,m&&g('"m"')),h=h!==null?h:null),h!==null){i=[];for(n=s();n!==null;)i.push(n),n=s();if(i!==null)if(b.substr(a,
1)==="("?(n="(",a+=1):(n=null,m&&g('"("')),n!==null){q=[];for(t=s();t!==null;)q.push(t),t=s();if(q!==null)if(t=a,b.substr(a,1)==="D"?(r="D",a+=1):(r=null,m&&g('"D"')),r===null&&(b.substr(a,1)==="d"?(r="d",a+=1):(r=null,m&&g('"d"')),r=r!==null?r:null),r!==null?(b.substr(a,1)==="I"?(w="I",a+=1):(w=null,m&&g('"I"')),w===null&&(b.substr(a,1)==="i"?(w="i",a+=1):(w=null,m&&g('"i"')),w=w!==null?w:null),w!==null?(b.substr(a,1)==="S"?(x="S",a+=1):(x=null,m&&g('"S"')),x===null&&(b.substr(a,1)==="s"?(x="s",
a+=1):(x=null,m&&g('"s"')),x=x!==null?x:null),x!==null?(b.substr(a,1)==="T"?(y="T",a+=1):(y=null,m&&g('"T"')),y===null&&(b.substr(a,1)==="t"?(y="t",a+=1):(y=null,m&&g('"t"')),y=y!==null?y:null),y!==null?(b.substr(a,1)==="I"?(C="I",a+=1):(C=null,m&&g('"I"')),C===null&&(b.substr(a,1)==="i"?(C="i",a+=1):(C=null,m&&g('"i"')),C=C!==null?C:null),C!==null?(b.substr(a,1)==="N"?(B="N",a+=1):(B=null,m&&g('"N"')),B===null&&(b.substr(a,1)==="n"?(B="n",a+=1):(B=null,m&&g('"n"')),B=B!==null?B:null),B!==null?(b.substr(a,
1)==="C"?(D="C",a+=1):(D=null,m&&g('"C"')),D===null&&(b.substr(a,1)==="c"?(D="c",a+=1):(D=null,m&&g('"c"')),D=D!==null?D:null),D!==null?(b.substr(a,1)==="T"?(G="T",a+=1):(G=null,m&&g('"T"')),G===null&&(b.substr(a,1)==="t"?(G="t",a+=1):(G=null,m&&g('"t"')),G=G!==null?G:null),G!==null?r=[r,w,x,y,C,B,D,G]:(r=null,a=t)):(r=null,a=t)):(r=null,a=t)):(r=null,a=t)):(r=null,a=t)):(r=null,a=t)):(r=null,a=t)):(r=null,a=t),t=r!==null?r:"",t!==null){r=[];for(w=s();w!==null;)r.push(w),w=s();if(r!==null)if(w=N(),
w!==null){x=[];for(y=s();y!==null;)x.push(y),y=s();if(x!==null)if(b.substr(a,1)===")"?(y=")",a+=1):(y=null,m&&g('")"')),y!==null){C=[];for(B=s();B!==null;)C.push(B),B=s();C!==null?e=[e,j,h,i,n,q,t,r,w,x,y,C]:(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f;else e=null,a=f;f=e!==null?function(a,b){exp={token:"expression",expressionType:"aggregate",aggregateType:"sum"};exp.distinct=
a!=""?"DISTINCT":a;exp.expression=b;return exp}(e[6],e[8]):null;f===null&&(f=null,a=k);if(f!==null)k=f;else{f=k=a;b.substr(a,1)==="M"?(e="M",a+=1):(e=null,m&&g('"M"'));e===null&&(b.substr(a,1)==="m"?(e="m",a+=1):(e=null,m&&g('"m"')),e=e!==null?e:null);if(e!==null)if(b.substr(a,1)==="I"?(j="I",a+=1):(j=null,m&&g('"I"')),j===null&&(b.substr(a,1)==="i"?(j="i",a+=1):(j=null,m&&g('"i"')),j=j!==null?j:null),j!==null)if(b.substr(a,1)==="N"?(h="N",a+=1):(h=null,m&&g('"N"')),h===null&&(b.substr(a,1)==="n"?
(h="n",a+=1):(h=null,m&&g('"n"')),h=h!==null?h:null),h!==null){i=[];for(n=s();n!==null;)i.push(n),n=s();if(i!==null)if(b.substr(a,1)==="("?(n="(",a+=1):(n=null,m&&g('"("')),n!==null){q=[];for(t=s();t!==null;)q.push(t),t=s();if(q!==null)if(t=a,b.substr(a,1)==="D"?(r="D",a+=1):(r=null,m&&g('"D"')),r===null&&(b.substr(a,1)==="d"?(r="d",a+=1):(r=null,m&&g('"d"')),r=r!==null?r:null),r!==null?(b.substr(a,1)==="I"?(w="I",a+=1):(w=null,m&&g('"I"')),w===null&&(b.substr(a,1)==="i"?(w="i",a+=1):(w=null,m&&g('"i"')),
w=w!==null?w:null),w!==null?(b.substr(a,1)==="S"?(x="S",a+=1):(x=null,m&&g('"S"')),x===null&&(b.substr(a,1)==="s"?(x="s",a+=1):(x=null,m&&g('"s"')),x=x!==null?x:null),x!==null?(b.substr(a,1)==="T"?(y="T",a+=1):(y=null,m&&g('"T"')),y===null&&(b.substr(a,1)==="t"?(y="t",a+=1):(y=null,m&&g('"t"')),y=y!==null?y:null),y!==null?(b.substr(a,1)==="I"?(C="I",a+=1):(C=null,m&&g('"I"')),C===null&&(b.substr(a,1)==="i"?(C="i",a+=1):(C=null,m&&g('"i"')),C=C!==null?C:null),C!==null?(b.substr(a,1)==="N"?(B="N",a+=
1):(B=null,m&&g('"N"')),B===null&&(b.substr(a,1)==="n"?(B="n",a+=1):(B=null,m&&g('"n"')),B=B!==null?B:null),B!==null?(b.substr(a,1)==="C"?(D="C",a+=1):(D=null,m&&g('"C"')),D===null&&(b.substr(a,1)==="c"?(D="c",a+=1):(D=null,m&&g('"c"')),D=D!==null?D:null),D!==null?(b.substr(a,1)==="T"?(G="T",a+=1):(G=null,m&&g('"T"')),G===null&&(b.substr(a,1)==="t"?(G="t",a+=1):(G=null,m&&g('"t"')),G=G!==null?G:null),G!==null?r=[r,w,x,y,C,B,D,G]:(r=null,a=t)):(r=null,a=t)):(r=null,a=t)):(r=null,a=t)):(r=null,a=t)):
(r=null,a=t)):(r=null,a=t)):(r=null,a=t),t=r!==null?r:"",t!==null){r=[];for(w=s();w!==null;)r.push(w),w=s();if(r!==null)if(w=N(),w!==null){x=[];for(y=s();y!==null;)x.push(y),y=s();if(x!==null)if(b.substr(a,1)===")"?(y=")",a+=1):(y=null,m&&g('")"')),y!==null){C=[];for(B=s();B!==null;)C.push(B),B=s();C!==null?e=[e,j,h,i,n,q,t,r,w,x,y,C]:(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=
null,a=f;else e=null,a=f;f=e!==null?function(a,b){exp={token:"expression",expressionType:"aggregate",aggregateType:"min"};exp.distinct=a!=""?"DISTINCT":a;exp.expression=b;return exp}(e[6],e[8]):null;f===null&&(f=null,a=k);if(f!==null)k=f;else{f=k=a;b.substr(a,1)==="M"?(e="M",a+=1):(e=null,m&&g('"M"'));e===null&&(b.substr(a,1)==="m"?(e="m",a+=1):(e=null,m&&g('"m"')),e=e!==null?e:null);if(e!==null)if(b.substr(a,1)==="A"?(j="A",a+=1):(j=null,m&&g('"A"')),j===null&&(b.substr(a,1)==="a"?(j="a",a+=1):(j=
null,m&&g('"a"')),j=j!==null?j:null),j!==null)if(b.substr(a,1)==="X"?(h="X",a+=1):(h=null,m&&g('"X"')),h===null&&(b.substr(a,1)==="x"?(h="x",a+=1):(h=null,m&&g('"x"')),h=h!==null?h:null),h!==null){i=[];for(n=s();n!==null;)i.push(n),n=s();if(i!==null)if(b.substr(a,1)==="("?(n="(",a+=1):(n=null,m&&g('"("')),n!==null){q=[];for(t=s();t!==null;)q.push(t),t=s();if(q!==null)if(t=a,b.substr(a,1)==="D"?(r="D",a+=1):(r=null,m&&g('"D"')),r===null&&(b.substr(a,1)==="d"?(r="d",a+=1):(r=null,m&&g('"d"')),r=r!==
null?r:null),r!==null?(b.substr(a,1)==="I"?(w="I",a+=1):(w=null,m&&g('"I"')),w===null&&(b.substr(a,1)==="i"?(w="i",a+=1):(w=null,m&&g('"i"')),w=w!==null?w:null),w!==null?(b.substr(a,1)==="S"?(x="S",a+=1):(x=null,m&&g('"S"')),x===null&&(b.substr(a,1)==="s"?(x="s",a+=1):(x=null,m&&g('"s"')),x=x!==null?x:null),x!==null?(b.substr(a,1)==="T"?(y="T",a+=1):(y=null,m&&g('"T"')),y===null&&(b.substr(a,1)==="t"?(y="t",a+=1):(y=null,m&&g('"t"')),y=y!==null?y:null),y!==null?(b.substr(a,1)==="I"?(C="I",a+=1):(C=
null,m&&g('"I"')),C===null&&(b.substr(a,1)==="i"?(C="i",a+=1):(C=null,m&&g('"i"')),C=C!==null?C:null),C!==null?(b.substr(a,1)==="N"?(B="N",a+=1):(B=null,m&&g('"N"')),B===null&&(b.substr(a,1)==="n"?(B="n",a+=1):(B=null,m&&g('"n"')),B=B!==null?B:null),B!==null?(b.substr(a,1)==="C"?(D="C",a+=1):(D=null,m&&g('"C"')),D===null&&(b.substr(a,1)==="c"?(D="c",a+=1):(D=null,m&&g('"c"')),D=D!==null?D:null),D!==null?(b.substr(a,1)==="T"?(G="T",a+=1):(G=null,m&&g('"T"')),G===null&&(b.substr(a,1)==="t"?(G="t",a+=
1):(G=null,m&&g('"t"')),G=G!==null?G:null),G!==null?r=[r,w,x,y,C,B,D,G]:(r=null,a=t)):(r=null,a=t)):(r=null,a=t)):(r=null,a=t)):(r=null,a=t)):(r=null,a=t)):(r=null,a=t)):(r=null,a=t),t=r!==null?r:"",t!==null){r=[];for(w=s();w!==null;)r.push(w),w=s();if(r!==null)if(w=N(),w!==null){x=[];for(y=s();y!==null;)x.push(y),y=s();if(x!==null)if(b.substr(a,1)===")"?(y=")",a+=1):(y=null,m&&g('")"')),y!==null){C=[];for(B=s();B!==null;)C.push(B),B=s();C!==null?e=[e,j,h,i,n,q,t,r,w,x,y,C]:(e=null,a=f)}else e=null,
a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f;else e=null,a=f;f=e!==null?function(a,b){exp={token:"expression",expressionType:"aggregate",aggregateType:"max"};exp.distinct=a!=""?"DISTINCT":a;exp.expression=b;return exp}(e[6],e[8]):null;f===null&&(f=null,a=k);if(f!==null)k=f;else{f=k=a;b.substr(a,1)==="A"?(e="A",a+=1):(e=null,m&&g('"A"'));e===null&&(b.substr(a,1)==="a"?(e="a",a+=1):(e=null,m&&g('"a"')),
e=e!==null?e:null);if(e!==null)if(b.substr(a,1)==="V"?(j="V",a+=1):(j=null,m&&g('"V"')),j===null&&(b.substr(a,1)==="v"?(j="v",a+=1):(j=null,m&&g('"v"')),j=j!==null?j:null),j!==null)if(b.substr(a,1)==="G"?(h="G",a+=1):(h=null,m&&g('"G"')),h===null&&(b.substr(a,1)==="g"?(h="g",a+=1):(h=null,m&&g('"g"')),h=h!==null?h:null),h!==null){i=[];for(n=s();n!==null;)i.push(n),n=s();if(i!==null)if(b.substr(a,1)==="("?(n="(",a+=1):(n=null,m&&g('"("')),n!==null){q=[];for(t=s();t!==null;)q.push(t),t=s();if(q!==null)if(t=
a,b.substr(a,1)==="D"?(r="D",a+=1):(r=null,m&&g('"D"')),r===null&&(b.substr(a,1)==="d"?(r="d",a+=1):(r=null,m&&g('"d"')),r=r!==null?r:null),r!==null?(b.substr(a,1)==="I"?(w="I",a+=1):(w=null,m&&g('"I"')),w===null&&(b.substr(a,1)==="i"?(w="i",a+=1):(w=null,m&&g('"i"')),w=w!==null?w:null),w!==null?(b.substr(a,1)==="S"?(x="S",a+=1):(x=null,m&&g('"S"')),x===null&&(b.substr(a,1)==="s"?(x="s",a+=1):(x=null,m&&g('"s"')),x=x!==null?x:null),x!==null?(b.substr(a,1)==="T"?(y="T",a+=1):(y=null,m&&g('"T"')),y===
null&&(b.substr(a,1)==="t"?(y="t",a+=1):(y=null,m&&g('"t"')),y=y!==null?y:null),y!==null?(b.substr(a,1)==="I"?(C="I",a+=1):(C=null,m&&g('"I"')),C===null&&(b.substr(a,1)==="i"?(C="i",a+=1):(C=null,m&&g('"i"')),C=C!==null?C:null),C!==null?(b.substr(a,1)==="N"?(B="N",a+=1):(B=null,m&&g('"N"')),B===null&&(b.substr(a,1)==="n"?(B="n",a+=1):(B=null,m&&g('"n"')),B=B!==null?B:null),B!==null?(b.substr(a,1)==="C"?(D="C",a+=1):(D=null,m&&g('"C"')),D===null&&(b.substr(a,1)==="c"?(D="c",a+=1):(D=null,m&&g('"c"')),
D=D!==null?D:null),D!==null?(b.substr(a,1)==="T"?(G="T",a+=1):(G=null,m&&g('"T"')),G===null&&(b.substr(a,1)==="t"?(G="t",a+=1):(G=null,m&&g('"t"')),G=G!==null?G:null),G!==null?r=[r,w,x,y,C,B,D,G]:(r=null,a=t)):(r=null,a=t)):(r=null,a=t)):(r=null,a=t)):(r=null,a=t)):(r=null,a=t)):(r=null,a=t)):(r=null,a=t),t=r!==null?r:"",t!==null){r=[];for(w=s();w!==null;)r.push(w),w=s();if(r!==null)if(w=N(),w!==null){x=[];for(y=s();y!==null;)x.push(y),y=s();if(x!==null)if(b.substr(a,1)===")"?(y=")",a+=1):(y=null,
m&&g('")"')),y!==null){C=[];for(B=s();B!==null;)C.push(B),B=s();C!==null?e=[e,j,h,i,n,q,t,r,w,x,y,C]:(e=null,a=f)}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f}else e=null,a=f;else e=null,a=f;else e=null,a=f;f=e!==null?function(a,b){exp={token:"expression",expressionType:"aggregate",aggregateType:"avg"};exp.distinct=a!=""?"DISTINCT":a;exp.expression=b;return exp}(e[6],e[8]):null;f===null&&(f=null,a=k);k=f!==null?f:null}}}}(m=
d)&&k===null&&g("[110] Aggregate");z[c]={nextPos:a,result:k};return k}function cc(){var b="IRIrefOrFunction@"+a,c=z[b];if(c)return a=c.nextPos,c.result;c=m;m=!1;var d=a,f=a,e=W();if(e!==null){var j=qb(),j=j!==null?j:"";j!==null?e=[e,j]:(e=null,a=f)}else e=null,a=f;f=e!==null?function(a,b){var c={token:"expression",expressionType:"irireforfunction"};c.iriref=a;c.args=b.value;return c}(e[0],e[1]):null;f===null&&(f=null,a=d);(m=c)&&f===null&&g("[117] IRIrefOrFunction");z[b]={nextPos:a,result:f};return f}
function Na(){var c="RDFLiteral@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var j=a,f=a,e=hc();if(e!==null){var k=ic();if(k===null){k=a;if(b.substr(a,2)==="^^"){var h="^^";a+=2}else h=null,m&&g('"^^"');if(h!==null){var i=W();i!==null?h=[h,i]:(h=null,a=k)}else h=null,a=k;k=h!==null?h:null}k=k!==null?k:"";k!==null?e=[e,k]:(e=null,a=f)}else e=null,a=f;f=e!==null?function(a,b){return typeof b==="string"&&b.length>0?{token:"literal",value:a.value,lang:b.slice(1),type:null}:typeof b==="object"?
(b.shift(),{token:"literal",value:a.value,lang:null,type:b[0]}):{token:"literal",value:a.value,lang:null,type:null}}(e[0],e[1]):null;f===null&&(f=null,a=j);(m=d)&&f===null&&g("[112] RDFLiteral");z[c]={nextPos:a,result:f};return f}function Oa(){var b="NumericLiteral@"+a,c=z[b];if(c)return a=c.nextPos,c.result;c=m;m=!1;var d=jc();d===null&&(d=kc(),d===null&&(d=xa(),d=d!==null?d:null));(m=c)&&d===null&&g("[113] NumericLiteral");z[b]={nextPos:a,result:d};return d}function jc(){var b="NumericLiteralUnsigned@"+
a,c=z[b];if(c)return a=c.nextPos,c.result;c=m;m=!1;var d=Ya();d===null&&(d=Za(),d===null&&(d=ga(),d=d!==null?d:null));(m=c)&&d===null&&g("[114] NumericLiteralUnsigned");z[b]={nextPos:a,result:d};return d}function kc(){var b="NumericLiteralPositive@"+a,c=z[b];if(c)return a=c.nextPos,c.result;c=m;m=!1;var d=lc();d===null&&(d=mc(),d===null&&(d=nc(),d=d!==null?d:null));(m=c)&&d===null&&g("[115] NumericLiteralPositive");z[b]={nextPos:a,result:d};return d}function xa(){var b="NumericLiteralNegative@"+a,
c=z[b];if(c)return a=c.nextPos,c.result;c=m;m=!1;var d=oc();d===null&&(d=pc(),d===null&&(d=qc(),d=d!==null?d:null));(m=c)&&d===null&&g("[116] NumericLiteralNegative");z[b]={nextPos:a,result:d};return d}function Pa(){var c="BooleanLiteral@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var j=a,f=a;if(b.substr(a,1)==="T"){var e="T";a+=1}else e=null,m&&g('"T"');e===null&&(b.substr(a,1)==="t"?(e="t",a+=1):(e=null,m&&g('"t"')),e=e!==null?e:null);if(e!==null){if(b.substr(a,1)==="R"){var k="R";a+=1}else k=
null,m&&g('"R"');k===null&&(b.substr(a,1)==="r"?(k="r",a+=1):(k=null,m&&g('"r"')),k=k!==null?k:null);if(k!==null){if(b.substr(a,1)==="U"){var h="U";a+=1}else h=null,m&&g('"U"');h===null&&(b.substr(a,1)==="u"?(h="u",a+=1):(h=null,m&&g('"u"')),h=h!==null?h:null);if(h!==null){if(b.substr(a,1)==="E"){var i="E";a+=1}else i=null,m&&g('"E"');i===null&&(b.substr(a,1)==="e"?(i="e",a+=1):(i=null,m&&g('"e"')),i=i!==null?i:null);i!==null?e=[e,k,h,i]:(e=null,a=f)}else e=null,a=f}else e=null,a=f}else e=null,a=
f;f=e!==null?lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!0}:null;f===null&&(f=null,a=j);if(f!==null)j=f;else{f=j=a;b.substr(a,1)==="F"?(e="F",a+=1):(e=null,m&&g('"F"'));e===null&&(b.substr(a,1)==="f"?(e="f",a+=1):(e=null,m&&g('"f"')),e=e!==null?e:null);if(e!==null)if(b.substr(a,1)==="A"?(k="A",a+=1):(k=null,m&&g('"A"')),k===null&&(b.substr(a,1)==="a"?(k="a",a+=1):(k=null,m&&g('"a"')),k=k!==null?k:null),k!==null)if(b.substr(a,1)==="L"?(h="L",a+=1):(h=null,
m&&g('"L"')),h===null&&(b.substr(a,1)==="l"?(h="l",a+=1):(h=null,m&&g('"l"')),h=h!==null?h:null),h!==null)if(b.substr(a,1)==="S"?(i="S",a+=1):(i=null,m&&g('"S"')),i===null&&(b.substr(a,1)==="s"?(i="s",a+=1):(i=null,m&&g('"s"')),i=i!==null?i:null),i!==null){if(b.substr(a,1)==="E"){var n="E";a+=1}else n=null,m&&g('"E"');n===null&&(b.substr(a,1)==="e"?(n="e",a+=1):(n=null,m&&g('"e"')),n=n!==null?n:null);n!==null?e=[e,k,h,i,n]:(e=null,a=f)}else e=null,a=f;else e=null,a=f;else e=null,a=f;else e=null,a=
f;f=e!==null?lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!1}:null;f===null&&(f=null,a=j);j=f!==null?f:null}(m=d)&&j===null&&g("[117] BooleanLiteral");z[c]={nextPos:a,result:j};return j}function hc(){var b="String@"+a,c=z[b];if(c)return a=c.nextPos,c.result;c=m;m=!1;var d=a,f=rc(),f=f!==null?{token:"string",value:f}:null;f===null&&(f=null,a=d);f!==null?d=f:(d=a,f=sc(),f=f!==null?{token:"string",value:f}:null,f===null&&(f=null,a=d),f!==null?d=f:(d=a,f=tc(),f=
f!==null?{token:"string",value:f}:null,f===null&&(f=null,a=d),f!==null?d=f:(d=a,f=uc(),f=f!==null?{token:"string",value:f}:null,f===null&&(f=null,a=d),d=f!==null?f:null)));(m=c)&&d===null&&g("[118] String");z[b]={nextPos:a,result:d};return d}function W(){var b="IRIref@"+a,c=z[b];if(c)return a=c.nextPos,c.result;c=m;m=!1;var d=a,f=qa(),f=f!==null?{token:"uri",prefix:null,suffix:null,value:f}:null;f===null&&(f=null,a=d);f!==null?d=f:(d=a,f=vc(),f=f!==null?f:null,f===null&&(f=null,a=d),d=f!==null?f:
null);(m=c)&&d===null&&g("[119] IRIref");z[b]={nextPos:a,result:d};return d}function vc(){var b="PrefixedName@"+a,c=z[b];if(c)return a=c.nextPos,c.result;c=m;m=!1;var d=a,f=wc(),f=f!==null?{token:"uri",prefix:f[0],suffix:f[1],value:null}:null;f===null&&(f=null,a=d);f!==null?d=f:(d=a,f=Ka(),f=f!==null?{token:"uri",prefix:f,suffix:"",value:null}:null,f===null&&(f=null,a=d),d=f!==null?f:null);(m=c)&&d===null&&g("[120] PrefixedName");z[b]={nextPos:a,result:d};return d}function bc(){var b="BlankNode@"+
a,c=z[b];if(c)return a=c.nextPos,c.result;c=m;m=!1;var d=a,f=xc(),f=f!==null?{token:"blank",label:f}:null;f===null&&(f=null,a=d);f!==null?d=f:(d=a,yc()!==null?(ha++,f={token:"blank",label:"_:"+ha}):f=null,f===null&&(f=null,a=d),d=f!==null?f:null);(m=c)&&d===null&&g("[121] BlankNode");z[b]={nextPos:a,result:d};return d}function qa(){var c="IRI_REF@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var k=a,f=a;if(b.substr(a,1)==="<"){var e="<";a+=1}else e=null,m&&g('"<"');if(e!==null){var j=[];if(b.substr(a).match(/^[^<>"{}|^`\\]/)!==
null){var h=b.charAt(a);a++}else h=null,m&&g('[^<>"{}|^`\\\\]');for(;h!==null;)j.push(h),b.substr(a).match(/^[^<>"{}|^`\\]/)!==null?(h=b.charAt(a),a++):(h=null,m&&g('[^<>"{}|^`\\\\]'));j!==null?(b.substr(a,1)===">"?(h=">",a+=1):(h=null,m&&g('">"')),h!==null?e=[e,j,h]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f;f=e!==null?e[1].join(""):null;f===null&&(f=null,a=k);(m=d)&&f===null&&g("[122] IRI_REF");z[c]={nextPos:a,result:f};return f}function Ka(){var c="PNAME_NS@"+a,d=z[c];if(d)return a=d.nextPos,d.result;
d=m;m=!1;var h=a,f=a,e=gb(),e=e!==null?e:"";if(e!==null){if(b.substr(a,1)===":"){var k=":";a+=1}else k=null,m&&g('":"');k!==null?e=[e,k]:(e=null,a=f)}else e=null,a=f;f=e!==null?e[0]:null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[123] PNAME_NS");z[c]={nextPos:a,result:f};return f}function wc(){var b="PNAME_LN@"+a,c=z[b];if(c)return a=c.nextPos,c.result;c=m;m=!1;var d=a,f=a,e=Ka();if(e!==null){var h=xb();h!==null?e=[e,h]:(e=null,a=f)}else e=null,a=f;f=e!==null?[e[0],e[1]]:null;f===null&&(f=null,a=
d);(m=c)&&f===null&&g("[124] PNAME_LN");z[b]={nextPos:a,result:f};return f}function xc(){var c="BLANK_NODE_LABEL@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a;if(b.substr(a,2)==="_:"){var e="_:";a+=2}else e=null,m&&g('"_:"');if(e!==null){var k=xb();k!==null?e=[e,k]:(e=null,a=f)}else e=null,a=f;f=e!==null?e[1]:null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[125] BLANK_NODE_LABEL");z[c]={nextPos:a,result:f};return f}function $b(){var c="VAR1@"+a,d=z[c];if(d)return a=d.nextPos,d.result;
d=m;m=!1;var h=a,f=a;if(b.substr(a,1)==="?"){var e="?";a+=1}else e=null,m&&g('"?"');if(e!==null){var k=yb();k!==null?e=[e,k]:(e=null,a=f)}else e=null,a=f;f=e!==null?e[1]:null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[126] VAR1");z[c]={nextPos:a,result:f};return f}function ac(){var c="VAR2@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a;if(b.substr(a,1)==="$"){var e="$";a+=1}else e=null,m&&g('"$"');if(e!==null){var k=yb();k!==null?e=[e,k]:(e=null,a=f)}else e=null,a=f;f=e!==null?
e[1]:null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[127] VAR2");z[c]={nextPos:a,result:f};return f}function ic(){var c="LANGTAG@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a;if(b.substr(a,1)==="@"){var e="@";a+=1}else e=null,m&&g('"@"');if(e!==null){if(b.substr(a).match(/^[a-zA-Z]/)!==null){var k=b.charAt(a);a++}else k=null,m&&g("[a-zA-Z]");if(k!==null)for(var j=[];k!==null;)j.push(k),b.substr(a).match(/^[a-zA-Z]/)!==null?(k=b.charAt(a),a++):(k=null,m&&g("[a-zA-Z]"));else j=null;
if(j!==null){var k=[],i=a;if(b.substr(a,1)==="-"){var n="-";a+=1}else n=null,m&&g('"-"');if(n!==null){if(b.substr(a).match(/^[a-zA-Z0-9]/)!==null){var q=b.charAt(a);a++}else q=null,m&&g("[a-zA-Z0-9]");if(q!==null)for(var r=[];q!==null;)r.push(q),b.substr(a).match(/^[a-zA-Z0-9]/)!==null?(q=b.charAt(a),a++):(q=null,m&&g("[a-zA-Z0-9]"));else r=null;r!==null?n=[n,r]:(n=null,a=i)}else n=null,a=i;for(;n!==null;)if(k.push(n),i=a,b.substr(a,1)==="-"?(n="-",a+=1):(n=null,m&&g('"-"')),n!==null){b.substr(a).match(/^[a-zA-Z0-9]/)!==
null?(q=b.charAt(a),a++):(q=null,m&&g("[a-zA-Z0-9]"));if(q!==null)for(r=[];q!==null;)r.push(q),b.substr(a).match(/^[a-zA-Z0-9]/)!==null?(q=b.charAt(a),a++):(q=null,m&&g("[a-zA-Z0-9]"));else r=null;r!==null?n=[n,r]:(n=null,a=i)}else n=null,a=i;k!==null?e=[e,j,k]:(e=null,a=f)}else e=null,a=f}else e=null,a=f;f=e!==null?e[2].length===0?("@"+e[1].join("")).toLowerCase():("@"+e[1].join("")+"-"+e[2][0][1].join("")).toLowerCase():null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[128] LANGTAG");z[c]={nextPos:a,
result:f};return f}function ga(){var c="INTEGER@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var k=a;if(b.substr(a).match(/^[0-9]/)!==null){var f=b.charAt(a);a++}else f=null,m&&g("[0-9]");if(f!==null)for(var e=[];f!==null;)e.push(f),b.substr(a).match(/^[0-9]/)!==null?(f=b.charAt(a),a++):(f=null,m&&g("[0-9]"));else e=null;f=e!==null?function(a){lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#integer"};lit.value=ba(a);return lit}(e):null;f===null&&(f=null,a=k);(m=d)&&f===
null&&g("[129] INTEGER");z[c]={nextPos:a,result:f};return f}function Za(){var c="DECIMAL@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var k=a,f=a;if(b.substr(a).match(/^[0-9]/)!==null){var e=b.charAt(a);a++}else e=null,m&&g("[0-9]");if(e!==null)for(var h=[];e!==null;)h.push(e),b.substr(a).match(/^[0-9]/)!==null?(e=b.charAt(a),a++):(e=null,m&&g("[0-9]"));else h=null;if(h!==null)if(b.substr(a,1)==="."?(e=".",a+=1):(e=null,m&&g('"."')),e!==null){var j=[];if(b.substr(a).match(/^[0-9]/)!==null){var i=
b.charAt(a);a++}else i=null,m&&g("[0-9]");for(;i!==null;)j.push(i),b.substr(a).match(/^[0-9]/)!==null?(i=b.charAt(a),a++):(i=null,m&&g("[0-9]"));j!==null?h=[h,e,j]:(h=null,a=f)}else h=null,a=f;else h=null,a=f;f=h!==null?function(a,b,c){lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"};lit.value=ba([a,b,c]);return lit}(h[0],h[1],h[2]):null;f===null&&(f=null,a=k);if(f!==null)k=f;else{f=k=a;b.substr(a,1)==="."?(h=".",a+=1):(h=null,m&&g('"."'));if(h!==null){b.substr(a).match(/^[0-9]/)!==
null?(e=b.charAt(a),a++):(e=null,m&&g("[0-9]"));if(e!==null)for(j=[];e!==null;)j.push(e),b.substr(a).match(/^[0-9]/)!==null?(e=b.charAt(a),a++):(e=null,m&&g("[0-9]"));else j=null;j!==null?h=[h,j]:(h=null,a=f)}else h=null,a=f;f=h!==null?function(a,b){lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"};lit.value=ba([a,b]);return lit}(h[0],h[1]):null;f===null&&(f=null,a=k);k=f!==null?f:null}(m=d)&&k===null&&g("[130] DECIMAL");z[c]={nextPos:a,result:k};return k}function Ya(){var c=
"DOUBLE@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a;if(b.substr(a).match(/^[0-9]/)!==null){var e=b.charAt(a);a++}else e=null,m&&g("[0-9]");if(e!==null)for(var k=[];e!==null;)k.push(e),b.substr(a).match(/^[0-9]/)!==null?(e=b.charAt(a),a++):(e=null,m&&g("[0-9]"));else k=null;if(k!==null)if(b.substr(a,1)==="."?(e=".",a+=1):(e=null,m&&g('"."')),e!==null){var j=[];if(b.substr(a).match(/^[0-9]/)!==null){var i=b.charAt(a);a++}else i=null,m&&g("[0-9]");for(;i!==null;)j.push(i),b.substr(a).match(/^[0-9]/)!==
null?(i=b.charAt(a),a++):(i=null,m&&g("[0-9]"));j!==null?(i=$a(),i!==null?k=[k,e,j,i]:(k=null,a=f)):(k=null,a=f)}else k=null,a=f;else k=null,a=f;f=k!==null?function(a,b,c,e){lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};lit.value=ba([a,b,c,e]);return lit}(k[0],k[1],k[2],k[3]):null;f===null&&(f=null,a=h);if(f!==null)h=f;else{f=h=a;b.substr(a,1)==="."?(k=".",a+=1):(k=null,m&&g('"."'));if(k!==null){b.substr(a).match(/^[0-9]/)!==null?(j=b.charAt(a),a++):(j=null,m&&g("[0-9]"));
if(j!==null)for(e=[];j!==null;)e.push(j),b.substr(a).match(/^[0-9]/)!==null?(j=b.charAt(a),a++):(j=null,m&&g("[0-9]"));else e=null;e!==null?(j=$a(),j!==null?k=[k,e,j]:(k=null,a=f)):(k=null,a=f)}else k=null,a=f;f=k!==null?function(a,b,c){lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};lit.value=ba([a,b,c]);return lit}(k[0],k[1],k[2]):null;f===null&&(f=null,a=h);if(f!==null)h=f;else{f=h=a;b.substr(a).match(/^[0-9]/)!==null?(e=b.charAt(a),a++):(e=null,m&&g("[0-9]"));if(e!==
null)for(k=[];e!==null;)k.push(e),b.substr(a).match(/^[0-9]/)!==null?(e=b.charAt(a),a++):(e=null,m&&g("[0-9]"));else k=null;k!==null?(e=$a(),e!==null?k=[k,e]:(k=null,a=f)):(k=null,a=f);f=k!==null?function(a,b){lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};lit.value=ba([a,b]);return lit}(k[0],k[1]):null;f===null&&(f=null,a=h);h=f!==null?f:null}}(m=d)&&h===null&&g("[131] DOUBLE");z[c]={nextPos:a,result:h};return h}function nc(){var c="INTEGER_POSITIVE@"+a,d=z[c];if(d)return a=
d.nextPos,d.result;d=m;m=!1;var k=a,f=a;if(b.substr(a,1)==="+"){var e="+";a+=1}else e=null,m&&g('"+"');if(e!==null){var h=ga();h!==null?e=[e,h]:(e=null,a=f)}else e=null,a=f;f=e!==null?function(a){a.value="+"+a.value;return a}(e[1]):null;f===null&&(f=null,a=k);(m=d)&&f===null&&g("[132] INTEGER_POSITIVE");z[c]={nextPos:a,result:f};return f}function mc(){var c="DECIMAL_POSITIVE@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var k=a,f=a;if(b.substr(a,1)==="+"){var e="+";a+=1}else e=null,m&&g('"+"');
if(e!==null){var h=Za();h!==null?e=[e,h]:(e=null,a=f)}else e=null,a=f;f=e!==null?function(a){a.value="+"+a.value;return a}(e[1]):null;f===null&&(f=null,a=k);(m=d)&&f===null&&g("[133] DECIMAL_POSITIVE");z[c]={nextPos:a,result:f};return f}function lc(){var c="DOUBLE_POSITIVE@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var k=a,f=a;if(b.substr(a,1)==="+"){var e="+";a+=1}else e=null,m&&g('"+"');if(e!==null){var h=Ya();h!==null?e=[e,h]:(e=null,a=f)}else e=null,a=f;f=e!==null?function(a){a.value=
"+"+a.value;return a}(e[1]):null;f===null&&(f=null,a=k);(m=d)&&f===null&&g("[134] DOUBLE_POSITIVE");z[c]={nextPos:a,result:f};return f}function qc(){var c="INTEGER_NEGATIVE@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var k=a,f=a;if(b.substr(a,1)==="-"){var e="-";a+=1}else e=null,m&&g('"-"');if(e!==null){var h=ga();h!==null?e=[e,h]:(e=null,a=f)}else e=null,a=f;f=e!==null?function(a){a.value="-"+a.value;return a}(e[1]):null;f===null&&(f=null,a=k);(m=d)&&f===null&&g("[135] INTEGER_NEGATIVE");
z[c]={nextPos:a,result:f};return f}function pc(){var c="DECIMAL_NEGATIVE@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var k=a,f=a;if(b.substr(a,1)==="-"){var e="-";a+=1}else e=null,m&&g('"-"');if(e!==null){var h=Za();h!==null?e=[e,h]:(e=null,a=f)}else e=null,a=f;f=e!==null?function(a){a.value="-"+a.value;return a}(e[1]):null;f===null&&(f=null,a=k);(m=d)&&f===null&&g("[136] DECIMAL_NEGATIVE");z[c]={nextPos:a,result:f};return f}function oc(){var c="DOUBLE_NEGATIVE@"+a,d=z[c];if(d)return a=d.nextPos,
d.result;d=m;m=!1;var k=a,f=a;if(b.substr(a,1)==="-"){var e="-";a+=1}else e=null,m&&g('"-"');if(e!==null){var h=Ya();h!==null?e=[e,h]:(e=null,a=f)}else e=null,a=f;f=e!==null?function(a){a.value="-"+a.value;return a}(e[1]):null;f===null&&(f=null,a=k);(m=d)&&f===null&&g("[137] DOUBLE_NEGATIVE");z[c]={nextPos:a,result:f};return f}function $a(){var c="EXPONENT@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var k=a,f=a;if(b.substr(a).match(/^[eE]/)!==null){var e=b.charAt(a);a++}else e=null,m&&g("[eE]");
if(e!==null){if(b.substr(a).match(/^[+\-]/)!==null){var h=b.charAt(a);a++}else h=null,m&&g("[+\\-]");h=h!==null?h:"";if(h!==null){if(b.substr(a).match(/^[0-9]/)!==null){var j=b.charAt(a);a++}else j=null,m&&g("[0-9]");if(j!==null)for(var i=[];j!==null;)i.push(j),b.substr(a).match(/^[0-9]/)!==null?(j=b.charAt(a),a++):(j=null,m&&g("[0-9]"));else i=null;i!==null?e=[e,h,i]:(e=null,a=f)}else e=null,a=f}else e=null,a=f;f=e!==null?ba([e[0],e[1],e[2]]):null;f===null&&(f=null,a=k);(m=d)&&f===null&&g("[138] EXPONENT");
z[c]={nextPos:a,result:f};return f}function tc(){var c="STRING_LITERAL1@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var k=a,f=a;if(b.substr(a,1)==="'"){var e="'";a+=1}else e=null,m&&g('"\'"');if(e!==null){var h=[];if(b.substr(a).match(/^[^'\\\n\r]/)!==null){var j=b.charAt(a);a++}else j=null,m&&g("[^'\\\\\\n\\r]");j===null&&(j=ia(),j=j!==null?j:null);for(;j!==null;)h.push(j),b.substr(a).match(/^[^'\\\n\r]/)!==null?(j=b.charAt(a),a++):(j=null,m&&g("[^'\\\\\\n\\r]")),j===null&&(j=ia(),j=j!==
null?j:null);h!==null?(b.substr(a,1)==="'"?(j="'",a+=1):(j=null,m&&g('"\'"')),j!==null?e=[e,h,j]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f;f=e!==null?ba(e[1]):null;f===null&&(f=null,a=k);(m=d)&&f===null&&g("[139] STRING_LITERAL1");z[c]={nextPos:a,result:f};return f}function uc(){var c="STRING_LITERAL2@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var k=a,f=a;if(b.substr(a,1)==='"'){var e='"';a+=1}else e=null,m&&g('"\\""');if(e!==null){var h=[];if(b.substr(a).match(/^[^"\\\n\r]/)!==null){var j=
b.charAt(a);a++}else j=null,m&&g('[^"\\\\\\n\\r]');j===null&&(j=ia(),j=j!==null?j:null);for(;j!==null;)h.push(j),b.substr(a).match(/^[^"\\\n\r]/)!==null?(j=b.charAt(a),a++):(j=null,m&&g('[^"\\\\\\n\\r]')),j===null&&(j=ia(),j=j!==null?j:null);h!==null?(b.substr(a,1)==='"'?(j='"',a+=1):(j=null,m&&g('"\\""')),j!==null?e=[e,h,j]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f;f=e!==null?ba(e[1]):null;f===null&&(f=null,a=k);(m=d)&&f===null&&g("[140] STRING_LITERAL2");z[c]={nextPos:a,result:f};return f}function rc(){var c=
"STRING_LITERAL_LONG1@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var k=a,f=a;if(b.substr(a,3)==="'''"){var e="'''";a+=3}else e=null,m&&g("\"'''\"");if(e!==null){var h=[];if(b.substr(a).match(/^[^'\\]/)!==null){var j=b.charAt(a);a++}else j=null,m&&g("[^'\\\\]");j===null&&(j=ia(),j=j!==null?j:null);for(;j!==null;)h.push(j),b.substr(a).match(/^[^'\\]/)!==null?(j=b.charAt(a),a++):(j=null,m&&g("[^'\\\\]")),j===null&&(j=ia(),j=j!==null?j:null);h!==null?(b.substr(a,3)==="'''"?(j="'''",a+=3):(j=
null,m&&g("\"'''\"")),j!==null?e=[e,h,j]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f;f=e!==null?ba(e[1]):null;f===null&&(f=null,a=k);(m=d)&&f===null&&g("[141] STRING_LITERAL_LONG1");z[c]={nextPos:a,result:f};return f}function sc(){var c="STRING_LITERAL_LONG2@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var j=a,f=a;if(b.substr(a,3)==='"""'){var e='"""';a+=3}else e=null,m&&g('"\\"\\"\\""');if(e!==null){var k=[];if(b.substr(a).match(/^[^"\\]/)!==null){var h=b.charAt(a);a++}else h=null,m&&g('[^"\\\\]');
h===null&&(h=ia(),h=h!==null?h:null);for(;h!==null;)k.push(h),b.substr(a).match(/^[^"\\]/)!==null?(h=b.charAt(a),a++):(h=null,m&&g('[^"\\\\]')),h===null&&(h=ia(),h=h!==null?h:null);k!==null?(b.substr(a,3)==='"""'?(h='"""',a+=3):(h=null,m&&g('"\\"\\"\\""')),h!==null?e=[e,k,h]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f;f=e!==null?ba(e[1]):null;f===null&&(f=null,a=j);(m=d)&&f===null&&g("[142] STRING_LITERAL_LONG2");z[c]={nextPos:a,result:f};return f}function ia(){var c="ECHAR@"+a,d=z[c];if(d)return a=
d.nextPos,d.result;d=m;m=!1;var h=a;if(b.substr(a,1)==="\\"){var f="\\";a+=1}else f=null,m&&g('"\\\\"');if(f!==null){if(b.substr(a).match(/^[tbnrf"']/)!==null){var e=b.charAt(a);a++}else e=null,m&&g("[tbnrf\"']");e!==null?f=[f,e]:(f=null,a=h)}else f=null,a=h;(m=d)&&f===null&&g("[143] ECHAR");z[c]={nextPos:a,result:f};return f}function ma(){var c="NIL@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a;if(b.substr(a,1)==="("){var e="(";a+=1}else e=null,m&&g('"("');if(e!==null){for(var k=
[],j=s();j!==null;)k.push(j),j=s();k!==null?(b.substr(a,1)===")"?(j=")",a+=1):(j=null,m&&g('")"')),j!==null?e=[e,k,j]:(e=null,a=f)):(e=null,a=f)}else e=null,a=f;f=e!==null?{token:"triplesnodecollection",triplesContext:[],chainSubject:[{token:"uri",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}]}:null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[144] NIL");z[c]={nextPos:a,result:f};return f}function s(){var c="WS@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;if(b.substr(a).match(/^[ ]/)!==
null){var h=b.charAt(a);a++}else h=null,m&&g("[ ]");h===null&&(b.substr(a).match(/^[\t]/)!==null?(h=b.charAt(a),a++):(h=null,m&&g("[\t]")),h===null&&(b.substr(a).match(/^[\r]/)!==null?(h=b.charAt(a),a++):(h=null,m&&g("[\\r]")),h===null&&(b.substr(a).match(/^[\n]/)!==null?(h=b.charAt(a),a++):(h=null,m&&g("[\\n]")),h===null&&(h=zc(),h=h!==null?h:null))));(m=d)&&h===null&&g("[145] WS");z[c]={nextPos:a,result:h};return h}function zc(){var c="COMMENT@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;
var h=a;if(b.substr(a,1)==="#"){var f="#";a+=1}else f=null,m&&g('"#"');if(f!==null){var e=[];if(b.substr(a).match(/^[^\n\r]/)!==null){var j=b.charAt(a);a++}else j=null,m&&g("[^\\n\\r]");for(;j!==null;)e.push(j),b.substr(a).match(/^[^\n\r]/)!==null?(j=b.charAt(a),a++):(j=null,m&&g("[^\\n\\r]"));e!==null?f=[f,e]:(f=null,a=h)}else f=null,a=h;(m=d)&&f===null&&g(" COMMENT");z[c]={nextPos:a,result:f};return f}function yc(){var c="ANON@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a;if(b.substr(a,
1)==="["){var f="[";a+=1}else f=null,m&&g('"["');if(f!==null){for(var e=[],j=s();j!==null;)e.push(j),j=s();e!==null?(b.substr(a,1)==="]"?(j="]",a+=1):(j=null,m&&g('"]"')),j!==null?f=[f,e,j]:(f=null,a=h)):(f=null,a=h)}else f=null,a=h;(m=d)&&f===null&&g("[146] ANON");z[c]={nextPos:a,result:f};return f}function zb(){var c="PN_CHARS_BASE@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;if(b.substr(a).match(/^[A-Z]/)!==null){var h=b.charAt(a);a++}else h=null,m&&g("[A-Z]");h===null&&(b.substr(a).match(/^[a-z]/)!==
null?(h=b.charAt(a),a++):(h=null,m&&g("[a-z]")),h===null&&(b.substr(a).match(/^[\xC0-\xD6]/)!==null?(h=b.charAt(a),a++):(h=null,m&&g("[\\xC0-\\xD6]")),h===null&&(b.substr(a).match(/^[\xD8-\xF6]/)!==null?(h=b.charAt(a),a++):(h=null,m&&g("[\\xD8-\\xF6]")),h===null&&(b.substr(a).match(/^[\xF8-\u02FF]/)!==null?(h=b.charAt(a),a++):(h=null,m&&g("[\\xF8-\\u02FF]")),h===null&&(b.substr(a).match(/^[\u0370-\u037D]/)!==null?(h=b.charAt(a),a++):(h=null,m&&g("[\\u0370-\\u037D]")),h===null&&(b.substr(a).match(/^[\u037F-\u1FFF]/)!==
null?(h=b.charAt(a),a++):(h=null,m&&g("[\\u037F-\\u1FFF]")),h===null&&(b.substr(a).match(/^[\u200C-\u200D]/)!==null?(h=b.charAt(a),a++):(h=null,m&&g("[\\u200C-\\u200D]")),h===null&&(b.substr(a).match(/^[\u2070-\u218F]/)!==null?(h=b.charAt(a),a++):(h=null,m&&g("[\\u2070-\\u218F]")),h===null&&(b.substr(a).match(/^[\u2C00-\u2FEF]/)!==null?(h=b.charAt(a),a++):(h=null,m&&g("[\\u2C00-\\u2FEF]")),h===null&&(b.substr(a).match(/^[\u3001-\uD7FF]/)!==null?(h=b.charAt(a),a++):(h=null,m&&g("[\\u3001-\\uD7FF]")),
h===null&&(b.substr(a).match(/^[\uF900-\uFDCF]/)!==null?(h=b.charAt(a),a++):(h=null,m&&g("[\\uF900-\\uFDCF]")),h===null&&(b.substr(a).match(/^[\uFDF0-\uFFFD]/)!==null?(h=b.charAt(a),a++):(h=null,m&&g("[\\uFDF0-\\uFFFD]")),h===null&&(b.substr(a).match(/^[\u1000-\uEFFF]/)!==null?(h=b.charAt(a),a++):(h=null,m&&g("[\\u1000-\\uEFFF]")),h=h!==null?h:null)))))))))))));(m=d)&&h===null&&g("[147] PN_CHARS_BASE");z[c]={nextPos:a,result:h};return h}function ya(){var c="PN_CHARS_U@"+a,d=z[c];if(d)return a=d.nextPos,
d.result;d=m;m=!1;var h=zb();h===null&&(b.substr(a,1)==="_"?(h="_",a+=1):(h=null,m&&g('"_"')),h=h!==null?h:null);(m=d)&&h===null&&g("[148] PN_CHARS_U");z[c]={nextPos:a,result:h};return h}function yb(){var c="VARNAME@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a,e=ya();e===null&&(b.substr(a).match(/^[0-9]/)!==null?(e=b.charAt(a),a++):(e=null,m&&g("[0-9]")),e=e!==null?e:null);if(e!==null){var j=[],k=ya();k===null&&(b.substr(a).match(/^[0-9]/)!==null?(k=b.charAt(a),a++):(k=null,m&&
g("[0-9]")),k===null&&(b.substr(a).match(/^[\xB7]/)!==null?(k=b.charAt(a),a++):(k=null,m&&g("[\\xB7]")),k===null&&(b.substr(a).match(/^[\u0300-\u036F]/)!==null?(k=b.charAt(a),a++):(k=null,m&&g("[\\u0300-\\u036F]")),k===null&&(b.substr(a).match(/^[\u203F-\u2040]/)!==null?(k=b.charAt(a),a++):(k=null,m&&g("[\\u203F-\\u2040]")),k=k!==null?k:null))));for(;k!==null;)j.push(k),k=ya(),k===null&&(b.substr(a).match(/^[0-9]/)!==null?(k=b.charAt(a),a++):(k=null,m&&g("[0-9]")),k===null&&(b.substr(a).match(/^[\xB7]/)!==
null?(k=b.charAt(a),a++):(k=null,m&&g("[\\xB7]")),k===null&&(b.substr(a).match(/^[\u0300-\u036F]/)!==null?(k=b.charAt(a),a++):(k=null,m&&g("[\\u0300-\\u036F]")),k===null&&(b.substr(a).match(/^[\u203F-\u2040]/)!==null?(k=b.charAt(a),a++):(k=null,m&&g("[\\u203F-\\u2040]")),k=k!==null?k:null))));j!==null?e=[e,j]:(e=null,a=f)}else e=null,a=f;f=e!==null?e[0]+e[1].join(""):null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[149] VARNAME");z[c]={nextPos:a,result:f};return f}function Ja(){var c="PN_CHARS@"+
a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=ya();h===null&&(b.substr(a,1)==="-"?(h="-",a+=1):(h=null,m&&g('"-"')),h===null&&(b.substr(a).match(/^[0-9]/)!==null?(h=b.charAt(a),a++):(h=null,m&&g("[0-9]")),h===null&&(b.substr(a).match(/^[\xB7]/)!==null?(h=b.charAt(a),a++):(h=null,m&&g("[\\xB7]")),h===null&&(b.substr(a).match(/^[\u0300-\u036F]/)!==null?(h=b.charAt(a),a++):(h=null,m&&g("[\\u0300-\\u036F]")),h===null&&(b.substr(a).match(/^[\u203F-\u2040]/)!==null?(h=b.charAt(a),a++):(h=null,
m&&g("[\\u203F-\\u2040]")),h=h!==null?h:null)))));(m=d)&&h===null&&g("[150] PN_CHARS");z[c]={nextPos:a,result:h};return h}function gb(){var c="PN_PREFIX@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a,e=zb();if(e!==null){var k=[],j=Ja();j===null&&(b.substr(a,1)==="."?(j=".",a+=1):(j=null,m&&g('"."')),j=j!==null?j:null);for(;j!==null;)k.push(j),j=Ja(),j===null&&(b.substr(a,1)==="."?(j=".",a+=1):(j=null,m&&g('"."')),j=j!==null?j:null);k!==null?e=[e,k]:(e=null,a=f)}else e=null,a=f;f=
e!==null?function(a,b){if(b[b.length-1]==".")throw Error("Wrong PN_PREFIX, cannot finish with '.'");else return a+b.join("")}(e[0],e[1]):null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[151] PN_PREFIX");z[c]={nextPos:a,result:f};return f}function xb(){var c="PN_LOCAL@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=a,e=ya();e===null&&(b.substr(a).match(/^[0-9]/)!==null?(e=b.charAt(a),a++):(e=null,m&&g("[0-9]")),e=e!==null?e:null);if(e!==null){for(var k=[],j=Ja();j!==null;)k.push(j),
j=Ja();k!==null?e=[e,k]:(e=null,a=f)}else e=null,a=f;f=e!==null?e[0]+e[1].join(""):null;f===null&&(f=null,a=h);(m=d)&&f===null&&g("[152] PN_LOCAL");z[c]={nextPos:a,result:f};return f}function Ab(){var c=function(a){a.sort();for(var b=null,c=[],d=0;d<a.length;d++)a[d]!==b&&(c.push(a[d]),b=a[d]);switch(c.length){case 0:return"end of input";case 1:return c[0];default:return c.slice(0,c.length-1).join(", ")+" or "+c[c.length-1]}}(fb),d=Math.max(a,Ea),d=d<b.length?k(b.charAt(d)):"end of input";return"Expected "+
c+" but "+d+" found."}function Ac(){for(var a=1,c=1,d=!1,f=0;f<Ea;f++){var e=b.charAt(f);e==="\n"?(d||a++,c=1,d=!1):e==="\r"|e==="\u2028"||e==="\u2029"?(a++,c=1,d=!0):(c++,d=!1)}return{line:a,column:c}}var ja={ANON:yc,AdditiveExpression:X,Aggregate:dc,ArgList:qb,AskQuery:S,BLANK_NODE_LABEL:xc,BaseDecl:w,BindingValue:Ba,BindingsClause:Aa,BlankNode:bc,BlankNodePropertyList:Yb,BooleanLiteral:Pa,BrackettedExpression:Ma,BuiltInCall:La,COMMENT:zc,Clear:Bb,Collection:Xb,ConditionalAndExpression:Wa,ConditionalOrExpression:N,
Constraint:Fa,ConstructQuery:L,ConstructTemplate:Ib,ConstructTriples:rb,Create:Db,DECIMAL:Za,DECIMAL_NEGATIVE:pc,DECIMAL_POSITIVE:mc,DOCUMENT:function(){var b="DOCUMENT@"+a,c=z[b];if(c)return a=c.nextPos,c.result;c=j();c===null&&(c=x(),c=c!==null?c:null);z[b]={nextPos:a,result:c};return c},DOUBLE:Ya,DOUBLE_NEGATIVE:oc,DOUBLE_POSITIVE:lc,DatasetClause:M,DefaultGraphClause:Y,DeleteClause:Kb,DeleteData:Fb,DeleteWhere:Gb,DescribeQuery:O,Drop:Cb,ECHAR:ia,EXPONENT:$a,ExistsFunc:fc,ExpressionList:Sb,Filter:Rb,
FunctionCall:hb,GraphGraphPattern:Pb,GraphNode:va,GraphPatternNotTriples:pb,GraphRef:Qa,GraphRefAll:ib,GraphTerm:Zb,GroupClause:ea,GroupCondition:T,GroupGraphPattern:$,GroupGraphPatternSub:Lb,GroupOrUnionGraphPattern:Mb,HavingClause:fa,INTEGER:ga,INTEGER_NEGATIVE:qc,INTEGER_POSITIVE:nc,IRI_REF:qa,IRIref:W,IRIrefOrFunction:cc,InsertClause:kb,InsertData:Eb,LANGTAG:ic,LimitClause:ab,LimitOffsetClauses:za,Load:Da,MinusGraphPattern:Ob,Modify:Jb,MultiplicativeExpression:wa,NIL:ma,NamedGraphClause:aa,NotExistsFunc:gc,
NumericLiteral:Oa,NumericLiteralNegative:xa,NumericLiteralPositive:kc,NumericLiteralUnsigned:jc,ObjectList:na,OffsetClause:bb,OptionalGraphPattern:Nb,OrderClause:oa,OrderCondition:ka,PNAME_LN:wc,PNAME_NS:Ka,PN_CHARS:Ja,PN_CHARS_BASE:zb,PN_CHARS_U:ya,PN_LOCAL:xb,PN_PREFIX:gb,PathAlternative:vb,PathElt:wb,PathEltOrInverse:Va,PathMod:Vb,PathNegatedPropertySet:Wb,PathOneInPropertySet:Ha,PathPrimary:Ub,PathSequence:Ua,PrefixDecl:r,PrefixedName:vc,PrimaryExpression:Ia,Prologue:q,PropertyList:Tb,PropertyListNotEmpty:Ga,
PropertyListNotEmptyPath:function(){var c="PropertyListNotEmptyPath@"+a,d=z[c];if(d)return a=d.nextPos,d.result;d=m;m=!1;var h=a,f=Ta();f===null&&(f=V(),f=f!==null?f:null);if(f!==null){var e=na();if(e!==null){var k=[],j=a;if(b.substr(a,1)===";"){var i=";";a+=1}else i=null,m&&g('";"');if(i!==null){var n=a,q=Ta();q===null&&(q=V(),q=q!==null?q:null);if(q!==null){var r=na();r!==null?q=[q,r]:(q=null,a=n)}else q=null,a=n;n=q!==null?q:"";n!==null?i=[i,n]:(i=null,a=j)}else i=null,a=j;for(;i!==null;)k.push(i),
j=a,b.substr(a,1)===";"?(i=";",a+=1):(i=null,m&&g('";"')),i!==null?(n=a,q=Ta(),q===null&&(q=V(),q=q!==null?q:null),q!==null?(r=na(),r!==null?q=[q,r]:(q=null,a=n)):(q=null,a=n),n=q!==null?q:"",n!==null?i=[i,n]:(i=null,a=j)):(i=null,a=j);k!==null?f=[f,e,k]:(f=null,a=h)}else f=null,a=h}else f=null,a=h;(m=d)&&f===null&&g("[73] PropertyListNotEmptyPath");z[c]={nextPos:a,result:f};return f},PropertyListPath:function(){var b="PropertyListPath@"+a,c=z[b];if(c)return a=c.nextPos,c.result;c=m;m=!1;var d=Ga(),
d=d!==null?d:"";(m=c)&&d===null&&g("[74] PropertyListPath");z[b]={nextPos:a,result:d};return d},QuadData:jb,QuadPattern:mb,Quads:nb,QuadsNotTriples:ob,Query:i,RDFLiteral:Na,RegexExpression:ec,RelationalExpression:Xa,SPARQL:j,STRING_LITERAL1:tc,STRING_LITERAL2:uc,STRING_LITERAL_LONG1:rc,STRING_LITERAL_LONG2:sc,SelectClause:J,SelectQuery:I,ServiceGraphPattern:Qb,SolutionModifier:Z,String:hc,SubSelect:H,TURTLE:x,TriplesBlock:sa,TriplesNode:ub,TriplesSameSubject:Ra,TriplesTemplate:ua,UnaryExpression:ca,
Update:eb,Update1:Ca,UsingClause:lb,VAR1:$b,VAR2:ac,VARNAME:yb,Var:V,VarOrIRIref:la,VarOrTerm:sb,Verb:Sa,VerbPath:Ta,WS:s,WhereClause:U,base:E,directive:D,prefixID:F,statement:y};if(c!==void 0){if(ja[c]===void 0)throw Error("Invalid rule name: "+k(c)+".");}else c="DOCUMENT";var a=0,m=!0,Ea=0,fb=[],z={},ba=function(a){for(var b="",c=0;c<a.length;c++)b+=typeof a[c]==="string"?a[c]:a[c].join("");return b},ha=0,Hb=function(a){for(var b="",c=0;c<a.length;c++)b+=a[c];return b.toUpperCase()},ja=ja[c]();
if(ja===null||a!==b.length)throw ja=Ac(),new this.SyntaxError(Ab(),ja.line,ja.column);return ja},toSource:function(){return this._source},SyntaxError:function(b,c,h){this.name="SyntaxError";this.message=b;this.line=c;this.column=h}};c.SyntaxError.prototype=Error.prototype;return c}();var fa={};(new Date).getTime();fa.combined_parser=ka.parser;fa.parser={};fa.parser.parse=function(c,b){for(var d=[],h=fa.combined_parser.parse(c),k={},g={namespaces:k,base:"",blankCounter:0},j=0;j<h.length;j++){var i=
h[j];if(i.token==="base")g.base=i.value;else if(i.token==="prefix")k[i.prefix]=i.local;else if(i.token==="triples"||i.token==="triplespattern")for(var q=0;q<i.triplesContext.length;q++){var w=i.triplesContext[q],w={subject:y.lexicalFormTerm(w.subject,g),predicate:y.lexicalFormTerm(w.predicate,g),object:y.lexicalFormTerm(w.object,g),graph:b};d.push(w)}}return d};var x={defaultContext:{rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",
xsd:"http://www.w3.org/2001/XMLSchema#",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",cal:"http://www.w3.org/2002/12/cal/ical#",vcard:"http://www.w3.org/2006/vcard/ns# ",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",cc:"http://creativecommons.org/ns#",sioc:"http://rdfs.org/sioc/ns#",doap:"http://usefulinc.com/ns/doap#",com:"http://purl.org/commerce#",ps:"http://purl.org/payswarm#",gr:"http://purl.org/goodrelations/v1#",sig:"http://purl.org/signature#",ccard:"http://purl.org/commerce/creditcard#"},
UrisMap:function(){this.defaultNs="";this.interfaceProperties=["get","remove","set","setDefault","addAll","resolve","shrink"]}};x.UrisMap.prototype.values=function(){var c={},b;for(b in this)!y.include(this.interfaceProperties,b)&&typeof this[b]!=="function"&&b!=="defaultNs"&&b!=="interfaceProperties"&&(c[b]=this[b]);return c};x.UrisMap.prototype.get=function(c){if(c.indexOf(" ")!=-1)throw"Prefix must not contain any whitespaces";return this[c]};x.UrisMap.prototype.remove=function(c){if(c.indexOf(" ")!=
-1)throw"Prefix must not contain any whitespaces";delete this[c];return null};x.UrisMap.prototype.set=function(c,b){if(c.indexOf(" ")!=-1)throw"Prefix must not contain any whitespaces";this[c]=b};x.UrisMap.prototype.setDefault=function(c){this.defaultNs=c};x.UrisMap.prototype.addAll=function(c,b){for(var d in c)y.include(this.interfaceProperties,d)||(this[d]!=null?b===!0&&(this[d]=c[d]):this[d]=c[d]);return this};x.UrisMap.prototype.resolve=function(c){var b=c.split(":"),c=b[0],b=b[1];return c===
""?this.defaultNs==null?null:this.defaultNs+b:this[c]!=null?this[c]+b:null};x.UrisMap.prototype.shrink=function(c){for(var b in this){var d=this[b];if(c.indexOf(d)===0&&d!==""&&b!="defaultNs")return c=c.split(d)[1],b+":"+c}return c};x.Profile=function(){this.prefixes=new x.UrisMap;this.terms=new x.UrisMap};x.Profile.prototype.importProfile=function(c,b){this.prefixes.addAll(c.prefixes,b);this.terms.addAll(c.terms,b)};x.Profile.prototype.resolve=function(c){return c.indexOf(":")!=-1?this.prefixes.resolve(c):
this.terms[c]!=null?this.terms.resolve(c):null};x.Profile.prototype.setDefaultPrefix=function(c){this.prefixes.setDefault(c)};x.Profile.prototype.setDefaultVocabulary=function(c){this.terms.setDefault(c)};x.Profile.prototype.setPrefix=function(c,b){this.prefixes.set(c,b)};x.Profile.prototype.setTerm=function(c,b){this.terms.set(c,b)};x.RDFEnvironment=function(){this.blankNodeCounter=0;var c=this;this.filters={s:function(b){return function(c){return c.subject.equals(b)}},p:function(b){return function(c){return c.predicate.equals(b)}},
o:function(b){return function(c){return c.object.equals(b)}},sp:function(b,c){return function(k){return k.subject.equals(b)&&k.predicate.equals(c)}},so:function(b,c){return function(k){return k.subject.equals(b)&&k.object.equals(c)}},po:function(b,c){return function(k){return k.predicate.equals(b)&&k.object.equals(c)}},spo:function(b,c,k){return function(g){return g.subject.equals(b)&&g.predicate.equals(c)&&g.object.equals(k)}},describes:function(b){return function(c){return c.subject.equals(b)||
c.object.equals(b)}},type:function(b){var h=c.resolve("rdf:type");return function(c){return c.predicate.equals(h)&&c.object.equals(b)}}};for(var b in x.defaultContext)this.prefixes.set(b,x.defaultContext[b])};y["extends"](x.Profile,x.RDFEnvironment);x.RDFEnvironment.prototype.createBlankNode=function(){var c=new x.BlankNode(this.blankNodeCounter);this.blankNodeCounter++;return c};x.RDFEnvironment.prototype.createNamedNode=function(c){var b=this.resolve(c);return b!=null?new x.NamedNode(b):new x.NamedNode(c)};
x.RDFEnvironment.prototype.createLiteral=function(c,b,d){return d!=null?new x.Literal(c,b,d.toString()):new x.Literal(c,b,d)};x.RDFEnvironment.prototype.createTriple=function(c,b,d){return new x.Triple(c,b,d)};x.RDFEnvironment.prototype.createGraph=function(c){var b=new x.Graph;if(c!=null)for(var d=0;d<c.length;d++)b.add(c[d]);return b};x.RDFEnvironment.prototype.createAction=function(c,b){return function(d){return c(d)?b(d):d}};x.RDFEnvironment.prototype.createProfile=function(c){return c===!0?new x.RDFEnvironment.Profile:
(c=new x.RDFEnvironment.Profile,c.importProfile(this),c)};x.RDFEnvironment.prototype.createTermMap=function(c){if(c===!0)return new x.UrisMap;else{var c=this.terms.values(),b=new x.UrisMap,d;for(d in c)b[d]=c[d];return b}};x.RDFEnvironment.prototype.createPrefixMap=function(c){if(c===!0)return new x.UrisMap;else{var c=this.prefixes.values(),b=new x.UrisMap,d;for(d in c)b[d]=c[d];return b}};x.RDFNode=function(c){this.interfaceName=c;this.attributes=["interfaceName","nominalValue"]};x.RDFNode.prototype.equals=
function(c){if(c.interfaceName==null)return this.valueOf()==c;else{for(var b in this.attributes){var d=this.attributes[b];if(this[d]!=c[d])return!1}return!0}};x.BlankNode=function(c){x.RDFNode.call(this,"BlankNode");this.nominalValue="_:"+c;this.bnodeId=c};y["extends"](x.RDFNode,x.BlankNode);x.BlankNode.prototype.toString=function(){return this.nominalValue};x.BlankNode.prototype.toNT=function(){return this.nominalValue};x.BlankNode.prototype.valueOf=function(){return this.nominalValue};x.Literal=
function(c,b,d){x.RDFNode.call(this,"Literal");this.nominalValue=c;if(b!=null)this.language=b;else if(d!=null)this.datatype=d};y["extends"](x.RDFNode,x.Literal);x.Literal.prototype.toString=function(){var c='"'+this.nominalValue+'"';if(this.language!=null)c=c+"@"+this.language;else if(this.datatype!=null||this.type)c=c+"^^<"+(this.datatype||this.type)+">";return c};x.Literal.prototype.toNT=function(){return this.toString()};x.Literal.prototype.valueOf=function(){return i.effectiveTypeValue({token:"literal",
type:this.type,value:this.nominalValue,language:this.language})};x.NamedNode=function(c){x.RDFNode.call(this,"NamedNode");this.nominalValue=c.value!=null?c.value:c};y["extends"](x.RDFNode,x.NamedNode);x.NamedNode.prototype.toString=function(){return this.nominalValue};x.NamedNode.prototype.toNT=function(){return"<"+this.toString()+">"};x.NamedNode.prototype.valueOf=function(){return this.nominalValue};x.Triple=function(c,b,d){this.subject=c;this.predicate=b;this.object=d};x.Triple.prototype.equals=
function(c){return this.subject.equals(c.subject)&&this.predicate.equals(c.predicate)&&this.object.equals(c.object)};x.Triple.prototype.toString=function(){return this.subject.toNT()+" "+this.predicate.toNT()+" "+this.object.toNT()+" . \r\n"};x.Graph=function(){this.triples=[];this.duplicates={};this.actions=[]};x.Graph.prototype.add=function(c){for(var b=0;b<this.actions.length;b++)c=this.actions[b](c);b=c.subject.toString()+c.predicate.toString()+c.object.toString();this.duplicates[b]||(this.duplicates[b]=
!0,this.triples.push(c));return this};x.Graph.prototype.addAction=function(c,b){this.actions.push(c);if(b==!0)for(var d=0;d<this.triples.length;d++)this.triples[d]=c(this.triples[d]);return this};x.Graph.prototype.addAll=function(c){for(var c=c.toArray(),b=0;b<c.length;b++)this.add(c[b]);return this};x.Graph.prototype.remove=function(c){for(var b=null,d=0;d<this.triples.length;d++)if(this.triples[d].equals(c)){delete this.duplicates[c.subject.toString()+c.predicate.toString()+c.object.toString()];
b=d;break}b!=null&&this.triples.splice(b,1);return this};x.Graph.prototype.toArray=function(){return this.triples};x.Graph.prototype.some=function(c){for(var b=0;b<this.triples.length;b++)if(c(this.triples[b],this)===!0)return!0;return!1};x.Graph.prototype.every=function(c){for(var b=0;b<this.triples.length;b++)if(c(this.triples[b],this)===!1)return!1;return!0};x.Graph.prototype.filter=function(c){for(var b=new x.Graph,d=0;d<this.triples.length;d++)c(this.triples[d],this)===!0&&b.add(this.triples[d]);
return b};x.Graph.prototype.forEach=function(c){for(var b=0;b<this.triples.length;b++)c(this.triples[b],this)};x.Graph.prototype.merge=function(){for(var c=new x.Graph,b=0;b<this.triples;b++){var d=this.triples[b];c.add(d)}for(b=0;b<triples.length;b++)d=triples[b],this.add(d);return c};x.Graph.prototype.match=function(c,b,d,h){for(var k=new x.Graph,g=0,j=0;j<this.triples.length;j++){var i=this.triples[j];if(c==null||i.subject.equals(c))if(b==null||i.predicate.equals(b))if(d==null||i.object.equals(d))if(h==
null||g<h)g++,k.add(i);else break}return k};x.Graph.prototype.removeMatches=function(c,b,d){for(var h=[],k=0;k<this.triples.length;k++){var g=this.triples[k];if(c==null||g.subject.equals(c))if(b==null||g.predicate.equals(b))(d==null||g.object.equals(d))&&h.push(g)}for(k=0;k<h.length;k++)this.remove(h[k]);return this};x.Graph.prototype.toNT=function(){var c="";this.forEach(function(b){c+=b.toString()});return c};x.buildRDFResource=function(c,b,d,h){return c.token==="blank"?x.buildBlankNode(c,b,d,h):
c.token==="literal"?x.buildLiteral(c,b,d,h):c.token==="uri"?x.buildNamedNode(c,b,d,h):c.token==="var"?(c=b[c.value],c!=null?x.buildRDFResource(c,b,d,h):null):null};x.buildBlankNode=function(c){if(c.value==null&&c.label)c.value=c.label;if(c.value.indexOf("_:")===0)c.value=c.value.split("_:")[1];return new x.BlankNode(c.value)};x.buildLiteral=function(c){return new x.Literal(c.value,c.lang,c.type)};x.buildNamedNode=function(c,b,d,h){if(c.value==null&&c.prefix!=null)b=d.resolveNsInEnvironment(c.prefix,
h),c.value=b+c.suffix;return new x.NamedNode(c)};x.rdf=new x.RDFEnvironment;var i={checkFilters:function(c,b,d,h,k,g){var j=c.filter,n=[];if(j==null||c.length!=null)return b;for(c=0;c<j.length;c++){for(var b=i.run(j[c].value,b,d,h,k,g),q=[],w=0;w<b.length;w++)b[w].__nullify__!=null?n.push(b[w]):q.push(b[w]);b=q}return b.concat(n)}};i.boundVars=function(c){if(c.expressionType!=null){var b=c.expressionType;if(b=="relationalexpression")return b=c.op2,i.boundVars(c.op1)+i.boundVars(b);else if(b=="conditionalor"||
b=="conditionaland"){for(var d=[],b=0;b<c.operands;b++)d=d.concat(i.boundVars(c.operands[b]));return d}else if(b=="builtincall")if(c.args==null)return[];else{d=[];for(b=0;b<c.args.length;b++)d=d.concat(i.boundVars(c.args[b]));return d}else if(b=="multiplicativeexpression"){d=i.boundVars(c.factor);for(b=0;b<c.factors.length;b++)d=d.concat(i.boundVars(c.factors[b].expression));return d}else if(b=="additiveexpression"){d=i.boundVars(c.summand);for(b=0;b<c.summands.length;b++)d=d.concat(i.boundVars(c.summands[b].expression));
return d}else if(b=="regex")return d=i.boundVars(c.expression1),d.concat(i.boundVars(c.expression2));else if(b=="unaryexpression")return i.boundVars(c.expression);else if(b=="atomic")return c.primaryexpression=="var"?[c.value]:[]}else throw console.log("ERROR"),console.log(c),"Cannot find bound expressions in a no expression token";};i.run=function(c,b,d,h,k,g){for(var j=g.copyDenormalizedBindings(b,k.outCache),n=[],q=0;q<b.length;q++){var w=i.runFilter(c,j[q],g,h,k),w=i.ebv(w);i.isEbvError(w)?d&&
(w={__nullify__:!0,bindings:b[q]},n.push(w)):w===!0?n.push(b[q]):d&&(w={__nullify__:!0,bindings:b[q]},n.push(w))}return n};i.collect=function(c,b,d,h,k){for(var g=k.copyDenormalizedBindings(b,h.outCache),j=[],n=0;n<g.length;n++){var q=i.runFilter(c,g[n],k,d,h);j.push({binding:b[n],value:q})}return j};i.runDistinct=function(){};i.runAggregator=function(c,b,d,h,k){if(b==null||b.length===0)return i.ebvError();else if(c.token==="variable"&&c.kind=="var")return b[0][c.value.value];else if(c.token==="variable"&&
c.kind==="aliased")if(c.expression.expressionType==="atomic"&&c.expression.primaryexpression==="var")return b[0][c.expression.value.value];else if(c.expression.expressionType==="aggregate")if(c.expression.aggregateType==="max"){for(var g=null,j=0;j<b.length;j++){var n=b[j],n=i.runFilter(c.expression.expression,n,d,h,k);i.isEbvError(n)||(g===null?g=n:i.runLtFunction(g,n).value===!0&&(g=n))}return g===null?i.ebvError():g}else if(c.expression.aggregateType==="min"){g=null;for(j=0;j<b.length;j++)n=b[j],
n=i.runFilter(c.expression.expression,n,d,h,k),i.isEbvError(n)||(g===null?g=n:i.runGtFunction(g,n).value===!0&&(g=n));return g===null?i.ebvError():g}else if(c.expression.aggregateType==="count"){var g={},q=0;if(c.expression.expression==="*")if(c.expression.distinct!=null&&c.expression.distinct!="")for(j=0;j<b.length;j++){var n=b[j],w=y.hashTerm(n);g[w]==null&&(g[w]=!0,q++)}else q=b.length;else for(j=0;j<b.length;j++)n=b[j],n=i.runFilter(c.expression.expression,n,d,h,k),i.isEbvError(n)||(c.expression.distinct!=
null&&c.expression.distinct!=""?(w=y.hashTerm(n),g[w]==null&&(g[w]=!0,q++)):q++);return{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:""+q}}else if(c.expression.aggregateType==="avg"){for(var g={},r={token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:"0"},j=q=0;j<b.length;j++)n=b[j],n=i.runFilter(c.expression.expression,n,d,h,k),i.isEbvError(n)||(c.expression.distinct!=null&&c.expression.distinct!=""?(w=y.hashTerm(n),g[w]==null&&(g[w]=!0,i.isNumeric(n)&&
(r=i.runSumFunction(r,n),q++))):i.isNumeric(n)&&(r=i.runSumFunction(r,n),q++));c=i.runDivFunction(r,{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:""+q});c.value=""+c.value;return c}else if(c.expression.aggregateType==="sum"){g={};r={token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:"0"};for(j=0;j<b.length;j++)n=b[j],n=i.runFilter(c.expression.expression,n,d,h,k),i.isEbvError(n)||(c.expression.distinct!=null&&c.expression.distinct!=""?(w=y.hashTerm(n),g[w]==
null&&(g[w]=!0,i.isNumeric(n)&&(r=i.runSumFunction(r,n)))):i.isNumeric(n)&&(r=i.runSumFunction(r,n)));r.value=""+r.value;return r}else return n=i.runFilter(aggregate.expression,b[0],h,{blanks:{},outCache:{}})};i.runFilter=function(c,b,d,h,k){if(c.expressionType!=null){var g=c.expressionType;if(g=="relationalexpression"){var g=i.runFilter(c.op1,b,d,h,k),j=i.runFilter(c.op2,b,d,h,k);return i.runRelationalFilter(c,g,j,b,d,h,k)}else if(g=="conditionalor")return i.runOrFunction(c,b,d,h,k);else if(g=="conditionaland")return i.runAndFunction(c,
b,d,h,k);else if(g=="additiveexpression")return i.runAddition(c.summand,c.summands,b,d,h,k);else if(g=="builtincall")return i.runBuiltInCall(c.builtincall,c.args,b,d,h,k);else if(g=="multiplicativeexpression")return i.runMultiplication(c.factor,c.factors,b,d,h,k);else if(g=="unaryexpression")return i.runUnaryExpression(c.unaryexpression,c.expression,b,d,h,k);else if(g=="irireforfunction")return i.runIriRefOrFunction(c.iriref,c.args,b,d,h,k);else if(g=="regex")return i.runRegex(c.text,c.pattern,c.flags,
b,d,h,k);else if(g=="atomic")if(c.primaryexpression=="var")return b[c.value.value];else{if(typeof c.value=="object"&&!(c.value.type==null||typeof c.value.type!="object"))c.value.type=y.lexicalFormBaseUri(c.value.type,k);return c.value}else throw"Unknown filter expression type";}else throw"Cannot find bound expressions in a no expression token";};i.isRDFTerm=function(c){return c==null?!1:c.token&&c.token=="literal"||c.token&&c.token=="uri"||c.token&&c.token=="blank"?!0:!1};i.RDFTermEquality=function(c,
b,d,h){return c.token==="literal"&&b.token==="literal"?c.lang==b.lang&&c.type==b.type&&c.value==b.value?!0:c.type!=null&&b.type!=null?i.ebvError():i.isSimpleLiteral(c)&&b.type!=null?i.ebvError():i.isSimpleLiteral(b)&&c.type!=null?i.ebvError():!1:c.token==="uri"&&b.token==="uri"?y.lexicalFormBaseUri(c,h)==y.lexicalFormBaseUri(b,h):c.token==="blank"&&b.token==="blank"?c.value==b.value:!1};i.isInteger=function(c){return c==null?!1:c.token==="literal"?c.type=="http://www.w3.org/2001/XMLSchema#integer"||
c.type=="http://www.w3.org/2001/XMLSchema#decimal"||c.type=="http://www.w3.org/2001/XMLSchema#double"||c.type=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||c.type=="http://www.w3.org/2001/XMLSchema#negativeInteger"||c.type=="http://www.w3.org/2001/XMLSchema#long"||c.type=="http://www.w3.org/2001/XMLSchema#int"||c.type=="http://www.w3.org/2001/XMLSchema#short"||c.type=="http://www.w3.org/2001/XMLSchema#byte"||c.type=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||c.type=="http://www.w3.org/2001/XMLSchema#unsignedLong"||
c.type=="http://www.w3.org/2001/XMLSchema#unsignedInt"||c.type=="http://www.w3.org/2001/XMLSchema#unsignedShort"||c.type=="http://www.w3.org/2001/XMLSchema#unsignedByte"||c.type=="http://www.w3.org/2001/XMLSchema#positiveInteger"?!0:!1:!1};i.isFloat=function(c){return c==null?!1:c.token==="literal"?c.type=="http://www.w3.org/2001/XMLSchema#float"?!0:!1:!1};i.isDecimal=function(c){return c==null?!1:c.token==="literal"?c.type=="http://www.w3.org/2001/XMLSchema#decimal"?!0:!1:!1};i.isDouble=function(c){return c==
null?!1:c.token==="literal"?c.type=="http://www.w3.org/2001/XMLSchema#double"?!0:!1:!1};i.isNumeric=function(c){return c==null?!1:c.token==="literal"?c.type=="http://www.w3.org/2001/XMLSchema#integer"||c.type=="http://www.w3.org/2001/XMLSchema#decimal"||c.type=="http://www.w3.org/2001/XMLSchema#float"||c.type=="http://www.w3.org/2001/XMLSchema#double"||c.type=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||c.type=="http://www.w3.org/2001/XMLSchema#negativeInteger"||c.type=="http://www.w3.org/2001/XMLSchema#long"||
c.type=="http://www.w3.org/2001/XMLSchema#int"||c.type=="http://www.w3.org/2001/XMLSchema#short"||c.type=="http://www.w3.org/2001/XMLSchema#byte"||c.type=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||c.type=="http://www.w3.org/2001/XMLSchema#unsignedLong"||c.type=="http://www.w3.org/2001/XMLSchema#unsignedInt"||c.type=="http://www.w3.org/2001/XMLSchema#unsignedShort"||c.type=="http://www.w3.org/2001/XMLSchema#unsignedByte"||c.type=="http://www.w3.org/2001/XMLSchema#positiveInteger"?!0:!1:
!1};i.isSimpleLiteral=function(c){return c&&c.token=="literal"?c.type==null&&c.lang==null?!0:!1:!1};i.isXsdType=function(c,b){return b&&b.token=="literal"?b.type=="http://www.w3.org/2001/XMLSchema#"+c:!1};i.ebv=function(c){if(c==null||i.isEbvError(c))return i.ebvError();else if(c.token&&c.token==="literal")if(c.type=="http://www.w3.org/2001/XMLSchema#integer"||c.type=="http://www.w3.org/2001/XMLSchema#decimal"||c.type=="http://www.w3.org/2001/XMLSchema#double"||c.type=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||
c.type=="http://www.w3.org/2001/XMLSchema#negativeInteger"||c.type=="http://www.w3.org/2001/XMLSchema#long"||c.type=="http://www.w3.org/2001/XMLSchema#int"||c.type=="http://www.w3.org/2001/XMLSchema#short"||c.type=="http://www.w3.org/2001/XMLSchema#byte"||c.type=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||c.type=="http://www.w3.org/2001/XMLSchema#unsignedLong"||c.type=="http://www.w3.org/2001/XMLSchema#unsignedInt"||c.type=="http://www.w3.org/2001/XMLSchema#unsignedShort"||c.type=="http://www.w3.org/2001/XMLSchema#unsignedByte"||
c.type=="http://www.w3.org/2001/XMLSchema#positiveInteger"){var b=parseFloat(c.value);return isNaN(b)?!1:parseFloat(c.value)!=0}else return c.type==="http://www.w3.org/2001/XMLSchema#boolean"?c.value==="true"||c.value===!0||c.value==="True":c.type==="http://www.w3.org/2001/XMLSchema#string"?c.value!="":c.type==="http://www.w3.org/2001/XMLSchema#dateTime"?new Date(c.value)!=null:i.isEbvError(c)?c:c.type==null?c.value!=""?!0:!1:i.ebvError();else return c.value===!0};i.ebvTrue=function(){return val=
{token:"literal",type:"http://www.w3.org/2001/XMLSchema#boolean",value:!0}};i.ebvFalse=function(){return val={token:"literal",type:"http://www.w3.org/2001/XMLSchema#boolean",value:!1}};i.ebvError=function(){return val={token:"literal",type:"https://github.com/antoniogarrote/js-tools/types#error",value:null}};i.isEbvError=function(c){return typeof c=="object"&&c!=null?c.type==="https://github.com/antoniogarrote/js-tools/types#error":!1};i.ebvBoolean=function(c){return i.isEbvError(c)?c:c===!0?i.ebvTrue():
i.ebvFalse()};i.runRelationalFilter=function(c,b,d,h,k,g,j){c=c.operator;if(c==="=")return i.runEqualityFunction(b,d,h,k,g,j);else if(c==="!="){b=i.runEqualityFunction(b,d,h,k,g,j);if(!i.isEbvError(b))b.value=!b.value;return b}else if(c==="<")return i.runLtFunction(b,d,h);else if(c===">")return i.runGtFunction(b,d,h);else if(c==="<=")return i.runLtEqFunction(b,d,h);else if(c===">=")return i.runGtEqFunction(b,d,h);else throw"Error applying relational filter, unknown operator";};i.effectiveTypeValue=
function(c){if(c.token=="literal")if(c.type=="http://www.w3.org/2001/XMLSchema#integer")return c=parseInt(c.value);else if(c.type=="http://www.w3.org/2001/XMLSchema#decimal")return c=parseFloat(c.value);else if(c.type=="http://www.w3.org/2001/XMLSchema#float")return c=parseFloat(c.value);else if(c.type=="http://www.w3.org/2001/XMLSchema#double")return c=parseFloat(c.value);else if(c.type=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger")return c=parseFloat(c.value);else if(c.type=="http://www.w3.org/2001/XMLSchema#negativeInteger")return c=
parseInt(c.value);else if(c.type=="http://www.w3.org/2001/XMLSchema#long")return c=parseInt(c.value);else if(c.type=="http://www.w3.org/2001/XMLSchema#int")return c=parseInt(c.value);else if(c.type=="http://www.w3.org/2001/XMLSchema#short")return c=parseInt(c.value);else if(c.type=="http://www.w3.org/2001/XMLSchema#byte")return c=parseInt(c.value);else if(c.type=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger")return c=parseInt(c.value);else if(c.type=="http://www.w3.org/2001/XMLSchema#unsignedLong")return c=
parseInt(c.value);else if(c.type=="http://www.w3.org/2001/XMLSchema#unsignedInt")return c=parseInt(c.value);else if(c.type=="http://www.w3.org/2001/XMLSchema#unsignedShort")return c=parseInt(c.value);else if(c.type=="http://www.w3.org/2001/XMLSchema#unsignedByte")return c=parseInt(c.value);else if(c.type=="http://www.w3.org/2001/XMLSchema#positiveInteger")return c=parseInt(c.value);else if(c.type=="http://www.w3.org/2001/XMLSchema#date"||c.type=="http://www.w3.org/2001/XMLSchema#dateTime")try{return y.parseISO8601(c.value)}catch(b){return null}else return c.type==
"http://www.w3.org/2001/XMLSchema#boolean"?c.value===!0||c.value==="true"||c.value==="1"||c.value===1||c.value===!0?!0:c.value===!1||c.value==="false"||c.value==="0"||c.value===0||c.value===!1?!1:void 0:c.type=="http://www.w3.org/2001/XMLSchema#string"?c.value===null||c.value===void 0?void 0:""+c.value:c.value;else throw console.log("not implemented yet"),"value not supported in operations yet";};i.runOrFunction=function(c,b,d,h,k){for(var g=null,j=0;j<c.operands.length;j++){var n=i.runFilter(c.operands[j],
b,d,h,k);i.isEbvError(n)==!1&&(n=i.ebv(n));g==null?g=n:i.isEbvError(n)?g=i.isEbvError(g)?i.ebvError():g===!0?!0:i.ebvError():n===!0?g=!0:i.isEbvError(g)&&(g=i.ebvError())}return i.ebvBoolean(g)};i.runAndFunction=function(c,b,d,h,k){for(var g=null,j=0;j<c.operands.length;j++){var n=i.runFilter(c.operands[j],b,d,h,k);i.isEbvError(n)==!1&&(n=i.ebv(n));g==null?g=n:i.isEbvError(n)?g=i.isEbvError(g)?i.ebvError():g===!0?i.ebvError():!1:n===!0?i.isEbvError(g)&&(g=i.ebvError()):g=!1}return i.ebvBoolean(g)};
i.runEqualityFunction=function(c,b,d,h,k,g){if(i.isEbvError(c)||i.isEbvError(b))return i.ebvError();if(i.isNumeric(c)&&i.isNumeric(b))return d=i.effectiveTypeValue(c),k=i.effectiveTypeValue(b),isNaN(d)||isNaN(k)?i.ebvBoolean(i.RDFTermEquality(c,b,h,g)):i.ebvBoolean(d==k);else if((i.isSimpleLiteral(c)||i.isXsdType("string",c))&&(i.isSimpleLiteral(b)||i.isXsdType("string",b)))return i.ebvBoolean(i.effectiveTypeValue(c)==i.effectiveTypeValue(b));else if(i.isXsdType("boolean",c)&&i.isXsdType("boolean",
b))return i.ebvBoolean(i.effectiveTypeValue(c)==i.effectiveTypeValue(b));else if((i.isXsdType("dateTime",c)||i.isXsdType("date",c))&&(i.isXsdType("dateTime",b)||i.isXsdType("date",b))){if(i.isXsdType("dateTime",c)&&i.isXsdType("date",b))return i.ebvFalse();if(i.isXsdType("date",c)&&i.isXsdType("dateTime",b))return i.ebvFalse();c=y.compareDateComponents(c.value,b.value);return c!=null?c==0?i.ebvTrue():i.ebvFalse():i.ebvError()}else return i.isRDFTerm(c)&&i.isRDFTerm(b)?i.ebvBoolean(i.RDFTermEquality(c,
b,h,g)):i.ebvFalse()};i.runGtFunction=function(c,b){if(i.isEbvError(c)||i.isEbvError(b))return i.ebvError();if(i.isNumeric(c)&&i.isNumeric(b))return i.ebvBoolean(i.effectiveTypeValue(c)>i.effectiveTypeValue(b));else if(i.isSimpleLiteral(c)&&i.isSimpleLiteral(b))return i.ebvBoolean(i.effectiveTypeValue(c)>i.effectiveTypeValue(b));else if(i.isXsdType("string",c)&&i.isXsdType("string",b))return i.ebvBoolean(i.effectiveTypeValue(c)>i.effectiveTypeValue(b));else if(i.isXsdType("boolean",c)&&i.isXsdType("boolean",
b))return i.ebvBoolean(i.effectiveTypeValue(c)>i.effectiveTypeValue(b));else if((i.isXsdType("dateTime",c)||i.isXsdType("date",c))&&(i.isXsdType("dateTime",b)||i.isXsdType("date",b))){if(i.isXsdType("dateTime",c)&&i.isXsdType("date",b))return i.ebvFalse();if(i.isXsdType("date",c)&&i.isXsdType("dateTime",b))return i.ebvFalse();var d=y.compareDateComponents(c.value,b.value);return d!=null?d==1?i.ebvTrue():i.ebvFalse():i.ebvError()}else return i.ebvFalse()};i.runTotalGtFunction=function(c,b){return i.isEbvError(c)||
i.isEbvError(b)?i.ebvError():i.isNumeric(c)&&i.isNumeric(b)||i.isSimpleLiteral(c)&&i.isSimpleLiteral(b)||i.isXsdType("string",c)&&i.isSimpleLiteral("string",b)||i.isXsdType("boolean",c)&&i.isSimpleLiteral("boolean",b)||i.isXsdType("dateTime",c)&&i.isSimpleLiteral("dateTime",b)?i.runGtFunction(c,b,[]):c.token&&c.token==="uri"&&b.token&&b.token==="uri"?i.ebvBoolean(c.value>b.value):c.token&&c.token==="literal"&&b.token&&b.token==="literal"?i.ebvBoolean(""+c.value+c.type+c.lang>""+b.value+b.type+b.lang):
c.token&&c.token==="blank"&&b.token&&b.token==="blank"?i.ebvBoolean(c.value>b.value):c.value&&b.value?i.ebvBoolean(c.value>b.value):i.ebvTrue()};i.runLtFunction=function(c,b){if(i.isEbvError(c)||i.isEbvError(b))return i.ebvError();if(i.isNumeric(c)&&i.isNumeric(b))return i.ebvBoolean(i.effectiveTypeValue(c)<i.effectiveTypeValue(b));else if(i.isSimpleLiteral(c)&&i.isSimpleLiteral(b))return i.ebvBoolean(i.effectiveTypeValue(c)<i.effectiveTypeValue(b));else if(i.isXsdType("string",c)&&i.isXsdType("string",
b))return i.ebvBoolean(i.effectiveTypeValue(c)<i.effectiveTypeValue(b));else if(i.isXsdType("boolean",c)&&i.isXsdType("boolean",b))return i.ebvBoolean(i.effectiveTypeValue(c)<i.effectiveTypeValue(b));else if((i.isXsdType("dateTime",c)||i.isXsdType("date",c))&&(i.isXsdType("dateTime",b)||i.isXsdType("date",b))){if(i.isXsdType("dateTime",c)&&i.isXsdType("date",b))return i.ebvFalse();if(i.isXsdType("date",c)&&i.isXsdType("dateTime",b))return i.ebvFalse();var d=y.compareDateComponents(c.value,b.value);
return d!=null?d==-1?i.ebvTrue():i.ebvFalse():i.ebvError()}else return i.ebvFalse()};i.runGtEqFunction=function(c,b){if(i.isEbvError(c)||i.isEbvError(b))return i.ebvError();if(i.isNumeric(c)&&i.isNumeric(b))return i.ebvBoolean(i.effectiveTypeValue(c)>=i.effectiveTypeValue(b));else if(i.isSimpleLiteral(c)&&i.isSimpleLiteral(b))return i.ebvBoolean(i.effectiveTypeValue(c)>=i.effectiveTypeValue(b));else if(i.isXsdType("string",c)&&i.isXsdType("string",b))return i.ebvBoolean(i.effectiveTypeValue(c)>=i.effectiveTypeValue(b));
else if(i.isXsdType("boolean",c)&&i.isXsdType("boolean",b))return i.ebvBoolean(i.effectiveTypeValue(c)>=i.effectiveTypeValue(b));else if((i.isXsdType("dateTime",c)||i.isXsdType("date",c))&&(i.isXsdType("dateTime",b)||i.isXsdType("date",b))){if(i.isXsdType("dateTime",c)&&i.isXsdType("date",b))return i.ebvFalse();if(i.isXsdType("date",c)&&i.isXsdType("dateTime",b))return i.ebvFalse();var d=y.compareDateComponents(c.value,b.value);return d!=null?d!=-1?i.ebvTrue():i.ebvFalse():i.ebvError()}else return i.ebvFalse()};
i.runLtEqFunction=function(c,b){if(i.isEbvError(c)||i.isEbvError(b))return i.ebvError();if(i.isNumeric(c)&&i.isNumeric(b))return i.ebvBoolean(i.effectiveTypeValue(c)<=i.effectiveTypeValue(b));else if(i.isSimpleLiteral(c)&&i.isSimpleLiteral(b))return i.ebvBoolean(i.effectiveTypeValue(c)<=i.effectiveTypeValue(b));else if(i.isXsdType("string",c)&&i.isXsdType("string",b))return i.ebvBoolean(i.effectiveTypeValue(c)<=i.effectiveTypeValue(b));else if(i.isXsdType("boolean",c)&&i.isXsdType("boolean",b))return i.ebvBoolean(i.effectiveTypeValue(c)<=
i.effectiveTypeValue(b));else if((i.isXsdType("dateTime",c)||i.isXsdType("date",c))&&(i.isXsdType("dateTime",b)||i.isXsdType("date",b))){if(i.isXsdType("dateTime",c)&&i.isXsdType("date",b))return i.ebvFalse();if(i.isXsdType("date",c)&&i.isXsdType("dateTime",b))return i.ebvFalse();var d=y.compareDateComponents(c.value,b.value);return d!=null?d!=1?i.ebvTrue():i.ebvFalse():i.ebvError()}else return i.ebvFalse()};i.runAddition=function(c,b,d,h,k,g){var j=i.runFilter(c,d,h,k,g);if(i.isEbvError(j))return i.ebvError();
c=j;if(i.isNumeric(j)){for(j=0;j<b.length;j++){var n=i.runFilter(b[j].expression,d,h,k,g);if(i.isNumeric(n))b[j].operator==="+"?c=i.runSumFunction(c,n):b[j].operator==="-"&&(c=i.runSubFunction(c,n));else return i.ebvFalse()}return c}else return i.ebvFalse()};i.runSumFunction=function(c,b){if(i.isEbvError(c)||i.isEbvError(b))return i.ebvError();var d=i.effectiveTypeValue(c)+i.effectiveTypeValue(b);return i.isDouble(c)||i.isDouble(b)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:d}:
i.isFloat(c)||i.isFloat(b)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",value:d}:i.isDecimal(c)||i.isDecimal(b)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:d}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:d}};i.runSubFunction=function(c,b){if(i.isEbvError(c)||i.isEbvError(b))return i.ebvError();var d=i.effectiveTypeValue(c)-i.effectiveTypeValue(b);return i.isDouble(c)||i.isDouble(b)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",
value:d}:i.isFloat(c)||i.isFloat(b)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",value:d}:i.isDecimal(c)||i.isDecimal(b)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:d}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:d}};i.runMultiplication=function(c,b,d,h,k,g){c=i.runFilter(c,d,h,k,g);if(i.isEbvError(c))return c;var j=c;if(i.isNumeric(c)){for(var n=0;n<b.length;n++){var q=i.runFilter(b[n].expression,d,h,k,g);if(i.isEbvError(q))return c;
if(i.isNumeric(q))b[n].operator==="*"?j=i.runMulFunction(j,q):b[n].operator==="/"&&(j=i.runDivFunction(j,q));else return i.ebvFalse()}return j}else return i.ebvFalse()};i.runMulFunction=function(c,b){if(i.isEbvError(c)||i.isEbvError(b))return i.ebvError();var d=i.effectiveTypeValue(c)*i.effectiveTypeValue(b);return i.isDouble(c)||i.isDouble(b)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:d}:i.isFloat(c)||i.isFloat(b)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",
value:d}:i.isDecimal(c)||i.isDecimal(b)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:d}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:d}};i.runDivFunction=function(c,b){if(i.isEbvError(c)||i.isEbvError(b))return i.ebvError();var d=i.effectiveTypeValue(c)/i.effectiveTypeValue(b);return i.isDouble(c)||i.isDouble(b)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:d}:i.isFloat(c)||i.isFloat(b)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",
value:d}:i.isDecimal(c)||i.isDecimal(b)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:d}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:d}};i.runBuiltInCall=function(c,b,d,h,k,g){if(c==="notexists"||c==="exists"){var j=JSON.parse(JSON.stringify(b[0])),j=h.abstractQueryTree.parseSelect({pattern:j},d),j=h.abstractQueryTree.bind(j.pattern,d),d=h.executeSelectUnit([{kind:"*"}],k,j,g);return c==="exists"?i.ebvBoolean(d.length!==0):i.ebvBoolean(d.length===
0)}else{for(var j=[],n=0;n<b.length;n++)if(b[n].token==="var")j.push(b[n]);else{var q=i.runFilter(b[n],d,h,k,g);if(i.isEbvError(q))return q;j.push(q)}if(c==="str")return j[0].token==="literal"?{token:"literal",type:null,value:""+j[0].value}:j[0].token==="uri"?{token:"literal",type:null,value:j[0].value}:i.ebvFalse();else if(c==="lang")return j[0].token==="literal"?j[0].lang!=null?{token:"literal",value:""+j[0].lang}:{token:"literal",value:""}:i.ebvError();else if(c==="datatype")return j[0].token===
"literal"?(c=j[0],c.type!=null?typeof c.type==="string"?{token:"uri",value:c.type,prefix:null,suffix:null}:c.type:c.lang==null?{token:"uri",value:"http://www.w3.org/2001/XMLSchema#string",prefix:null,suffix:null}:i.ebvError()):i.ebvError();else if(c==="isliteral")return j[0].token==="literal"?i.ebvTrue():i.ebvFalse();else if(c==="isblank")return j[0].token==="blank"?i.ebvTrue():i.ebvFalse();else if(c==="isuri"||c==="isiri")return j[0].token==="uri"?i.ebvTrue():i.ebvFalse();else if(c==="sameterm")return c=
i.RDFTermEquality(j[0],j[1],h,g),i.isEbvError(c)&&(c=!1),i.ebvBoolean(c);else if(c==="langmatches")return c=j[0],d=j[1],c.token==="literal"&&d.token==="literal"?d.value==="*"&&c.value!=""?i.ebvTrue():i.ebvBoolean(c.value.toLowerCase().indexOf(d.value.toLowerCase())===0):i.ebvError();else if(c==="bound")return c=j[0].value,c==null?i.ebvError():d[c]!=null?i.ebvTrue():i.ebvFalse();else throw"Builtin call "+c+" not implemented yet";}};i.runUnaryExpression=function(c,b,d,h,k,g){b=i.runFilter(b,d,h,k,g);
if(i.isEbvError(b))return b;if(c==="!"){var j=i.ebv(b);return i.isEbvError(j)?i.ebvFalse():i.ebvBoolean(!j)}else if(c==="+")return i.isNumeric(b)?b:i.ebvError();else if(c==="-")if(i.isNumeric(b)){c={};for(j in b)c[j]=b[j];c.value=-c.value;return c}else return i.ebvError()};i.runRegex=function(c,b,d,h,k,g,j){if(c!=null)c=i.runFilter(c,h,k,g,j);else return i.ebvError();if(b!=null)b=i.runFilter(b,h,k,g,j);else return i.ebvError();d!=null&&(d=i.runFilter(d,h,k,g,j));if(b!=null&&b.token==="literal"&&(d==
null||d.token==="literal"))b=b.value,d=d==null?null:d.value;else return i.ebvError();if(c!=null&&c.token=="var")if(h[c.value]!=null)c=h[c.value];else return i.ebvError();else if(c!=null&&c.token==="literal")if(c.type==null||i.isXsdType("string",c))c=c.value;else return i.ebvError();else return i.ebvError();return(d==null?RegExp(b):RegExp(b,d.toLowerCase())).exec(c)?i.ebvTrue():i.ebvFalse()};i.normalizeLiteralDatatype=function(c,b,d){if(!(c.value.type==null||typeof c.value.type!="object"))c.value.type=
y.lexicalFormBaseUri(c.value.type,d);return c};i.runIriRefOrFunction=function(c,b,d,h,k,g){if(b==null)return c;else{for(var j=[],n=0;n<b.length;n++)j.push(i.runFilter(b[n],d,h,k,g));c=y.lexicalFormBaseUri(c,g);if(c=="http://www.w3.org/2001/XMLSchema#integer"||c=="http://www.w3.org/2001/XMLSchema#decimal"||c=="http://www.w3.org/2001/XMLSchema#double"||c=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||c=="http://www.w3.org/2001/XMLSchema#negativeInteger"||c=="http://www.w3.org/2001/XMLSchema#long"||
c=="http://www.w3.org/2001/XMLSchema#int"||c=="http://www.w3.org/2001/XMLSchema#short"||c=="http://www.w3.org/2001/XMLSchema#byte"||c=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||c=="http://www.w3.org/2001/XMLSchema#unsignedLong"||c=="http://www.w3.org/2001/XMLSchema#unsignedInt"||c=="http://www.w3.org/2001/XMLSchema#unsignedShort"||c=="http://www.w3.org/2001/XMLSchema#unsignedByte"||c=="http://www.w3.org/2001/XMLSchema#positiveInteger")if(j=j[0],j.token==="literal")if(j=i.normalizeLiteralDatatype(j,
h,g),j.type=="http://www.w3.org/2001/XMLSchema#integer"||j.type=="http://www.w3.org/2001/XMLSchema#decimal"||j.type=="http://www.w3.org/2001/XMLSchema#double"||j.type=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||j.type=="http://www.w3.org/2001/XMLSchema#negativeInteger"||j.type=="http://www.w3.org/2001/XMLSchema#long"||j.type=="http://www.w3.org/2001/XMLSchema#int"||j.type=="http://www.w3.org/2001/XMLSchema#short"||j.type=="http://www.w3.org/2001/XMLSchema#byte"||j.type=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||
j.type=="http://www.w3.org/2001/XMLSchema#unsignedLong"||j.type=="http://www.w3.org/2001/XMLSchema#unsignedInt"||j.type=="http://www.w3.org/2001/XMLSchema#unsignedShort"||j.type=="http://www.w3.org/2001/XMLSchema#unsignedByte"||j.type=="http://www.w3.org/2001/XMLSchema#positiveInteger")return j.type=c,j;else if(j.type=="http://www.w3.org/2001/XMLSchema#boolean")return i.ebv(j)==!0?(j.type=c,j.value=1):(j.type=c,j.value=0),j;else if(j.type=="http://www.w3.org/2001/XMLSchema#float"||j.type=="http://www.w3.org/2001/XMLSchema#double")return j.type=
c,j.value=parseInt(j.value),j;else if(j.type=="http://www.w3.org/2001/XMLSchema#string"||j.type==null){if(j.value.split(".").length>2)return i.ebvError();else if(j.value.split("-").length>2)return i.ebvError();else if(j.value.split("/").length>2)return i.ebvError();else if(j.value.split("+").length>2)return i.ebvError();if(c=="http://www.w3.org/2001/XMLSchema#decimal"&&(j.value.indexOf("e")!=-1||j.value.indexOf("E")!=-1))return i.ebvError();if(c=="http://www.w3.org/2001/XMLSchema#int"||c=="http://www.w3.org/2001/XMLSchema#integer")if(j.value.indexOf("e")!=
-1||j.value.indexOf("E")!=-1||j.value.indexOf(".")!=-1)return i.ebvError();try{return j.value=parseInt(parseFloat(j.value)),isNaN(j.value)?i.ebvError():(j.type=c,j)}catch(q){return i.ebvError()}}else return i.ebvError();else return i.ebvError();else if(c=="http://www.w3.org/2001/XMLSchema#boolean")return j=j[0],j.token==="literal"&&j.type==null?j.value==="true"||j.value==="1"?i.ebvTrue():j.value==="false"||j.value==="0"?i.ebvFalse():i.ebvError():j.token==="literal"?i.isEbvError(j)?j:i.ebvBoolean(j):
i.ebvError();else if(c=="http://www.w3.org/2001/XMLSchema#string")if(j=j[0],j.token==="literal")if(j=i.normalizeLiteralDatatype(j,h,g),j.type=="http://www.w3.org/2001/XMLSchema#integer"||j.type=="http://www.w3.org/2001/XMLSchema#decimal"||j.type=="http://www.w3.org/2001/XMLSchema#double"||j.type=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||j.type=="http://www.w3.org/2001/XMLSchema#negativeInteger"||j.type=="http://www.w3.org/2001/XMLSchema#long"||j.type=="http://www.w3.org/2001/XMLSchema#int"||
j.type=="http://www.w3.org/2001/XMLSchema#short"||j.type=="http://www.w3.org/2001/XMLSchema#byte"||j.type=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||j.type=="http://www.w3.org/2001/XMLSchema#unsignedLong"||j.type=="http://www.w3.org/2001/XMLSchema#unsignedInt"||j.type=="http://www.w3.org/2001/XMLSchema#unsignedShort"||j.type=="http://www.w3.org/2001/XMLSchema#unsignedByte"||j.type=="http://www.w3.org/2001/XMLSchema#positiveInteger"||j.type=="http://www.w3.org/2001/XMLSchema#float")return j.type=
c,j.value=""+j.value,j;else if(j.type=="http://www.w3.org/2001/XMLSchema#string")return j;else if(j.type=="http://www.w3.org/2001/XMLSchema#boolean")return i.ebv(j)?(j.type=c,j.value="true"):(j.type=c,j.value="false"),j;else if(j.type=="http://www.w3.org/2001/XMLSchema#dateTime"||j.type=="http://www.w3.org/2001/XMLSchema#date"){j.type=c;if(typeof j.value!="string")j.value=y.iso8601(j.value);return j}else return j.type==null?(j.value=""+j.value,j.type=c,j):i.ebvError();else return j.token==="uri"?
{token:"literal",value:y.lexicalFormBaseUri(j,g),type:c,lang:null}:i.ebvError();else if(c=="http://www.w3.org/2001/XMLSchema#dateTime"||c=="http://www.w3.org/2001/XMLSchema#date")if(j=j[0],j.type=="http://www.w3.org/2001/XMLSchema#dateTime"||j.type=="http://www.w3.org/2001/XMLSchema#date")return j;else if(j.type=="http://www.w3.org/2001/XMLSchema#string"||j.type==null)try{return j.value=y.iso8601(y.parseStrictISO8601(j.value)),j.type=c,j}catch(w){return i.ebvError()}else return i.ebvError();else if(c==
"http://www.w3.org/2001/XMLSchema#float")if(j=j[0],j.token==="literal")if(j=i.normalizeLiteralDatatype(j,h,g),j.type=="http://www.w3.org/2001/XMLSchema#decimal"||j.type=="http://www.w3.org/2001/XMLSchema#int")return j.type=c,j.value=parseFloat(j.value),j;else if(j.type=="http://www.w3.org/2001/XMLSchema#boolean")return i.ebv(j)==!0?(j.type=c,j.value=1):(j.type=c,j.value=0),j;else if(j.type=="http://www.w3.org/2001/XMLSchema#float"||j.type=="http://www.w3.org/2001/XMLSchema#double")return j.type=c,
j.value=parseFloat(j.value),j;else if(j.type=="http://www.w3.org/2001/XMLSchema#string")try{return j.value=parseFloat(j.value),isNaN(j.value)?i.ebvError():(j.type=c,j)}catch(r){return i.ebvError()}else if(j.type==null){if(j.value.split(".").length>2)return i.ebvError();else if(j.value.split("-").length>2)return i.ebvError();else if(j.value.split("/").length>2)return i.ebvError();else if(j.value.split("+").length>2)return i.ebvError();try{return j.value=parseFloat(j.value),isNaN(j.value)?i.ebvError():
(j.type=c,j)}catch(x){return i.ebvError()}}else return i.ebvError();else return i.ebvError();else return i.ebvError()}};var I={variablesInBGP:function(c){var b=c.variables;if(b)return b;var d=c.value||c,b=[];for(comp in d)d[comp]&&d[comp].token==="var"?b.push(d[comp].value):d[comp]&&d[comp].token==="blank"&&b.push("blank:"+d[comp].label);return c.variables=b},connected:function(c,b){for(var d="/"+c.vars.join("/")+"/",h=0;h<b.vars.length;h++)if(d.indexOf("/"+b.vars[h]+"/")!=-1)return!0;return!1},variablesIntersectionBGP:function(c,
b){for(var d=I.variablesInBGP(c).sort(),h=I.variablesInBGP(b).sort(),k=0,g=0,j=[];k<d.length&&g<h.length;)d[k]===h[g]?(j.push(d[k]),k++,g++):d[k]<h[g]?k++:g++;return j},executeAndBGPsGroups:function(c){for(var b={},d={},h=0,k=0;k<c.length;k++){var g=c[k],j=[],i;for(i in g)i!="_cost"&&(g[i].token==="var"?j.push(g[i].value):g[i].token==="blank"&&j.push(g[i].label));var q=!1,w;for(w in d){groupVar=d[w];for(var r=0;r<j.length;r++)if(groupVar.indexOf("/"+j[r]+"/")!=-1){b[w].push(g);d[w]=groupVar+j.join("/")+
"/";q=!0;break}if(q)break}q||(b[h]=[g],d[h]="/"+j.join("/")+"/",h++)}c=[];for(h in b)c.push(b[h]);return c},intersectionSize:function(c,b){for(var d=b.i.split("_"),h=0;h<d.length;h++)if(d[h]!=""&&c.i.indexOf("_"+d[h]+"_")!=-1)return 1;return 0},createJoinTree:function(c,b){for(var d="/"+c.vars.join("/")+"/",h=c.vars.concat([]),k=[],g=0;g<b.vars.length;g++)d.indexOf("/"+b.vars[g]+"/")!=-1?b.vars[g].indexOf("_:")==0?k.push("blank:"+b.vars[g]):k.push(b.vars[g]):h.push(b.vars[g]);for(var j=b.i.split("_"),
i=c.i.split("_"),d={},g=0;g<j.length;g++)j[g]!=""&&(d[j[g]]=!0);for(g=0;g<i.length;g++)i[g]!=""&&(d[i[g]]=!0);var g=[],q;for(q in d)g.push(q);return{left:c,right:b,cost:c.cost+b.cost,i:"_"+g.sort().join("_")+"_",vars:h,join:k}}};I.executeBushyTree=function(c,b,d,h){if(c.left==null)return I.executeEmptyJoinBGP(c.right,b,d,h);else if(c.right==null)return I.executeEmptyJoinBGP(c.left,b,d,h);else{var k=I.executeBushyTree(c.left,b,d,h);if(k!=null)return b=I.executeBushyTree(c.right,b,d,h),b!=null?I.joinBindings2(c.join,
k,b):null}};I.executeAndBGPsDPSize=function(c,b,d,h){for(var k=I.executeAndBGPsGroups(c),c=[],g=0;g<k.length;g++){var j=k[g];bgpas=d.computeCosts(j,h);var i={},q={},w={},r=1,x=null,y={};w["1"]=[];for(var D=0;D<j.length;D++){var r=[],E;for(E in j[D])E!="_cost"&&(j[D][E].token==="var"?r.push(j[D][E].value):j[D][E].token==="blank"&&r.push(j[D][E].label));q["_"+D+"_"]={left:j[D],right:null,cost:j[D]._cost,i:"_"+D+"_",vars:r};r={left:j[D],right:null,cost:j[D]._cost,i:"_"+D+"_",vars:r};i["_"+D+"_"]=r;delete j[D]._cost;
y["_"+D+"_"]=!0;w["1"].push("_"+D+"_");if(x==null||x.cost>r.cost)x=r}for(var F=2;F<=j.length;F++)for(var H=1;H<F;H++)for(var J=w[""+H]||[],L=w[""+(F-H)]||[],D=0;D<J.length;D++)for(var O=0;O<L.length;O++)if(J[D]!==L[O]){var M=q[J[D]],S=q[L[O]];if(I.intersectionSize(M,S)==0&&I.connected(M,S)&&(r=F,S=I.createJoinTree(i[M.i],i[S.i]),!y[S.i])){y[S.i]=!0;var U=S.cost+1;if(i[S.i]!=null)U=i[S.i].cost;M=w[F]||[];M.push(S.i);q[S.i]=S;w[F]=M;U>S.cost&&(r===F&&(x=S),i[S.i]=S)}}c.push(x)}M=null;for(g=0;g<c.length;g++)E=
I.executeBushyTree(c[g],b,d,h),M=M==null?E:I.crossProductBindings(M,E);return M};I.executeEmptyJoinBGP=function(c,b,d,h){return I.executeBGPDatasets(c,b,d,h)};I.executeBGPDatasets=function(c,b,d,h){var k={};if(c.graph==null){for(var g=[],j=0;j<b["default"].length;j++)if(k[b["default"][j].oid]==null){k[b["default"][j].oid]=!0;c.graph=b["default"][j];var i=d.rangeQuery(c,h),i=I.buildBindingsFromRange(i,c);g.push(i)}return c=I.unionManyBindings(g)}else if(c.graph.token==="var"){for(var q=c.graph.value,
g=[],j=0;j<b.named.length;j++)if(k[b.named[j].oid]==null)if(k[b.named[j].oid]=!0,c.graph=b.named[j],i=d.rangeQuery(c,h),i!=null){for(var i=I.buildBindingsFromRange(i,c),w=0;w<i.length;w++)i[w][q]=b.named[j].oid;g.push(i)}else return null;return c=I.unionManyBindings(g||[])}else return i=d.rangeQuery(c,h),i!=null?i=I.buildBindingsFromRange(i,c):null};I.buildBindingsFromRange=function(c,b){I.variablesInBGP(b);var d={},h=b.value||b,d={};for(i in h)h[i]&&h[i].token==="var"?d[i]=h[i].value:h[i]&&h[i].token===
"blank"&&(d[i]="blank:"+h[i].label);h=[];if(c!=null)for(var k=0;k<c.length;k++){var g={},j=c[k],i;for(i in d)g[d[i]]=j[i];h.push(g)}return h};I.areCompatibleBindings=function(c,b){for(var d in c)if(b[d]!=null&&b[d]!=c[d])return!1;return!0};I.mergeBindings=function(c,b){var d={},h;for(h in c)d[h]=c[h];for(h in b)d[h]=b[h];return d};I.joinBindings2=function(c,b,d){for(var h={},k,g,j,i,q=[],w=0;w<b.length;w++){k=b[w];i=h;for(var r=0;r<c.length;r++)g=c[r],g=k[g],r==c.length-1?(j=i[g]||[],j.push(k),i[g]=
j):(j=i[g]||{},i=i[g]=j)}for(w=0;w<d.length;w++){k=d[w];i=h;for(r=0;r<c.length;r++)if(g=c[r],g=k[g],i[g]!=null)if(r==c.length-1)for(b=0;b<i[g].length;b++)q.push(I.mergeBindings(i[g][b],k));else i=i[g]}return q};I.joinBindings=function(c,b){for(var d=[],h=0;h<c.length;h++)for(var k=c[h],g=0;g<b.length;g++){var j=b[g];I.areCompatibleBindings(k,j)&&d.push(I.mergeBindings(k,j))}return d};I.augmentMissingBindings=function(c,b){for(var d in b)c[d]==null&&(c[d]=null);return c};I.leftOuterJoinBindings=function(c,
b){for(var d=[],h=0;h<c.length;h++){for(var k=c[h],g=!1,j=0;j<b.length;j++){var i=b[j];I.areCompatibleBindings(k,i)&&(g=!0,d.push(I.mergeBindings(k,i)))}g===!1&&(I.augmentMissingBindings(k,i),d.push(k))}return d};I.crossProductBindings=function(c,b){for(var d=[],h=0;h<c.length;h++)for(var k=c[h],g=0;g<b.length;g++)d.push(I.mergeBindings(k,b[g]));return d};I.unionBindings=function(c,b){return c.concat(b)};I.unionManyBindings=function(c){for(var b=[],d=0;d<c.length;d++)b=I.unionBindings(b,c[d]);return b};
var E={},oa=I;E.QueryEngine=function(c){if(arguments.length!=0)this.backend=c.backend,this.lexicon=c.lexicon,this.eventsOnBatchLoad=c.eventsOnBatchLoad||!1,this.defaultPrefixes={},this.abstractQueryTree=new M.AbstractQueryTree,this.rdfLoader=new Z.RDFLoader(c.communication),this.callbacksBackend=new J.CallbacksBackend(this)};E.QueryEngine.prototype.registerNsInEnvironment=function(c,b){var d=[];if(c!=null&&c.prefixes!=null)d=c.prefixes;var h={},k;for(k in this.defaultPrefixes)h[k]=this.defaultPrefixes[k];
for(k=0;k<d.length;k++){var g=d[k];if(g.token==="prefix")h[g.prefix]=g.local}b.namespaces=h;b.base=c!=null&&c.base&&typeof c.base==="object"?c.base.value:null};E.QueryEngine.prototype.applyModifier=function(c,b){if(c=="DISTINCT"){for(var d={},h=[],k=0;k<b.length;k++){var g=b[k],j="",i;for(i in g){var q=g[i];q==null?j=j+i+"null":q.token=="literal"?(q.value!=null&&(j+=q.value),q.lang!=null&&(j+=q.lang),q.type!=null&&(j+=q.type)):j=q.value?j+i+q.value:j+i+q}d[j]==null&&(h.push(g),d[j]=!0)}return h}else return b};
E.QueryEngine.prototype.applyLimitOffset=function(c,b,d){if(b==null&&c==null)return d;c==null&&(c=0);b=b==null?d.length:c+b;return d.slice(c,b)};E.QueryEngine.prototype.applySingleOrderBy=function(c,b,d,h){for(var k=[],g=0;g<c.length;g++){var j=i.collect(c[g].expression,[b],d,h,this);k.push(j[0].value)}return{binding:b,value:k}};E.QueryEngine.prototype.applyOrderBy=function(c,b,d,h){var k=this,g=[];if(c!=null&&c.length>0){for(var j=0;j<b.length;j++){var i=k.applySingleOrderBy(c,b[j],d,h);g.push(i)}g.sort(function(b,
d){return k.compareFilteredBindings(b,d,c,h)});b=[];for(j=0;j<g.length;j++)b.push(g[j].binding)}return b};E.QueryEngine.prototype.compareFilteredBindings=function(c,b,d,h){for(var k=0;;){if(k==c.value.length)return 0;var g=d[k].direction;if(c.value[k]==null&&b.value[k]==null)k++;else{if(c.value[k]==null)c={value:!1};else if(b.value[k]==null)c={value:!0};else if(c.value[k].token==="blank"&&b.value[k].token==="blank"){k++;continue}else if(c.value[k].token==="blank")c={value:!1};else if(b.value[k].token===
"blank")c={value:!0};else if(c.value[k].token==="uri"&&b.value[k].token==="uri")if(i.runEqualityFunction(c.value[k],b.value[k],[],this,h).value==!0){k++;continue}else c=i.runTotalGtFunction(c.value[k],b.value[k],[]);else if(c.value[k].token==="uri")c={value:!1};else if(b.value[k].token==="uri")c={value:!0};else if(c.value[k].token==="literal"&&b.value[k].token==="literal"&&c.value[k].type==null&&b.value[k].type==null)if(i.runEqualityFunction(c.value[k],b.value[k],[],this,h).value==!0){k++;continue}else c=
i.runTotalGtFunction(c.value[k],b.value[k],[]);else if(c.value[k].token==="literal"&&c.value[k].type==null)c={value:!1};else if(b.value[k].token==="literal"&&b.value[k].type==null)c={value:!0};else if(i.runEqualityFunction(c.value[k],b.value[k],[],this,h).value==!0){k++;continue}else c=i.runTotalGtFunction(c.value[k],b.value[k],[]);return c.value==!0?g==="ASC"?1:-1:g==="ASC"?-1:1}}};E.QueryEngine.prototype.removeDefaultGraphBindings=function(c,b){for(var d=[],h={},k=0;k<b.named.length;k++)h[b.named[k].oid]=
!0;for(k=0;k<b["default"].length;k++)h[b["default"][k].oid]==null&&d.push(b["default"][k].oid);d=[];for(k=0;k<c.length;k++){var g=c[k],j=!1,i;for(i in g){for(var q=0;q<h.length;q++)if(g[i]===h[q]){j=!0;break}if(j)break}j||d.push(g)}return d};E.QueryEngine.prototype.aggregateBindings=function(c,b,d,h){for(var b=this.copyDenormalizedBindings(b,h.outCache),k={},g=0;g<c.length;g++){var j=i.runAggregator(c[g],b,this,d,h);c[g].alias?k[c[g].alias.value]=j:k[c[g].value.value]=j}return k};E.QueryEngine.prototype.projectBindings=
function(c,b,d){if(c[0].kind==="*")return b;else{for(var h=[],k=0;k<b.length;k++){for(var g=b[k],j={},n=!0,q=0;q<c.length;q++)if(c[q].token=="variable"&&c[q].kind!="aliased")j[c[q].value.value]=g[c[q].value.value];else if(c[q].token=="variable"&&c[q].kind=="aliased"){var w=i.runFilter(c[q].expression,g,this,d,{blanks:{},outCache:{}});if(i.isEbvError(w)){n=!1;break}else j[c[q].alias.value]=w}n===!0&&h.push(j)}return h}};E.QueryEngine.prototype.resolveNsInEnvironment=function(c,b){return b.namespaces[c]};
E.QueryEngine.prototype.termCost=function(c,b){if(c.token==="uri"){var d=y.lexicalFormBaseUri(c,b);return d==null?0:this.lexicon.resolveUriCost(d)}else return c.token==="literal"?this.lexicon.resolveLiteralCost(y.lexicalFormLiteral(c,b)):c.token==="blank"?this.lexicon.resolveBlankCost(c.label):c.token==="var"?this.lexicon.oidCounter/3:null};E.QueryEngine.prototype.normalizeTerm=function(c,b,d){if(c.token==="uri")return b=y.lexicalFormBaseUri(c,b),b==null?null:d?this.lexicon.registerUri(b):this.lexicon.resolveUri(b);
else if(c.token==="literal")return b=y.lexicalFormLiteral(c,b),c=d?this.lexicon.registerLiteral(b):this.lexicon.resolveLiteral(b);else if(c.token==="blank"){var h=c.label,c=b.blanks[h];c==null&&(c=d?this.lexicon.registerBlank(h):this.lexicon.resolveBlank(h),b.blanks[h]=c);return c}else return c.token==="var"?c.value:null};E.QueryEngine.prototype.normalizeDatasets=function(c,b){for(var d=0;d<c.length;d++){var h=c[d];if(h.value===this.lexicon.defaultGraphUri)h.oid=this.lexicon.defaultGraphOid;else{var k=
this.normalizeTerm(h,b,!1);if(k!=null)h.oid=k;else return null}}return!0};E.QueryEngine.prototype.normalizeQuad=function(c,b,d){var h=null,k=null,g=h=null,j;if(c.graph==null)g=0;else if(j=this.normalizeTerm(c.graph,b,d),j!=null)g=j,d===!0&&c.graph.token!="var"&&this.lexicon.registerGraph(j);else return null;j=this.normalizeTerm(c.subject,b,d);if(j!=null)h=j;else return null;j=this.normalizeTerm(c.predicate,b,d);if(j!=null)k=j;else return null;j=this.normalizeTerm(c.object,b,d);return j==null?null:
{subject:h,predicate:k,object:j,graph:g}};E.QueryEngine.prototype.quadCost=function(c,b){var d=null,h=null,k=null,g=null,g=c.graph==null?this.lexicon.oidCounter/4:this.termCost(c.graph,b),d=this.termCost(c.subject,b),h=this.termCost(c.predicate,b),k=this.termCost(c.object,b);return g+d+h+k};E.QueryEngine.prototype.denormalizeBindingsList=function(c,b){for(var d=[],h=0;h<c.length;h++)result=this.denormalizeBindings(c[h],b),d.push(result);return d};E.QueryEngine.prototype.copyDenormalizedBindings=function(c,
b){for(var d=[],h=0;h<c.length;h++){for(var k={},g=c[h],j=y.keys(g),i=0;i<j.length;i++){var q=g[j[i]];if(q==null)k[j[i]]=null;else if(typeof q==="object")k[j[i]]=q;else{var w=b[q];w==null&&(w=this.lexicon.retrieve(q),b[q]=w);k[j[i]]=w}}d.push(k)}return d};E.QueryEngine.prototype.denormalizeBindings=function(c,b){for(var d=y.keys(c),h=0;h<d.length;h++){var k=c[d[h]];k==null?c[d[h]]=null:b[k]!=null?c[d[h]]=b[k]:(k=this.lexicon.retrieve(k),c[d[h]]=k)}return c};E.QueryEngine.prototype.execute=function(c,
b,d,h){c=y.normalizeUnicodeLiterals(c);c=this.abstractQueryTree.parseQueryString(c);if(c==null)b(!1,"Error parsing query string");else if(c.token==="query"&&c.kind=="update"){this.callbacksBackend.startGraphModification();var k=this;this.executeUpdate(c,function(c,d){k.lexicon.updateAfterWrite&&k.lexicon.updateAfterWrite();c?k.callbacksBackend.endGraphModification(function(){b(c,d)}):(k.callbacksBackend.cancelGraphModification(),b(c,d))})}else c.token==="query"&&c.kind=="query"&&this.executeQuery(c,
b,d,h)};E.QueryEngine.prototype.executeQuery=function(c,b,d,h){var k=c.units,g=this,j={blanks:{},outCache:{}};this.registerNsInEnvironment(c.prologue,j);var i=g.abstractQueryTree.parseExecutableUnit(k[0]);if(i.kind==="select")this.executeSelect(i,j,d,h,function(c,d){c?typeof d==="object"&&d.denorm===!0?b(!0,d.bindings):(d=g.denormalizeBindingsList(d,j.outCache),d!=null?b(!0,d):b(!1,d)):b(!1,d)});else if(i.kind==="ask")i.projection=[{token:"variable",kind:"*"}],this.executeSelect(i,j,d,h,function(c,
d){c?c?d.length>0?b(!0,!0):b(!0,!1):b(!1,d):b(!1,d)});else if(i.kind==="construct")i.projection=[{token:"variable",kind:"*"}],g=this,this.executeSelect(i,j,d,h,function(c,d){if(c)if(c)if(d=g.denormalizeBindingsList(d,j.outCache),d!=null){var h=new x.Graph;if(i.template==null)i.template={triplesContext:i.pattern};for(var k=1,y=0;y<d.length;y++)for(var D=d[y],E={},F=0;F<i.template.triplesContext.length;F++){for(var I=["subject","predicate","object"],H=i.template.triplesContext[F],J=0;J<I.length;J++){var L=
I[J];if(H[L].token==="blank")if(E[H[L].label]!=null)H[L].value=E[H[L].label];else{var M="_:b"+k;k++;E[H[L].label]=M;H[L].value=M}}I=x.buildRDFResource(H.subject,D,g,j);J=x.buildRDFResource(H.predicate,D,g,j);H=x.buildRDFResource(H.object,D,g,j);I!=null&&J!=null&&H!=null&&(J=new x.Triple(I,J,H),h.add(J))}b(!0,h)}else b(!1,d);else b(!1,d);else b(!1,d)})};E.QueryEngine.prototype.executeSelect=function(c,b,d,h,k){if(c.kind==="select"||c.kind==="ask"||c.kind==="construct"||c.kind==="modify"){var g=c.projection,
j=c.dataset,i=c.modifier,q=c.limit,w=c.offset,r=c.order;if(d!=null||h!=null)j["default"]=d||[],j.named=h||[];j["default"]!=null&&j["default"].length===0&&j.named!=null&&j.named.length===0&&j["default"].push(this.lexicon.defaultGraphUriTerm);if(this.normalizeDatasets(j["default"].concat(j.named),b)!=null)if(h=this.executeSelectUnit(g,j,c.pattern,b),h!=null){if(c.group!=null&&c.group===""){for(var x=!1,d=0;d<c.projection.length;d++)if(c.projection[d].expression!=null&&c.projection[d].expression.expressionType===
"aggregate"){x=!0;break}if(x===!0)c.group="singleGroup"}if(c.group&&c.group!="")if(this.checkGroupSemantics(c.group,g)){i=this.groupSolution(h,c.group,j,b);q=[];for(d=0;d<i.length;d++)w=this.aggregateBindings(g,i[d],j,b),q.push(w);k(!0,{bindings:q,denorm:!0})}else k(!1,"Incompatible Group and Projection variables");else b=this.applyOrderBy(r,h,j,b),g=this.projectBindings(g,b,j),modifiedBindings=this.applyModifier(i,g),filteredBindings=this.removeDefaultGraphBindings(this.applyLimitOffset(w,q,modifiedBindings),
j),k(!0,filteredBindings)}else k(!1,h);else k(!1,"Error normalizing datasets")}else k(!1,"Cannot execute "+c.kind+" query as a select query")};E.QueryEngine.prototype.groupSolution=function(c,b,d,h){var k=[],g=[],j=!1;if(b==="singleGroup")return[c];else{for(var n=0;n<c.length;n++){for(var q=c[n],w=!0,r=0;r<b.length;r++){var x=b[r],y=null;if(x.token==="var")y=x.value,j==!1&&k.push(y);else if(x.token==="aliased_expression")if(y=x.alias.value,j==!1&&k.push(y),x.expression.primaryexpression==="var")q[x.alias.value]=
q[x.expression.value.value];else if(y=this.copyDenormalizedBindings([q],h.outCache),y=i.runFilter(x.expression,y[0],this,d,h),i.isEbvError(y))w=!1;else{if(y.value!=null)y.value=""+y.value;q[x.alias.value]=y}else y=this.copyDenormalizedBindings([q],h.outCache),y=i.runFilter(x,y[0],this,h),i.isEbvError(y)?w=!1:(q["groupCondition"+env._i]=y,y="groupCondition"+env._i,j==!1&&k.push(y))}j==!1&&(j=!0);w===!0&&g.push(q)}c={};for(n=0;n<g.length;n++){b=g[n];d="";for(r=0;r<k.length;r++)h=b[k[r]],d+=typeof h===
"object"?h.value:h;c[d]==null?c[d]=[b]:c[d].push(b)}var k=[],D;for(D in c)k.push(c[D]);return k}};E.QueryEngine.prototype.executeSelectUnit=function(c,b,d,h){return d.kind==="BGP"?this.executeAndBGP(c,b,d,h):d.kind==="UNION"?this.executeUNION(c,b,d.value,h):d.kind==="JOIN"?this.executeJOIN(c,b,d,h):d.kind==="LEFT_JOIN"?this.executeLEFT_JOIN(c,b,d,h):d.kind==="FILTER"?(c=this.executeSelectUnit(c,b,d.value,h),c!=null?c=i.checkFilters(d,c,!1,b,h,this):[]):d.kind==="EMPTY_PATTERN"?[]:(console.log("Cannot execute query pattern "+
d.kind+". Not implemented yet."),null)};E.QueryEngine.prototype.executeUNION=function(c,b,d,h){var k=d[0],g=d[1],j=null,n=null;if(d.length!=2)throw"SPARQL algebra UNION with more than two components";j=this.executeSelectUnit(c,b,k,h);if(j==null)return null;n=this.executeSelectUnit(c,b,g,h);if(n==null)return null;c=oa.unionBindings(j,n);return c=i.checkFilters(d,c,!1,b,h,this)};E.QueryEngine.prototype.executeAndBGP=function(c,b,d,h){c=oa.executeAndBGPsDPSize(d.value,b,this,h);return c!=null?i.checkFilters(d,
c,!1,b,h,this):null};E.QueryEngine.prototype.executeLEFT_JOIN=function(c,b,d,h){var k=d.rvalue,g=null,j=null,g=this.executeSelectUnit(c,b,d.lvalue,h);if(g==null)return null;j=this.executeSelectUnit(c,b,k,h);if(j==null)return null;c=oa.leftOuterJoinBindings(g,j);b=i.checkFilters(d,c,!0,b,h,this);if(g.length>1&&j.length>1){var d=[],h={},n;for(n in g[0])h[n]=!0;for(n in j[0])h[n]!=!0&&d.push(n);acum=[];duplicates={};for(g=0;g<b.length;g++)if(b[g].__nullify__===!0){for(h=0;h<d.length;h++)b[g].bindings[d[h]]=
null;h=[];j=[];for(n in b[g].bindings)b[g].bindings[n]!=null&&(h.push(n+b[g].bindings[n]),h.sort(),j.push(h.join("")));if(duplicates[h.join("")]==null){for(h=0;h<j.length;h++)duplicates[j[h]]=!0;acum.push(b[g].bindings)}}else for(n in acum.push(b[g]),h=[],b[g])h.push(n+b[g][n]),h.sort(),duplicates[h.join("")]=!0;return acum}else return b};E.QueryEngine.prototype.executeJOIN=function(c,b,d,h){var k=d.rvalue,g=null,j=null,g=this.executeSelectUnit(c,b,d.lvalue,h);if(g==null)return null;j=this.executeSelectUnit(c,
b,k,h);if(j==null)return null;c=oa.joinBindings(g,j);return c=i.checkFilters(d,c,!1,b,h,this)};E.QueryEngine.prototype.rangeQuery=function(c,b){var d=this.normalizeQuad(c,b,!1);return d!=null?(d=this.backend.range(new aa.Pattern(d)),d==null||d.length==0?[]:d):(console.log("ERROR normalizing quad"),null)};E.QueryEngine.prototype.executeUpdate=function(c,b){var d=c.units,h=this,k={blanks:{},outCache:{}};this.registerNsInEnvironment(c.prologue,k);for(var g=0;g<d.length;g++){var j=h.abstractQueryTree.parseExecutableUnit(d[g]);
if(j.kind==="insertdata"){for(var i=0;i<j.quads.length;i++){var q=j.quads[i];if(h._executeQuadInsert(q,k)!==!0)return b(!1,error)}b(!0)}else if(j.kind==="deletedata"){for(i=0;i<j.quads.length;i++)q=j.quads[i],this._executeQuadDelete(q,k);b(!0)}else if(j.kind==="modify")this._executeModifyQuery(j,k,b);else if(j.kind==="create")b(!0);else if(j.kind==="load")i={uri:y.lexicalFormBaseUri(j.sourceGraph,k)},j.destinyGraph!=null&&(i={uri:y.lexicalFormBaseUri(j.destinyGraph,k)}),h=this,this.rdfLoader.load(j.sourceGraph.value,
i,function(c,d){c==!1?(console.log("Error loading graph"),console.log(d),b(!1,"error batch loading quads")):(d=h.batchLoad(d),b(d!=null,d||"error batch loading quads"))});else if(j.kind==="drop")this._executeClearGraph(j.destinyGraph,k,b);else if(j.kind==="clear")this._executeClearGraph(j.destinyGraph,k,b);else throw Error("not supported execution unit");}};E.QueryEngine.prototype.batchLoad=function(c,b){var d=null,h=null,k=null,g=null,j=0,i=!0,q={},w,r;this.eventsOnBatchLoad&&this.callbacksBackend.startGraphModification();
for(var x=0;x<c.length;x++)if(r=c[x],r.subject.uri||r.subject.token==="uri"?w=this.lexicon.registerUri(r.subject.uri||r.subject.value):r.subject.literal||r.subject.token==="literal"?w=this.lexicon.registerLiteral(r.subject.literal||r.subject.value):(w=q[r.subject.blank||r.subject.value],w==null&&(w=this.lexicon.registerBlank(r.subject.blank||r.subject.value),q[r.subject.blank||r.subject.value]=w)),d=w,r.predicate.uri||r.predicate.token==="uri"?w=this.lexicon.registerUri(r.predicate.uri||r.predicate.value):
r.predicate.literal||r.predicate.token==="literal"?w=this.lexicon.registerLiteral(r.predicate.literal||r.predicate.value):(w=q[r.predicate.blank||r.predicate.value],w==null&&(w=this.lexicon.registerBlank(r.predicate.blank||r.predicate.value),q[r.predicate.blank||r.predicate.value]=w)),h=w,r.object.uri||r.object.token==="uri"?w=this.lexicon.registerUri(r.object.uri||r.object.value):r.object.literal||r.object.token==="literal"?w=this.lexicon.registerLiteral(r.object.literal||r.object.value):(w=q[r.object.blank||
r.object.value],w==null&&(w=this.lexicon.registerBlank(r.object.blank||r.object.value),q[r.object.blank||r.object.value]=w)),k=w,r.graph.uri||r.graph.token==="uri"?(w=this.lexicon.registerUri(r.graph.uri||r.graph.value),this.lexicon.registerGraph(w)):r.graph.literal||r.graph.token==="literal"?w=this.lexicon.registerLiteral(r.graph.literal||r.graph.value):(w=q[r.graph.blank||r.graph.value],w==null&&(w=this.lexicon.registerBlank(r.graph.blank||r.graph.value),q[r.graph.blank||r.graph.value]=w)),g=w,
w=r,r={subject:d,predicate:h,object:k,graph:g},d=new aa.NodeKey(r),h=this.backend.search(d),!h)if(h=this.backend.index(d),h==!0)this.eventsOnBatchLoad&&this.callbacksBackend.nextGraphModification(J.added,[w,r]),j+=1;else{i=!1;break}this.lexicon.updateAfterWrite!=null&&this.lexicon.updateAfterWrite();var y=function(){i?b&&b(!0,j):b&&b(!1,null)};this.eventsOnBatchLoad?this.callbacksBackend.endGraphModification(function(){y()}):y();return i?j:null};E.QueryEngine.prototype.computeCosts=function(c,b){for(var d=
0;d<c.length;d++)c[d]._cost=this.quadCost(c[d],b);return c};E.QueryEngine.prototype._executeModifyQuery=function(c,b,d){var h=this,k=!0,g=null,j=["subject","predicate","object","graph"];c.insert=c.insert==null?[]:c.insert;c["delete"]=c["delete"]==null?[]:c["delete"];y.seq(function(d){var j=[],i=[];c["with"]!=null&&j.push(c["with"]);if(c.using!=null)for(var i=[],r=0;r<c.using.length;r++){var x=c.using[r];x.kind==="named"?i.push(x.uri):j.push(x.uri)}c.dataset={};c.projection=[{token:"variable",kind:"*"}];
h.executeSelect(c,b,j,i,function(c,j){c?(j=h.denormalizeBindingsList(j,b.outCache),j!=null?g=j:k=!1):k=!1;return d()})},function(d){var i=c["with"];if(k){for(var w=[],r=0;r<c["delete"].length;r++)for(var x=c["delete"][r],y=0;y<g.length;y++){for(var D={},E=g[y],F=0;F<j.length;F++){var H=j[F];H=="graph"&&x[H]==null?D.graph=i:D[H]=x[H].token==="var"?E[x[H].value]:x[H]}w.push(D)}for(y=0;y<w.length;y++)D=w[y],h._executeQuadDelete(D,b)}d()},function(d){var i=c["with"];if(k){for(var w=[],r=0;r<c.insert.length;r++)for(var x=
c.insert[r],y=0;y<g.length;y++){for(var D={},E=g[y],F=0;F<j.length;F++){var H=j[F];H=="graph"&&x[H]==null?D.graph=i:D[H]=x[H].token==="var"?E[x[H].value]:x[H]}w.push(D)}for(r=0;r<w.length;r++)D=w[r],h._executeQuadInsert(D,b)}d()})(function(){d(k)})};E.QueryEngine.prototype._executeQuadInsert=function(c,b){var d=this.normalizeQuad(c,b,!0);if(d!=null){var h=new aa.NodeKey(d),k=this.backend.search(h);return k?k:(k=this.backend.index(h),k==!0?(this.callbacksBackend.nextGraphModification(J.added,[c,d]),
!0):(console.log("ERROR inserting quad"),!1))}else return console.log("ERROR normalizing quad"),!1};E.QueryEngine.prototype._executeQuadDelete=function(c,b){var d=this.normalizeQuad(c,b,!1);if(d!=null){var h=new aa.NodeKey(d);this.backend["delete"](h);return this.lexicon.unregister(c,h)==!0?(this.callbacksBackend.nextGraphModification(J.deleted,[c,d]),!0):(console.log("ERROR unregistering quad"),!1)}else return console.log("ERROR normalizing quad"),!1};E.QueryEngine.prototype._executeClearGraph=function(c,
b,d){if(c==="default")this.execute("DELETE { ?s ?p ?o } WHERE { ?s ?p ?o }",d);else if(c==="named"){var h=this,k=this.lexicon.registeredGraphs(!0);if(k!=null){var g=!1;y.repeat(0,k.length,function(b,c){var d=k[c._i],i=arguments.callee;g?b(i,c):h.execute("DELETE { GRAPH <"+d+"> { ?s ?p ?o } } WHERE { GRAPH <"+d+"> { ?s ?p ?o } }",function(d){g=!d;b(i,c)})},function(){d(!g)})}else d(!1,"Error deleting named graphs")}else c==="all"?(h=this,this.execute("CLEAR DEFAULT",function(b,c){b?h.execute("CLEAR NAMED",
d):d(!1,c)})):c.token=="uri"?(c=y.lexicalFormBaseUri(c,b),c!=null?this.execute("DELETE { GRAPH <"+c+"> { ?s ?p ?o } } WHERE { GRAPH <"+c+"> { ?s ?p ?o } }",d):d(!1,"wrong graph URI")):d(!1,"wrong graph URI")};E.QueryEngine.prototype.checkGroupSemantics=function(c,b){if(c==="singleGroup")return!0;for(var d={},h=0;h<c.length;h++){var k=c[h];k.token==="var"?d[k.value]=!0:k.token==="aliased_expression"&&(d[k.alias.value]=!0)}for(h=0;h<b.length;h++)if(k=b[h],k.kind==="var"){if(d[k.value.value]==null)return!1}else if(k.kind===
"aliased"&&k.expression&&k.expression.primaryexpression==="var"&&d[k.expression.value.value]==null)return!1;return!0};E.QueryEngine.prototype.registerDefaultNamespace=function(c,b){this.defaultPrefixes[c]=b};var J={ANYTHING:{token:"var",value:"_"},added:"added",deleted:"deleted",eventsFlushed:"eventsFlushed",CallbacksBackend:function(c){this.aqt=new M.AbstractQueryTree;this.engine=c;this.indexMap={};this.observersMap={};this.queriesIndexMap={};this.emptyNotificationsMap={};this.queriesList=[];this.pendingQueries=
[];this.matchedQueries=[];this.updateInProgress=null;this.indices=["SPOG","GP","OGS","POG","GSP","OS"];this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]};this.callbackCounter=0;this.callbacksMap={};this.callbacksInverseMap={};this.queryCounter=0;this.queriesMap=
{};this.queriesCallbacksMap={};this.queriesInverseMap={};for(c=0;c<this.indices.length;c++){var b=this.indices[c];this.indexMap[b]={};this.queriesIndexMap[b]={}}}};J.CallbacksBackend.prototype.startGraphModification=function(){this.pendingQueries=[].concat(this.queriesList);this.matchedQueries=[];if(this.updateInProgress==null)this.updateInProgress={added:[],deleted:[]}};J.CallbacksBackend.prototype.nextGraphModification=function(c,b){this.updateInProgress[c].push(b)};J.CallbacksBackend.prototype.endGraphModification=
function(c){var b=this;if(this.updateInProgress!=null){var d=b.updateInProgress;b.updateInProgress=null;this.sendNotification(J.deleted,d[J.deleted],function(){b.sendNotification(J.added,d[J.added],function(){b.sendEmptyNotification(J.eventsFlushed,null,function(){b.dispatchQueries(function(){c(!0)})})})})}else c(!0)};J.CallbacksBackend.prototype.cancelGraphModification=function(){this.updateInProgress=null};J.CallbacksBackend.prototype.sendNotification=function(c,b,d){for(var h={},k=0;k<b.length;k++){var g=
b[k],j;for(j in this.indexMap){var i=this.indexMap[j],q=this.componentOrders[j];this._searchCallbacksInIndex(i,q,c,g,h);this.pendingQueries.length!=0&&(i=this.queriesIndexMap[j],this._searchQueriesInIndex(i,q,g))}}this.dispatchNotifications(h);d!=null&&d(!0)};J.CallbacksBackend.prototype.sendEmptyNotification=function(c,b,d){for(var h=this.emptyNotificationsMap[c]||[],k=0;k<h.length;k++)h[k](c,b);d()};J.CallbacksBackend.prototype.dispatchNotifications=function(c){for(var b in c){var d=this.callbacksMap[b],
h=c[b][J.deleted];h!=null&&d(J.deleted,h);for(var k in c[b])k!=J.deleted&&d(k,c[b][k])}};J.CallbacksBackend.prototype._searchCallbacksInIndex=function(c,b,d,h,k){for(var g=h[1],h=h[0],j=0;j<b.length+1;j++){for(var i=c._||[],q=[],w=0;w<i.length;w++){var r=i[w];this.callbacksMap[r]!=null&&(k[r]=k[r]||{},k[r][d]=k[r][d]||[],k[r][d].push(h),q.push(r))}c._=q;i=b[j];if(c[""+g[i]]!=null)c=c[""+g[i]];else break}};J.CallbacksBackend.prototype.subscribeEmpty=function(c,b){var d=this.emptyNotificationsMap[c]||
[];d.push(b);this.emptyNotificationsMap[c]=d};J.CallbacksBackend.prototype.unsubscribeEmpty=function(c,b){var d=this.emptyNotificationsMap[c];d!=null&&(d=y.remove(d,b));this.emptyNotificationsMap[c]=d};J.CallbacksBackend.prototype.subscribe=function(c,b,d,h,k,g){c=this._tokenizeComponents(c,b,d,h);b={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,b);c=this.engine.normalizeQuad(c,b,!0);d=this._indexForPattern(new aa.Pattern(c));b=this.componentOrders[d];d=this.indexMap[d];for(h=0;h<
b.length;h++){var j=c[b[h]];if(j==="_"){d._==null&&(d._=[]);this.callbackCounter++;d._.push(this.callbackCounter);this.callbacksMap[this.callbackCounter]=k;this.callbacksInverseMap[k]=this.callbackCounter;break}else h===b.length-1?(d[j]=d[j]||{_:[]},this.callbackCounter++,d[j]._.push(this.callbackCounter),this.callbacksMap[this.callbackCounter]=k,this.callbacksInverseMap[k]=this.callbackCounter):(d[j]=d[j]||{},d=d[j])}g!=null&&g(!0)};J.CallbacksBackend.prototype.unsubscribe=function(c){var b=this.callbacksInverseMap[c];
b!=null&&(delete this.callbacksInverseMap[c],delete this.callbacksMap[b])};J.CallbacksBackend.prototype._tokenizeComponents=function(c,b,d,h){var k={};k.subject=c==null?J.ANYTHING:c.indexOf("_:")==0?{token:"blank",value:c}:{token:"uri",value:c};k.predicate=b==null?J.ANYTHING:{token:"uri",value:b};k.object=d==null?J.ANYTHING:{token:"uri",value:d};k.graph=h==null?J.ANYTHING:{token:"uri",value:h};return k};J.CallbacksBackend.prototype._indexForPattern=function(c){for(var c=c.indexKey,b=this.indices,
d=0;d<b.length;d++)for(var h=b[d],k=this.componentOrders[h],g=0;g<k.length;g++){if(y.include(c,k[g])===!1)break;if(g==c.length-1)return h}return"SPOG"};J.CallbacksBackend.prototype.observeNode=function(){var c,b,d,h;arguments.length===4?(c=arguments[0],b=arguments[1],d=arguments[2],h=arguments[3]):(c=arguments[0],b=this.engine.lexicon.defaultGraphUri,d=arguments[1],h=arguments[2]);b="CONSTRUCT { <"+c+"> ?p ?o } WHERE { GRAPH <"+b+"> { <"+c+"> ?p ?o } }";var k=this,g={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,
g);var j=[];this.engine.execute(b,function(b,i){if(b){var w=!1,r=function(b,c){if(b==="eventsFlushed"&&w)w=!1,d(i);else if(b!=="eventsFlushed"){w=!0;for(var h=0;h<c.length;h++){var n=c[h],r=x.buildRDFResource(n.subject,j,k.engine,g),y=x.buildRDFResource(n.predicate,j,k.engine,g),n=x.buildRDFResource(n.object,j,k.engine,g);r!=null&&y!=null&&n!=null&&(n=new x.Triple(r,y,n),b===J.added?i.add(n):b===J.deleted&&i.remove(n))}}};k.observersMap[d]=r;k.subscribeEmpty(J.eventsFlushed,r);k.subscribe(c,null,
null,null,r,function(){d(i);h&&h(!0)})}else h&&h(!1)})};J.CallbacksBackend.prototype.stopObservingNode=function(c){return(c=this.observersMap[c])?(this.unsubscribe(c),this.unsubscribeEmpty(J.eventsFlushed,c),!0):!1};J.CallbacksBackend.prototype.observeQuery=function(c,b,d){var h=this.aqt.collectBasicTriples(this.aqt.parseSelect(this.aqt.parseQueryString(c).units[0])),k={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,k);var g,j,i,q=this.queryCounter;this.queryCounter++;this.queriesMap[q]=
c;this.queriesInverseMap[c]=q;this.queriesList.push(q);this.queriesCallbacksMap[q]=b;for(var w=0;w<h.length;w++){j=h[w];if(j.graph==null)j.graph=this.engine.lexicon.defaultGraphUriTerm;j=this.engine.normalizeQuad(j,k,!0);g=new aa.Pattern(j);i=this._indexForPattern(g);g=this.componentOrders[i];i=this.queriesIndexMap[i];for(var r=0;r<g.length;r++){var x=j[g[r]];if(typeof x==="string"){i._==null&&(i._=[]);i._.push(q);break}else r===g.length-1?(i[x]=i[x]||{_:[]},i[x]._.push(q)):(i[x]=i[x]||{},i=i[x])}}this.engine.execute(c,
function(c,d){c?b(d):console.log("ERROR in query callback "+d)});d!=null&&d()};J.CallbacksBackend.prototype.stopObservingQuery=function(c){var b=this.queriesInverseMap[c];if(b!=null)delete this.queriesInverseMap[c],delete this.queriesMap[b],this.queriesList=y.remove(this.queriesList,b)};J.CallbacksBackend.prototype._searchQueriesInIndex=function(c,b,d){for(var d=d[1],h=0;h<b.length+1;h++){for(var k=c._||[],g=[],j=0;j<k.length;j++){var i=k[j];y.include(this.pendingQueries,i)&&(y.remove(this.pendingQueries,
i),this.matchedQueries.push(i));this.queriesMap[i]!=null&&g.push(i)}c._=g;k=b[h];if(c[""+d[k]]!=null)c=c[""+d[k]];else break}};J.CallbacksBackend.prototype.dispatchQueries=function(c){var b=this,d,h,i,g;y.repeat(0,this.matchedQueries.length,function(c,n){d=arguments.callee;i=b.matchedQueries[n._i];h=b.queriesMap[i];g=b.queriesCallbacksMap[i];y.recur(function(){b.engine.execute(h,function(b,h){b?g(h):console.log("ERROR executing query callback "+h);c(d,n)})})},function(){c()})};var L={};try{typeof Worker==
"undefined"&&(Worker=null)}catch(Cc){Worker=null}if(Worker)L.RDFStoreClient=function(c,b,d){console.log("trying to load "+c);this.connection=Worker.Worker?new Worker.Worker(c):new Worker(c);this.callbacksCounter=1;var h=this;this.rdf=x.rdf;console.log("The worker");console.log(this.connection);h=this;this.connection.onmessage=function(b){h.receive(b)};this.observingCallbacks={};this.callbacks={0:{cb:function(b,c){b===!0?d(!0,h):d(!1,c)},fn:"create"}};this.connection.postMessage({fn:"create",args:b,
callback:"0"})},L.RDFStoreClient.prototype.receive=function(c){event=c.data||c;if(event.fn==="workerRequest:NetworkTransport:load"){var b=this,d=event.callback,c=event.arguments.concat(function(c,i){b.connection.postMessage({fn:"workerRequestResponse",results:[c,i],callback:d})});Y.load.apply(Y,c)}else if(c=this.callbacks[event.callback])c.fn==="create"||c.fn==="execute"||c.fn==="insert"||c.fn=="graph"||c.fn==="node"||c.fn==="insert"||c.fn==="delete"||c.fn==="clear"||c.fn==="load"||c.fn==="startObservingQueryEndCb"||
c.fn==="registeredGraphs"?(delete this.callbacks[event.callback],c.cb(event.success,event.result)):c.fn==="startObservingQuery"?c.cb(event.result):c.fn==="startObservingNode"?c.cb(event.result):c.fn==="subscribe"&&c.cb(event.event,event.result)},L.RDFStoreClient.prototype.registerCallback=function(c,b){var d=""+this.callbacksCounter;this.callbacks[d]={fn:c,cb:b};this.callbacksCounter++;return d},L.RDFStoreClient.prototype.execute=function(){if(arguments.length===3)this.executeWithEnvironment(arguments[0],
arguments[1],arguments[2]);else if(arguments.length===4)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2],arguments[3]);else{var c,b;arguments.length===1?(c=arguments[0],b=function(){}):arguments.length===2&&(c=arguments[0],b=arguments[1]);b=this.registerCallback("execute",b);this.connection.postMessage({fn:"execute",args:[c],callback:b})}},L.RDFStoreClient.prototype.insert=function(){var c,b,d;if(arguments.length===1)b=arguments[0],this.connection.postMessage({fn:"insert",args:[b]});
else if(arguments.length===2)b=arguments[0],d=arguments[1]||function(){},d=this.registerCallback("insert",d),this.connection.postMessage({fn:"insert",args:[b],callback:d});else if(arguments.length===3)b=arguments[0],c=arguments[1],d=arguments[2]||function(){},d=this.registerCallback("insert",d),this.connection.postMessage({fn:"insert",args:[b,c],callback:d});else throw"The triples to insert, an optional graph and callback must be provided";},L.RDFStoreClient.prototype.graph=function(){var c=null,
b=null;if(arguments.length===1)b=arguments[0]||function(){};else if(arguments.length===2)b=arguments[1]||function(){},c=arguments[0];else throw"An optional graph URI and a callback function must be provided";var d=this,h=this.registerCallback("insert",function(c,g){if(c){for(var h,i=0;i<g.triples.length;i++)h=g.triples[i],g.triples[i]=new x.Triple(d.adaptJSInterface(h.subject),d.adaptJSInterface(h.predicate),d.adaptJSInterface(h.object));b(c,d.rdf.createGraph(g.triples))}else b(c,g)});c==null?this.connection.postMessage({fn:"graph",
args:[],callback:h}):this.connection.postMessage({fn:"graph",args:[c],callback:h})},L.RDFStoreClient.prototype.node=function(){var c=null,b=null,d=null;if(arguments.length===2)d=arguments[0],b=arguments[1]||function(){};else if(arguments.length===3)d=arguments[0],c=arguments[1],b=arguments[2]||function(){};else throw"An optional graph URI and a callback function must be provided";var h=this,i=this.registerCallback("insert",function(c,d){if(c){for(var i,k=0;k<d.triples.length;k++)i=d.triples[k],d.triples[k]=
new x.Triple(h.adaptJSInterface(i.subject),h.adaptJSInterface(i.predicate),h.adaptJSInterface(i.object));b(c,h.rdf.createGraph(d.triples))}else b(c,d)});c==null?this.connection.postMessage({fn:"node",args:[d],callback:i}):this.connection.postMessage({fn:"node",args:[d,c],callback:i})},L.RDFStoreClient.prototype.setPrefix=function(c,b){this.rdf.setPrefix(c,b);this.connection.postMessage({fn:"rdf/setPrefix",args:[c,b],callback:null})},L.RDFStoreClient.prototype.setDefaultPrefix=function(c){this.rdf.setDefaultPrefix(c);
this.connection.postMessage({fn:"rdf/setDefaultPrefix",args:[c],callback:null})},L.RDFStoreClient.prototype["delete"]=function(){var c,b,d;if(arguments.length===1)b=arguments[0],this.connection.postMessage({fn:"delete",args:[b]});else if(arguments.length===2)b=arguments[0],d=arguments[1]||function(){},d=this.registerCallback("delete",d),this.connection.postMessage({fn:"delete",args:[b],callback:d});else if(arguments.length===3)b=arguments[0],c=arguments[1],d=arguments[2]||function(){},d=this.registerCallback("delete",
d),this.connection.postMessage({fn:"delete",args:[b,c],callback:d});else throw"The triples to delete, an optional graph and callback must be provided";},L.RDFStoreClient.prototype.clear=function(){var c,b;if(arguments.length===1)b=arguments[0]||function(){},b=this.registerCallback("clear",b),this.connection.postMessage({fn:"clear",args:[],callback:b});else if(arguments.length===2)c=arguments[0],b=arguments[1]||function(){},b=this.registerCallback("clear",b),this.connection.postMessage({fn:"clear",
args:[c],callback:b});else throw"The optional graph and a callback must be provided";},L.RDFStoreClient.prototype.setBatchLoadEvents=function(c){this.connection.postMessage({fn:"setBatchLoadEvents",args:[c]})},L.RDFStoreClient.prototype.registerDefaultNamespace=function(c,b){this.connection.postMessage({fn:"registerDefaultNamespace",args:[c,b]})},L.RDFStoreClient.prototype.registerDefaultProfileNamespaces=function(){this.connection.postMessage({fn:"registerDefaultProfileNamespaces",args:[]})},L.RDFStoreClient.prototype.load=
function(){var c,b,d,h;if(arguments.length===3)c=arguments[0],b=arguments[1],h=arguments[2]||function(){},h=this.registerCallback("load",h),this.connection.postMessage({fn:"load",args:[c,b],callback:h});else if(arguments.length===4)c=arguments[0],b=arguments[1],d=arguments[2],h=arguments[3]||function(){},h=this.registerCallback("load",h),this.connection.postMessage({fn:"load",args:[c,b,d],callback:h});else if(arguments.length===2)throw"The mediaType of the parser, the data a callback and an optional graph must be provided";
},L.RDFStoreClient.prototype.startObservingQuery=function(c,b,d){d!=null?(b=this.registerCallback("startObservingQuery",b),this.observingCallbacks[c]=b,d=this.registerCallback("startObservingQueryEndCb",d),this.connection.postMessage({fn:"startObservingQuery",args:[c],callback:[b,d]})):(b=this.registerCallback("startObservingQuery",b),this.observingCallbacks[c]=b,this.connection.postMessage({fn:"startObservingQuery",args:[c],callback:[b]}))},L.RDFStoreClient.prototype.stopObservingQuery=function(c){var b=
this.observingCallbacks[c];delete this.observingCallbacks[c];delete this.callbacks[b];this.connection.postMessage({fn:"stopObservingQuery",args:[c],callback:[]})},L.RDFStoreClient.prototype.startObservingNode=function(){var c,b,d;if(arguments.length===2){c=arguments[0];d=arguments[1];var h=this,i=this.registerCallback("startObservingNode",function(b){for(var c,i=0;i<b.triples.length;i++)c=b.triples[i],b.triples[i]=new x.Triple(h.adaptJSInterface(c.subject),h.adaptJSInterface(c.predicate),h.adaptJSInterface(c.object));
d(h.rdf.createGraph(b.triples))});this.observingCallbacks[d]=i;this.connection.postMessage({fn:"startObservingNode",args:[c],callback:i})}else arguments.length===3&&(c=arguments[0],b=arguments[1],d=arguments[2],h=this,i=this.registerCallback("startObservingNode",function(b){for(var c,i=0;i<b.triples.length;i++)c=b.triples[i],b.triples[i]=new x.Triple(h.adaptJSInterface(c.subject),h.adaptJSInterface(c.predicate),h.adaptJSInterface(c.object));d(h.rdf.createGraph(b.triples))}),this.observingCallbacks[d]=
i,this.connection.postMessage({fn:"startObservingNode",args:[c,b],callback:i}))},L.RDFStoreClient.prototype.stopObservingNode=function(c){var b=this.observingCallbacks[c];delete this.observingCallbacks[c];delete this.callbacks[b];this.connection.postMessage({fn:"stopObservingNode",args:[b],callback:[]})},L.RDFStoreClient.prototype.subscribe=function(c,b,d,h,i){var g=this,j=this.registerCallback("subscribe",function(b,c){for(var d,h=0;h<c.length;h++)d=c[h],c[h]=new x.Triple(g.adaptJSInterface(d.subject),
g.adaptJSInterface(d.predicate),g.adaptJSInterface(d.object));i(b,c)});this.observingCallbacks[i]=j;this.connection.postMessage({fn:"subscribe",args:[c,b,d,h],callback:j})},L.RDFStoreClient.prototype.unsubscribe=function(c){var b=this.observingCallbacks[c];delete this.observingCallbacks[c];delete this.callbacks[b];this.connection.postMessage({fn:"unsubscribe",args:[b],callback:[]})},L.RDFStoreClient.prototype.registeredGraphs=function(c){var b=this;this.connection.postMessage({fn:"registeredGraphs",
args:[],callback:this.registerCallback("registeredGraphs",function(d,h){if(d)for(var i=0;i<h.length;i++)graph=h[i],h[i]=b.adaptJSInterface(graph);c(d,h)})})},L.RDFStoreClient.prototype.adaptJSInterface=function(c){if(c.interfaceName==="BlankNode")return new x.BlankNode(c.bnodeId);else if(c.interfaceName==="Literal")return new x.Literal(c.nominalValue,c.language,c.datatype);else if(c.interfaceName==="NamedNode")return new x.NamedNode(c.nominalValue)},L.RDFStoreClient.prototype.isWebWorkerConnection=
!0;var H={},Ab={MongodbQueryEngine:function(){throw"MongoDB backend not supported in the browser version";}};H.VERSION="0.5.6";H.connect=function(){var c,b,d;arguments.length==1&&(c=__dirname,b={},d=arguments[0]);arguments.length==2?(typeof arguments[0]==="string"?(c=arguments[0],b={}):(c=__dirname+"/index.js",b=arguments[0]),d=arguments[1]):(c=arguments[0],b=arguments[1],d=arguments[2]);try{Worker?new L.RDFStoreClient(c,b,function(b,c){d(b,c)}):H.create(b,function(b){d(!1,b)})}catch(h){H.create(b,
function(b){d(!1,b)})}};H.create=function(){return arguments.length==1?new H.Store(arguments[0]):arguments.length==2?new H.Store(arguments[0],arguments[1]):new H.Store};H.Store=function(c,b){var d=null,h=null;if(arguments.length==0)h={};else if(arguments.length==1)h={},d=c;else if(arguments.length>1)h=c,d=b;else throw"An optional argument map and a callback must be provided";h.treeOrder==null&&(h.treeOrder=15);this.functionMap={};var i=this;h.engine==="mongodb"?(this.isMongodb=!0,this.engine=new Ab.MongodbQueryEngine(h),
this.engine.readConfiguration(function(){h.overwrite===!0?i.engine.clean(function(){d(i)}):d(i)})):new O.Lexicon(function(b){h.overwrite===!0&&b.clear();new U.QuadBackend(h,function(c){h.overwrite===!0&&c.clear();h.backend=c;h.lexicon=b;i.engine=new E.QueryEngine(h);d&&d(i)})},h.name)};H.Store.prototype.rdf=x.rdf;H.Store.prototype.execute=function(){if(arguments.length===3)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2]);else if(arguments.length===4)this.executeWithEnvironment(arguments[0],
arguments[1],arguments[2],arguments[3]);else{var c,b;arguments.length===1?(c=arguments[0],b=function(){}):arguments.length===2&&(c=arguments[0],b=arguments[1]);this.engine.execute(c,b)}};H.Store.prototype.executeWithEnvironment=function(){var c,b,d;if(arguments.length===3){c=arguments[0];var h=function(){};b=arguments[1];d=arguments[2]}else arguments.length===4&&(c=arguments[0],h=arguments[3],b=arguments[1],d=arguments[2]);for(var i=[],g=[],j=0;j<b.length;j++)i.push({token:"uri",value:b[j]});for(j=
0;j<d.length;j++)g.push({token:"uri",value:d[j]});this.engine.execute(c,h,i,g)};H.Store.prototype.graph=function(){var c=null,b=null;if(arguments.length===1)b=arguments[0]||function(){},c=this.engine.lexicon.defaultGraphUri;else if(arguments.length===2)b=arguments[1]||function(){},c=arguments[0];else throw"An optional graph URI and a callback function must be provided";this.rdf.resolve(c)!=null&&(c=this.rdf.resolve(c));this.engine.execute("CONSTRUCT { ?s ?p ?o } WHERE { GRAPH <"+c+"> { ?s ?p ?o } }",
b)};H.Store.prototype.node=function(){var c=null,b=null,d=null;if(arguments.length===2)d=arguments[0],b=arguments[1]||function(){},c=this.engine.lexicon.defaultGraphUri;else if(arguments.length===3)d=arguments[0],c=arguments[1],b=arguments[2]||function(){};else throw"An optional graph URI, node URI and a callback function must be provided";this.rdf.resolve(c)!=null&&(c=this.rdf.resolve(c));this.rdf.resolve(d)!=null&&(d=this.rdf.resolve(d));this.engine.execute("CONSTRUCT { <"+d+"> ?p ?o } WHERE { GRAPH <"+
c+"> { <"+d+"> ?p ?o } }",b)};H.Store.prototype.startObservingNode=function(){var c,b,d;arguments.length===2?(c=arguments[0],d=arguments[1],this.engine.callbacksBackend.observeNode(c,d,function(){})):arguments.length===3&&(c=arguments[0],b=arguments[1],d=arguments[2],this.engine.callbacksBackend.observeNode(c,b,d,function(){}))};H.Store.prototype.stopObservingNode=function(c){this.engine.callbacksBackend.stopObservingNode(c)};H.Store.prototype.startObservingQuery=function(c,b,d){d!=null?this.engine.callbacksBackend.observeQuery(c,
b,d):this.engine.callbacksBackend.observeQuery(c,b,function(){})};H.Store.prototype.stopObservingQuery=function(c){this.engine.callbacksBackend.stopObservingQuery(c)};H.Store.prototype.subscribe=function(c,b,d,h,i){var g=function(b,c){for(var d=[],g={blanks:{},outCache:{}},h=[],y=0;y<c.length;y++){var E=c[y],D=x.buildRDFResource(E.subject,h,this.engine,g),F=x.buildRDFResource(E.predicate,h,this.engine,g),E=x.buildRDFResource(E.object,h,this.engine,g);D!=null&&F!=null&&E!=null&&(E=new x.Triple(D,F,
E),d.push(E))}i(b,d)};this.functionMap[i]=g;this.engine.callbacksBackend.subscribe(c,b,d,h,g,function(){})};H.Store.prototype.unsubscribe=function(c){this.engine.callbacksBackend.unsubscribe(this.functionMap[c]);delete this.functionMap[c]};H.Store.prototype.setPrefix=function(c,b){this.rdf.setPrefix(c,b)};H.Store.prototype.setDefaultPrefix=function(c){this.rdf.setDefaultPrefix(c)};H.Store.prototype.insert=function(){var c,b,d;if(arguments.length===1)b=arguments[0];else if(arguments.length===2)c=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),
b=arguments[0],d=arguments[1]||function(){};else if(arguments.length===3)b=arguments[0],c=this.rdf.createNamedNode(arguments[1]),d=arguments[2]||function(){};else throw"The triples to insert, an optional graph and callback must be provided";var h="",i=this;b.forEach(function(b){h=h+i._nodeToQuery(b.subject)+i._nodeToQuery(b.predicate)+i._nodeToQuery(b.object)+"."});h=c!=null?"INSERT DATA { GRAPH "+this._nodeToQuery(c)+" { "+h+" } }":"INSERT DATA { "+this._nodeToQuery(c)+" { "+h+" }";this.engine.execute(h,
d)};H.Store.prototype._nodeToQuery=function(c){if(c.interfaceName==="NamedNode"){var b=this.rdf.resolve(c.valueOf());return b!=null?"<"+b+">":"<"+c.valueOf()+">"}else{if(c.interfaceName!=="")if(c.lang!=null)return'"'+c.valueOf()+'"@'+c.lang;else if(c.datatype!=null)return'"'+c.valueOf()+'"^^<'+c.datatype+">";return c.toString()}};H.Store.prototype["delete"]=function(){var c,b,d;if(arguments.length===1)b=arguments[0];else if(arguments.length===2)c=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),
b=arguments[0],d=arguments[1]||function(){};else if(arguments.length===3)b=arguments[0],c=this.rdf.createNamedNode(arguments[1]),d=arguments[2]||function(){};else throw"The triples to delete, an optional graph and callback must be provided";var h="",i=this;b.forEach(function(b){h=h+i._nodeToQuery(b.subject)+i._nodeToQuery(b.predicate)+i._nodeToQuery(b.object)+"."});h=c!=null?"DELETE DATA { GRAPH "+this._nodeToQuery(c)+" { "+h+" } }":"DELETE DATA { "+this._nodeToQuery(c)+" { "+h+" }";this.engine.execute(h,
d)};H.Store.prototype.clear=function(){var c,b;if(arguments.length===0)c=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),b=function(){};else if(arguments.length===1)c=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),b=arguments[0]||function(){};else if(arguments.length===2)c=this.rdf.createNamedNode(arguments[0]),b=arguments[1]||function(){};else throw"The optional graph and a callback must be provided";this.engine.execute("CLEAR GRAPH "+this._nodeToQuery(c),b)};H.Store.prototype.setBatchLoadEvents=
function(c){this.engine.eventsOnBatchLoad=c};H.Store.prototype.registerDefaultNamespace=function(c,b){this.rdf.prefixes.set(c,b);this.engine.registerDefaultNamespace(c,b)};H.Store.prototype.registerDefaultProfileNamespaces=function(){var c=this.rdf.prefixes.values(),b;for(b in c)this.registerDefaultNamespace(b,c[b])};H.Store.prototype.load=function(){var c,b,d,h;if(arguments.length===3)d=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),c=arguments[0],b=arguments[1],h=arguments[2]||function(){};
else if(arguments.length===4)c=arguments[0],b=arguments[1],d=this.rdf.createNamedNode(arguments[2]),h=arguments[3]||function(){};else if(arguments.length===2)throw"The mediaType of the parser, the data a callback and an optional graph must be provided";if(c==="remote")b=this.rdf.createNamedNode(b),this.engine.execute("LOAD <"+b.valueOf()+"> INTO GRAPH <"+d.valueOf()+">",h);else if(b&&typeof b==="string"&&b.indexOf("file://")===0){c=this.engine.rdfLoader.parsers[c];var i=this;this.engine.rdfLoader.loadFromFile(c,
{token:"uri",value:d.valueOf()},b,function(b,c){b?i.engine.batchLoad(c,h):h(b,c)})}else c=this.engine.rdfLoader.parsers[c],i=this,this.engine.rdfLoader.tryToParse(c,{token:"uri",value:d.valueOf()},b,function(b,c){b?i.engine.batchLoad(c,h):h(b,c)})};H.Store.prototype.registerParser=function(c,b){this.engine.rdfLoader.registerParser(c,b)};H.Store.prototype.registeredGraphs=function(c){if(this.isMongodb)this.engine.registeredGraphs(!0,function(b){for(var d=[],h=0;h<b.length;h++){var i=new x.NamedNode(b[h]);
d.push(i)}return c(!0,d)});else{for(var b=this.engine.lexicon.registeredGraphs(!0),d=[],h=0;h<b.length;h++){var i=new x.NamedNode(b[h]);d.push(i)}return c(!0,d)}};H.Store.prototype._nodeToQuery=function(c){if(c.interfaceName==="NamedNode"){var b=this.rdf.resolve(c.valueOf());return b!=null?"<"+b+">":"<"+c.valueOf()+">"}else return c.toString()};H.Store.prototype.getNetworkTransport=function(){return Y};H.Store.prototype.setNetworkTransport=function(c){Y=c};RDFStoreWorker={observingCallbacks:{},workerCallbacksCounter:0,
workerCallbacks:{}};RDFStoreWorker.registerCallback=function(c){var b=""+RDFStoreWorker.workerCallbacksCounter;RDFStoreWorker.workerCallbacksCounter++;RDFStoreWorker.workerCallbacks[b]=c;return b};RDFStoreWorker.handleCreate=function(c,b){typeof Y!="undefined"&&Y!=null&&(Y={load:function(b,c,i){var g=RDFStoreWorker.registerCallback(function(b){i.apply(i,b)});postMessage({fn:"workerRequest:NetworkTransport:load",callback:g,arguments:[b,c]})},loadFromFile:function(){}});args=[c];args.push(function(c){RDFStoreWorker.store=
c;postMessage({callback:b,result:"created",success:!0})});H.create.apply(H,args)};RDFStoreWorker.receive=function(c){var b=c.data||c;if(b.fn==="workerRequestResponse"){var d=b.callback,h=RDFStoreWorker.workerCallbacks[d];h!=null&&(delete RDFStoreWorker.workerCallbacks[d],h(b.results))}else if(b.fn==="create"&&b.args!=null)RDFStoreWorker.handleCreate(b.args,b.callback);else if(b.fn==="setBatchLoadEvents")RDFStoreWorker.store[b.fn].apply(RDFStoreWorker.store,b.args);else if(b.fn==="registerDefaultNamespace")RDFStoreWorker.store[b.fn].apply(RDFStoreWorker.store,
b.args);else if(b.fn==="registerDefaultProfileNamespaces")RDFStoreWorker.store[b.fn].apply(RDFStoreWorker.store,b.args);else if((b.fn==="execute"||b.fn==="executeWithEnvironment"||b.fn==="graph"||b.fn==="node"||b.fn==="clear"||b.fn==="load")&&b.args!=null){b.args.push(function(c,d){b.callback!=null&&postMessage({callback:b.callback,result:d,success:c})});try{RDFStoreWorker.store[b.fn].apply(RDFStoreWorker.store,b.args)}catch(i){console.log("Error executing method through connection"),console.log(i)}}else if((b.fn===
"insert"||b.fn==="delete")&&b.args!=null)try{b.args.push(function(c,d){b.callback!=null&&postMessage({callback:b.callback,result:d,success:c})});h=b.args[0];for(c=0;c<h.triples.length;c++)d=h.triples[c],h.triples[c]=new x.Triple(RDFStoreWorker.adaptJSInterface(d.subject),RDFStoreWorker.adaptJSInterface(d.predicate),RDFStoreWorker.adaptJSInterface(d.object));b.args[1].interfaceName!=null&&(b.args[1]=RDFStoreWorker.adaptJSInterface(b.args[1]));b.args[0]=RDFStoreWorker.store.rdf.createGraph(h.triples);
RDFStoreWorker.store[b.fn].apply(RDFStoreWorker.store,b.args)}catch(g){console.log("Error executing method through connection"),console.log(g)}else b.fn==="rdf/setPrefix"&&b.args!=null?RDFStoreWorker.store.rdf.setPrefix(b.args[0],b.args[1]):b.fn==="rdf/setDefaultPrefix"&&b.args!=null?RDFStoreWorker.store.rdf.setDefaultPrefix(b.args[0]):b.fn==="startObservingQuery"&&b.args!=null?(d=function(c,d){postMessage({callback:b.callback[0],result:d,success:c})},RDFStoreWorker.observingCallbacks[b.args[0]]=
d,b.args.push(d),b.args.push(function(c,d){b.callback&&b.callback[1]!=null&&postMessage({callback:b.callback[1],result:d,success:c})}),RDFStoreWorker.store[b.fn].apply(RDFStoreWorker.store,b.args)):b.fn==="stopObservingQuery"?((d=RDFStoreWorker.observingCallbacks[b.args[0]])&&RDFStoreWorker.store[b.fn].apply(RDFStoreWorker.store,[d]),delete RDFStoreWorker.observingCallbacks[b.args[0]]):b.fn==="startObservingNode"&&b.args!=null?(d=function(c){postMessage({callback:b.callback,result:c})},RDFStoreWorker.observingCallbacks[b.callback]=
d,b.args.push(d),RDFStoreWorker.store[b.fn].apply(RDFStoreWorker.store,b.args)):b.fn==="stopObservingNode"&&b.args!=null?((d=RDFStoreWorker.observingCallbacks[b.args[0]])&&RDFStoreWorker.store[b.fn].apply(RDFStoreWorker.store,[d]),delete RDFStoreWorker.observingCallbacks[b.args[0]]):b.fn==="subscribe"&&b.args!=null?(d=function(c,d){postMessage({callback:b.callback,event:c,result:d})},RDFStoreWorker.observingCallbacks[b.callback]=d,b.args.push(d),RDFStoreWorker.store[b.fn].apply(RDFStoreWorker.store,
b.args)):b.fn==="stopObservingNode"&&b.args!=null?((d=RDFStoreWorker.observingCallbacks[b.args[0]])&&RDFStoreWorker.store[b.fn].apply(RDFStoreWorker.store,[d]),delete RDFStoreWorker.observingCallbacks[b.args[0]]):b.fn==="registeredGraphs"&&b.args!=null&&RDFStoreWorker.store[b.fn].apply(RDFStoreWorker.store,[function(c,d){b.callback!=null&&postMessage({callback:b.callback,result:d,success:c})}])};RDFStoreWorker.adaptJSInterface=function(c){if(c.interfaceName==="BlankNode")return new x.BlankNode(c.bnodeId);
else if(c.interfaceName==="Literal")return new x.Literal(c.nominalValue,c.language,c.datatype);else if(c.interfaceName==="NamedNode")return new x.NamedNode(c.nominalValue)};onmessage=RDFStoreWorker.receive;try{window.rdfstore=H}catch(Dc){}})();
